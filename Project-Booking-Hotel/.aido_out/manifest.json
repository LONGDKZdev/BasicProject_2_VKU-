{
  "generatedAt": "2025-12-04T02:04:40.482Z",
  "node": "v24.11.0",
  "platform": "win32",
  "summary": {
    "totalFiles": 130,
    "jsFiles": 107,
    "sqlFiles": 6
  },
  "tech": {
    "name": "hotelbooking",
    "version": "0.0.0",
    "dependencies": {
      "@emailjs/browser": "^4.4.1",
      "@supabase/supabase-js": "^2.84.0",
      "dotenv": "^17.2.3",
      "html2canvas": "^1.4.1",
      "jspdf": "^3.0.3",
      "qrcode.react": "^4.2.0",
      "react": "^18.2.0",
      "react-dom": "^18.2.0"
    },
    "devDependencies": {
      "@headlessui/react": "^1.7.10",
      "@types/react": "^18.0.27",
      "@types/react-dom": "^18.0.10",
      "@vitejs/plugin-react": "^3.1.0",
      "autoprefixer": "^10.4.13",
      "postcss": "^8.4.21",
      "react-datepicker": "^4.10.0",
      "react-icons": "^4.7.1",
      "react-router-dom": "^6.8.1",
      "spinners-react": "^1.0.7",
      "swiper": "^9.0.4",
      "tailwindcss": "^3.2.6",
      "vite": "^4.1.0",
      "vite-plugin-svgr": "^2.4.0"
    },
    "scripts": {
      "dev": "vite",
      "build": "vite build",
      "preview": "vite preview",
      "seed:users": "node seed-users.js"
    },
    "env": {
      "VITE_SUPABASE_URL": "https://sxteddkozzqniebfstag.supabase.co",
      "VITE_SUPABASE_ANON_KEY": "eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6InN4dGVkZGtvenpxbmllYmZzdGFnIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NjE4NjQwMDgsImV4cCI6MjA3NzQ0MDAwOH0.FYblHTFrNTthvpcdGy6DFefjnApCe4qwcKZaHdkTiac",
      "SUPABASE_SERVICE_ROLE_KEY": "eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6InN4dGVkZGtvenpxbmllYmZzdGFnIiwicm9sZSI6InNlcnZpY2Vfcm9sZSIsImlhdCI6MTc2MTg2NDAwOCwiZXhwIjoyMDc3NDQwMDA4fQ.EAdJoVk7p5Ttt_bMwtjHbaGTHWMfONx4bjwUkh2CZzw",
      "VITE_EMAILJS_SERVICE_ID": "your-service-id",
      "VITE_EMAILJS_TEMPLATE_ID": "your-template-id",
      "VITE_EMAILJS_PUBLIC_KEY": "your-public-key"
    },
    "usesSupabase": true
  },
  "files": [
    {
      "path": ".env",
      "ext": "",
      "size": 889,
      "mtime": 1764808641331.8296,
      "lines": 13,
      "snippet": "# Supabase Configuration\n# For Vite, use VITE_ prefix (Vite will expose these as import.meta.env)\nVITE_SUPABASE_URL=https://sxteddkozzqniebfstag.supabase.co\nVITE_SUPABASE_ANON_KEY=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6InN4dGVkZGtvenpxbmllYmZzdGFnIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NjE4NjQwMDgsImV4cCI6MjA3NzQ0MDAwOH0.FYblHTFrNTthvpcdGy6DFefjnApCe4qwcKZaHdkTiac\n\n# Supabase Service Role Key (for server-side operations like seeding users)\nSUPABASE_SERVICE_ROLE_KEY=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6InN4dGVkZGtvenpxbmllYmZzdGFnIiwicm9sZSI6InNlcnZpY2Vfcm9sZSIsImlhdCI6MTc2MTg2NDAwOCwiZXhwIjoyMDc3NDQwMDA4fQ.EAdJoVk7p5Ttt_bMwtjHbaGTHWMfONx4bjwUkh2CZzw\n\n# Email Service (optional, for booking confirmations)\nVITE_EMAILJS_SERVICE_ID=your-service-id\nVITE_EMAILJS_TEMPLATE_ID=your-template-id\nVITE_EMAILJS_PUBLIC_KEY=your-public-key\n"
    },
    {
      "path": "auto-checkpoint.js",
      "ext": ".js",
      "size": 3912,
      "mtime": 1764727696213.2783,
      "lines": 124,
      "snippet": "// ==================================================================\n// auto-checkpoint.js\n// Auto-update checkpoint after each git commit\n// Ch·∫°y b·∫±ng: node auto-checkpoint.js\n// ==================================================================\n\nimport fs from \"fs\";\nimport path from \"path\";\nimport { fileURLToPath } from \"url\";\nimport { execSync } from \"child_process\";\n\nconst __filename = fileURLToPath(import.meta.url);\nconst __dirname = path.dirname(__filename);\nconst ROOT = process.cwd();\nconst OUT_DIR = path.join(ROOT, \".aido_out\");\n\nfunction ensureOut() {\n  if (!fs.existsSync(OUT_DIR)) fs.mkdirSync(OUT_DIR, { recursive: true });\n}\n\nfunction getGitInfo() {\n  try {\n    const branch = execSync(\"git rev-parse --abbrev-ref HEAD\", { encoding: \"utf8\" }).trim();\n    const commits = parseInt(execSync(\"git rev-list --count HEAD\", { encoding: \"utf8\" }).trim());\n    const lastMsg = execSync(\"git log -1 --pretty=%B\", { encoding: \"utf8\" }).trim();\n    const lastHash = execSync(\"git log -1 --pretty=%h\", { encoding: \"utf8\" }).trim();\n    const lastDate = execSync(\"git log -1 --pretty=%ai\", { encoding: \"utf8\" }).trim();\n    const modified = execSync(\"git status --short\", { encoding: \"utf8\" }).split(\"\\n\").filter(l => l.trim()).length;\n\n    return { branch, commits, lastMsg, lastHash, lastDate, modified };\n  } catch (e) {\n    console.error(\"‚ùå Git not available:\", e.message);\n    return null;\n  }\n}\n\nfunction updateCheckpoint() {\n  ensureOut();\n  const gitInfo = getGitInfo();\n  "
    },
    {
      "path": "generate-checkpoint.js",
      "ext": ".js",
      "size": 6116,
      "mtime": 1764724813698.1147,
      "lines": 198,
      "snippet": "// ==================================================================\n// generate-checkpoint.js\n// Auto-generate development checkpoint from git + project state\n// ==================================================================\n\nimport fs from \"fs\";\nimport path from \"path\";\nimport { fileURLToPath } from \"url\";\nimport { execSync } from \"child_process\";\n\nconst __filename = fileURLToPath(import.meta.url);\nconst __dirname = path.dirname(__filename);\nconst ROOT = process.cwd();\nconst OUT_DIR = path.join(ROOT, \".aido_out\");\n\nfunction ensureOut() {\n  if (!fs.existsSync(OUT_DIR)) fs.mkdirSync(OUT_DIR, { recursive: true });\n}\n\nfunction getGitStatus() {\n  try {\n    const branch = execSync(\"git rev-parse --abbrev-ref HEAD\", { encoding: \"utf8\" }).trim();\n    const totalCommits = parseInt(\n      execSync(\"git rev-list --count HEAD\", { encoding: \"utf8\" }).trim()\n    );\n    const lastCommitMsg = execSync(\"git log -1 --pretty=%B\", { encoding: \"utf8\" }).trim();\n    const lastCommitHash = execSync(\"git log -1 --pretty=%h\", { encoding: \"utf8\" }).trim();\n    const lastCommitDate = execSync(\"git log -1 --pretty=%ai\", { encoding: \"utf8\" }).trim();\n    \n    const statusOutput = execSync(\"git status --short\", { encoding: \"utf8\" });\n    const modifiedCount = statusOutput.split(\"\\n\").filter(line => line.trim()).length;\n\n    return {\n      branch,\n      totalCommits,\n      lastCommitMsg,\n      lastCommitHash,\n      lastCommitDate,\n      modifiedCount,\n      statusShort: statusOutput.split(\"\\n\").slice(0, 20).join(\"\\n\"), // First 20 lines"
    },
    {
      "path": "generate-manifest-checklist.js",
      "ext": ".js",
      "size": 9637,
      "mtime": 1764724812292.348,
      "lines": 195,
      "snippet": "// ==================================================================\n// generate-manifest-checklist.js\n// Auto-generate project manifest with completion tracking\n// ==================================================================\n\nimport fs from \"fs\";\nimport path from \"path\";\nimport { fileURLToPath } from \"url\";\n\nconst __filename = fileURLToPath(import.meta.url);\nconst __dirname = path.dirname(__filename);\nconst ROOT = process.cwd();\nconst OUT_DIR = path.join(ROOT, \".aido_out\");\n\nfunction ensureOut() {\n  if (!fs.existsSync(OUT_DIR)) fs.mkdirSync(OUT_DIR, { recursive: true });\n}\n\nfunction checkFileExists(...filePaths) {\n  return filePaths.map(f => ({\n    path: f,\n    exists: fs.existsSync(path.join(ROOT, f))\n  }));\n}\n\nfunction generateManifest() {\n  ensureOut();\n\n  const manifest = {\n    generatedAt: new Date().toISOString(),\n    projectName: \"Hotel Booking System\",\n    \n    sections: {\n      infrastructure: {\n        title: \"Core Infrastructure\",\n        completion: 100,\n        items: [\n          { name: \"Supabase Connection\", status: \"‚úÖ\", file: \"src/db/supabaseClient.js\" },\n          { name: \"Auth Context\", status: \"‚úÖ\", file: \"src/context/AuthContext.jsx\" },\n          { name: \"Booking Context\", status: \"‚úÖ\", file: \"src/context/BookingContext.jsx\" },"
    },
    {
      "path": "gop_code.js",
      "ext": ".js",
      "size": 3527,
      "mtime": 1764738249401.9265,
      "lines": 100,
      "snippet": "//File gop_code.js\nimport fs from 'fs';\nimport path from 'path';\nimport { fileURLToPath } from 'url';\n\n// --- C·∫§U H√åNH ƒê·ªÇ CH·∫†Y TR√äN NODEJS M·ªöI (ES MODULE) ---\nconst __filename = fileURLToPath(import.meta.url);\nconst __dirname = path.dirname(__filename);\n\n// --- C·∫§U H√åNH FILE ---\nconst OUTPUT_FILE = 'TOAN_BO_DU_AN.txt';\n\n// C√°c th∆∞ m·ª•c B·ªé QUA (ƒê√£ c·∫≠p nh·∫≠t theo y√™u c·∫ßu c·ªßa b·∫°n)\nconst IGNORE_DIRS = [\n    'node_modules', '.git', '.vscode', 'dist', 'build', 'public', \n    'Project_Demo', 'Query', // ƒê√£ th√™m Query\n    '.md' // L∆∞u √Ω: C√°i n√†y ch·ªâ b·ªè qua n·∫øu c√≥ TH∆Ø M·ª§C t√™n l√† .md\n];\n\n// C√°c file B·ªé QUA c·ª• th·ªÉ\nconst IGNORE_FILES = [\n    'package-lock.json', 'yarn.lock', OUTPUT_FILE, \n    '.DS_Store', 'STRUCTURE.md', 'USAGE_GUIDE.md', \n    'gop_code.js', 'README.md'\n];\n\n// C√°c ƒëu√¥i file s·∫Ω ƒê·ªåC (Code + Config + SQL)\n// L∆∞u √Ω: File .md kh√¥ng c√≥ trong n√†y n√™n m·∫∑c ƒë·ªãnh ƒë√£ b·ªã b·ªè qua r·ªìi\nconst ALLOWED_EXTS = [\n    '.js', '.jsx', '.ts', '.tsx', // React code\n    '.css', '.scss',              // Style\n    '.json',                      // Config\n    '.sql',                       // SQL\n    '.env', '.env.local', '.env.example' // M√¥i tr∆∞·ªùng\n];\n\nfunction getAllFiles(dirPath, arrayOfFiles) {\n    const files = fs.readdirSync(dirPath);\n\n    arrayOfFiles = arrayOfFiles || [];"
    },
    {
      "path": "gop_code_origin.js",
      "ext": ".js",
      "size": 3339,
      "mtime": 1764738249402.927,
      "lines": 92,
      "snippet": "import fs from 'fs';\nimport path from 'path';\nimport { fileURLToPath } from 'url';\n\n// --- C·∫§U H√åNH ---\nconst __filename = fileURLToPath(import.meta.url);\nconst __dirname = path.dirname(__filename);\n\nconst OUTPUT_FILE = 'GIAO_DIEN_GOC_DEMO.txt'; // T√™n file ƒë·∫ßu ra m·ªõi\nconst TARGET_FOLDER = 'Project_Demo';         // Ch·ªâ qu√©t folder n√†y\n\n// C√°c file/folder c·∫ßn lo·∫°i b·ªè N·∫æU N√ì N·∫∞M TRONG Project_Demo\nconst IGNORE_DIRS = ['node_modules', '.git', '.vscode', 'dist', 'build'];\nconst IGNORE_FILES = ['.DS_Store', 'package-lock.json', 'yarn.lock'];\n\n// C√°c ƒëu√¥i file giao di·ªán c·∫ßn l·∫•y\nconst ALLOWED_EXTS = [\n    '.html', '.css', '.scss', \n    '.js', '.jsx', '.ts', '.tsx', // L·∫•y c·∫£ JS trong demo v√¨ c√≥ th·ªÉ ch·ª©a logic giao di·ªán c≈©\n    '.json' // ƒê√¥i khi c·∫•u h√¨nh giao di·ªán n·∫±m ·ªü json\n];\n\nfunction getAllFiles(dirPath, arrayOfFiles) {\n    // Ki·ªÉm tra xem th∆∞ m·ª•c c√≥ t·ªìn t·∫°i kh√¥ng\n    if (!fs.existsSync(dirPath)) {\n        return arrayOfFiles || [];\n    }\n\n    const files = fs.readdirSync(dirPath);\n    arrayOfFiles = arrayOfFiles || [];\n\n    files.forEach(function(file) {\n        const fullPath = path.join(dirPath, file);\n        \n        // 1. N·∫øu l√† th∆∞ m·ª•c\n        if (fs.statSync(fullPath).isDirectory()) {\n            if (!IGNORE_DIRS.includes(file)) {\n                arrayOfFiles = getAllFiles(fullPath, arrayOfFiles);\n            }\n        } "
    },
    {
      "path": "gop_code_V2.js",
      "ext": ".js",
      "size": 5811,
      "mtime": 1764738249401.9265,
      "lines": 196,
      "snippet": "// ==================================================================\n// GOP_CODE V3 ‚Äî Ultimate Project Exporter (RAW code + AI Project State)\n// Made for long-term reuse across Copilot/ChatGPT accounts\n// Author: ChatGPT\n// ==================================================================\n\nimport fs from \"fs\";\nimport path from \"path\";\nimport { fileURLToPath } from \"url\";\n\n// --- Resolve correct folder (ESM compatibility) ---\nconst __filename = fileURLToPath(import.meta.url);\nconst __dirname = path.dirname(__filename);\n\n// --- OUTPUT FILES ---\nconst RAW_OUTPUT = \"TOAN_BO_DU_AN.txt\";\nconst STATE_OUTPUT = \"AI_PROJECT_STATE.txt\";\n\n// --- FOLDERS TO IGNORE ---\nconst IGNORE_DIRS = [\n  \"node_modules\", \".git\", \".vscode\", \"dist\", \"build\", \"public\",\n  \"Project_Demo\", \"Query\" // old\n];\n\n// --- FILES TO IGNORE ---\nconst IGNORE_FILES = [\n  RAW_OUTPUT,\n  STATE_OUTPUT,\n  \"package-lock.json\",\n  \"yarn.lock\",\n  \".DS_Store\",\n  \"gop_code.js\",\n  \"README.md\"\n];\n\n// --- EXTENSIONS TO INCLUDE ---\nconst ALLOWED_EXTS = [\n  \".js\", \".jsx\", \".ts\", \".tsx\",\n  \".css\", \".scss\",\n  \".json\","
    },
    {
      "path": "gop_code_V5.js",
      "ext": ".js",
      "size": 15474,
      "mtime": 1764723758083.0107,
      "lines": 441,
      "snippet": "// ==================================================================\n// gop_code_V5.js\n// GOP_CODE V5 ‚Äî Full Tech Stack & Supabase Deep Scan + AIDO state\n// Outputs:\n//   - TOAN_BO_DU_AN.txt         (full raw export)\n//   - .aido_out/manifest.json   (compact manifest)\n//   - .aido_out/snippets/*      (snippets to include in payload)\n//   - AI_PROJECT_STATE.txt      (full state with TECH STACK + STRICT RULES)\n// Author: ChatGPT (for user)\n// ==================================================================\n\nimport fs from \"fs\";\nimport path from \"path\";\nimport { fileURLToPath } from \"url\";\nimport os from \"os\";\n\nconst __filename = fileURLToPath(import.meta.url);\nconst __dirname = path.dirname(__filename);\nconst ROOT = process.cwd();\n\nconst OUT_DIR = path.join(ROOT, \".aido_out\");\nconst SNIPPET_DIR = path.join(OUT_DIR, \"snippets\");\nconst MANIFEST_FILE = path.join(OUT_DIR, \"manifest.json\");\nconst RAW_OUTPUT = path.join(OUT_DIR, \"TOAN_BO_DU_AN.txt\"); // put raw inside .aido_out to avoid polluting root\nconst STATE_OUTPUT = path.join(ROOT, \"AI_PROJECT_STATE.txt\"); // keep state at project root for convenience\n\n// Config\nconst IGNORE_DIRS = new Set([\n  \"node_modules\", \".git\", \".vscode\", \"dist\", \"build\", \"public\",\n  \".aido_out\", \"Project_Demo\", \"Query\" // \"Query\" old\n]);\nconst IGNORE_FILES = new Set([\n  \".DS_Store\", \"package-lock.json\", \"yarn.lock\", \"README.md\"\n]);\nconst ALLOWED_EXTS = new Set([\n  \".js\", \".jsx\", \".ts\", \".tsx\",\n  \".css\", \".scss\",\n  \".json\",\n  \".sql\",\n  \".env\","
    },
    {
      "path": "index.html",
      "ext": ".html",
      "size": 365,
      "mtime": 1764738249402.927,
      "lines": 21,
      "snippet": "<!DOCTYPE html>\n<html lang=\"en\">\n\n<head>\n  <meta charset=\"UTF-8\" />\n  <meta name=\"viewport\" content=\"width=device-width, initial-scale=1.0\" />\n\n  <link rel=\"icon\" type=\"image/png\" href=\"/logo.png\" />\n\n  <title>Hotel Booking</title>\n</head>\n\n<body>\n\n  <div id=\"root\"></div>\n\n  <script type=\"module\" src=\"/src/main.jsx\"></script>\n\n</body>\n\n</html>"
    },
    {
      "path": "package.json",
      "ext": ".json",
      "size": 987,
      "mtime": 1764808552564.7285,
      "lines": 39,
      "snippet": "{\n  \"name\": \"hotelbooking\",\n  \"private\": true,\n  \"version\": \"0.0.0\",\n  \"type\": \"module\",\n  \"scripts\": {\n    \"dev\": \"vite\",\n    \"build\": \"vite build\",\n    \"preview\": \"vite preview\",\n    \"seed:users\": \"node seed-users.js\"\n  },\n  \"dependencies\": {\n    \"@emailjs/browser\": \"^4.4.1\",\n    \"@supabase/supabase-js\": \"^2.84.0\",\n    \"dotenv\": \"^17.2.3\",\n    \"html2canvas\": \"^1.4.1\",\n    \"jspdf\": \"^3.0.3\",\n    \"qrcode.react\": \"^4.2.0\",\n    \"react\": \"^18.2.0\",\n    \"react-dom\": \"^18.2.0\"\n  },\n  \"devDependencies\": {\n    \"@headlessui/react\": \"^1.7.10\",\n    \"@types/react\": \"^18.0.27\",\n    \"@types/react-dom\": \"^18.0.10\",\n    \"@vitejs/plugin-react\": \"^3.1.0\",\n    \"autoprefixer\": \"^10.4.13\",\n    \"postcss\": \"^8.4.21\",\n    \"react-datepicker\": \"^4.10.0\",\n    \"react-icons\": \"^4.7.1\",\n    \"react-router-dom\": \"^6.8.1\",\n    \"spinners-react\": \"^1.0.7\",\n    \"swiper\": \"^9.0.4\",\n    \"tailwindcss\": \"^3.2.6\",\n    \"vite\": \"^4.1.0\",\n    \"vite-plugin-svgr\": \"^2.4.0\"\n  }\n}\n"
    },
    {
      "path": "run-all-generators.js",
      "ext": ".js",
      "size": 2519,
      "mtime": 1764725167162.9563,
      "lines": 80,
      "snippet": "// ==================================================================\n// run-all-generators.js\n// Master script to run all checkpoint generators\n// ==================================================================\n\nimport { execSync } from \"child_process\";\nimport fs from \"fs\";\nimport path from \"path\";\nimport { fileURLToPath } from \"url\";\n\nconst __filename = fileURLToPath(import.meta.url);\nconst __dirname = path.dirname(__filename);\nconst ROOT = process.cwd();\n\nconsole.log(\"üöÄ Starting Checkpoint Generation...\\n\");\n\nconst scripts = [\n  { file: \"generate-checkpoint.js\", name: \"Git Checkpoint Generator\" },\n  { file: \"generate-manifest-checklist.js\", name: \"Project Manifest Generator\" },\n  { file: \"gop_code_V5.js\", name: \"Full Project Export + State\" },\n];\n\nlet successCount = 0;\nlet failCount = 0;\n\nfor (const script of scripts) {\n  try {\n    console.log(`\\nüì¶ Running: ${script.name}...`);\n    console.log(`   File: ${script.file}`);\n    \n    execSync(`node ${script.file}`, {\n      cwd: ROOT,\n      stdio: \"inherit\",\n      encoding: \"utf8\"\n    });\n    \n    console.log(`   ‚úÖ Success!\\n`);\n    successCount++;\n  } catch (error) {\n    console.log(`   ‚ùå Failed!`);"
    },
    {
      "path": "seed-users.js",
      "ext": ".js",
      "size": 4085,
      "mtime": 1764808733391.6838,
      "lines": 136,
      "snippet": "/**\n * Seed test users v√†o Supabase Auth s·ª≠ d·ª•ng Admin API\n * Ch·∫°y: node seed-users.js\n */\n\nimport { createClient } from '@supabase/supabase-js';\nimport dotenv from 'dotenv';\n\n// Load environment variables from .env\ndotenv.config();\n\nconst SUPABASE_URL = process.env.VITE_SUPABASE_URL;\nconst SUPABASE_SERVICE_ROLE_KEY = process.env.SUPABASE_SERVICE_ROLE_KEY;\n\nif (!SUPABASE_URL || !SUPABASE_SERVICE_ROLE_KEY) {\n  console.error('‚ùå Missing environment variables in .env!');\n  console.error('Please ensure .env has:');\n  console.error('  VITE_SUPABASE_URL=...');\n  console.error('  SUPABASE_SERVICE_ROLE_KEY=...');\n  process.exit(1);\n}\n\n// T·∫°o Supabase admin client\nconst supabase = createClient(SUPABASE_URL, SUPABASE_SERVICE_ROLE_KEY);\n\nconst testUsers = [\n  {\n    email: 'admin@hotel.com',\n    password: 'admin123',\n    full_name: 'Admin User',\n    is_admin: true,\n  },\n  {\n    email: 'khach1@example.com',\n    password: 'guest123',\n    full_name: 'Nguyen Van Khach',\n    is_admin: false,\n  },\n  {\n    email: 'khachvip@example.com',"
    },
    {
      "path": "trich_xuat_v2.js",
      "ext": ".js",
      "size": 3643,
      "mtime": 1764738249547.031,
      "lines": 103,
      "snippet": "import fs from 'fs';\nimport path from 'path';\nimport { fileURLToPath } from 'url';\n\n// --- C·∫§U H√åNH ---\nconst __filename = fileURLToPath(import.meta.url);\nconst __dirname = path.dirname(__filename);\n\n// T√™n file k·∫øt qu·∫£\nconst OUTPUT_FILE = 'CODE_NGUON_V2.txt';\n\n// ƒê∆Ø·ªúNG D·∫™N M·ª§C TI√äU: ƒêi v√†o folder V2 n·∫±m trong Project_Demo\n// D·ª±a tr√™n ·∫£nh b·∫°n g·ª≠i: Project_Demo > Project-Booking-Hotel\nconst TARGET_PATH = path.join(__dirname, 'Project_Demo', 'Project-Booking-Hotel');\n\n// C√°c th∆∞ m·ª•c c·∫ßn b·ªè qua\nconst IGNORE_DIRS = ['node_modules', '.git', '.vscode', 'dist', 'build', 'public'];\n\n// C√°c file c·∫ßn b·ªè qua\nconst IGNORE_FILES = [\n    'package-lock.json', 'yarn.lock', '.DS_Store', \n    'README.md', 'OUTPUT_FILE'\n];\n\n// C√°c ƒëu√¥i file s·∫Ω l·∫•y (Code quan tr·ªçng)\nconst ALLOWED_EXTS = [\n    '.js', '.jsx', '.ts', '.tsx', // Logic React\n    '.css', '.scss',              // Giao di·ªán\n    '.json',                      // C·∫•u h√¨nh\n    '.sql'                        // Database (n·∫øu c√≥)\n];\n\nfunction getAllFiles(dirPath, arrayOfFiles) {\n    if (!fs.existsSync(dirPath)) {\n        console.log(`‚ö†Ô∏è Kh√¥ng t√¨m th·∫•y ƒë∆∞·ªùng d·∫´n: ${dirPath}`);\n        return arrayOfFiles || [];\n    }\n\n    const files = fs.readdirSync(dirPath);\n    arrayOfFiles = arrayOfFiles || [];"
    },
    {
      "path": "vite.config.js",
      "ext": ".js",
      "size": 216,
      "mtime": 1764738249547.031,
      "lines": 9,
      "snippet": "import { defineConfig } from 'vite'\nimport react from '@vitejs/plugin-react'\nimport svgr from 'vite-plugin-svgr'\n\n// https://vitejs.dev/config/\nexport default defineConfig({\n  plugins: [react(),  svgr()],\n})\n"
    },
    {
      "path": "src\\App.jsx",
      "ext": ".jsx",
      "size": 2770,
      "mtime": 1764738249405.9333,
      "lines": 91,
      "snippet": "import { BrowserRouter, Route, Routes, useLocation } from \"react-router-dom\";\nimport { Footer, Header, PageNotFound, ProtectedRoute } from \"./components\";\nimport ChatBox from \"./components/chatBox\";\nimport {\n  Home,\n  RoomDetails,\n  Admin,\n  Login,\n  Register,\n  ForgotPassword,\n  ResetPassword,\n  RoomsPage,\n  Contact,\n  UserDashboard,\n  RestaurantPage,\n  SpaPage,\n  CleanupPage,\n} from \"./pages\";\nimport \"./style/chatbox.css\";\n\nconst AppContent = () => {\n  const location = useLocation();\n  const isAdminPage = location.pathname.startsWith(\"/admin\");\n  const isLoginPage =\n    location.pathname === \"/login\" || location.pathname === \"/admin/login\";\n  const isRegisterPage = location.pathname === \"/register\";\n  const isForgotPasswordPage = location.pathname === \"/forgot-password\";\n  const isResetPasswordPage = location.pathname === \"/reset-password\";\n  const isUserDashboardPage = location.pathname === \"/account\";\n  const shouldHideHeaderFooter =\n    isAdminPage ||\n    isLoginPage ||\n    isRegisterPage ||\n    isForgotPasswordPage ||\n    isResetPasswordPage ||\n    isUserDashboardPage;\n\n  return (\n    <>\n      {!shouldHideHeaderFooter && <Header />}"
    },
    {
      "path": "src\\main.jsx",
      "ext": ".jsx",
      "size": 718,
      "mtime": 1764738249535.031,
      "lines": 25,
      "snippet": "import { RoomContext } from './context/RoomContext';\nimport { AuthContext } from './context/AuthContext';\nimport { LanguageProvider } from './context/LanguageContext';\nimport { BookingProvider } from './context/BookingContext';\nimport ReactDOM from 'react-dom/client'\nimport React from 'react'\nimport App from './App'\nimport './style/index.css';\n\n\nReactDOM\n  .createRoot(document.getElementById('root'))\n  .render(\n    <LanguageProvider>\n      <AuthContext>\n        <RoomContext>\n          <BookingProvider>\n            <React.StrictMode>\n              <App />\n            </React.StrictMode>\n          </BookingProvider>\n        </RoomContext>\n      </AuthContext>\n    </LanguageProvider>,\n  )"
    },
    {
      "path": "src\\utils\\aiAssistant.js",
      "ext": ".js",
      "size": 7190,
      "mtime": 1764738249544.0305,
      "lines": 222,
      "snippet": "/**\n * AI Assistant utilities for hotel booking chatbot\n */\n\n// Intelligent room recommendations based on user preferences\nexport const recommendRooms = (rooms, preferences) => {\n  const { adults, kids, budget, amenities = [] } = preferences;\n\n  const filtered = rooms.filter((room) => {\n    const totalGuests = adults + kids;\n    if (room.maxPerson < totalGuests) return false;\n    if (budget && room.price > budget) return false;\n    if (amenities.length > 0) {\n      const roomAmenities = room.amenities?.map((a) => a.toLowerCase()) || [];\n      return amenities.some((a) => roomAmenities.includes(a.toLowerCase()));\n    }\n    return true;\n  });\n\n  return filtered\n    .sort((a, b) => {\n      // Prioritize rooms that fit perfectly\n      const aScore = a.maxPerson - (adults + kids);\n      const bScore = b.maxPerson - (adults + kids);\n      return aScore - bScore;\n    })\n    .slice(0, 5);\n};\n\n// Calculate stay duration and price\nexport const calculateStayInfo = (checkIn, checkOut) => {\n  const startDate = new Date(checkIn);\n  const endDate = new Date(checkOut);\n  const nights = Math.max(\n    1,\n    Math.ceil((endDate - startDate) / (1000 * 60 * 60 * 24))\n  );\n  return { nights, startDate, endDate };\n};\n"
    },
    {
      "path": "src\\utils\\chatboxConfig.js",
      "ext": ".js",
      "size": 9310,
      "mtime": 1764738249544.0305,
      "lines": 292,
      "snippet": "/**\n * ChatBox Configuration & Customization Examples\n * B·∫°n c√≥ th·ªÉ copy nh·ªØng v√≠ d·ª• n√†y v√†o ChatBox.jsx ƒë·ªÉ t√πy ch·ªânh\n */\n\n// ============================================\n// 1. TH√äM TH√äM QUICK ACTIONS\n// ============================================\n\nconst EXTENDED_QUICK_ACTIONS = [\n  { label: \"üîç T√¨m ph√≤ng\", type: \"filter\", icon: \"üîç\" },\n  { label: \"üìã ƒê·∫∑t ngay\", type: \"book\", icon: \"üìã\" },\n  { label: \"‚ú® Ti·ªán nghi\", type: \"amenities\", icon: \"‚ú®\" },\n  { label: \"üéâ Khuy·∫øn m·∫°i\", type: \"promo\", icon: \"üéâ\" },\n  { label: \"üìû Li√™n h·ªá\", type: \"contact\", icon: \"üìû\" },\n  // Th√™m action m·ªõi\n  { label: \"üí≥ Thanh to√°n\", type: \"payment\", icon: \"üí≥\" },\n  { label: \"‚≠ê Reviews\", type: \"reviews\", icon: \"‚≠ê\" },\n  { label: \"üéÅ Loyalty\", type: \"loyalty\", icon: \"üéÅ\" },\n];\n\n// ============================================\n// 2. CUSTOM AI RESPONSES\n// ============================================\n\nconst CUSTOM_AI_RESPONSES = {\n  greetings: [\n    \"Xin ch√†o! üëã T√¥i l√† tr·ª£ l√Ω c·ªßa kh√°ch s·∫°n 5 sao. T√¥i c√≥ th·ªÉ gi√∫p g√¨ cho b·∫°n?\",\n    \"Ch√†o m·ª´ng ƒë·∫øn kh√°ch s·∫°n c·ªßa ch√∫ng t√¥i! üè® B·∫°n c√≥ nhu c·∫ßu g√¨ h√¥m nay?\",\n    \"Hi! üòä T√¥i ·ªü ƒë√¢y ƒë·ªÉ l√†m cho ng√†y c·ªßa b·∫°n tr·ªü n√™n tuy·ªát v·ªùi!\",\n  ],\n  payment: [\n    \"üí≥ Ch√∫ng t√¥i ch·∫•p nh·∫≠n: Th·∫ª Visa, Mastercard, Apple Pay, Google Pay\",\n    \"üí∞ Thanh to√°n an to√†n 100% v·ªõi SSL encryption\",\n    \"‚úÖ B·∫°n c√≥ th·ªÉ thanh to√°n online ho·∫∑c t·∫°i qu·∫ßy\",\n  ],\n  loyalty: [\n    \"‚≠ê Ch∆∞∆°ng tr√¨nh VIP: M·ªói ƒë·∫∑t ph√≤ng = 10 ƒëi·ªÉm\\n100 ƒëi·ªÉm = Discount 20%\",\n    \"üéÅ Th√†nh vi√™n ƒë∆∞·ª£c:\\n‚Ä¢ N√¢ng c·∫•p ph√≤ng mi·ªÖn ph√≠\\n‚Ä¢ Breakfast voucher\\n‚Ä¢ Priority support\",\n  ],"
    },
    {
      "path": "src\\utils\\chatboxTesting.js",
      "ext": ".js",
      "size": 15628,
      "mtime": 1764738249545.0305,
      "lines": 541,
      "snippet": "/**\n * ChatBox Testing & Example Scenarios\n * S·ª≠ d·ª•ng nh·ªØng v√≠ d·ª• n√†y ƒë·ªÉ test c√°c t√≠nh nƒÉng c·ªßa chatbox\n */\n\n// ============================================\n// 1. TEST SCENARIOS\n// ============================================\n\nexport const TEST_SCENARIOS = {\n  // Scenario 1: Kh√°ch m·ªõi t√¨m ph√≤ng\n  scenario1_findRoom: {\n    name: \"Find Rooms - New User\",\n    steps: [\n      { action: \"click\", target: \"quick-action\", params: { type: \"filter\" } },\n      { action: \"input\", target: \"checkIn\", value: \"2024-12-25\" },\n      { action: \"input\", target: \"checkOut\", value: \"2024-12-27\" },\n      { action: \"input\", target: \"adults\", value: 2 },\n      { action: \"input\", target: \"kids\", value: 0 },\n      { action: \"click\", target: \"apply-filter\" },\n    ],\n    expectedResult: \"Should show filtered rooms and navigate to rooms page\",\n  },\n\n  // Scenario 2: Kh√°ch ƒë·∫∑t ph√≤ng\n  scenario2_booking: {\n    name: \"Book Room - Direct\",\n    steps: [\n      { action: \"click\", target: \"quick-action\", params: { type: \"book\" } },\n      { action: \"input\", target: \"roomName\", value: \"Deluxe\" },\n      { action: \"waitForSuggestions\", timeout: 1000 },\n      { action: \"click\", target: \"room-suggestion\", params: { index: 0 } },\n      { action: \"input\", target: \"name\", value: \"Nguy·ªÖn VƒÉn A\" },\n      { action: \"input\", target: \"email\", value: \"test@example.com\" },\n      { action: \"input\", target: \"phone\", value: \"+84123456789\" },\n      { action: \"click\", target: \"create-booking\" },\n    ],\n    expectedResult: \"Booking confirmation with code\",\n  },\n"
    },
    {
      "path": "src\\utils\\chatboxValidation.js",
      "ext": ".js",
      "size": 8111,
      "mtime": 1764738249545.0305,
      "lines": 328,
      "snippet": "/**\n * Validation & Error Handling for ChatBox\n */\n\nexport const BookingErrors = {\n  INVALID_NAME: {\n    code: \"INVALID_NAME\",\n    message: \"‚ùå Vui l√≤ng nh·∫≠p t√™n ƒë·∫ßy ƒë·ªß\",\n    vietnamese: \"T√™n kh√¥ng ƒë∆∞·ª£c ƒë·ªÉ tr·ªëng\",\n  },\n  INVALID_EMAIL: {\n    code: \"INVALID_EMAIL\",\n    message: \"‚ùå Email kh√¥ng h·ª£p l·ªá\",\n    vietnamese: \"Email ph·∫£i ch·ª©a @ v√† c√≥ ƒë·ªãnh d·∫°ng ƒë√∫ng\",\n  },\n  INVALID_DATES: {\n    code: \"INVALID_DATES\",\n    message: \"‚ùå Ng√†y tr·∫£ ph√≤ng ph·∫£i sau ng√†y nh·∫≠n ph√≤ng\",\n    vietnamese: \"Vui l√≤ng ki·ªÉm tra l·∫°i ng√†y\",\n  },\n  NO_ROOM: {\n    code: \"NO_ROOM\",\n    message: \"‚ùå Kh√¥ng t√¨m th·∫•y ph√≤ng tr√πng kh·ªõp\",\n    vietnamese: \"Th·ª≠ t·ª´ kh√≥a kh√°c ho·∫∑c xem t·∫•t c·∫£ ph√≤ng\",\n  },\n  ROOM_FULL: {\n    code: \"ROOM_FULL\",\n    message: \"‚ùå Ph√≤ng n√†y ƒë√£ ƒë·∫ßy cho ng√†y ƒë∆∞·ª£c ch·ªçn\",\n    vietnamese: \"Vui l√≤ng ch·ªçn ng√†y kh√°c ho·∫∑c ph√≤ng kh√°c\",\n  },\n  DATABASE_ERROR: {\n    code: \"DATABASE_ERROR\",\n    message: \"‚ùå L·ªói khi t·∫°o ƒë·∫∑t ph√≤ng\",\n    vietnamese: \"Vui l√≤ng th·ª≠ l·∫°i sau\",\n  },\n};\n\n/**\n * Validate booking form data\n */"
    },
    {
      "path": "src\\utils\\clearTestData.js",
      "ext": ".js",
      "size": 770,
      "mtime": 1764738249545.0305,
      "lines": 37,
      "snippet": "/**\n * Clear all test data from localStorage\n * Run this once to clean up the system\n */\nexport const clearAllTestData = () => {\n  const keysToDelete = [\n    \"hotel_bookings\",\n    \"hotel_room_reviews\",\n    \"users\",\n    \"hotels\",\n    \"auth_token\",\n    \"user_session\",\n  ];\n\n  keysToDelete.forEach((key) => {\n    localStorage.removeItem(key);\n  });\n\n  console.log(\"‚úÖ Cleared all test data from localStorage\");\n};\n\n/**\n * Reset bookings only\n */\nexport const clearBookings = () => {\n  localStorage.removeItem(\"hotel_bookings\");\n  console.log(\"‚úÖ Cleared all bookings\");\n};\n\n/**\n * Reset reviews only\n */\nexport const clearReviews = () => {\n  localStorage.removeItem(\"hotel_room_reviews\");\n  console.log(\"‚úÖ Cleared all reviews\");\n};\n"
    },
    {
      "path": "src\\utils\\emailService.js",
      "ext": ".js",
      "size": 5271,
      "mtime": 1764738249546.0315,
      "lines": 155,
      "snippet": "import emailjs from '@emailjs/browser';\n\n// ============================================\n// EMAILJS CONFIGURATION\n// ============================================\n// ƒê·ªÉ g·ª≠i email th·∫≠t, b·∫°n c·∫ßn:\n// 1. ƒêƒÉng k√Ω t√†i kho·∫£n t·∫°i https://www.emailjs.com/ (mi·ªÖn ph√≠)\n// 2. T·∫°o Email Service (Gmail) v√† l·∫•y Service ID\n// 3. T·∫°o Email Template v√† l·∫•y Template ID  \n// 4. L·∫•y Public Key t·ª´ Account Settings\n// 5. Thay th·∫ø c√°c gi√° tr·ªã b√™n d∆∞·ªõi\n\nconst PUBLIC_KEY = 'YOUR_PUBLIC_KEY'; // Thay b·∫±ng Public Key c·ªßa b·∫°n\nconst SERVICE_ID = 'YOUR_SERVICE_ID'; // Thay b·∫±ng Service ID c·ªßa b·∫°n\nconst RESET_TEMPLATE_ID = 'YOUR_TEMPLATE_ID'; // Thay b·∫±ng Template ID cho reset m·∫≠t kh·∫©u\nconst BOOKING_TEMPLATE_ID = 'YOUR_BOOKING_TEMPLATE_ID'; // Thay b·∫±ng Template ID cho booking\n\n// Initialize EmailJS (ch·ªâ khi ƒë√£ config)\nif (PUBLIC_KEY !== 'YOUR_PUBLIC_KEY') {\n  emailjs.init(PUBLIC_KEY);\n}\n\n/**\n * Send password reset code email\n * @param {string} toEmail - Recipient email address\n * @param {string} resetCode - 6-digit reset code\n * @param {string} userName - User's name (optional)\n * @returns {Promise} - Promise that resolves when email is sent\n */\nexport const sendResetCodeEmail = async (toEmail, resetCode, userName = 'User') => {\n  try {\n    const templateParams = {\n      to_email: toEmail,\n      to_name: userName,\n      reset_code: resetCode,\n      from_name: 'Hotel Booking',\n      message: `Your password reset code is: ${resetCode}. This code will expire in 10 minutes.`,\n    };\n\n    const response = await emailjs.send("
    },
    {
      "path": "src\\utils\\notifications.js",
      "ext": ".js",
      "size": 2085,
      "mtime": 1764738249546.0315,
      "lines": 103,
      "snippet": "/**\n * Notification/Toast System\n * Centralized notification handling for the application\n */\n\n// Store active notifications\nlet notifications = [];\nlet notificationId = 0;\nlet listeners = [];\n\n/**\n * Subscribe to notification changes\n */\nexport const subscribeToNotifications = (callback) => {\n  listeners.push(callback);\n  return () => {\n    listeners = listeners.filter(l => l !== callback);\n  };\n};\n\n/**\n * Notify all listeners\n */\nconst notifyListeners = () => {\n  listeners.forEach(listener => listener([...notifications]));\n};\n\n/**\n * Show notification\n */\nexport const showNotification = (message, type = 'info', duration = 3000) => {\n  const id = notificationId++;\n  const notification = {\n    id,\n    message,\n    type, // 'success', 'error', 'warning', 'info'\n    duration\n  };\n\n  notifications.push(notification);"
    },
    {
      "path": "src\\utils\\ScrollToTop.js",
      "ext": ".js",
      "size": 264,
      "mtime": 1764738249544.0305,
      "lines": 15,
      "snippet": "import { useLocation } from 'react-router-dom';\nimport { useEffect } from 'react';\n\nconst ScrollToTop = () => {\n\n  const { pathname } = useLocation();\n\n  useEffect(() => {\n    window.scrollTo(0, 0);\n  }, [pathname]);\n\n};\n\nexport default ScrollToTop;\n"
    },
    {
      "path": "src\\utils\\supabaseClient.js",
      "ext": ".js",
      "size": 686,
      "mtime": 1764738249546.0315,
      "lines": 13,
      "snippet": "import { createClient } from '@supabase/supabase-js';\n\n// Initialize Supabase client\n// For Vite, use import.meta.env instead of process.env\nconst SUPABASE_URL = import.meta.env.VITE_SUPABASE_URL || 'https://sxteddkozzqniebfstag.supabase.co';\nconst SUPABASE_KEY = import.meta.env.VITE_SUPABASE_ANON_KEY || 'eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6InN4dGVkZGtvenpxbmllYmZzdGFnIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NjE4NjQwMDgsImV4cCI6MjA3NzQ0MDAwOH0.FYblHTFrNTthvpcdGy6DFefjnApCe4qwcKZaHdkTiac';\n\n// Debug log\nconsole.log('üîê Supabase URL:', SUPABASE_URL.substring(0, 30) + '...');\n\nexport const supabase = createClient(SUPABASE_URL, SUPABASE_KEY);\n\n"
    },
    {
      "path": "src\\utils\\supabaseStorageUrls.js",
      "ext": ".js",
      "size": 3497,
      "mtime": 1764738249547.031,
      "lines": 126,
      "snippet": "/**\n * Supabase Storage URLs Configuration\n * Bucket: hotel-rooms\n * Base URL: https://sxteddkozzqniebfstag.supabase.co/storage/v1/object/public/hotel-rooms\n */\n\nconst SUPABASE_PROJECT_ID = 'sxteddkozzqniebfstag';\nconst STORAGE_BUCKET = 'hotel-rooms';\nconst STORAGE_BASE_URL = `https://${SUPABASE_PROJECT_ID}.supabase.co/storage/v1/object/public/${STORAGE_BUCKET}`;\n\n/**\n * Generate room image URL\n * @param {string} imagePath - Path to image (e.g., 'img/rooms/1.png')\n * @returns {string} Full Supabase Storage URL\n */\nexport const getRoomImageUrl = (imagePath) => {\n  if (!imagePath) return null;\n  \n  // If already a full URL, return as is\n  if (imagePath.startsWith('http')) {\n    return imagePath;\n  }\n  \n  // Build URL from path\n  return `${STORAGE_BASE_URL}/${imagePath}`;\n};\n\n/**\n * Get room thumbnail image URL\n * @param {number} roomNumber - Room number (1-8)\n * @returns {string} Full Supabase Storage URL for thumbnail\n */\nexport const getRoomThumbnailUrl = (roomNumber) => {\n  return getRoomImageUrl(`img/rooms/${roomNumber}.png`);\n};\n\n/**\n * Get room large image URL\n * @param {number} roomNumber - Room number (1-8)\n * @returns {string} Full Supabase Storage URL for large image"
    },
    {
      "path": "src\\style\\chatbox.css",
      "ext": ".css",
      "size": 9111,
      "mtime": 1764738249543.0298,
      "lines": 527,
      "snippet": "/* ChatBox Custom Animations & Styles */\n\n/* Fade in animation */\n@keyframes fadeIn {\n  from {\n    opacity: 0;\n  }\n  to {\n    opacity: 1;\n  }\n}\n\n@keyframes slideUp {\n  from {\n    transform: translateY(20px);\n    opacity: 0;\n  }\n  to {\n    transform: translateY(0);\n    opacity: 1;\n  }\n}\n\n@keyframes slideIn {\n  from {\n    transform: translateX(20px);\n    opacity: 0;\n  }\n  to {\n    transform: translateX(0);\n    opacity: 1;\n  }\n}\n\n@keyframes scaleBounce {\n  0%,\n  100% {\n    transform: scale(1);\n  }\n  50% {"
    },
    {
      "path": "src\\style\\datepicker.css",
      "ext": ".css",
      "size": 1228,
      "mtime": 1764738249543.0298,
      "lines": 70,
      "snippet": ".react-datepicker {\n  background   : white;\n  border       : none;\n  border-radius: 0;\n  font-family  : 'Barlow';\n  border       : 1px solid #aa8453;\n  font-size    : 0.9rem;\n}\n\n.react-datepicker__header {\n  border : #aa8453;\n  color  : #fff;\n  padding: 0;\n}\n\n.react-datepicker-wrapper {\n  padding   : 0 2rem;\n  height    : 100%;\n  display   : flex;\n  background: white;\n}\n\n.react-datepicker-popper {\n  padding-top: 0;\n}\n\n.react-datepicker-popper[data-placement^='bottom'] {\n  padding-top: 0;\n}\n\n.react-datepicker__triangle {\n  display: none;\n}\n\n.react-datepicker__current-month {\n  background: #aa8453;\n  color     : white;\n  padding   : 0.3rem 0;\n}\n"
    },
    {
      "path": "src\\style\\index.css",
      "ext": ".css",
      "size": 2211,
      "mtime": 1764738249543.0298,
      "lines": 102,
      "snippet": "@import url('https://fonts.googleapis.com/css2?family=Barlow+Condensed:ital,wght@0,100;0,200;0,300;0,400;0,500;0,600;0,700;0,800;0,900;1,100;1,200;1,300;1,400;1,500;1,600;1,700;1,800;1,900&family=Barlow:ital,wght@0,100;0,200;0,300;0,400;0,500;0,600;0,700;0,800;0,900;1,100;1,200;1,300;1,400;1,500;1,600;1,700;1,800;1,900&family=Gilda+Display&display=swap');\n\n@tailwind base;\n@tailwind components;\n@tailwind utilities;\n\n@layer base {\n\n  html {\n    @apply scroll-smooth scroll-pt-6;\n  }\n\n  /* \n  üü®üü®üü®üü®üü®üü®üü®üü®üü®\n  Browser Main Scrollbar \n  üü®üü®üü®üü®üü®üü®üü®üü®üü®\n  */\n\n  html::-webkit-scrollbar {\n    width: 8px;\n  }\n\n  html::-webkit-scrollbar-thumb {\n    border-radius   : 2px;\n    background-color: #a37d4c;\n  }\n\n  html::-webkit-scrollbar-track {\n    background-color: #FFFFFF;\n  }\n\n  body {\n    @apply font-secondary text-primary;\n  }\n\n  input::placeholder {\n    @apply text-primary;\n  }\n\n  .h2 {"
    },
    {
      "path": "src\\services\\adminService.js",
      "ext": ".js",
      "size": 10325,
      "mtime": 1764766211383.1743,
      "lines": 424,
      "snippet": "import { supabase } from '../utils/supabaseClient';\n\n/**\n * Service layer for admin-specific data fetching\n */\n\nexport const fetchAllRoomBookingsForAdmin = async () => {\n  try {\n    const { data, error } = await supabase\n      .from('bookings')\n      .select(`\n        *,\n        rooms:room_id (room_no),\n        profiles:user_id (full_name, email)\n      `)\n      .order('created_at', { ascending: false });\n    if (error) throw error;\n    return data || [];\n  } catch (err) {\n    console.error('Error fetching all room bookings for admin:', err);\n    return [];\n  }\n};\n\nexport const fetchAllRestaurantBookingsForAdmin = async () => {\n  try {\n    const { data, error } = await supabase\n      .from('restaurant_bookings')\n      .select(`\n        *,\n        profiles:user_id (full_name, email)\n      `)\n      .order('created_at', { ascending: false });\n    if (error) throw error;\n    return data || [];\n  } catch (err) {\n    console.error('Error fetching all restaurant bookings for admin:', err);\n    return [];\n  }\n};"
    },
    {
      "path": "src\\services\\adminService_REFACTORED.js",
      "ext": ".js",
      "size": 15855,
      "mtime": 1764738249541.031,
      "lines": 509,
      "snippet": "import { supabase } from '../utils/supabaseClient';\n\n/**\n * ============================================================================\n * ADMIN SERVICE LAYER - FINALIZED\n * ============================================================================\n * \n * This service centralizes ALL admin-related database operations.\n * Provides clean, normalized data to admin components.\n * \n * Patterns:\n * - All functions return array/object or null on error\n * - All functions include try/catch with logging\n * - Normalization happens here, not in components\n * - Booking types are combined into single functions where appropriate\n * ============================================================================\n */\n\n// ============================================================================\n// BOOKING MANAGEMENT - FETCH\n// ============================================================================\n\n/**\n * Fetch all room bookings with related data\n * @returns {Promise<Array>} Array of normalized room bookings\n */\nexport const fetchAllRoomBookingsForAdmin = async () => {\n  try {\n    const { data, error } = await supabase\n      .from('bookings')\n      .select(`\n        *,\n        rooms:room_id (id, room_no),\n        profiles:user_id (id, full_name, email, phone)\n      `)\n      .order('created_at', { ascending: false });\n    \n    if (error) throw error;\n    \n    return (data || []).map(booking => ({"
    },
    {
      "path": "src\\services\\authService.js",
      "ext": ".js",
      "size": 6886,
      "mtime": 1764741213076.9841,
      "lines": 288,
      "snippet": "import { supabase } from '../utils/supabaseClient';\n\n/**\n * Authentication service layer for Supabase Auth operations\n */\n\n/**\n * Sign in with email and password\n */\nexport const signInWithEmail = async (email, password) => {\n  try {\n    const { data, error } = await supabase.auth.signInWithPassword({\n      email,\n      password,\n    });\n    if (error) throw error;\n    return { success: true, data };\n  } catch (err) {\n    console.error('Sign in error:', err);\n    return { success: false, error: err.message };\n  }\n};\n\n/**\n * Sign up with email and password\n */\nexport const signUpWithEmail = async (email, password, userData = {}) => {\n  try {\n    const { data, error } = await supabase.auth.signUp({\n      email,\n      password,\n      options: {\n        data: {\n          full_name: userData.name || '',\n          role: userData.role || 'user',\n          ...userData,\n        },\n      },\n    });\n    if (error) throw error;"
    },
    {
      "path": "src\\services\\bookingService.js",
      "ext": ".js",
      "size": 7418,
      "mtime": 1764762856004.432,
      "lines": 261,
      "snippet": "import { supabase } from '../utils/supabaseClient';\n\n/**\n * Service layer for room booking operations\n */\n\nexport const createBooking = async (bookingData) => {\n  try {\n    const { data, error } = await supabase\n      .from('bookings')\n      .insert([bookingData])\n      .select();\n    if (error) throw error;\n    return data?.[0] || null;\n  } catch (err) {\n    console.error('Error creating room booking:', err);\n    return null;\n  }\n};\n\nexport const fetchUserBookings = async (userId) => {\n  try {\n    const { data, error } = await supabase\n      .from('bookings')\n      .select('*')\n      .eq('user_id', userId)\n      .order('created_at', { ascending: false });\n    if (error) throw error;\n    return data || [];\n  } catch (err) {\n    console.error('Error fetching user room bookings:', err);\n    return [];\n  }\n};\n\nexport const updateBookingStatus = async (bookingId, status, extraData = {}) => {\n  try {\n    const { data, error } = await supabase\n      .from('bookings')\n      .update({ status, ...extraData })"
    },
    {
      "path": "src\\services\\roomService.js",
      "ext": ".js",
      "size": 9216,
      "mtime": 1764741228643.5042,
      "lines": 353,
      "snippet": "import { supabase } from '../utils/supabaseClient';\n\n/**\n * Service layer for room and pricing operations\n */\n\nexport const fetchRoomTypes = async () => {\n  try {\n    const { data, error } = await supabase\n      .from('room_types')\n      .select('*')\n      .eq('is_active', true)\n      .order('code', { ascending: true });\n    if (error) throw error;\n    return data || [];\n  } catch (err) {\n    console.error('Error fetching room types:', err);\n    return [];\n  }\n};\n\nexport const createRoomType = async (roomTypeData) => {\n  try {\n    const { data, error } = await supabase\n      .from('room_types')\n      .insert([roomTypeData])\n      .select();\n    if (error) throw error;\n    return data?.[0] || null;\n  } catch (err) {\n    console.error('Error creating room type:', err);\n    throw err;\n  }\n};\n\nexport const updateRoomType = async (id, roomTypeData) => {\n  try {\n    const { data, error } = await supabase\n      .from('room_types')\n      .update(roomTypeData)"
    },
    {
      "path": "src\\pages\\Admin.jsx",
      "ext": ".jsx",
      "size": 1891,
      "mtime": 1764738249536.0317,
      "lines": 57,
      "snippet": "import { useState } from 'react';\nimport AdminSidebar from '../components/AdminSidebar';\nimport RoomTypesManagement from '../components/admin/RoomTypesManagement';\nimport RoomsManagement from '../components/admin/RoomsManagement';\nimport PriceRulesManagement from '../components/admin/PriceRulesManagement';\nimport PromotionsManagement from '../components/admin/PromotionsManagement';\nimport BookingsManagement from '../components/admin/BookingsManagement';\nimport UsersManagement from '../components/admin/UsersManagement';\nimport AuditLogsManagement from '../components/admin/AuditLogsManagement';\nimport ReportsManagement from '../components/admin/ReportsManagement';\n\nconst Admin = () => {\n  const [activeSection, setActiveSection] = useState('room-types');\n\n  const renderContent = () => {\n    switch (activeSection) {\n      case 'room-types':\n        return <RoomTypesManagement />;\n      case 'rooms':\n        return <RoomsManagement />;\n      case 'price-rules':\n        return <PriceRulesManagement />;\n      case 'promotions':\n        return <PromotionsManagement />;\n      case 'bookings':\n        return <BookingsManagement />;\n      case 'users':\n        return <UsersManagement />;\n      case 'audit-logs':\n        return <AuditLogsManagement />;\n      case 'reports':\n        return <ReportsManagement />;\n      default:\n        return <RoomTypesManagement />;\n    }\n  };\n\n  return (\n    <div className=\"min-h-screen bg-gray-50\">\n      <div className=\"flex relative\">"
    },
    {
      "path": "src\\pages\\CleanupPage.jsx",
      "ext": ".jsx",
      "size": 3454,
      "mtime": 1764738249536.0317,
      "lines": 107,
      "snippet": "import { useNavigate } from \"react-router-dom\";\nimport {\n  clearAllTestData,\n  clearBookings,\n  clearReviews,\n} from \"../utils/clearTestData\";\nimport { LogoDark } from \"../assets\";\n\nconst CleanupPage = () => {\n  const navigate = useNavigate();\n\n  const handleClearAll = () => {\n    if (\n      window.confirm(\n        \"‚ö†Ô∏è Are you sure? This will delete ALL data (bookings, reviews, users)!\"\n      )\n    ) {\n      clearAllTestData();\n      alert(\"‚úÖ All data cleared! Redirecting...\");\n      localStorage.clear();\n      window.location.href = \"/\";\n    }\n  };\n\n  const handleClearBookings = () => {\n    if (window.confirm(\"‚ö†Ô∏è Delete all bookings?\")) {\n      clearBookings();\n      alert(\"‚úÖ Bookings cleared!\");\n      window.location.reload();\n    }\n  };\n\n  const handleClearReviews = () => {\n    if (window.confirm(\"‚ö†Ô∏è Delete all reviews?\")) {\n      clearReviews();\n      alert(\"‚úÖ Reviews cleared!\");\n      window.location.reload();\n    }\n  };\n"
    },
    {
      "path": "src\\pages\\Contact.jsx",
      "ext": ".jsx",
      "size": 10509,
      "mtime": 1764738249536.0317,
      "lines": 258,
      "snippet": "import { useState } from 'react';\nimport { ScrollToTop, Toast } from '../components';\nimport { FaEnvelope, FaMapMarkerAlt, FaPhoneAlt, FaClock } from 'react-icons/fa';\n\nconst STORAGE_URL = 'https://sxteddkozzqniebfstag.supabase.co/storage/v1/object/public/hotel-rooms';\n\nconst contactCards = [\n  {\n    title: 'Concierge Desk',\n    detail: '+84 24 1234 5678',\n    subtitle: 'Available 24/7 for urgent assistance',\n    icon: FaPhoneAlt,\n  },\n  {\n    title: 'Reservations',\n    detail: 'booking@adinahotel.com',\n    subtitle: 'Response within 30 minutes',\n    icon: FaEnvelope,\n  },\n  {\n    title: 'Visit Us',\n    detail: '12 Tran Hung Dao, Hoan Kiem, Ha Noi',\n    subtitle: 'Private transfers on request',\n    icon: FaMapMarkerAlt,\n  },\n  {\n    title: 'Opening Hours',\n    detail: 'Daily ‚Ä¢ 06:00 - 23:00',\n    subtitle: 'Spa & Restaurant 09:00 - 22:00',\n    icon: FaClock,\n  },\n];\n\nconst initialFormState = {\n  fullName: '',\n  email: '',\n  phone: '',\n  subject: '',\n  message: '',\n};"
    },
    {
      "path": "src\\pages\\ForgotPassword.jsx",
      "ext": ".jsx",
      "size": 6661,
      "mtime": 1764738249537.0308,
      "lines": 179,
      "snippet": "import { useState } from 'react';\nimport { useNavigate, Link } from 'react-router-dom';\nimport { LogoDark } from '../assets';\nimport { FaEnvelope, FaSpinner, FaArrowLeft, FaCheckCircle } from 'react-icons/fa';\nimport Toast from '../components/Toast';\nimport { useAuth } from '../context/AuthContext';\n\nconst ForgotPassword = () => {\n  const [email, setEmail] = useState('');\n  const [toast, setToast] = useState(null);\n  const [successMessage, setSuccessMessage] = useState('');\n  const navigate = useNavigate();\n  const { resetPassword, loading, error: authError } = useAuth();\n\n  const handleSubmit = async (e) => {\n    e.preventDefault();\n    setSuccessMessage('');\n\n    if (!email) {\n      setToast({\n        message: 'Please enter your email address',\n        type: 'error'\n      });\n      return;\n    }\n\n    const result = await resetPassword(email);\n    \n    if (result.success) {\n      setToast({\n        message: `Password reset link sent to ${email}! Check your inbox.`,\n        type: 'success'\n      });\n      setSuccessMessage(`We've sent a password reset link to ${email}. Click the link in the email to proceed with resetting your password. The link will expire in 24 hours.`);\n      setEmail('');\n      \n      // Redirect to login after 5 seconds\n      setTimeout(() => {\n        navigate('/login');\n      }, 5000);"
    },
    {
      "path": "src\\pages\\Home.jsx",
      "ext": ".jsx",
      "size": 471,
      "mtime": 1764738249537.0308,
      "lines": 26,
      "snippet": "import { BookForm, HeroSlider, Rooms, ScrollToTop } from '../components';\n\n\nconst Home = () => {\n\n  return (\n    <div>\n      <ScrollToTop />\n\n      <HeroSlider />\n\n      <div className='container mx-auto relative'>\n\n        <div className='bg-accent/20 mt-4 p-4 lg:absolute lg:left-0 lg:right-0 lg:p-0 lg:-top-12 lg:z-30 lg:shadow-xl'>\n          <BookForm />\n        </div>\n\n      </div>\n\n      <Rooms />\n    </div>\n  );\n};\n\nexport default Home;\n"
    },
    {
      "path": "src\\pages\\index.js",
      "ext": ".js",
      "size": 697,
      "mtime": 1764738249540.0308,
      "lines": 14,
      "snippet": "export { default as RoomDetails } from \"./RoomDetails\";\nexport { default as Home } from \"./Home\";\nexport { default as Admin } from \"./Admin\";\nexport { default as Login } from \"./Login\";\nexport { default as Register } from \"./Register\";\nexport { default as ForgotPassword } from \"./ForgotPassword\";\nexport { default as ResetPassword } from \"./ResetPassword\";\nexport { default as RoomsPage } from \"./RoomsPage\";\nexport { default as Contact } from \"./Contact\";\nexport { default as UserDashboard } from \"./UserDashboard\";\nexport { default as RestaurantPage } from \"./RestaurantPage\";\nexport { default as SpaPage } from \"./SpaPage\";\nexport { default as CleanupPage } from \"./CleanupPage\";\n"
    },
    {
      "path": "src\\pages\\Login.jsx",
      "ext": ".jsx",
      "size": 10598,
      "mtime": 1764738249537.0308,
      "lines": 265,
      "snippet": "import { useState, useEffect } from 'react';\nimport { useNavigate, useLocation, Link } from 'react-router-dom';\nimport { useAuth } from '../context/AuthContext';\nimport { FaEnvelope, FaLock, FaSpinner, FaGoogle, FaFacebook } from 'react-icons/fa';\nimport Toast from '../components/Toast';\n\nconst STORAGE_URL = 'https://sxteddkozzqniebfstag.supabase.co/storage/v1/object/public/hotel-rooms/img';\n\nconst Login = () => {\n  const [email, setEmail] = useState('');\n  const [password, setPassword] = useState('');\n  const [error, setError] = useState('');\n  const [showPassword, setShowPassword] = useState(false);\n  const [isAdminLogin, setIsAdminLogin] = useState(false);\n  const [toast, setToast] = useState(null);\n  \n  const { login, adminLogin, loginWithOAuth, loading, isAuthenticated } = useAuth();\n  const navigate = useNavigate();\n  const location = useLocation();\n\n  useEffect(() => {\n    const isAdmin = location.pathname === '/admin/login' || location.search.includes('admin=true');\n    setIsAdminLogin(isAdmin);\n  }, [location]);\n\n  useEffect(() => {\n    if (isAuthenticated()) {\n      const from = location.state?.from?.pathname || (isAdminLogin ? '/admin' : '/');\n      navigate(from, { replace: true });\n    }\n  }, [isAuthenticated, navigate, location, isAdminLogin]);\n\n  const handleSubmit = async (e) => {\n    e.preventDefault();\n    setError('');\n\n    if (!email || !password) {\n      setError('Please fill in all fields');\n      return;\n    }"
    },
    {
      "path": "src\\pages\\Register.jsx",
      "ext": ".jsx",
      "size": 11572,
      "mtime": 1764812807415.028,
      "lines": 301,
      "snippet": "import { useState, useEffect } from 'react';\nimport { useNavigate, Link } from 'react-router-dom';\nimport { useAuth } from '../context/AuthContext';\nimport { FaEnvelope, FaLock, FaUser, FaSpinner, FaGoogle, FaFacebook } from 'react-icons/fa';\nimport Toast from '../components/Toast';\n\nconst STORAGE_URL = 'https://sxteddkozzqniebfstag.supabase.co/storage/v1/object/public/hotel-rooms/img';\n\nconst Register = () => {\n  const [formData, setFormData] = useState({\n    name: '',\n    email: '',\n    password: '',\n    confirmPassword: ''\n  });\n  const [error, setError] = useState('');\n  const [showPassword, setShowPassword] = useState(false);\n  const [showConfirmPassword, setShowConfirmPassword] = useState(false);\n  const [toast, setToast] = useState(null);\n  \n  const { register, loginWithOAuth, loading, isAuthenticated } = useAuth();\n  const navigate = useNavigate();\n\n  useEffect(() => {\n    if (isAuthenticated()) {\n      navigate('/', { replace: true });\n    }\n  }, [isAuthenticated, navigate]);\n\n  const handleChange = (e) => {\n    setFormData({\n      ...formData,\n      [e.target.name]: e.target.value\n    });\n    setError('');\n  };\n\n  const validateEmail = (email) => {\n    const emailRegex = /^[^\\s@]+@[^\\s@]+\\.[^\\s@]+$/;\n    return emailRegex.test(email);"
    },
    {
      "path": "src\\pages\\ResetPassword.jsx",
      "ext": ".jsx",
      "size": 9329,
      "mtime": 1764738249538.0327,
      "lines": 246,
      "snippet": "import { useState, useEffect } from 'react';\nimport { useNavigate, useSearchParams, Link } from 'react-router-dom';\nimport { LogoDark } from '../assets';\nimport { FaLock, FaSpinner, FaCheck, FaArrowLeft } from 'react-icons/fa';\nimport Toast from '../components/Toast';\nimport { useAuth } from '../context/AuthContext';\n\nconst ResetPassword = () => {\n  const [searchParams] = useSearchParams();\n  const [formData, setFormData] = useState({\n    newPassword: '',\n    confirmPassword: ''\n  });\n  const [toast, setToast] = useState(null);\n  const [showPassword, setShowPassword] = useState(false);\n  const [showConfirmPassword, setShowConfirmPassword] = useState(false);\n  const [successMessage, setSuccessMessage] = useState('');\n  const navigate = useNavigate();\n  const { updatePassword, loading, error: authError } = useAuth();\n\n  // Supabase sends a token in the URL fragment or query param after email click\n  const token = searchParams.get('token') || window.location.hash;\n\n  useEffect(() => {\n    // If no token, user likely came from ForgotPassword flow or manual access\n    // No need to redirect - they can still access the page\n    if (!token) {\n      console.log('No reset token found in URL. User may need to click email link or request new reset.');\n    }\n  }, [token]);\n\n  const handleChange = (e) => {\n    setFormData({\n      ...formData,\n      [e.target.name]: e.target.value\n    });\n  };\n\n  const handleSubmit = async (e) => {\n    e.preventDefault();"
    },
    {
      "path": "src\\pages\\RestaurantPage.jsx",
      "ext": ".jsx",
      "size": 27166,
      "mtime": 1764738249538.0327,
      "lines": 805,
      "snippet": "import { useState } from \"react\";\nimport { ScrollToTop, Toast } from \"../components\";\nimport QRPayment from \"../components/QRPayment\";\nimport Invoice from \"../components/Invoice\";\nimport { useBookingContext } from \"../context/BookingContext\";\nimport { useAuth } from \"../context/AuthContext\";\n// ‚ö†Ô∏è Local images removed - now use Supabase URLs\n\nconst STORAGE_URL = \"https://sxteddkozzqniebfstag.supabase.co/storage/v1/object/public/hotel-rooms/img/rooms\";\nconst PLACEHOLDER_IMG_MENU = \"https://via.placeholder.com/400x300?text=Menu+Image\";\nimport {\n  FaUtensils,\n  FaWineGlassAlt,\n  FaClock,\n  FaMapMarkerAlt,\n  FaPhoneAlt,\n  FaStar,\n  FaCheck,\n} from \"react-icons/fa\";\n\nconst PLACEHOLDER_IMG = \"data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='300' height='200'%3E%3Crect fill='%23ddd' width='300' height='200'/%3E%3Ctext x='50%' y='50%' font-size='14' fill='%23999' text-anchor='middle' dy='.3em'%3EMenu Image%3C/text%3E%3C/svg%3E\";\n\n// Helper function to get image for menu items (using Supabase Storage URLs)\nconst getMenuItemImage = (id) => {\n  if (!id) return PLACEHOLDER_IMG_MENU;\n  \n  // Cycle through images 1-8 (large version)\n  // Assumes restaurant images match the room images for diversity\n  const imgIndex = (id % 8) === 0 ? 8 : (id % 8);\n  return `${STORAGE_URL}/${imgIndex}-lg.png` || PLACEHOLDER_IMG_MENU;\n};\n\n\nconst menuCategories = [\n  { id: \"appetizers\", name: \"Appetizers\", icon: FaUtensils },\n  { id: \"mains\", name: \"Main Courses\", icon: FaUtensils },\n  { id: \"desserts\", name: \"Desserts\", icon: FaUtensils },\n  { id: \"beverages\", name: \"Beverages\", icon: FaWineGlassAlt },\n  { id: \"combos\", name: \"Combo Meals\", icon: FaUtensils },\n];"
    },
    {
      "path": "src\\pages\\RoomDetails.jsx",
      "ext": ".jsx",
      "size": 21855,
      "mtime": 1764738249539.0308,
      "lines": 509,
      "snippet": "import { ScrollToTop, Toast } from '../components';\nimport QRPayment from '../components/QRPayment';\nimport Invoice from '../components/Invoice';\nimport { useRoomContext } from '../context/RoomContext';\nimport { useAuth } from '../context/AuthContext';\nimport { hotelRules } from '../constants/data';\nimport { useParams } from 'react-router-dom';\nimport { FaCheck, FaStar } from 'react-icons/fa';\nimport { useMemo, useState } from 'react';\n\n// Placeholder image - will be replaced by Supabase Storage URL\nconst PLACEHOLDER_IMG = \"data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='800' height='600'%3E%3Crect fill='%23ddd' width='800' height='600'/%3E%3Ctext x='50%' y='50%' font-size='24' fill='%23999' text-anchor='middle' dy='.3em'%3ELoading image...%3C/text%3E%3C/svg%3E\";\n\nconst createLocalId = () => {\n  if (typeof crypto !== 'undefined' && crypto.randomUUID) {\n    return crypto.randomUUID();\n  }\n  return Date.now().toString();\n};\n\nconst RoomDetails = () => {\n  const { id } = useParams();\n  const {\n    allRooms,\n    bookRoom,\n    confirmBookingPayment,\n    hasUserBookedRoom,\n    addReview,\n    calculatePricingForRoom,\n  } = useRoomContext();\n  const { user, isAuthenticated } = useAuth();\n\n  // Support both numeric IDs (legacy) and UUID strings (new)\n  const room = allRooms.find(roomItem => \n    roomItem.id === id || roomItem.id === Number(id)\n  );\n\n  const [reservation, setReservation] = useState({\n    checkIn: '',\n    checkOut: '',"
    },
    {
      "path": "src\\pages\\RoomsPage.jsx",
      "ext": ".jsx",
      "size": 4864,
      "mtime": 1764738249539.0308,
      "lines": 142,
      "snippet": "import { BookForm, Rooms, ScrollToTop, CategoryFilter } from \"../components\";\nimport {\n  FaCrown,\n  FaConciergeBell,\n  FaWineGlassAlt,\n  FaUmbrellaBeach,\n} from \"react-icons/fa\";\nimport { useRoomContext } from \"../context/RoomContext\";\nimport { useMemo } from \"react\";\n\nconst STORAGE_URL = 'https://sxteddkozzqniebfstag.supabase.co/storage/v1/object/public/hotel-rooms/img';\n\nconst highlights = [\n  {\n    title: \"Signature Suites\",\n    description: \"Spacious villas with private terraces and curated amenities.\",\n    icon: FaCrown,\n  },\n  {\n    title: \"Butler Service\",\n    description: \"24/7 dedicated hosts ready to personalize every detail.\",\n    icon: FaConciergeBell,\n  },\n  {\n    title: \"Gourmet Moments\",\n    description:\n      \"In-room dining with pairing menus from our award-winning chefs.\",\n    icon: FaWineGlassAlt,\n  },\n  {\n    title: \"Resort Experiences\",\n    description:\n      \"Private spa rituals, yacht cruises, and sunset lounge access.\",\n    icon: FaUmbrellaBeach,\n  },\n];\n\nconst stats = [\n  { label: \"Suites & Villas\", value: \"80+\" },\n  { label: \"Average Size\", value: \"120 m¬≤\" },"
    },
    {
      "path": "src\\pages\\SpaPage.jsx",
      "ext": ".jsx",
      "size": 26795,
      "mtime": 1764738249539.0308,
      "lines": 578,
      "snippet": "import { useState } from 'react';\nimport { ScrollToTop, Toast } from '../components';\nimport QRPayment from '../components/QRPayment';\nimport Invoice from '../components/Invoice';\nimport { useBookingContext } from '../context/BookingContext';\nimport { useAuth } from '../context/AuthContext';\n// ‚ö†Ô∏è Local images removed - now use Supabase URLs\nimport { FaSpa, FaClock, FaMapMarkerAlt, FaPhoneAlt, FaStar, FaCheck, FaLeaf, FaWater, FaHandSparkles } from 'react-icons/fa';\n\nconst STORAGE_URL = \"https://sxteddkozzqniebfstag.supabase.co/storage/v1/object/public/hotel-rooms/img/rooms\";\nconst PLACEHOLDER_IMG_SERVICE = \"https://via.placeholder.com/400x300?text=Service+Image\";\n\nconst PLACEHOLDER_IMG = \"data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='300' height='200'%3E%3Crect fill='%23ddd' width='300' height='200'/%3E%3Ctext x='50%' y='50%' font-size='14' fill='%23999' text-anchor='middle' dy='.3em'%3ESpa Service%3C/text%3E%3C/svg%3E\";\n\nconst spaCategories = [\n  { id: 'massage', name: 'Massage Therapies', icon: FaHandSparkles },\n  { id: 'facial', name: 'Facial Treatments', icon: FaSpa },\n  { id: 'body', name: 'Body Treatments', icon: FaLeaf },\n  { id: 'wellness', name: 'Wellness Packages', icon: FaWater },\n];\n\n// Helper function to get image for spa services\n// Uses Supabase Storage URLs based on room types when available\nconst getSpaServiceImage = (id) => {\n  // Use id to cycle through images 1-8.png\n  // Images are named 1-lg.png through 8-lg.png for large format\n  if (!id) return PLACEHOLDER_IMG_SERVICE;\n  \n  const imgIndex = (id % 8) === 0 ? 8 : (id % 8);\n  return `${STORAGE_URL}/${imgIndex}-lg.png` || PLACEHOLDER_IMG_SERVICE;\n};\n\nconst spaServices = {\n  massage: [\n    { id: 1, name: 'Swedish Massage', description: 'Classic relaxation massage with long, flowing strokes', duration: '60 min', price: 95, popular: true, image: getSpaServiceImage(1) },\n    { id: 2, name: 'Deep Tissue Massage', description: 'Therapeutic massage targeting muscle tension and knots', duration: '90 min', price: 135, image: getSpaServiceImage(2) },\n    { id: 3, name: 'Hot Stone Massage', description: 'Heated stones for deep muscle relaxation and stress relief', duration: '90 min', price: 145, popular: true, image: getSpaServiceImage(3) },\n    { id: 4, name: 'Aromatherapy Massage', description: 'Essential oils combined with therapeutic massage techniques', duration: '60 min', price: 105, image: getSpaServiceImage(4) },\n    { id: 5, name: 'Thai Massage', description: 'Traditional Thai stretching and acupressure techniques', duration: '90 min', price: 125, image: getSpaServiceImage(5) },\n    { id: 6, name: 'Couples Massage', description: 'Side-by-side massage experience in a private suite', duration: '90 min', price: 280, image: getSpaServiceImage(6) },"
    },
    {
      "path": "src\\pages\\UserDashboard.jsx",
      "ext": ".jsx",
      "size": 26326,
      "mtime": 1764762890645.1467,
      "lines": 615,
      "snippet": "import { useMemo, useState, useEffect } from 'react';\nimport { useAuth } from '../context/AuthContext';\nimport { useRoomContext } from '../context/RoomContext';\nimport { useBookingContext } from '../context/BookingContext'; // NEW\nimport { Link } from 'react-router-dom';\nimport DatePicker from 'react-datepicker';\nimport 'react-datepicker/dist/react-datepicker.css';\nimport Toast from '../components/Toast';\nimport { FaSuitcaseRolling, FaCalendarAlt, FaUserCircle, FaCamera, FaEdit, FaTimes } from 'react-icons/fa';\nimport { LogoDark } from '../assets';\n\nconst tabs = [\n  { id: 'overview', label: 'Overview' },\n  { id: 'bookings', label: 'Bookings' },\n  { id: 'profile', label: 'Profile & Preferences' },\n];\n\nconst bookingFilterOptions = [\n  { id: 'upcoming', label: 'Upcoming' },\n  { id: 'past', label: 'Past' },\n  { id: 'cancelled', label: 'Cancelled' },\n];\n\nconst statusBadgeClasses = {\n  confirmed: 'bg-emerald-100 text-emerald-700',\n  modified: 'bg-sky-100 text-sky-700',\n  completed: 'bg-gray-100 text-gray-600',\n  cancelled: 'bg-red-100 text-red-600',\n};\n\nconst UserDashboard = () => {\n  const { user, updateUserProfile } = useAuth();\n  const {\n    getUserBookings: getRoomBookings, // ƒê·ªïi t√™n ƒë·ªÉ tr√°nh xung ƒë·ªôt\n    cancelBooking,\n    modifyBookingDates,\n  } = useRoomContext();\n  \n  const {\n    getUserRestaurantBookings,"
    },
    {
      "path": "src\\hooks\\index.js",
      "ext": ".js",
      "size": 160,
      "mtime": 1764738249534.0305,
      "lines": 8,
      "snippet": "/**\n * Hooks Index\n * Central export point for all custom hooks\n */\n\nexport { useCRUD } from './useCRUD';\nexport { useModalForm } from './useModalForm';\n"
    },
    {
      "path": "src\\hooks\\useCRUD.js",
      "ext": ".js",
      "size": 4988,
      "mtime": 1764738249534.0305,
      "lines": 149,
      "snippet": "/**\n * Custom Hook: useCRUD\n * Reusable CRUD operations for any Supabase table\n * Handles: Fetch, Create, Update, Delete with loading/error states\n */\n\nimport { useState, useCallback } from 'react';\nimport { notifySuccess, notifyError } from '../utils/notifications';\n// supabase client import removed as it is now encapsulated in services\n\n/**\n * Defines the required structure for the service layer API used by this hook.\n *\n * @typedef {object} CRUDServiceAPI\n * @property {string} resourceName - Name of the resource (e.g., 'Room Types') for logging and notifications.\n * @property {(filters?: object, orderBy?: { column: string, ascending?: boolean }) => Promise<Array<any>>} fetch - Function to fetch data.\n * @property {(values: object, options?: object) => Promise<any>} create - Function to create a new record.\n * @property {(id: number, values: object, options?: object) => Promise<any>} update - Function to update an existing record.\n * @property {(id: number, options?: object) => Promise<any>} remove - Function to delete a record.\n */\n\n/**\n * Custom Hook: useCRUD\n * Reusable CRUD operations, decoupled from direct Supabase calls via a Service Layer API.\n * Handles: Fetch, Create, Update, Delete with loading/error states\n *\n * @param {CRUDServiceAPI} api - An object containing service functions (fetch, create, update, remove) and resourceName.\n */\nexport const useCRUD = ({ resourceName, fetch: fetchApi, create: createApi, update: updateApi, remove: removeApi }) => {\n  const [data, setData] = useState([]);\n  const [isLoading, setIsLoading] = useState(false);\n  const [error, setError] = useState(null);\n  \n  // Ensure the resource name is available for logging\n  const name = resourceName || 'Resource';\n\n  // FETCH\n  const fetchData = useCallback(async (filters = {}, orderBy = null) => {\n    if (!fetchApi) {\n        console.error(`‚ùå ${name} does not support fetching.`);"
    },
    {
      "path": "src\\hooks\\useModalForm.js",
      "ext": ".js",
      "size": 1480,
      "mtime": 1764738249535.031,
      "lines": 58,
      "snippet": "/**\n * Custom Hook: useModalForm\n * Reusable modal form management\n * Handles: Open/Close modal, Edit/Create mode, Form data reset\n */\n\nimport { useState, useCallback } from 'react';\n\nexport const useModalForm = (initialFormData) => {\n  const [isModalOpen, setIsModalOpen] = useState(false);\n  const [editingItem, setEditingItem] = useState(null);\n  const [formData, setFormData] = useState(initialFormData);\n\n  // Open modal for creating new item\n  const openCreateModal = useCallback(() => {\n    setEditingItem(null);\n    setFormData(initialFormData);\n    setIsModalOpen(true);\n  }, [initialFormData]);\n\n  // Open modal for editing existing item\n  const openEditModal = useCallback((item) => {\n    setEditingItem(item);\n    setFormData(item);\n    setIsModalOpen(true);\n  }, []);\n\n  // Close modal\n  const closeModal = useCallback(() => {\n    setIsModalOpen(false);\n    setEditingItem(null);\n    setFormData(initialFormData);\n  }, [initialFormData]);\n\n  // Update form data\n  const updateFormData = useCallback((updates) => {\n    setFormData(prev => ({ ...prev, ...updates }));\n  }, []);\n\n  // Reset form data"
    },
    {
      "path": "src\\features\\admin\\AdminHeader.jsx",
      "ext": ".jsx",
      "size": 844,
      "mtime": 1764738249533.0298,
      "lines": 39,
      "snippet": "/**\n * AdminHeader Component\n * Reusable header for admin sections\n * Props:\n *   - title: String\n *   - description: String\n *   - onAddNew: Function\n *   - addButtonLabel: String\n */\n\nimport { FaPlus } from 'react-icons/fa';\n\nconst AdminHeader = ({\n  title,\n  description,\n  onAddNew,\n  addButtonLabel = 'Add New'\n}) => {\n  return (\n    <>\n      <div className=\"mb-8\">\n        <h1 className=\"h2 text-primary mb-2\">{title}</h1>\n        <p className=\"text-gray-600\">{description}</p>\n      </div>\n\n      <div className=\"bg-white rounded-lg shadow-md p-6 mb-6\">\n        <button\n          onClick={onAddNew}\n          className=\"btn btn-primary btn-sm flex items-center gap-2 w-auto\"\n        >\n          <FaPlus /> {addButtonLabel}\n        </button>\n      </div>\n    </>\n  );\n};\n\nexport default AdminHeader;\n"
    },
    {
      "path": "src\\features\\admin\\AdminModal.jsx",
      "ext": ".jsx",
      "size": 1706,
      "mtime": 1764738249533.0298,
      "lines": 61,
      "snippet": "/**\n * AdminModal Component\n * Reusable modal component for admin forms\n * Props:\n *   - isOpen: Boolean\n *   - title: String\n *   - onClose: Function\n *   - onSubmit: Function\n *   - isLoading: Boolean\n *   - children: ReactNode (form fields)\n *   - submitLabel: String\n */\n\nimport { FaCheck } from 'react-icons/fa';\n\nconst AdminModal = ({\n  isOpen,\n  title,\n  onClose,\n  onSubmit,\n  isLoading,\n  children,\n  submitLabel = 'Save'\n}) => {\n  if (!isOpen) return null;\n\n  return (\n    <div className=\"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4\">\n      <div className=\"bg-white rounded-lg shadow-xl max-w-2xl w-full max-h-[90vh] overflow-y-auto\">\n        <div className=\"p-6 border-b border-gray-200\">\n          <h2 className=\"h3 text-primary\">{title}</h2>\n        </div>\n\n        <form onSubmit={onSubmit} className=\"p-6 space-y-4\">\n          {children}\n\n          <div className=\"flex gap-4 pt-4 border-t border-gray-200\">\n            <button\n              type=\"submit\"\n              disabled={isLoading}"
    },
    {
      "path": "src\\features\\admin\\AdminTable.jsx",
      "ext": ".jsx",
      "size": 3752,
      "mtime": 1764738249533.0298,
      "lines": 119,
      "snippet": "/**\n * AdminTable Component\n * Reusable table component for admin panels\n * Props:\n *   - columns: Array of { key, label, render? }\n *   - data: Array of data\n *   - isLoading: Boolean\n *   - error: String\n *   - onEdit: Function\n *   - onDelete: Function\n *   - onRetry: Function\n */\n\nimport { FaEdit, FaTrash } from 'react-icons/fa';\n\nconst AdminTable = ({\n  columns,\n  data,\n  isLoading,\n  error,\n  onEdit,\n  onDelete,\n  onRetry,\n  emptyMessage = 'No data yet'\n}) => {\n  if (isLoading) {\n    return (\n      <div className=\"bg-white rounded-lg shadow-md p-12 text-center\">\n        <div className=\"inline-block animate-spin rounded-full h-8 w-8 border-b-2 border-accent\"></div>\n        <p className=\"mt-4 text-gray-600\">Loading...</p>\n      </div>\n    );\n  }\n\n  if (error) {\n    return (\n      <div className=\"bg-red-50 border border-red-200 rounded-lg shadow-md p-6 mb-6\">\n        <p className=\"text-red-700 font-semibold\">‚ùå Error: {error}</p>\n        <button\n          onClick={onRetry}"
    },
    {
      "path": "src\\features\\admin\\index.js",
      "ext": ".js",
      "size": 250,
      "mtime": 1764738249533.0298,
      "lines": 9,
      "snippet": "/**\n * Admin Features Index\n * Central export point for admin components\n */\n\nexport { default as AdminTable } from './AdminTable';\nexport { default as AdminModal } from './AdminModal';\nexport { default as AdminHeader } from './AdminHeader';\n"
    },
    {
      "path": "src\\db\\data.js",
      "ext": ".js",
      "size": 1392,
      "mtime": 1764738249527.037,
      "lines": 25,
      "snippet": "// ‚ö†Ô∏è DEPRECATED: This file is kept for reference only\n// All room data and images now come from Supabase\n// Icons are no longer needed (was used for seed data only)\n\n// ==================== ROOM CATEGORIES ====================\n// Room categories for better organization and management\nexport const roomCategories = [\n  { id: \"standard\", name: \"Standard\", description: \"Comfortable rooms with essential amenities\" },\n  { id: \"deluxe\", name: \"Deluxe\", description: \"Premium experience with elegant design\" },\n  { id: \"suite\", name: \"Suite\", description: \"Spacious suites for ultimate comfort\" },\n  { id: \"penthouse\", name: \"Penthouse\", description: \"Exclusive top-floor residences\" },\n  { id: \"combo\", name: \"Combo Package\", description: \"Value-packed packages with extras\" },\n];\n\n// ‚ö†Ô∏è DEPRECATED: roomData is no longer used\n// All room data now comes from Supabase database\n// This seed data is kept for reference only\n/*\nexport const roomData = [\n  // STANDARD: Rooms 1-8 (8 rooms)\n  createRoom(1, \"Standard Room\", \"Standard\", \"standard\", 30, 1, 115, images.Room1Img, images.Room1ImgLg, \"Comfortable room with essential amenities.\", [defaultReview(1, \"Sophia Nguyen\", \"Room was spotless, pool view stunning.\"), defaultReview(1, \"Daniel Park\", \"Bed was plush and breakfast tasty.\")]),\n  // ... (40 rooms total - see git history or backup for full data)\n];\n*/\n"
    },
    {
      "path": "src\\db\\index.js",
      "ext": ".js",
      "size": 1224,
      "mtime": 1764738249528.034,
      "lines": 43,
      "snippet": "/**\n * Database Module - Central Export Point\n * Import all queries, mutations, constants, and transformers from here\n */\n\n// ============ QUERIES ============\nexport * from './queries/rooms';\nexport * from './queries/bookings';\nexport * from './queries/reviews';\nexport * from './queries/restaurants';\nexport * from './queries/spas';\n\n// ============ MUTATIONS ============\nexport * from './mutations/bookings';\nexport * from './mutations/reviews';\nexport * from './mutations/restaurants';\nexport * from './mutations/spas';\n\n// ============ CONSTANTS ============\nexport * from './constants/roomTypes';\nexport * from './constants/bookingStatus';\nexport * from './constants/reviewRatings';\nexport * from './constants/errors';\n\n// ============ TRANSFORMERS ============\nexport * from './transformers/room';\n\n/**\n * Usage Examples:\n * \n * // Import queries\n * import { fetchAllRooms, fetchRoomById } from './db';\n * \n * // Import mutations\n * import { createBooking, updateBookingStatus } from './db';\n * \n * // Import constants\n * import { ROOM_TYPES, BOOKING_STATUS, RATING_SCALE } from './db';\n * \n * // Import transformers"
    },
    {
      "path": "src\\db\\queries\\bookings.js",
      "ext": ".js",
      "size": 5036,
      "mtime": 1764738249531.0305,
      "lines": 188,
      "snippet": "/**\n * Booking Queries - Fetch booking data from Supabase\n */\n\nimport { supabase } from '../../utils/supabaseClient';\n\n/**\n * Fetch all bookings for current user\n * @param {string} userId - User ID\n * @returns {Promise<Array>} Array of user bookings\n */\nexport const fetchUserBookings = async (userId) => {\n  try {\n    const { data, error } = await supabase\n      .from('bookings')\n      .select(`\n        *,\n        rooms:room_id (\n          room_no,\n          room_types:room_type_id (name, code)\n        ),\n        booking_items (*)\n      `)\n      .eq('user_id', userId)\n      .order('check_in_date', { ascending: false });\n\n    if (error) throw error;\n    return data || [];\n  } catch (err) {\n    console.error(`‚ùå Error fetching bookings for user ${userId}:`, err);\n    return [];\n  }\n};\n\n/**\n * Fetch single booking by ID\n * @param {string} bookingId - Booking ID\n * @returns {Promise<Object|null>} Booking object or null\n */\nexport const fetchBookingById = async (bookingId) => {"
    },
    {
      "path": "src\\db\\queries\\restaurants.js",
      "ext": ".js",
      "size": 5169,
      "mtime": 1764738249531.0305,
      "lines": 173,
      "snippet": "/**\n * Restaurant Booking Queries - Fetch restaurant booking data from Supabase\n */\n\nimport { supabase } from '../../utils/supabaseClient';\n\n/**\n * Fetch all restaurant bookings for user\n * @param {string} userId - User ID\n * @returns {Promise<Array>} Array of restaurant bookings\n */\nexport const fetchUserRestaurantBookings = async (userId) => {\n  try {\n    const { data, error } = await supabase\n      .from('restaurant_bookings')\n      .select('*')\n      .eq('user_id', userId)\n      .order('booking_date', { ascending: false });\n\n    if (error) throw error;\n    return data || [];\n  } catch (err) {\n    console.error(`‚ùå Error fetching restaurant bookings for user ${userId}:`, err);\n    return [];\n  }\n};\n\n/**\n * Fetch single restaurant booking by ID\n * @param {string} bookingId - Restaurant booking ID\n * @returns {Promise<Object|null>} Restaurant booking or null\n */\nexport const fetchRestaurantBookingById = async (bookingId) => {\n  try {\n    const { data, error } = await supabase\n      .from('restaurant_bookings')\n      .select('*')\n      .eq('id', bookingId)\n      .single();\n"
    },
    {
      "path": "src\\db\\queries\\reviews.js",
      "ext": ".js",
      "size": 5515,
      "mtime": 1764738249531.0305,
      "lines": 210,
      "snippet": "/**\n * Review Queries - Fetch review data from Supabase\n */\n\nimport { supabase } from '../../utils/supabaseClient';\n\n/**\n * Fetch all reviews for a room\n * @param {string} roomId - Room ID\n * @returns {Promise<Array>} Array of reviews\n */\nexport const fetchRoomReviews = async (roomId) => {\n  try {\n    const { data, error } = await supabase\n      .from('reviews')\n      .select('*')\n      .eq('room_id', roomId)\n      .eq('is_approved', true)\n      .order('created_at', { ascending: false });\n\n    if (error) throw error;\n    return data || [];\n  } catch (err) {\n    console.error(`‚ùå Error fetching reviews for room ${roomId}:`, err);\n    return [];\n  }\n};\n\n/**\n * Fetch reviews for a room type\n * @param {string} roomTypeId - Room type ID\n * @returns {Promise<Array>} Array of reviews\n */\nexport const fetchRoomTypeReviews = async (roomTypeId) => {\n  try {\n    const { data, error } = await supabase\n      .from('reviews')\n      .select(`\n        *,\n        rooms:room_id (room_type_id)"
    },
    {
      "path": "src\\db\\queries\\rooms.js",
      "ext": ".js",
      "size": 5555,
      "mtime": 1764738249532.0325,
      "lines": 214,
      "snippet": "/**\n * Room Queries - Fetch room data from Supabase\n */\n\nimport { supabase } from '../../utils/supabaseClient';\nimport { getImageUrlsByRoomType } from '../../utils/supabaseStorageUrls';\n\n/**\n * Fetch all rooms with room types and images\n * @returns {Promise<Array>} Array of rooms with images\n */\nexport const fetchAllRooms = async () => {\n  try {\n    const { data, error } = await supabase\n      .from('rooms')\n      .select(`\n        *,\n        room_types:room_type_id (*)\n      `)\n      .eq('status', 'available');\n\n    if (error) throw error;\n\n    // Enrich with Supabase Storage image URLs\n    return (data || []).map((room) => {\n      const roomTypeCode = room.room_types?.code;\n      const imageUrls = getImageUrlsByRoomType(roomTypeCode);\n\n      return {\n        ...room,\n        image_url: imageUrls.image_url,\n        image_lg_url: imageUrls.image_lg_url,\n      };\n    });\n  } catch (err) {\n    console.error('‚ùå Error fetching all rooms:', err);\n    return [];\n  }\n};\n"
    },
    {
      "path": "src\\db\\queries\\spas.js",
      "ext": ".js",
      "size": 5934,
      "mtime": 1764738249532.0325,
      "lines": 214,
      "snippet": "/**\n * Spa Booking Queries - Fetch spa booking data from Supabase\n */\n\nimport { supabase } from '../../utils/supabaseClient';\n\n/**\n * Fetch all spa bookings for user\n * @param {string} userId - User ID\n * @returns {Promise<Array>} Array of spa bookings\n */\nexport const fetchUserSpaBookings = async (userId) => {\n  try {\n    const { data, error } = await supabase\n      .from('spa_bookings')\n      .select('*')\n      .eq('user_id', userId)\n      .order('booking_date', { ascending: false });\n\n    if (error) throw error;\n    return data || [];\n  } catch (err) {\n    console.error(`‚ùå Error fetching spa bookings for user ${userId}:`, err);\n    return [];\n  }\n};\n\n/**\n * Fetch single spa booking by ID\n * @param {string} bookingId - Spa booking ID\n * @returns {Promise<Object|null>} Spa booking or null\n */\nexport const fetchSpaBookingById = async (bookingId) => {\n  try {\n    const { data, error } = await supabase\n      .from('spa_bookings')\n      .select('*')\n      .eq('id', bookingId)\n      .single();\n"
    },
    {
      "path": "src\\db\\mutations\\bookings.js",
      "ext": ".js",
      "size": 6003,
      "mtime": 1764738249529.0312,
      "lines": 226,
      "snippet": "/**\n * Booking Mutations - Create, update, delete booking data in Supabase\n */\n\nimport { supabase } from '../../utils/supabaseClient';\n\n/**\n * Create new booking\n * @param {Object} bookingData - Booking data\n * @returns {Promise<Object|null>} Created booking or null\n */\nexport const createBooking = async (bookingData) => {\n  try {\n    const { data, error } = await supabase\n      .from('bookings')\n      .insert([bookingData])\n      .select()\n      .single();\n\n    if (error) throw error;\n    console.log('‚úÖ Booking created:', data.id);\n    return data;\n  } catch (err) {\n    console.error('‚ùå Error creating booking:', err);\n    return null;\n  }\n};\n\n/**\n * Update booking status\n * @param {string} bookingId - Booking ID\n * @param {string} status - New status\n * @returns {Promise<Object|null>} Updated booking or null\n */\nexport const updateBookingStatus = async (bookingId, status) => {\n  try {\n    const { data, error } = await supabase\n      .from('bookings')\n      .update({ status, updated_at: new Date().toISOString() })\n      .eq('id', bookingId)"
    },
    {
      "path": "src\\db\\mutations\\restaurants.js",
      "ext": ".js",
      "size": 5195,
      "mtime": 1764738249529.0312,
      "lines": 182,
      "snippet": "/**\n * Restaurant Booking Mutations - Create, update, delete restaurant booking data\n */\n\nimport { supabase } from '../../utils/supabaseClient';\n\n/**\n * Create restaurant booking\n * @param {Object} bookingData - Booking data\n * @returns {Promise<Object|null>} Created booking or null\n */\nexport const createRestaurantBooking = async (bookingData) => {\n  try {\n    const { data, error } = await supabase\n      .from('restaurant_bookings')\n      .insert([bookingData])\n      .select()\n      .single();\n\n    if (error) throw error;\n    console.log('‚úÖ Restaurant booking created:', data.id);\n    return data;\n  } catch (err) {\n    console.error('‚ùå Error creating restaurant booking:', err);\n    return null;\n  }\n};\n\n/**\n * Update restaurant booking status\n * @param {string} bookingId - Booking ID\n * @param {string} status - New status\n * @returns {Promise<Object|null>} Updated booking or null\n */\nexport const updateRestaurantBookingStatus = async (bookingId, status) => {\n  try {\n    const { data, error } = await supabase\n      .from('restaurant_bookings')\n      .update({ status, updated_at: new Date().toISOString() })\n      .eq('id', bookingId)"
    },
    {
      "path": "src\\db\\mutations\\reviews.js",
      "ext": ".js",
      "size": 5425,
      "mtime": 1764738249530.0312,
      "lines": 211,
      "snippet": "/**\n * Review Mutations - Create, update, delete review data in Supabase\n */\n\nimport { supabase } from '../../utils/supabaseClient';\n\n/**\n * Create new review\n * @param {Object} reviewData - Review data\n * @returns {Promise<Object|null>} Created review or null\n */\nexport const createReview = async (reviewData) => {\n  try {\n    const { data, error } = await supabase\n      .from('reviews')\n      .insert([reviewData])\n      .select()\n      .single();\n\n    if (error) throw error;\n    console.log('‚úÖ Review created:', data.id);\n    return data;\n  } catch (err) {\n    console.error('‚ùå Error creating review:', err);\n    return null;\n  }\n};\n\n/**\n * Update review\n * @param {string} reviewId - Review ID\n * @param {Object} updateData - Data to update\n * @returns {Promise<Object|null>} Updated review or null\n */\nexport const updateReview = async (reviewId, updateData) => {\n  try {\n    const { data, error } = await supabase\n      .from('reviews')\n      .update({\n        ...updateData,"
    },
    {
      "path": "src\\db\\mutations\\spas.js",
      "ext": ".js",
      "size": 4936,
      "mtime": 1764738249530.0312,
      "lines": 182,
      "snippet": "/**\n * Spa Booking Mutations - Create, update, delete spa booking data\n */\n\nimport { supabase } from '../../utils/supabaseClient';\n\n/**\n * Create spa booking\n * @param {Object} bookingData - Booking data\n * @returns {Promise<Object|null>} Created booking or null\n */\nexport const createSpaBooking = async (bookingData) => {\n  try {\n    const { data, error } = await supabase\n      .from('spa_bookings')\n      .insert([bookingData])\n      .select()\n      .single();\n\n    if (error) throw error;\n    console.log('‚úÖ Spa booking created:', data.id);\n    return data;\n  } catch (err) {\n    console.error('‚ùå Error creating spa booking:', err);\n    return null;\n  }\n};\n\n/**\n * Update spa booking status\n * @param {string} bookingId - Booking ID\n * @param {string} status - New status\n * @returns {Promise<Object|null>} Updated booking or null\n */\nexport const updateSpaBookingStatus = async (bookingId, status) => {\n  try {\n    const { data, error } = await supabase\n      .from('spa_bookings')\n      .update({ status, updated_at: new Date().toISOString() })\n      .eq('id', bookingId)"
    },
    {
      "path": "src\\db\\constants\\bookingStatus.js",
      "ext": ".js",
      "size": 3385,
      "mtime": 1764738249526.033,
      "lines": 139,
      "snippet": "/**\n * Booking Status Constants\n */\n\nexport const BOOKING_STATUS = {\n  PENDING: 'pending',\n  CONFIRMED: 'confirmed',\n  CANCELLED: 'cancelled',\n  COMPLETED: 'completed',\n  NO_SHOW: 'no_show',\n};\n\nexport const BOOKING_STATUS_LABELS = {\n  pending: 'Pending',\n  confirmed: 'Confirmed',\n  cancelled: 'Cancelled',\n  completed: 'Completed',\n  no_show: 'No Show',\n};\n\nexport const BOOKING_STATUS_COLORS = {\n  pending: '#FFA500',    // Orange\n  confirmed: '#4CAF50',  // Green\n  cancelled: '#F44336',  // Red\n  completed: '#2196F3',  // Blue\n  no_show: '#9C27B0',    // Purple\n};\n\nexport const PAYMENT_STATUS = {\n  PENDING: 'pending',\n  PAID: 'paid',\n  FAILED: 'failed',\n  REFUNDED: 'refunded',\n};\n\nexport const PAYMENT_STATUS_LABELS = {\n  pending: 'Pending',\n  paid: 'Paid',\n  failed: 'Failed',\n  refunded: 'Refunded',"
    },
    {
      "path": "src\\db\\constants\\errors.js",
      "ext": ".js",
      "size": 5153,
      "mtime": 1764738249527.037,
      "lines": 178,
      "snippet": "/**\n * Error Messages & Codes\n */\n\nexport const ERROR_CODES = {\n  // Room errors\n  ROOM_NOT_FOUND: 'ROOM_NOT_FOUND',\n  ROOM_UNAVAILABLE: 'ROOM_UNAVAILABLE',\n  ROOM_TYPE_NOT_FOUND: 'ROOM_TYPE_NOT_FOUND',\n\n  // Booking errors\n  BOOKING_NOT_FOUND: 'BOOKING_NOT_FOUND',\n  BOOKING_FAILED: 'BOOKING_FAILED',\n  BOOKING_ALREADY_EXISTS: 'BOOKING_ALREADY_EXISTS',\n  BOOKING_CANNOT_CANCEL: 'BOOKING_CANNOT_CANCEL',\n  BOOKING_EXPIRED: 'BOOKING_EXPIRED',\n\n  // Payment errors\n  PAYMENT_FAILED: 'PAYMENT_FAILED',\n  PAYMENT_INVALID: 'PAYMENT_INVALID',\n  PAYMENT_DECLINED: 'PAYMENT_DECLINED',\n\n  // Review errors\n  REVIEW_NOT_FOUND: 'REVIEW_NOT_FOUND',\n  REVIEW_FAILED: 'REVIEW_FAILED',\n  REVIEW_INVALID: 'REVIEW_INVALID',\n\n  // Restaurant errors\n  RESTAURANT_BOOKING_FAILED: 'RESTAURANT_BOOKING_FAILED',\n  RESTAURANT_SLOT_UNAVAILABLE: 'RESTAURANT_SLOT_UNAVAILABLE',\n\n  // Spa errors\n  SPA_BOOKING_FAILED: 'SPA_BOOKING_FAILED',\n  SPA_SLOT_UNAVAILABLE: 'SPA_SLOT_UNAVAILABLE',\n\n  // User errors\n  USER_NOT_FOUND: 'USER_NOT_FOUND',\n  USER_UNAUTHORIZED: 'USER_UNAUTHORIZED',\n  USER_INVALID_EMAIL: 'USER_INVALID_EMAIL',\n"
    },
    {
      "path": "src\\db\\constants\\reviewRatings.js",
      "ext": ".js",
      "size": 3935,
      "mtime": 1764738249527.037,
      "lines": 170,
      "snippet": "/**\n * Review Rating Constants\n */\n\nexport const RATING_SCALE = {\n  POOR: 1,\n  FAIR: 2,\n  GOOD: 3,\n  VERY_GOOD: 4,\n  EXCELLENT: 5,\n};\n\nexport const RATING_LABELS = {\n  1: 'Poor',\n  2: 'Fair',\n  3: 'Good',\n  4: 'Very Good',\n  5: 'Excellent',\n};\n\nexport const RATING_COLORS = {\n  1: '#F44336', // Red\n  2: '#FF9800', // Orange\n  3: '#FFC107', // Amber\n  4: '#8BC34A', // Light Green\n  5: '#4CAF50', // Green\n};\n\nexport const RATING_DESCRIPTIONS = {\n  1: 'Poor - Did not meet expectations',\n  2: 'Fair - Below average experience',\n  3: 'Good - Satisfactory experience',\n  4: 'Very Good - Above average experience',\n  5: 'Excellent - Exceeded expectations',\n};\n\nexport const REVIEW_ASPECTS = {\n  CLEANLINESS: 'cleanliness',\n  COMFORT: 'comfort',\n  LOCATION: 'location',"
    },
    {
      "path": "src\\db\\constants\\roomTypes.js",
      "ext": ".js",
      "size": 2368,
      "mtime": 1764738249527.037,
      "lines": 106,
      "snippet": "/**\n * Room Type Constants\n */\n\nexport const ROOM_TYPES = {\n  STANDARD: 'STD',\n  DELUXE: 'DLX',\n  SUITE: 'SUI',\n  PENTHOUSE: 'PEN',\n  COMBO: 'CMB',\n};\n\nexport const ROOM_TYPE_NAMES = {\n  STD: 'Standard',\n  DLX: 'Deluxe',\n  SUI: 'Suite',\n  PEN: 'Penthouse',\n  CMB: 'Combo Package',\n};\n\nexport const ROOM_TYPE_DESCRIPTIONS = {\n  STD: 'Comfortable rooms with essential amenities',\n  DLX: 'Premium experience with elegant design',\n  SUI: 'Spacious suites for ultimate comfort',\n  PEN: 'Exclusive top-floor residences',\n  CMB: 'Value-packed packages with extras',\n};\n\nexport const ROOM_TYPE_IMAGE_MAP = {\n  STD: 1,\n  DLX: 2,\n  SUI: 3,\n  PEN: 4,\n  CMB: 5,\n};\n\nexport const ROOM_STATUS = {\n  AVAILABLE: 'available',\n  OCCUPIED: 'occupied',\n  MAINTENANCE: 'maintenance',"
    },
    {
      "path": "src\\context\\AuthContext.jsx",
      "ext": ".jsx",
      "size": 14913,
      "mtime": 1764813408785.8044,
      "lines": 542,
      "snippet": "import { createContext, useContext, useState, useEffect, useCallback } from 'react';\nimport { supabase } from '../utils/supabaseClient';\n\nconst AuthInfo = createContext();\n\n/**\n * Transform Supabase user to application user shape\n */\nconst enrichUser = (supabaseUser, userMetadata = {}, isAdmin = false) => {\n  if (!supabaseUser) return null;\n\n  return {\n    id: supabaseUser.id,\n    email: supabaseUser.email,\n    name: userMetadata.full_name || supabaseUser.user_metadata?.full_name || '',\n    phone: userMetadata.phone || supabaseUser.user_metadata?.phone || '',\n    avatar: userMetadata.avatar_url || supabaseUser.user_metadata?.avatar_url || '',\n    isAdmin: isAdmin,\n    country: userMetadata.country || supabaseUser.user_metadata?.country || '',\n    city: userMetadata.city || supabaseUser.user_metadata?.city || '',\n    preferences: userMetadata.preferences || supabaseUser.user_metadata?.preferences || [],\n    language: userMetadata.language || supabaseUser.user_metadata?.language || 'en',\n    newsletter: userMetadata.newsletter !== false,\n    bio: userMetadata.bio || supabaseUser.user_metadata?.bio || '',\n    emailVerified: supabaseUser.email_confirmed_at !== null,\n    createdAt: supabaseUser.created_at,\n  };\n};\n\n/**\n * Fetch admin account from database (if exists)\n */\nconst fetchAdminAccount = async (userId) => {\n  try {\n    const { data, error } = await supabase\n      .from('admin_accounts')\n      .select('*')\n      .eq('user_id', userId)\n      .eq('is_active', true)\n      .single();"
    },
    {
      "path": "src\\context\\BookingContext.jsx",
      "ext": ".jsx",
      "size": 10788,
      "mtime": 1764738249523.0322,
      "lines": 329,
      "snippet": "import { createContext, useContext, useState, useEffect } from 'react';\nimport { isBookingEmailConfigured, sendBookingConfirmationEmail } from '../utils/emailService';\nimport {\n  createBooking, // for room bookings\n  updateBookingStatus, // for room bookings\n  createRestaurantBooking,\n  updateRestaurantBookingStatus,\n  createSpaBooking,\n  updateSpaBookingStatus,\n} from '../services/bookingService';\n\nconst BookingContext = createContext();\n\nconst getInitialBookings = (type) => {\n  try {\n    const key = `hotel_${type}_bookings`;\n    return JSON.parse(localStorage.getItem(key)) || [];\n  } catch (error) {\n    console.error(`Failed to parse stored ${type} bookings`, error);\n    return [];\n  }\n};\n\nconst persistBookings = (bookings, type) => {\n  const key = `hotel_${type}_bookings`;\n  localStorage.setItem(key, JSON.stringify(bookings));\n};\n\nconst createId = () => {\n  if (typeof crypto !== 'undefined' && crypto.randomUUID) {\n    return crypto.randomUUID();\n  }\n  return Date.now().toString();\n};\n\nexport const BookingProvider = ({ children }) => {\n  const [roomBookings, setRoomBookings] = useState(() => getInitialBookings('room'));\n  const [restaurantBookings, setRestaurantBookings] = useState(() => getInitialBookings('restaurant'));\n  const [spaBookings, setSpaBookings] = useState(() => getInitialBookings('spa'));\n"
    },
    {
      "path": "src\\context\\LanguageContext.jsx",
      "ext": ".jsx",
      "size": 1319,
      "mtime": 1764738249523.0322,
      "lines": 46,
      "snippet": "import { createContext, useContext, useEffect, useMemo, useState, useCallback } from 'react';\nimport translations from '../constants/translations';\n\nconst LanguageInfo = createContext();\n\nconst getNestedValue = (obj, path) => {\n  return path.split('.').reduce((acc, segment) => (acc && acc[segment] !== undefined ? acc[segment] : null), obj);\n};\n\nexport const LanguageProvider = ({ children }) => {\n  const [language, setLanguage] = useState(() => {\n    return localStorage.getItem('hotel_language') || 'en';\n  });\n\n  useEffect(() => {\n    localStorage.setItem('hotel_language', language);\n  }, [language]);\n\n  const t = useCallback(\n    (key, fallbackValue) => {\n      const value = getNestedValue(translations[language], key);\n      if (typeof value === 'function') {\n        return value(fallbackValue);\n      }\n      if (value !== null && value !== undefined) return value;\n      const fallback = getNestedValue(translations.en, key);\n      return fallback ?? fallbackValue ?? key;\n    },\n    [language]\n  );\n\n  const value = useMemo(\n    () => ({\n      language,\n      setLanguage,\n      t,\n    }),\n    [language, t]\n  );\n"
    },
    {
      "path": "src\\context\\RoomContext.jsx",
      "ext": ".jsx",
      "size": 31157,
      "mtime": 1764738249524.03,
      "lines": 1000,
      "snippet": "import { createContext, useContext, useEffect, useMemo, useState } from \"react\";\nimport {\n  isBookingEmailConfigured,\n  sendBookingConfirmationEmail,\n} from \"../utils/emailService\";\nimport {\n  fetchRoomsWithImages,\n  fetchRoomReviews,\n  createReview,\n  checkRoomAvailability,\n  hasUserBookedRoomType,\n  fetchPriceRules,\n  fetchPromotions,\n} from \"../services/roomService\";\nimport {\n  fetchUserBookings,\n  createBooking,\n  updateBookingStatus,\n} from \"../services/bookingService\";\n\nconst RoomInfo = createContext();\n\nconst HOLIDAY_CALENDAR = [\n  \"2025-01-01\",\n  \"2025-02-03\",\n  \"2025-04-30\",\n  \"2025-05-01\",\n  \"2025-09-02\",\n  \"2025-12-24\",\n  \"2025-12-31\",\n];\n\nconst PRICING_DEFAULTS = {\n  weekendMultiplier: 1.15,\n  holidayMultiplier: 1.35,\n  hourlyRateFactor: 0.25,\n};\n\nconst getInitialReviews = () => {\n  try {"
    },
    {
      "path": "src\\constants\\data.js",
      "ext": ".js",
      "size": 1092,
      "mtime": 1764738249522.0378,
      "lines": 57,
      "snippet": "import { FaCheck } from \"react-icons/fa\";\nimport images from \"../assets\";\n\n\nexport const adultsList = [\n    { name: '1 Adult' },\n    { name: '2 Adults' },\n    { name: '3 Adults' },\n    { name: '4 Adults' },\n]\n\n\nexport const kidsList = [\n    { name: '0 Kid' },\n    { name: '1 Kid' },\n    { name: '2 Kids' },\n    { name: '3 Kids' },\n    { name: '4 Kids' },\n]\n\n\nexport const sliderData = [\n    {\n        id: 1,\n        title: 'Your Luxury Hotel For Vacation',\n        bg: images.Slider1,\n        btnNext: 'See our rooms',\n    },\n    {\n        id: 2,\n        title: 'Feel Relax & Enjoy Your Luxuriousness',\n        bg: images.Slider2,\n        btnNext: 'See our rooms',\n    },\n    {\n        id: 3,\n        title: 'Your Luxury Hotel For Vacation',\n        bg: images.Slider3,\n        btnNext: 'See our rooms',\n    },"
    },
    {
      "path": "src\\constants\\translations.js",
      "ext": ".js",
      "size": 4807,
      "mtime": 1764738249522.0378,
      "lines": 158,
      "snippet": "const translations = {\n  en: {\n    header: {\n      home: 'Home',\n      rooms: 'Rooms',\n      restaurant: 'Restaurant',\n      spa: 'Spa',\n      contact: 'Contact',\n      dashboard: 'Dashboard',\n      admin: 'Admin',\n      signIn: 'Sign In',\n      signOut: 'Sign Out',\n      signUp: 'Sign Up',\n      languageLabel: 'Language',\n    },\n    common: {\n      bookRoom: 'Book a room',\n      backHome: 'Back to homepage',\n      manageBooking: 'Manage booking',\n      confirmed: 'confirmed',\n      bookingType: {\n        room: 'Room',\n        restaurant: 'Restaurant',\n        spa: 'Spa',\n      }\n    },\n    languageSwitcher: {\n      english: 'EN',\n      vietnamese: 'VI',\n    },\n    userDashboard: {\n      tabs: {\n        overview: 'Overview',\n        bookings: 'Bookings',\n        profile: 'Profile & Preferences',\n      },\n      filters: {\n        upcoming: 'Upcoming',\n        past: 'Past',\n        cancelled: 'Cancelled',"
    },
    {
      "path": "src\\components\\AdminSidebar.jsx",
      "ext": ".jsx",
      "size": 5256,
      "mtime": 1764738249507.515,
      "lines": 144,
      "snippet": "import { Link, useNavigate } from 'react-router-dom';\nimport {\n  FaHome,\n  FaBed,\n  FaDoorOpen,\n  FaDollarSign,\n  FaTag,\n  FaCalendarCheck,\n  FaHistory,\n  FaChartBar,\n  FaSignOutAlt,\n  FaUser,\n  FaUsers\n} from 'react-icons/fa';\nimport { LogoDark } from '../assets';\nimport { useAuth } from '../context/AuthContext';\nimport { useMemo } from 'react';\n\nconst AdminSidebar = ({ activeSection, setActiveSection }) => {\n  const { user, logout, updateUserProfile } = useAuth();\n  const navigate = useNavigate();\n\n  const avatarLetter = useMemo(() => {\n    if (!user?.name && !user?.email) return '';\n    return (user.name || user.email).charAt(0).toUpperCase();\n  }, [user]);\n\n  const handleLogout = () => {\n    logout();\n    navigate('/');\n  };\n\n  const handleAvatarChange = (event) => {\n    const file = event.target.files?.[0];\n    if (!file) return;\n    const reader = new FileReader();\n    reader.onloadend = () => {\n      updateUserProfile({ avatar: reader.result });\n    };\n    reader.readAsDataURL(file);"
    },
    {
      "path": "src\\components\\AdultsDropdown.jsx",
      "ext": ".jsx",
      "size": 1152,
      "mtime": 1764738249508.4973,
      "lines": 43,
      "snippet": "import { useRoomContext } from '../context/RoomContext';\nimport { BsChevronDown } from 'react-icons/bs';\nimport { adultsList } from '../constants/data';\nimport { Menu } from '@headlessui/react';\n\n\nconst AdultsDropdown = () => {\n\n  const { adults, setAdults, } = useRoomContext();\n\n\n  return (\n    <Menu as='div' className='w-full h-full bg-white relative'>\n\n\n      <Menu.Button className='w-full h-full flex items-center justify-between px-8'>\n        {adults}\n        <BsChevronDown className='text-base text-accent-hover' />\n      </Menu.Button>\n\n\n      <Menu.Items as='ul' className='bg-white absolute w-full flex flex-col z-40'>\n        {\n          adultsList.map(({ name }, idx) =>\n            <Menu.Item\n              as='li'\n              key={idx}\n              onClick={() => setAdults(name)}\n              className='border-b last-of-type:border-b-0 h-10 hover:bg-accent hover:text-white w-full flex items-center justify-center cursor-pointer'\n            >\n              {name}\n            </Menu.Item>\n          )\n        }\n      </Menu.Items>\n\n\n    </Menu>\n  );\n};"
    },
    {
      "path": "src\\components\\BookForm.jsx",
      "ext": ".jsx",
      "size": 1626,
      "mtime": 1764738249508.4973,
      "lines": 58,
      "snippet": "import {\n  AdultsDropdown,\n  CheckIn,\n  CheckOut,\n  KidsDropdown,\n  RoomTypeSelector,\n} from \".\";\nimport { useRoomContext } from \"../context/RoomContext\";\n\nconst BookForm = () => {\n  const { handleCheck } = useRoomContext();\n\n  const handleSubmit = (e) => {\n    handleCheck(e);\n    // Scroll to rooms section after a short delay to allow filtering\n    setTimeout(() => {\n      const roomsSection = document.getElementById(\"rooms-section\");\n      if (roomsSection) {\n        roomsSection.scrollIntoView({ behavior: \"smooth\", block: \"start\" });\n      }\n    }, 900);\n  };\n\n  return (\n    <form className=\"w-full\" onSubmit={handleSubmit}>\n      <div className=\"flex flex-col lg:flex-row lg:items-stretch w-full divide-y lg:divide-y-0 lg:divide-x divide-gray-200\">\n        <div className=\"flex-1 min-h-[60px] lg:min-h-auto\">\n          <CheckIn />\n        </div>\n\n        <div className=\"flex-1 min-h-[60px] lg:min-h-auto\">\n          <CheckOut />\n        </div>\n\n        <div className=\"flex-1 min-h-[60px] lg:min-h-auto\">\n          <RoomTypeSelector />\n        </div>\n\n        <div className=\"flex-1 min-h-[60px] lg:min-h-auto\">\n          <AdultsDropdown />"
    },
    {
      "path": "src\\components\\CategoryFilter.jsx",
      "ext": ".jsx",
      "size": 2290,
      "mtime": 1764738249508.4973,
      "lines": 67,
      "snippet": "import React, { useMemo } from \"react\";\nimport { useRoomContext } from \"../context/RoomContext\";\n\nconst CategoryFilter = () => {\n  const { allRooms, selectedCategory, updateCategory } = useRoomContext();\n\n  // Derive categories from actual room types in Supabase\n  const roomTypes = useMemo(() => {\n    const typeMap = new Map();\n    allRooms.forEach((room) => {\n      if (room.type && !typeMap.has(room.type)) {\n        typeMap.set(room.type, {\n          id: room.category,\n          code: room.type,\n          name: room.type === 'STD' ? 'Standard' : \n                room.type === 'DLX' ? 'Deluxe' :\n                room.type === 'SUI' ? 'Suite' :\n                room.type === 'PEN' ? 'Penthouse' :\n                room.type === 'CMB' ? 'Combo Package' :\n                room.type,\n          description: `${room.type} rooms`\n        });\n      }\n    });\n    return Array.from(typeMap.values()).sort((a, b) => a.code.localeCompare(b.code));\n  }, [allRooms]);\n\n  return (\n    <div className=\"mb-8 p-6 bg-white rounded-lg shadow-md\">\n      <h3 className=\"text-lg font-bold text-gray-800 mb-4\">\n        Filter by Room Type\n      </h3>\n      <div className=\"flex flex-wrap gap-3\">\n        {/* All Rooms Button */}\n        <button\n          onClick={() => updateCategory(null)}\n          className={`px-6 py-2 rounded-full font-medium transition-all duration-300 ${\n            selectedCategory === null\n              ? \"bg-teal-600 text-white shadow-lg\"\n              : \"bg-gray-100 text-gray-700 hover:bg-gray-200\""
    },
    {
      "path": "src\\components\\CheckIn.jsx",
      "ext": ".jsx",
      "size": 1115,
      "mtime": 1764762903308.69,
      "lines": 39,
      "snippet": "import { BsCalendar } from 'react-icons/bs';\nimport DatePicker from 'react-datepicker';\nimport 'react-datepicker/dist/react-datepicker.css';\nimport '../style/datepicker.css';\nimport { useRoomContext } from '../context/RoomContext';\n\nconst CheckIn = () => {\n  const { checkInDate, setCheckInDate, checkOutDate, setCheckOutDate } = useRoomContext();\n\n  const handleChange = (date) => {\n    // Validate: can't check in on past dates\n    if (date && date < new Date(new Date().setHours(0, 0, 0, 0))) {\n      return;\n    }\n    setCheckInDate(date);\n    if (checkOutDate && date && date >= checkOutDate) {\n      setCheckOutDate(null);\n    }\n  };\n\n  return (\n    <div className='relative flex items-center justify-end h-full'>\n      <div className='absolute z-10 pr-8'>\n        <div><BsCalendar className='text-accent text-base' /></div>\n      </div>\n\n      <DatePicker\n        className='w-full h-full'\n        selected={checkInDate}\n        placeholderText='Check in'\n        minDate={new Date()}\n        onChange={handleChange}\n      />\n    </div>\n  );\n};\n\nexport default CheckIn;\n"
    },
    {
      "path": "src\\components\\CheckOut.jsx",
      "ext": ".jsx",
      "size": 954,
      "mtime": 1764738249509.5063,
      "lines": 32,
      "snippet": "import { BsCalendar } from 'react-icons/bs';\nimport DatePicker from 'react-datepicker';\nimport 'react-datepicker/dist/react-datepicker.css';\nimport '../style/datepicker.css';\nimport { useRoomContext } from '../context/RoomContext';\n\nconst CheckOut = () => {\n  const { checkInDate, checkOutDate, setCheckOutDate } = useRoomContext();\n\n  const minDate = checkInDate ? new Date(checkInDate.getTime() + 24 * 60 * 60 * 1000) : new Date();\n\n  return (\n    <div className='relative flex items-center justify-end h-full'>\n      <div className='absolute z-10 pr-8'>\n        <div><BsCalendar className='text-accent text-base' /></div>\n      </div>\n\n      <DatePicker\n        className='w-full h-full'\n        selected={checkOutDate}\n        placeholderText='Check out'\n        minDate={minDate}\n        onChange={(date) => setCheckOutDate(date)}\n        disabled={!checkInDate}\n      />\n\n    </div>\n  );\n};\n\nexport default CheckOut;\n"
    },
    {
      "path": "src\\components\\Footer.jsx",
      "ext": ".jsx",
      "size": 609,
      "mtime": 1764738249510.4966,
      "lines": 16,
      "snippet": "const STORAGE_URL = 'https://sxteddkozzqniebfstag.supabase.co/storage/v1/object/public/hotel-rooms/img';\n\nconst Footer = () => (\n  <footer className='bg-primary py-12'>\n    <div className='container mx-auto text-white flex items-center gap-5 sm:justify-between flex-col sm:flex-row'>\n      <a href=\"/\">\n        <img src={`${STORAGE_URL}/logo-white.svg`} alt=\"logo\" className=\"w-[120px]\" />\n      </a>\n      <div className=\"flex flex-col items-center\">\n        <p>Copyright &copy; {new Date().getFullYear()}, All Right Reserved,</p>\n      </div>\n    </div>\n  </footer>\n);\n\nexport default Footer;"
    },
    {
      "path": "src\\components\\Header.jsx",
      "ext": ".jsx",
      "size": 5853,
      "mtime": 1764738249510.4966,
      "lines": 160,
      "snippet": "import { useRoomContext } from \"../context/RoomContext\";\nimport { useAuth } from \"../context/AuthContext\";\nimport { useEffect, useMemo, useState } from \"react\";\nimport { Link, useNavigate, useLocation } from \"react-router-dom\";\nimport { FaUser, FaSignOutAlt, FaSignInAlt } from \"react-icons/fa\";\n\nconst STORAGE_URL = 'https://sxteddkozzqniebfstag.supabase.co/storage/v1/object/public/hotel-rooms/img';\n\nconst Header = () => {\n  const { resetRoomFilterData } = useRoomContext();\n  const { user, logout, isAuthenticated } = useAuth();\n  const navigate = useNavigate();\n  const location = useLocation();\n\n  const [header, setHeader] = useState(false);\n\n  useEffect(() => {\n    const handleScroll = () => {\n      if (location.pathname !== \"/\") {\n        setHeader(true);\n      } else {\n        setHeader(window.scrollY > 50);\n      }\n    };\n\n    handleScroll();\n    window.addEventListener(\"scroll\", handleScroll);\n    return () => window.removeEventListener(\"scroll\", handleScroll);\n  }, [location.pathname]);\n\n  const navLinks = [\n    { label: \"Home\", path: \"/\" },\n    { label: \"Rooms\", path: \"/rooms\" },\n    { label: \"Restaurant\", path: \"/restaurant\" },\n    { label: \"Spa\", path: \"/spa\" },\n    { label: \"Contact\", path: \"/contact\" },\n  ];\n\n  const handleLogout = () => {\n    logout();"
    },
    {
      "path": "src\\components\\HeroSlider.jsx",
      "ext": ".jsx",
      "size": 1567,
      "mtime": 1764738249510.4966,
      "lines": 45,
      "snippet": "import { Swiper, SwiperSlide } from 'swiper/react';\nimport { sliderData } from '../constants/data';\nimport { EffectFade, Autoplay } from 'swiper';\nimport 'swiper/css/effect-fade';\nimport 'swiper/css';\n\nconst STORAGE_URL = 'https://sxteddkozzqniebfstag.supabase.co/storage/v1/object/public/hotel-rooms';\n\nconst HeroSlider = () => {\n  return (\n    <Swiper\n      modules={[EffectFade, Autoplay]}\n      effect={'fade'}\n      loop={true}\n      autoplay={{\n        delay: 3000,\n        disableOnInteraction: false,\n      }}\n      className='heroSlider h-[600px] lg:h-[860px]'\n    >\n      {\n        sliderData.map(({ id, title, btnNext }) =>\n          <SwiperSlide className='h-full relative flex justify-center items-center' key={id}>\n\n            <div className='z-20 text-white text-center'>\n              <div className='uppercase font-tertiary tracking-[6px] mb-5'>Just Enjoy & Relax</div>\n              <h1 className='font-primary text-[32px] uppercase tracking-[2px] max-w-[920px] lg:text-[68px] leading-tight mb-6'>\n                {title}\n              </h1>\n              <button className='btn btn-lg btn-primary mx-auto'>{btnNext}</button>\n            </div>\n\n            <div className='absolute top-0 w-full h-full'>\n              <img className='object-cover h-full w-full' src={`${STORAGE_URL}/img/heroSlider/${id}.jpg`} alt={title} />\n            </div>\n\n            <div className='absolute w-full h-full bg-black/70' />\n          </SwiperSlide>\n        )\n      }"
    },
    {
      "path": "src\\components\\index.js",
      "ext": ".js",
      "size": 1166,
      "mtime": 1764738249521.043,
      "lines": 23,
      "snippet": "export { default as AdultsDropdown } from \"./AdultsDropdown\";\nexport { default as PageNotFound } from \"./PageNotFound\";\nexport { default as KidsDropdown } from \"./KidsDropdown\";\nexport { default as HeroSlider } from \"./HeroSlider\";\nexport { default as BookForm } from \"./BookForm\";\nexport { default as CheckOut } from \"./CheckOut\";\nexport { default as CheckIn } from \"./CheckIn\";\nexport { default as Footer } from \"./Footer\";\nexport { default as Header } from \"./Header\";\nexport { default as Rooms } from \"./Rooms\";\nexport { default as Room } from \"./Room\";\nexport { default as AdminSidebar } from \"./AdminSidebar\";\nexport { default as ProtectedRoute } from \"./ProtectedRoute\";\nexport { default as Toast } from \"./Toast\";\nexport { default as LanguageSwitcher } from \"./LanguageSwitcher\";\nexport { default as QRPaymentModal } from \"./QRPaymentModal\";\nexport { default as Invoice } from \"./Invoice\";\nexport { default as Pagination } from \"./Pagination\";\nexport { default as CategoryFilter } from \"./CategoryFilter\";\nexport { default as RoomTypeSelector } from \"./RoomTypeSelector\";\n\nexport { default as ScrollToTop } from \"../utils/ScrollToTop\";\n"
    },
    {
      "path": "src\\components\\Invoice.jsx",
      "ext": ".jsx",
      "size": 18731,
      "mtime": 1764738249511.4993,
      "lines": 424,
      "snippet": "import { useRef } from \"react\";\nimport { FaFileInvoice, FaEnvelope, FaTimes } from \"react-icons/fa\";\nimport { LogoDark } from \"../assets\";\n\nconst Invoice = ({ booking, onClose, onDownload, onEmail }) => {\n  const invoiceRef = useRef(null);\n  const formatDate = (dateString) => {\n    if (!dateString) return \"N/A\";\n    const date = new Date(dateString);\n    return date.toLocaleDateString(\"en-US\", {\n      year: \"numeric\",\n      month: \"long\",\n      day: \"numeric\",\n    });\n  };\n\n  const formatDateTime = (dateString) => {\n    if (!dateString) return \"N/A\";\n    const date = new Date(dateString);\n    return date.toLocaleString(\"en-US\", {\n      year: \"numeric\",\n      month: \"long\",\n      day: \"numeric\",\n      hour: \"2-digit\",\n      minute: \"2-digit\",\n    });\n  };\n\n  const getBookingType = () => {\n    if (booking.type === \"restaurant\") return \"Restaurant Reservation\";\n    if (booking.type === \"spa\") return \"Spa Appointment\";\n    return \"Room Booking\";\n  };\n\n  return (\n    <div\n      className=\"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4 overflow-y-auto\"\n      onClick={(e) => {\n        if (e.target === e.currentTarget && onClose) {\n          onClose();"
    },
    {
      "path": "src\\components\\KidsDropdown.jsx",
      "ext": ".jsx",
      "size": 1304,
      "mtime": 1764738249511.4993,
      "lines": 43,
      "snippet": "import { useRoomContext } from '../context/RoomContext';\nimport { BsChevronDown } from 'react-icons/bs';\nimport { kidsList } from '../constants/data';\nimport { Menu } from '@headlessui/react';\n\n\nconst KidsDropdown = () => {\n\n  const { kids, setKids } = useRoomContext();\n\n\n  return (\n    <Menu as='div' className='w-full h-full bg-white relative'>\n\n\n      <Menu.Button className='w-full h-full flex items-center justify-between px-8 hover:bg-accent/5 transition'>\n        {kids === '0 Kid' ? 'No Kid' : kids}\n        <BsChevronDown className='text-base text-accent-hover' />\n      </Menu.Button>\n\n\n      <Menu.Items as='ul' className='bg-white absolute w-full flex flex-col z-50 mt-1 shadow-lg border border-[#eadfcf] max-h-60 overflow-y-auto'>\n        {\n          kidsList.map(({ name }, idx) =>\n            <Menu.Item\n              as='li'\n              key={idx}\n              onClick={() => setKids(name)}\n              className='border-b last-of-type:border-b-0 h-12 hover:bg-accent hover:text-white w-full flex items-center justify-center cursor-pointer transition px-4'\n            >\n              {name === '0 Kid' ? 'No Kid' : name}\n            </Menu.Item>\n          )\n        }\n      </Menu.Items>\n\n\n    </Menu>\n  );\n};"
    },
    {
      "path": "src\\components\\LanguageSwitcher.jsx",
      "ext": ".jsx",
      "size": 843,
      "mtime": 1764738249512.4954,
      "lines": 29,
      "snippet": "import { useLanguage } from '../context/LanguageContext';\n\nconst LanguageSwitcher = () => {\n  const { language, setLanguage, t } = useLanguage();\n  const options = [\n    { code: 'en', label: t('languageSwitcher.english') },\n    { code: 'vi', label: t('languageSwitcher.vietnamese') },\n  ];\n\n  return (\n    <div className='flex items-center border border-current/20 rounded-full overflow-hidden text-xs uppercase tracking-[2px]'>\n      {options.map((option) => (\n        <button\n          key={option.code}\n          onClick={() => setLanguage(option.code)}\n          className={`px-2 py-1 transition ${\n            language === option.code ? 'bg-accent text-white' : 'bg-transparent'\n          }`}\n        >\n          {option.label}\n        </button>\n      ))}\n    </div>\n  );\n};\n\nexport default LanguageSwitcher;\n\n"
    },
    {
      "path": "src\\components\\NotificationContainer.jsx",
      "ext": ".jsx",
      "size": 2208,
      "mtime": 1764738249512.4954,
      "lines": 67,
      "snippet": "import { useState, useEffect } from 'react';\nimport { FaCheckCircle, FaExclamationCircle, FaInfoCircle, FaTimesCircle, FaTimes } from 'react-icons/fa';\nimport { subscribeToNotifications, removeNotification } from '../utils/notifications';\n\nconst NotificationContainer = () => {\n  const [notifications, setNotifications] = useState([]);\n\n  useEffect(() => {\n    const unsubscribe = subscribeToNotifications(setNotifications);\n    return unsubscribe;\n  }, []);\n\n  const getIcon = (type) => {\n    switch (type) {\n      case 'success':\n        return <FaCheckCircle className=\"text-green-500\" />;\n      case 'error':\n        return <FaTimesCircle className=\"text-red-500\" />;\n      case 'warning':\n        return <FaExclamationCircle className=\"text-yellow-500\" />;\n      case 'info':\n      default:\n        return <FaInfoCircle className=\"text-blue-500\" />;\n    }\n  };\n\n  const getStyles = (type) => {\n    switch (type) {\n      case 'success':\n        return 'bg-green-50 border-green-200 text-green-800';\n      case 'error':\n        return 'bg-red-50 border-red-200 text-red-800';\n      case 'warning':\n        return 'bg-yellow-50 border-yellow-200 text-yellow-800';\n      case 'info':\n      default:\n        return 'bg-blue-50 border-blue-200 text-blue-800';\n    }\n  };\n"
    },
    {
      "path": "src\\components\\PageNotFound.jsx",
      "ext": ".jsx",
      "size": 143,
      "mtime": 1764738249512.4954,
      "lines": 9,
      "snippet": "import React from 'react'\n\nconst PageNotFound = () => {\n  return (\n    <div>404 Page Not Found</div>\n  )\n}\n\nexport default PageNotFound"
    },
    {
      "path": "src\\components\\Pagination.jsx",
      "ext": ".jsx",
      "size": 4565,
      "mtime": 1764738249513.4978,
      "lines": 126,
      "snippet": "import { FaChevronLeft, FaChevronRight } from \"react-icons/fa\";\n\nconst Pagination = ({\n  currentPage,\n  totalPages,\n  onPageChange,\n  itemsPerPage,\n  totalItems,\n}) => {\n  if (totalPages <= 1) return null;\n\n  // Generate page numbers to display\n  const getPageNumbers = () => {\n    const pages = [];\n    const maxPagesToShow = 7;\n    const halfRange = Math.floor(maxPagesToShow / 2);\n\n    let startPage = Math.max(1, currentPage - halfRange);\n    let endPage = Math.min(totalPages, startPage + maxPagesToShow - 1);\n\n    if (endPage - startPage < maxPagesToShow - 1) {\n      startPage = Math.max(1, endPage - maxPagesToShow + 1);\n    }\n\n    if (startPage > 1) {\n      pages.push(1);\n      if (startPage > 2) {\n        pages.push(\"...\");\n      }\n    }\n\n    for (let i = startPage; i <= endPage; i++) {\n      pages.push(i);\n    }\n\n    if (endPage < totalPages) {\n      if (endPage < totalPages - 1) {\n        pages.push(\"...\");\n      }\n      pages.push(totalPages);"
    },
    {
      "path": "src\\components\\ProtectedRoute.jsx",
      "ext": ".jsx",
      "size": 1682,
      "mtime": 1764770654859.8877,
      "lines": 51,
      "snippet": "import { Navigate, useLocation } from 'react-router-dom';\nimport { useAuth } from '../context/AuthContext';\nimport { FaSpinner } from 'react-icons/fa';\n\nconst ProtectedRoute = ({ children, requireAdmin = false, disallowAdmin = false, redirectTo }) => {\n  const { isAuthenticated, isAdmin, loading, session } = useAuth();\n  const location = useLocation();\n  const fallbackLogin = redirectTo || (requireAdmin ? '/login' : '/login');\n\n  if (loading) {\n    return (\n      <div className=\"min-h-screen flex items-center justify-center bg-gray-50\">\n        <div className=\"text-center\">\n          <FaSpinner className=\"animate-spin text-4xl text-accent mx-auto mb-4\" />\n          <p className=\"text-gray-600\">Checking authentication...</p>\n        </div>\n      </div>\n    );\n  }\n\n  // Check if user has valid session\n  if (!isAuthenticated() || !session) {\n    return <Navigate to={fallbackLogin} state={{ from: location }} replace />;\n  }\n\n  // Admin-only route check\n  if (requireAdmin && !isAdmin()) {\n    return (\n      <div className=\"min-h-screen flex items-center justify-center bg-gray-50\">\n        <div className=\"text-center max-w-md p-8\">\n          <h1 className=\"h2 text-primary mb-4\">Access Denied</h1>\n          <p className=\"text-gray-600 mb-6\">\n            Admin access required.\n          </p>\n          <a href=\"/\" className=\"btn btn-primary btn-sm\">\n            Go Home\n          </a>\n        </div>\n      </div>\n    );"
    },
    {
      "path": "src\\components\\QRPayment.jsx",
      "ext": ".jsx",
      "size": 5818,
      "mtime": 1764738249513.4978,
      "lines": 172,
      "snippet": "import { useState, useEffect } from 'react';\nimport { QRCodeSVG } from 'qrcode.react';\nimport { FaQrcode, FaClock, FaCheckCircle, FaTimes } from 'react-icons/fa';\n\nconst QRPayment = ({ \n  bookingData, \n  onPaymentSuccess, \n  onClose,\n  type = 'room' // 'room', 'restaurant', 'spa'\n}) => {\n  const [timeLeft, setTimeLeft] = useState(15 * 60); // 15 minutes in seconds\n  const [isPaid, setIsPaid] = useState(false);\n  const [paymentCode] = useState(() => {\n    // Generate a unique payment code\n    return `PAY-${Date.now()}-${Math.random().toString(36).substring(2, 8).toUpperCase()}`;\n  });\n\n  useEffect(() => {\n    if (isPaid || timeLeft <= 0) return;\n\n    const timer = setInterval(() => {\n      setTimeLeft((prev) => {\n        if (prev <= 1) {\n          clearInterval(timer);\n          return 0;\n        }\n        return prev - 1;\n      });\n    }, 1000);\n\n    return () => clearInterval(timer);\n  }, [isPaid, timeLeft]);\n\n  const formatTime = (seconds) => {\n    const mins = Math.floor(seconds / 60);\n    const secs = seconds % 60;\n    return `${mins.toString().padStart(2, '0')}:${secs.toString().padStart(2, '0')}`;\n  };\n\n  const handleSimulatePayment = () => {"
    },
    {
      "path": "src\\components\\QRPaymentModal.jsx",
      "ext": ".jsx",
      "size": 7900,
      "mtime": 1764738249514.4976,
      "lines": 185,
      "snippet": "import { useState } from \"react\";\nimport { FaTimes, FaCheck, FaCopy } from \"react-icons/fa\";\n\nconst QRPaymentModal = ({ booking, onConfirmPayment, onClose }) => {\n  const [paymentConfirmed, setPaymentConfirmed] = useState(false);\n  const [copied, setCopied] = useState(false);\n\n  const handleCopyCode = () => {\n    navigator.clipboard.writeText(booking.confirmationCode);\n    setCopied(true);\n    setTimeout(() => setCopied(false), 2000);\n  };\n\n  if (!booking) return null;\n\n  return (\n    <div className=\"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4\">\n      <div className=\"bg-white rounded-2xl shadow-2xl max-w-md w-full p-6 space-y-6\">\n        {!paymentConfirmed ? (\n          <>\n            {/* Header */}\n            <div className=\"flex items-center justify-between\">\n              <h3 className=\"text-2xl font-primary text-primary\">QR Payment</h3>\n              <button\n                onClick={onClose}\n                className=\"text-primary/60 hover:text-primary p-1 hover:bg-gray-100 rounded-full transition\"\n              >\n                <FaTimes size={20} />\n              </button>\n            </div>\n\n            {/* Booking Summary */}\n            <div className=\"bg-gradient-to-r from-blue-50 to-blue-100 p-4 rounded-lg space-y-2 text-sm\">\n              <p className=\"text-primary/70\">\n                <span className=\"font-semibold\">Room:</span> {booking.roomName}\n              </p>\n              <p className=\"text-primary/70\">\n                <span className=\"font-semibold\">Check-in:</span>{\" \"}\n                {booking.checkIn}\n              </p>"
    },
    {
      "path": "src\\components\\Room.jsx",
      "ext": ".jsx",
      "size": 3855,
      "mtime": 1764738249514.4976,
      "lines": 111,
      "snippet": "import { BsArrowsFullscreen, BsPeople } from \"react-icons/bs\";\nimport { FaStar } from \"react-icons/fa\";\nimport { Link } from \"react-router-dom\";\n\nconst PLACEHOLDER_IMG = \"data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='400' height='300'%3E%3Crect fill='%23ddd' width='400' height='300'/%3E%3Ctext x='50%' y='50%' font-size='18' fill='%23999' text-anchor='middle' dy='.3em'%3ELoading image...%3C/text%3E%3C/svg%3E\";\n\nconst Room = ({ room }) => {\n  if (!room) return null;\n\n  const {\n    id,\n    name,\n    image,\n    size,\n    maxPerson,\n    description,\n    price,\n    type,\n    reviews,\n  } = room;\n\n  // Use Supabase image URL if available\n  const displayImage = image || PLACEHOLDER_IMG;\n\n  // Calculate average rating from reviews\n  const averageRating = reviews && reviews.length > 0\n    ? Math.round(reviews.reduce((sum, r) => sum + r.rating, 0) / reviews.length)\n    : 4;\n\n  return (\n    <div className=\"bg-white shadow-2xl min-h-[500px] group relative\">\n      <div className=\"overflow-hidden\">\n        <img\n          src={displayImage}\n          alt={name || \"room\"}\n          className=\"group-hover:scale-110 transition-all duration-300 w-full object-cover h-64\"\n          onError={(e) => {\n            console.warn('Image failed to load from Supabase:', displayImage);\n            e.target.src = PLACEHOLDER_IMG;\n          }}"
    },
    {
      "path": "src\\components\\Rooms.jsx",
      "ext": ".jsx",
      "size": 2616,
      "mtime": 1764738249515.5066,
      "lines": 79,
      "snippet": "import { useRoomContext } from \"../context/RoomContext\";\nimport { SpinnerDotted } from \"spinners-react\";\nimport { Room, Pagination } from \".\";\nimport { useState, useMemo } from \"react\";\n\nconst Rooms = () => {\n  const { rooms, loading } = useRoomContext();\n  const [currentPage, setCurrentPage] = useState(1);\n  const itemsPerPage = 12;\n\n  const { paginatedRooms, totalPages } = useMemo(() => {\n    const validRooms = Array.isArray(rooms) ? rooms : [];\n    const total = Math.ceil(validRooms.length / itemsPerPage);\n    const start = (currentPage - 1) * itemsPerPage;\n    const end = start + itemsPerPage;\n    return {\n      paginatedRooms: validRooms.slice(start, end),\n      totalPages: total || 1,\n    };\n  }, [rooms, currentPage]);\n\n  const handlePageChange = (page) => {\n    setCurrentPage(page);\n    const roomsSection = document.getElementById(\"rooms-section\");\n    if (roomsSection) {\n      roomsSection.scrollIntoView({ behavior: \"smooth\", block: \"start\" });\n    }\n  };\n\n  if (loading) {\n    return (\n      <section id=\"rooms-section\" className=\"py-24\">\n        <div className=\"h-screen w-full fixed bottom-0 top-0 bg-black/80 z-50 grid place-items-center\">\n          <SpinnerDotted />\n        </div>\n      </section>\n    );\n  }\n\n  return ("
    },
    {
      "path": "src\\components\\RoomTypeSelector.jsx",
      "ext": ".jsx",
      "size": 1670,
      "mtime": 1764738249514.4976,
      "lines": 49,
      "snippet": "import { useRoomContext } from \"../context/RoomContext\";\nimport { useMemo } from \"react\";\n\nconst RoomTypeSelector = () => {\n  const { allRooms, selectedCategory, updateCategory } = useRoomContext();\n\n  // Derive room types from actual rooms in Supabase\n  const roomTypes = useMemo(() => {\n    const typeMap = new Map();\n    allRooms.forEach((room) => {\n      if (room.type && !typeMap.has(room.type)) {\n        typeMap.set(room.type, {\n          id: room.category,\n          code: room.type,\n          name: room.type === 'STD' ? 'Standard' : \n                room.type === 'DLX' ? 'Deluxe' :\n                room.type === 'SUI' ? 'Suite' :\n                room.type === 'PEN' ? 'Penthouse' :\n                room.type === 'CMB' ? 'Combo Package' :\n                room.type,\n        });\n      }\n    });\n    return Array.from(typeMap.values()).sort((a, b) => a.code.localeCompare(b.code));\n  }, [allRooms]);\n\n  return (\n    <div className=\"flex flex-col justify-center h-full px-4 lg:px-3 bg-white\">\n      <label className=\"text-xs uppercase tracking-[1px] text-primary/60 mb-2 lg:mb-1\">\n        Room Type\n      </label>\n      <select\n        value={selectedCategory || \"\"}\n        onChange={(e) => updateCategory(e.target.value || null)}\n        className=\"w-full border-0 outline-none bg-white text-sm text-primary font-medium cursor-pointer\"\n      >\n        <option value=\"\">All Rooms</option>\n        {roomTypes.map((roomType) => (\n          <option key={roomType.id} value={roomType.id}>\n            {roomType.name}"
    },
    {
      "path": "src\\components\\Toast.jsx",
      "ext": ".jsx",
      "size": 1190,
      "mtime": 1764738249515.5066,
      "lines": 44,
      "snippet": "import { useEffect } from 'react';\nimport { FaCheckCircle, FaTimesCircle, FaInfoCircle, FaTimes } from 'react-icons/fa';\n\nconst Toast = ({ message, type = 'success', onClose, duration = 3000 }) => {\n  useEffect(() => {\n    if (duration > 0) {\n      const timer = setTimeout(() => {\n        onClose();\n      }, duration);\n      return () => clearTimeout(timer);\n    }\n  }, [duration, onClose]);\n\n  const icons = {\n    success: FaCheckCircle,\n    error: FaTimesCircle,\n    info: FaInfoCircle,\n  };\n\n  const colors = {\n    success: 'bg-green-500',\n    error: 'bg-red-500',\n    info: 'bg-blue-500',\n  };\n\n  const Icon = icons[type] || FaInfoCircle;\n\n  return (\n    <div className={`fixed top-20 right-4 z-50 animate-slide-in-right ${colors[type]} text-white px-6 py-4 rounded-lg shadow-lg flex items-center gap-3 min-w-[300px] max-w-md`}>\n      <Icon className=\"text-xl flex-shrink-0\" />\n      <p className=\"flex-1 font-medium\">{message}</p>\n      <button\n        onClick={onClose}\n        className=\"flex-shrink-0 hover:bg-white/20 rounded p-1 transition-colors\"\n      >\n        <FaTimes />\n      </button>\n    </div>\n  );\n};"
    },
    {
      "path": "src\\components\\chatBox\\ChatBox.jsx",
      "ext": ".jsx",
      "size": 30752,
      "mtime": 1764738249521.043,
      "lines": 795,
      "snippet": "import { useState, useMemo, useEffect, useRef } from \"react\";\nimport { useNavigate } from \"react-router-dom\";\nimport { useRoomContext } from \"../../context/RoomContext\";\nimport { useAuth } from \"../../context/AuthContext\";\nimport { FiMessageCircle, FiX, FiSend } from \"react-icons/fi\";\nimport QRPaymentModal from \"../QRPaymentModal\";\n\n// AI Response templates for hotel consultation\nconst AI_RESPONSES = {\n  greetings: [\n    \"Hello! üëã I'm your booking assistant. I'll help you find the perfect room. What do you need?\",\n    \"Welcome! üè® I'm here to provide you with an amazing booking experience.\",\n  ],\n  room_suggestions: [\n    \"Based on your requirements, I recommend these rooms:\",\n    \"I found rooms that match your needs:\",\n  ],\n  price_inquiry: [\n    \"Room prices vary by season. Choose dates to see exact pricing!\",\n    \"Best rates on weekdays. Weekend rates are different!\",\n  ],\n  amenities: [\n    \"üèä Swimming Pool, üèãÔ∏è Gym, üçΩÔ∏è Restaurant, üßñ Spa\",\n    \"üé∞ Casino, üé™ Tennis Court, üö¥ Bike Rental\",\n  ],\n  special_requests: [\n    \"I've noted your special request. Our team will contact you soon!\",\n    \"A staff member will reach out to confirm this request.\",\n  ],\n};\n\nconst QuickReply = ({ label, onClick, icon = \"‚úì\" }) => (\n  <button\n    onClick={onClick}\n    className=\"px-4 py-2 text-sm rounded-full bg-blue-50 hover:bg-blue-100 text-blue-700 border border-blue-200 transition transform hover:scale-105 active:scale-95 duration-200 font-medium flex items-center gap-2 whitespace-nowrap\"\n  >\n    <span>{icon}</span>\n    {label}\n  </button>\n);"
    },
    {
      "path": "src\\components\\chatBox\\index.js",
      "ext": ".js",
      "size": 36,
      "mtime": 1764738249521.043,
      "lines": 1,
      "snippet": "export { default } from './ChatBox';"
    },
    {
      "path": "src\\components\\admin\\AuditLogsManagement.jsx",
      "ext": ".jsx",
      "size": 2152,
      "mtime": 1764738249516.506,
      "lines": 77,
      "snippet": "import { useEffect } from 'react';\nimport { useCRUD } from '../../hooks';\nimport { AdminHeader, AdminTable } from '../../features/admin';\nconst AuditLogsManagement = () => {\n  const { data: logs, isLoading, error, fetchData } = useCRUD(\n    'audit_logs',\n    '*'\n  );\n\n  useEffect(() => {\n    fetchData({}, { column: 'created_at', ascending: false });\n  }, [fetchData]);\n\n  // Table columns configuration\n  const columns = [\n    {\n      key: 'actor',\n      label: 'Actor',\n      render: (value) => <span className=\"font-semibold\">{value || 'System'}</span>\n    },\n    {\n      key: 'action',\n      label: 'Action',\n      render: (value) => (\n        <span className={`px-3 py-1 rounded-full text-sm font-semibold ${\n          value === 'create' ? 'bg-green-100 text-green-800' :\n          value === 'update' ? 'bg-blue-100 text-blue-800' :\n          value === 'delete' ? 'bg-red-100 text-red-800' :\n          'bg-gray-100 text-gray-800'\n        }`}>\n          {value?.toUpperCase() || 'N/A'}\n        </span>\n      )\n    },\n    {\n      key: 'table_name',\n      label: 'Table',\n      render: (value) => <span className=\"font-mono text-sm\">{value || '-'}</span>\n    },\n    {"
    },
    {
      "path": "src\\components\\admin\\BookingsManagement.jsx",
      "ext": ".jsx",
      "size": 21466,
      "mtime": 1764762867069.8516,
      "lines": 585,
      "snippet": "import { useState, useEffect } from \"react\";\nimport {\n  FaCheck,\n  FaTimes,\n  FaEdit,\n  FaTrash\n} from \"react-icons/fa\";\nimport {\n  fetchAllRoomBookingsForAdmin,\n  fetchAllRestaurantBookingsForAdmin,\n  fetchAllSpaBookingsForAdmin,\n  updateRoomBookingStatus,\n  updateRestaurantBookingStatus,\n  updateSpaBookingStatus,\n  deleteRoomBooking,\n  deleteRestaurantBooking,\n  deleteSpaBooking\n} from \"../../services/adminService\";\n\nconst BookingsManagement = () => {\n  const [bookings, setBookings] = useState([]);\n  const [selectedBooking, setSelectedBooking] = useState(null);\n  const [isModalOpen, setIsModalOpen] = useState(false);\n  const [loading, setLoading] = useState(true);\n  const [error, setError] = useState(null);\n  const [success, setSuccess] = useState(null);\n  const [filterStatus, setFilterStatus] = useState('');\n  const [filterType, setFilterType] = useState('');\n  const [sortBy, setSortBy] = useState('date-desc');\n  const [dateRange, setDateRange] = useState({ start: '', end: '' });\n\n  useEffect(() => {\n    loadData();\n  }, []);\n\n  const loadData = async () => {\n    setLoading(true);\n    setError(null);\n    try {\n      const [roomBookings, restBookings, spaBookings] = await Promise.all(["
    },
    {
      "path": "src\\components\\admin\\BookingsManagement_REFACTORED.js",
      "ext": ".js",
      "size": 20023,
      "mtime": 1764738249517.5068,
      "lines": 547,
      "snippet": "import { useState, useEffect, useCallback } from \"react\";\nimport {\n  FaCheck,\n  FaTimes,\n  FaBan,\n  FaEdit,\n  FaPhone,\n  FaUser,\n  FaSpinner,\n  FaExclamationCircle,\n} from \"react-icons/fa\";\nimport {\n  fetchAllBookingsForAdmin,\n  updateBookingStatus,\n  deleteBooking,\n} from \"../../services/adminService\";\n\n/**\n * ============================================================================\n * BOOKINGS MANAGEMENT - REFACTORED\n * ============================================================================\n * \n * This component displays ALL bookings (Room + Restaurant + Spa) in a unified\n * table using the admin service layer.\n * \n * Key Changes:\n * - ‚úÖ Uses adminService instead of direct supabase calls\n * - ‚úÖ Cleaner, simpler component logic\n * - ‚úÖ Better error handling and loading states\n * - ‚úÖ Data normalization happens in service layer\n * - ‚úÖ All booking types combined at service level\n * ============================================================================\n */\n\nconst BookingsManagement = () => {\n  const [bookings, setBookings] = useState([]);\n  const [selectedBooking, setSelectedBooking] = useState(null);\n  const [isModalOpen, setIsModalOpen] = useState(false);\n  const [loading, setLoading] = useState(true);\n  const [error, setError] = useState(null);"
    },
    {
      "path": "src\\components\\admin\\index.js",
      "ext": ".js",
      "size": 568,
      "mtime": 1764738249520.0425,
      "lines": 10,
      "snippet": "export { default as RoomTypesManagement } from './RoomTypesManagement';\nexport { default as RoomsManagement } from './RoomsManagement';\nexport { default as PriceRulesManagement } from './PriceRulesManagement';\nexport { default as PromotionsManagement } from './PromotionsManagement';\nexport { default as BookingsManagement } from './BookingsManagement';\nexport { default as UsersManagement } from './UsersManagement';\nexport { default as AuditLogsManagement } from './AuditLogsManagement';\nexport { default as ReportsManagement } from './ReportsManagement';\n\n"
    },
    {
      "path": "src\\components\\admin\\PriceRulesManagement.jsx",
      "ext": ".jsx",
      "size": 9331,
      "mtime": 1764738249517.5068,
      "lines": 294,
      "snippet": "import { useEffect, useState } from 'react';\nimport { useCRUD, useModalForm } from '../../hooks';\nimport { AdminHeader, AdminTable, AdminModal } from '../../features/admin';\nimport { supabase } from '../../utils/supabaseClient';\n\nconst PriceRulesManagement = () => {\n  const { data: priceRules, isLoading, error, fetchData, create, update, remove } = useCRUD(\n    'price_rules',\n    `\n      *,\n      room_types:room_type_id (code, name)\n    `\n  );\n\n  const {\n    isModalOpen,\n    editingItem,\n    formData,\n    updateFormData,\n    openCreateModal,\n    openEditModal,\n    closeModal,\n    resetFormData\n  } = useModalForm({\n    rule_type: 'weekend',\n    room_type_id: '',\n    price: '',\n    apply_fri: false,\n    apply_sat: true,\n    apply_sun: true,\n    start_date: '',\n    end_date: '',\n    description: '',\n    priority: '10',\n    is_active: true\n  });\n\n  // Fetch room types for dropdown\n  const [roomTypes, setRoomTypes] = useState([]);\n  "
    },
    {
      "path": "src\\components\\admin\\PromotionsManagement.jsx",
      "ext": ".jsx",
      "size": 8388,
      "mtime": 1764738249517.5068,
      "lines": 257,
      "snippet": "import { useEffect } from 'react';\nimport { FaTag } from 'react-icons/fa';\nimport { useCRUD, useModalForm } from '../../hooks';\nimport { AdminHeader, AdminTable, AdminModal } from '../../features/admin';\nimport { supabase } from '../../utils/supabaseClient';\n\nconst PromotionsManagement = () => {\n  const { data: promotions, isLoading, error, fetchData, create, update, remove } = useCRUD(\n    'promotions',\n    '*'\n  );\n\n  const {\n    isModalOpen,\n    editingItem,\n    formData,\n    updateFormData,\n    openCreateModal,\n    openEditModal,\n    closeModal,\n    resetFormData\n  } = useModalForm({\n    code: '',\n    discount_type: 'percentage',\n    discount_value: '',\n    start_date: '',\n    end_date: '',\n    description: '',\n    is_active: true\n  });\n\n  // Fetch promotions on mount\n  useEffect(() => {\n    fetchData({}, { column: 'code', ascending: true });\n  }, [fetchData]);\n\n  const handleSubmit = async (e) => {\n    e.preventDefault();\n    try {\n      const values = {"
    },
    {
      "path": "src\\components\\admin\\ReportsManagement.jsx",
      "ext": ".jsx",
      "size": 5999,
      "mtime": 1764738249517.5068,
      "lines": 150,
      "snippet": "import { useState } from 'react';\nimport { FaChartLine, FaChartBar, FaDollarSign, FaBed } from 'react-icons/fa';\n\nconst ReportsManagement = () => {\n  const [dateRange, setDateRange] = useState({\n    startDate: '',\n    endDate: ''\n  });\n  const [reportType, setReportType] = useState('revenue');\n\n  // Mock data - will be replaced with real data from Supabase\n  const revenueData = {\n    daily: [],\n    monthly: [],\n    total: 0\n  };\n\n  const occupancyData = {\n    rate: 0,\n    occupied: 0,\n    total: 0\n  };\n\n  return (\n    <div>\n      <div className=\"mb-8\">\n        <h1 className=\"h2 text-primary mb-2\">Reports & Statistics</h1>\n        <p className=\"text-gray-600\">Revenue, occupancy rate and statistics charts</p>\n      </div>\n\n      {/* Filters */}\n      <div className=\"bg-white rounded-lg shadow-md p-6 mb-6\">\n        <div className=\"grid grid-cols-1 md:grid-cols-3 gap-4\">\n          <div>\n            <label className=\"block text-sm font-semibold mb-2 text-primary\">Report Type</label>\n            <select\n              value={reportType}\n              onChange={(e) => setReportType(e.target.value)}\n              className=\"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-accent focus:border-transparent\"\n            >"
    },
    {
      "path": "src\\components\\admin\\RoomsManagement.jsx",
      "ext": ".jsx",
      "size": 18304,
      "mtime": 1764738249519.0237,
      "lines": 444,
      "snippet": "import { useState, useEffect } from 'react';\nimport { FaEdit, FaTrash, FaPlus, FaCheck, FaTimes } from 'react-icons/fa';\nimport { fetchRoomTypes } from '../../services/roomService';\nimport { fetchRoomsForAdmin, createRoomAdmin, updateRoomAdmin, deleteRoomAdmin } from '../../services/adminService';\n\nconst RoomsManagement = () => {\n  const [rooms, setRooms] = useState([]);\n  const [roomTypes, setRoomTypes] = useState([]);\n  const [isLoading, setIsLoading] = useState(false);\n  const [isSaving, setIsSaving] = useState(false);\n  const [error, setError] = useState(null);\n  const [success, setSuccess] = useState(null);\n  const [isModalOpen, setIsModalOpen] = useState(false);\n  const [editingRoom, setEditingRoom] = useState(null);\n  const [validationErrors, setValidationErrors] = useState({});\n  const [formData, setFormData] = useState({\n    room_no: '',\n    name: '',\n    room_type_id: '',\n    floor: '',\n    size: '',\n    price: '',\n    description: '',\n    status: 'available'\n  });\n\n  useEffect(() => {\n    loadData();\n  }, []);\n\n  const loadData = async () => {\n    setIsLoading(true);\n    setError(null);\n    try {\n      const [roomsData, roomTypesData] = await Promise.all([\n        fetchRoomsForAdmin(),\n        fetchRoomTypes()\n      ]);\n      setRooms(roomsData);\n      setRoomTypes(roomTypesData);"
    },
    {
      "path": "src\\components\\admin\\RoomTypesManagement.jsx",
      "ext": ".jsx",
      "size": 11319,
      "mtime": 1764738249519.0237,
      "lines": 350,
      "snippet": "import { useState, useEffect } from 'react';\nimport { FaCheck } from 'react-icons/fa';\nimport { AdminHeader, AdminTable, AdminModal } from '../../features/admin';\nimport {\n  fetchRoomTypesForAdmin,\n  createRoomType,\n  updateRoomTypeAdmin,\n  deleteRoomTypeAdmin,\n} from '../../services/adminService';\nimport { supabase } from '../../utils/supabaseClient';\n\nconst RoomTypesManagement = () => {\n  const [roomTypes, setRoomTypes] = useState([]);\n  const [amenities, setAmenities] = useState([]);\n  const [isLoading, setIsLoading] = useState(false);\n  const [error, setError] = useState(null);\n  \n  const [isModalOpen, setIsModalOpen] = useState(false);\n  const [editingItem, setEditingItem] = useState(null);\n  const [formData, setFormData] = useState({\n    code: '',\n    name: '',\n    description: '',\n    base_capacity: '',\n    max_person: '',\n    base_price: '',\n    facilities: [],\n    is_active: true\n  });\n\n  // Fetch room types and amenities\n  useEffect(() => {\n    loadData();\n  }, []);\n\n  const loadData = async () => {\n    setIsLoading(true);\n    setError(null);\n    try {\n      const [roomTypesData, amenitiesData] = await Promise.all(["
    },
    {
      "path": "src\\components\\admin\\UsersManagement.jsx",
      "ext": ".jsx",
      "size": 11925,
      "mtime": 1764738249519.0237,
      "lines": 309,
      "snippet": "import { useState, useEffect } from 'react';\nimport { FaEdit, FaTrash, FaUser, FaEnvelope, FaLock, FaCheck, FaTimes, FaBriefcase } from 'react-icons/fa';\nimport { AdminTable } from '../../features/admin';\nimport { fetchUsersForAdmin, updateUserAdmin, deleteUserProfileAdmin } from '../../services/adminService';\n\nconst UsersManagement = () => {\n  const [users, setUsers] = useState([]);\n  const [isLoading, setIsLoading] = useState(false);\n  const [error, setError] = useState(null);\n  const [success, setSuccess] = useState(null);\n  const [isModalOpen, setIsModalOpen] = useState(false);\n  const [editingUser, setEditingUser] = useState(null);\n  const [isUpdating, setIsUpdating] = useState(false);\n  \n  const [formData, setFormData] = useState({\n    full_name: '',\n    role: ''\n  });\n\n  useEffect(() => {\n    loadData();\n  }, []);\n\n  const loadData = async () => {\n    setIsLoading(true);\n    setError(null);\n    try {\n      const usersData = await fetchUsersForAdmin();\n      setUsers(usersData);\n    } catch (err) {\n      console.error('Error loading users:', err);\n      setError('Failed to load users');\n    } finally {\n      setIsLoading(false);\n    }\n  };\n\n  const handleEdit = (user) => {\n    if (!user.id) {\n      setError('Cannot edit user without a valid ID.');"
    },
    {
      "path": "src\\components\\admin\\UsersManagement_REFACTORED.js",
      "ext": ".js",
      "size": 13291,
      "mtime": 1764738249520.0425,
      "lines": 398,
      "snippet": "import { useState, useEffect } from 'react';\nimport {\n  FaEdit,\n  FaTrash,\n  FaUser,\n  FaEnvelope,\n  FaSpinner,\n  FaCheck,\n  FaTimes,\n  FaBriefcase,\n  FaExclamationCircle,\n} from 'react-icons/fa';\nimport { fetchAllUsers, updateUser, deleteUser, fetchUserById } from '../../services/adminService';\n\n/**\n * ============================================================================\n * USERS MANAGEMENT - REFACTORED\n * ============================================================================\n * \n * Displays all user profiles from the database and allows admin to:\n * - View user details\n * - Edit user information (full_name, role)\n * - Delete user accounts\n * \n * Uses adminService for all data operations\n * ============================================================================\n */\n\nconst UsersManagement = () => {\n  const [users, setUsers] = useState([]);\n  const [loading, setLoading] = useState(true);\n  const [error, setError] = useState(null);\n  const [isModalOpen, setIsModalOpen] = useState(false);\n  const [editingUser, setEditingUser] = useState(null);\n  const [isUpdating, setIsUpdating] = useState(false);\n\n  const [formData, setFormData] = useState({\n    full_name: '',\n    role: '',\n  });"
    },
    {
      "path": "src\\assets\\index.js",
      "ext": ".js",
      "size": 616,
      "mtime": 1764738249507.515,
      "lines": 19,
      "snippet": "// ‚ö†Ô∏è DEPRECATED: Room images now come from Supabase Storage\n// All room image imports removed - use supabaseStorageUrls.js instead\n\nimport Slider1 from './img/heroSlider/1.jpg';\nimport Slider2 from './img/heroSlider/2.jpg';\nimport Slider3 from './img/heroSlider/3.jpg';\n\n// Logo exports - still using local SVGs\nexport { ReactComponent as LogoDark } from './img/logo-dark.svg';\nexport { ReactComponent as LogoWhite } from './img/logo-white.svg';\n\nconst images = {\n    Slider1,\n    Slider2,\n    Slider3,\n    // Room images removed - they now come from Supabase Storage\n}\n\nexport default images;"
    },
    {
      "path": "Query_V3\\01_Clean_Data_SIMPLE.sql",
      "ext": ".sql",
      "size": 1073,
      "mtime": 1764744454146.2798,
      "lines": 27,
      "snippet": "-- =====================================================\n-- 01_CLEAN_DATA_SIMPLE.SQL\n-- Drop t·∫•t c·∫£ tables ƒë·ªÉ reset\n-- =====================================================\n\nDROP TABLE IF EXISTS public.booking_items CASCADE;\nDROP TABLE IF EXISTS public.room_reviews CASCADE;\nDROP TABLE IF EXISTS public.bookings CASCADE;\nDROP TABLE IF EXISTS public.room_images CASCADE;\nDROP TABLE IF EXISTS public.rooms CASCADE;\nDROP TABLE IF EXISTS public.room_types CASCADE;\nDROP TABLE IF EXISTS public.promotions CASCADE;\nDROP TABLE IF EXISTS public.price_rules CASCADE;\nDROP TABLE IF EXISTS public.amenities CASCADE;\nDROP TABLE IF EXISTS public.users CASCADE;\nDROP TABLE IF EXISTS public.admin_users CASCADE;\n\n-- Drop triggers & functions\nDROP TRIGGER IF EXISTS set_updated_at ON public.bookings;\nDROP TRIGGER IF EXISTS set_updated_at ON public.rooms;\nDROP TRIGGER IF EXISTS set_updated_at ON public.room_types;\nDROP FUNCTION IF EXISTS update_updated_at_column();\n\n-- Drop enums\nDROP TYPE IF EXISTS public.booking_status CASCADE;\nDROP TYPE IF EXISTS public.room_status CASCADE;\n"
    },
    {
      "path": "Query_V3\\02_Int_schema_SIMPLE.sql",
      "ext": ".sql",
      "size": 6387,
      "mtime": 1764744457587.4592,
      "lines": 177,
      "snippet": "-- =====================================================\n-- 02_INT_SCHEMA_SIMPLE.SQL\n-- Schema ƒë∆°n gi·∫£n cho hotel booking\n-- Kh√¥ng d√πng auth.users, ch·ªâ t·∫°o b·∫£ng ri√™ng\n-- =====================================================\n\n-- ====== ENUMS ======\nCREATE TYPE booking_status AS ENUM ('pending', 'confirmed', 'cancelled', 'checked_in', 'checked_out');\nCREATE TYPE room_status AS ENUM ('available', 'occupied', 'maintenance');\n\n-- ====== FUNCTION: Auto update timestamp ======\nCREATE OR REPLACE FUNCTION update_updated_at_column()\nRETURNS TRIGGER AS $$\nBEGIN\n  NEW.updated_at = NOW();\n  RETURN NEW;\nEND;\n$$ LANGUAGE plpgsql;\n\n-- ====== 1. ADMIN_USERS (T√†i kho·∫£n admin - ri√™ng bi·ªát) ======\nCREATE TABLE public.admin_users (\n  id UUID PRIMARY KEY DEFAULT gen_random_uuid(),\n  email TEXT UNIQUE NOT NULL,\n  password TEXT NOT NULL, -- Hashed password t·ª´ frontend\n  full_name TEXT,\n  status TEXT DEFAULT 'active', -- 'active', 'inactive'\n  last_login TIMESTAMPTZ,\n  created_at TIMESTAMPTZ DEFAULT NOW(),\n  updated_at TIMESTAMPTZ DEFAULT NOW()\n);\nCREATE TRIGGER set_updated_at BEFORE UPDATE ON public.admin_users \nFOR EACH ROW EXECUTE PROCEDURE update_updated_at_column();\n\n-- ====== 2. USERS (Kh√°ch h√†ng - ri√™ng bi·ªát) ======\nCREATE TABLE public.users (\n  id UUID PRIMARY KEY DEFAULT gen_random_uuid(),\n  email TEXT UNIQUE NOT NULL,\n  password TEXT NOT NULL, -- Hashed password t·ª´ frontend\n  full_name TEXT,\n  phone TEXT,"
    },
    {
      "path": "Query_V3\\03_Setup_RLS_SIMPLE.sql",
      "ext": ".sql",
      "size": 3289,
      "mtime": 1764744460057.4543,
      "lines": 85,
      "snippet": "-- =====================================================\n-- 03_SETUP_RLS_SIMPLE.SQL\n-- RLS ƒë∆°n gi·∫£n - ch·ªâ c·∫ßn public read cho room data\n-- =====================================================\n\n-- ====== Enable RLS on all tables ======\nALTER TABLE public.admin_users ENABLE ROW LEVEL SECURITY;\nALTER TABLE public.users ENABLE ROW LEVEL SECURITY;\nALTER TABLE public.room_types ENABLE ROW LEVEL SECURITY;\nALTER TABLE public.room_images ENABLE ROW LEVEL SECURITY;\nALTER TABLE public.rooms ENABLE ROW LEVEL SECURITY;\nALTER TABLE public.amenities ENABLE ROW LEVEL SECURITY;\nALTER TABLE public.room_reviews ENABLE ROW LEVEL SECURITY;\nALTER TABLE public.bookings ENABLE ROW LEVEL SECURITY;\nALTER TABLE public.booking_items ENABLE ROW LEVEL SECURITY;\nALTER TABLE public.price_rules ENABLE ROW LEVEL SECURITY;\nALTER TABLE public.promotions ENABLE ROW LEVEL SECURITY;\n\n-- ====== PUBLIC READ: Room data (no login needed) ======\n-- Kh√°ch c√≥ th·ªÉ xem c√°c lo·∫°i ph√≤ng, ·∫£nh, ƒë√°nh gi√° m√† kh√¥ng c·∫ßn login\nCREATE POLICY \"room_types_select_all\" ON public.room_types \nFOR SELECT USING (true);\n\nCREATE POLICY \"room_images_select_all\" ON public.room_images \nFOR SELECT USING (true);\n\nCREATE POLICY \"rooms_select_all\" ON public.rooms \nFOR SELECT USING (true);\n\nCREATE POLICY \"amenities_select_all\" ON public.amenities \nFOR SELECT USING (true);\n\nCREATE POLICY \"room_reviews_select_all\" ON public.room_reviews \nFOR SELECT USING (true);\n\nCREATE POLICY \"price_rules_select_all\" ON public.price_rules \nFOR SELECT USING (true);\n\nCREATE POLICY \"promotions_select_all\" ON public.promotions \nFOR SELECT USING (true);"
    },
    {
      "path": "Query_V3\\04_Full_seed_data_SIMPLE.sql",
      "ext": ".sql",
      "size": 10771,
      "mtime": 1764744462838.795,
      "lines": 180,
      "snippet": "-- =====================================================\n-- 04_FULL_SEED_DATA_SIMPLE.SQL\n-- Seed data ƒë∆°n gi·∫£n cho hotel booking\n-- =====================================================\n\n-- ====== 1. AMENITIES ======\nINSERT INTO public.amenities (name, icon_name) VALUES\n  ('WiFi', 'FaWifi'),\n  ('Coffee', 'FaCoffee'),\n  ('Bath', 'FaBath'),\n  ('Parking', 'FaParking'),\n  ('Pool', 'FaSwimmingPool'),\n  ('Breakfast', 'FaHotdog'),\n  ('Gym', 'FaStopwatch'),\n  ('Drinks', 'FaCocktail')\nON CONFLICT (name) DO NOTHING;\n\n-- ====== 2. ADMIN_USERS (T·∫°o admin test) ======\n-- Password: admin123 (b·∫°n n√™n hash b·∫±ng bcrypt tr∆∞·ªõc khi insert)\nINSERT INTO public.admin_users (email, password, full_name, status) VALUES\n  ('admin@hotel.com', '$2a$10$kExJczzLYX9cJXlmFxOpXe.xZqZ0w0tT5t9nfUJLV7Wq4f8JZjD6C', 'Hotel Admin', 'active'),\n  ('staff@hotel.com', '$2a$10$kExJczzLYX9cJXlmFxOpXe.xZqZ0w0tT5t9nfUJLV7Wq4f8JZjD6C', 'Hotel Staff', 'active')\nON CONFLICT (email) DO NOTHING;\n\n-- ====== 3. USERS (T·∫°o user test) ======\n-- Password: user123 (b·∫°n n√™n hash b·∫±ng bcrypt tr∆∞·ªõc khi insert)\nINSERT INTO public.users (email, password, full_name, phone, country, city, status) VALUES\n  ('khach1@example.com', '$2a$10$kExJczzLYX9cJXlmFxOpXe.xZqZ0w0tT5t9nfUJLV7Wq4f8JZjD6C', 'Nguyen Van Khach', '+84912345678', 'Vietnam', 'Ho Chi Minh', 'active'),\n  ('khachvip@example.com', '$2a$10$kExJczzLYX9cJXlmFxOpXe.xZqZ0w0tT5t9nfUJLV7Wq4f8JZjD6C', 'Tran Thi Vip', '+84913456789', 'Vietnam', 'Hanoi', 'active')\nON CONFLICT (email) DO NOTHING;\n\n-- ====== 4. ROOM_TYPES ======\nINSERT INTO public.room_types (code, name, description, base_capacity, max_person, base_price, facilities, is_active) VALUES\n  ('STD', 'Standard', 'Comfortable rooms with essential amenities', 1, 3, 115, ARRAY['WiFi', 'Bath', 'Parking', 'Pool', 'Breakfast'], true),\n  ('DLX', 'Deluxe', 'Premium experience with elegant design', 2, 4, 265, ARRAY['WiFi', 'Bath', 'Parking', 'Pool', 'Breakfast', 'Gym'], true),\n  ('SUI', 'Suite', 'Spacious suites for ultimate comfort', 3, 6, 320, ARRAY['WiFi', 'Bath', 'Parking', 'Pool', 'Breakfast', 'Gym'], true),\n  ('PEN', 'Penthouse', 'Exclusive top-floor residences', 4, 6, 344, ARRAY['WiFi', 'Bath', 'Parking', 'Pool', 'Breakfast', 'Gym', 'Drinks'], true),\n  ('CMB', 'Combo', 'Value-packed packages with extras', 2, 6, 290, ARRAY['WiFi', 'Bath', 'Parking', 'Pool', 'Breakfast', 'Gym'], true)\nON CONFLICT (code) DO NOTHING;\n"
    },
    {
      "path": "Query_V2\\01_Clean_Data.sql",
      "ext": ".sql",
      "size": 1870,
      "mtime": 1764743627167.1313,
      "lines": 40,
      "snippet": "-- =====================================================\n-- 01_CLEAN_DB.SQL\n-- =====================================================\n-- X√≥a b·∫£ng theo ƒë√∫ng th·ª© t·ª± ph·ª• thu·ªôc ƒë·ªÉ kh√¥ng l·ªói kh√≥a ngo·∫°i\n\n-- 1. Xo√° trigger tr√™n auth.users\ndrop trigger if exists on_auth_user_created on auth.users;\n\n-- 2. Xo√° b·∫£ng (Drop con tr∆∞·ªõc, cha sau)\ndrop table if exists public.audit_logs cascade;\ndrop table if exists public.password_reset_requests cascade;\ndrop table if exists public.spa_bookings cascade;\ndrop table if exists public.restaurant_bookings cascade;\ndrop table if exists public.booking_events cascade;\ndrop table if exists public.booking_pricing_breakdown cascade;\ndrop table if exists public.room_reviews cascade;\ndrop table if exists public.booking_items cascade;\ndrop table if exists public.bookings cascade;\ndrop table if exists public.promotions cascade;\ndrop table if exists public.price_rules cascade;\ndrop table if exists public.room_images cascade;\ndrop table if exists public.rooms cascade;\ndrop table if exists public.room_type_amenities cascade;\ndrop table if exists public.room_types cascade;\ndrop table if exists public.amenities cascade;\ndrop table if exists public.profiles cascade;\ndrop table if exists public.holiday_calendar cascade;\n\n-- 3. Xo√° h√†m v√† types\ndrop function if exists public.get_available_rooms(date, date, int);\ndrop function if exists public.get_available_rooms(date, date);\ndrop function if exists public.is_room_available(uuid, date, date);\ndrop function if exists public.is_admin(uuid);\ndrop function if exists public.handle_new_user();\ndrop function if exists public.trigger_set_timestamp();\n\ndrop type if exists public.booking_status;\ndrop type if exists public.room_status;\ndrop type if exists public.discount_type;\ndrop type if exists public.price_rule_type;"
    },
    {
      "path": "Query_V2\\02_Int_schema.sql",
      "ext": ".sql",
      "size": 13034,
      "mtime": 1764813216289.0254,
      "lines": 292,
      "snippet": "-- =====================================\n-- 02_INIT_SCHEMA.SQL\n-- =====================================\n\ncreate extension if not exists \"pgcrypto\";\n\n-- ====== ENUMS ======\ncreate type room_status as enum ('available', 'occupied', 'maintenance', 'cleaning');\ncreate type booking_status as enum ('pending', 'pending_payment', 'approved', 'rejected', 'confirmed', 'checked_in', 'checked_out', 'modified', 'completed', 'cancelled');\ncreate type price_rule_type as enum ('weekend', 'holiday', 'seasonal', 'season');\ncreate type discount_type as enum ('percent', 'fixed');\n\n-- ====== FUNCTION UPDATE TIMESTAMP ======\ncreate or replace function public.trigger_set_timestamp()\nreturns trigger language plpgsql as $$\nbegin\n  new.updated_at = now();\n  return new;\nend$$;\n\n-- ====== 1. PROFILES ======\ncreate table if not exists public.profiles (\n  id uuid primary key references auth.users(id) on delete cascade,\n  full_name text,\n  phone text,\n  avatar_url text,\n  country text,\n  city text,\n  preferences jsonb not null default '[]'::jsonb,\n  language text not null default 'en',\n  newsletter boolean not null default true,\n  bio text,\n  created_at timestamptz not null default now(),\n  updated_at timestamptz not null default now()\n);\ncreate trigger set_profiles_updated_at before update on public.profiles for each row execute procedure public.trigger_set_timestamp();\n\n-- ====== 1.5 ADMIN ACCOUNTS (Ri√™ng bi·ªát, kh√¥ng trong profiles) ======\ncreate table if not exists public.admin_accounts (\n  id uuid primary key default gen_random_uuid(),"
    },
    {
      "path": "Query_V2\\03_Setup_RLS.sql",
      "ext": ".sql",
      "size": 1387,
      "mtime": 1764763220761.6929,
      "lines": 25,
      "snippet": "-- =========================================\n-- 03_SETUP_RLS.SQL (SIMPLIFIED)\n-- Disable RLS - Permission check on Frontend/Services\n-- =========================================\n\n-- DISABLE RLS - T·∫•t c·∫£ c√°c b·∫£ng kh√¥ng d√πng RLS\n-- Permissions ƒë∆∞·ª£c qu·∫£n l√Ω ·ªü Frontend (AuthContext) & Services layer\n-- Admin check: if (user.role === 'admin') { allow all operations }\n-- User check: if (booking.user_id === current_user.id) { allow update/delete }\n\nalter table public.profiles disable row level security;\nalter table public.room_types disable row level security;\nalter table public.amenities disable row level security;\nalter table public.room_type_amenities disable row level security;\nalter table public.rooms disable row level security;\nalter table public.room_images disable row level security;\nalter table public.room_reviews disable row level security;\nalter table public.price_rules disable row level security;\nalter table public.promotions disable row level security;\nalter table public.bookings disable row level security;\nalter table public.booking_items disable row level security;\nalter table public.audit_logs disable row level security;\nalter table public.restaurant_bookings disable row level security;\nalter table public.spa_bookings disable row level security;\nalter table public.password_reset_requests disable row level security;"
    },
    {
      "path": "Query_V2\\04_Full_seed_data.sql",
      "ext": ".sql",
      "size": 14041,
      "mtime": 1764808249002.4353,
      "lines": 125,
      "snippet": "-- =====================================================\n-- 04_FULL_SEED_DATA.SQL\n-- =====================================================\n\n-- NOTE: Users are created via seed-users.js (Node.js script)\n-- This file seeds static data only (amenities, rooms, bookings)\n-- To create test users with proper password hashing, run: node seed-users.js\n\n-- 1. AMENITIES\ninsert into public.amenities (name, icon_name) values\n  ('Wifi', 'FaWifi'), ('Coffee', 'FaCoffee'), ('Bath', 'FaBath'), ('Parking Space', 'FaParking'),\n  ('Swimming Pool', 'FaSwimmingPool'), ('Breakfast', 'FaHotdog'), ('GYM', 'FaStopwatch'), ('Drinks', 'FaCocktail')\non conflict (name) do nothing;\n\n-- 2. ROOM TYPES\ninsert into public.room_types (code, name, description, base_capacity, max_person, base_price, facilities, is_active) values\n  ('STD', 'Standard', 'Comfortable rooms with essential amenities', 1, 3, 115, array['Wifi', 'Coffee', 'Bath', 'Parking Space', 'Swimming Pool', 'Breakfast', 'GYM', 'Drinks'], true),\n  ('DLX', 'Deluxe', 'Premium experience with elegant design', 2, 4, 265, array['Wifi', 'Coffee', 'Bath', 'Parking Space', 'Swimming Pool', 'Breakfast', 'GYM', 'Drinks'], true),\n  ('SUI', 'Suite', 'Spacious suites for ultimate comfort', 3, 6, 320, array['Wifi', 'Coffee', 'Bath', 'Parking Space', 'Swimming Pool', 'Breakfast', 'GYM', 'Drinks'], true),\n  ('PEN', 'Penthouse', 'Exclusive top-floor residences', 4, 6, 344, array['Wifi', 'Coffee', 'Bath', 'Parking Space', 'Swimming Pool', 'Breakfast', 'GYM', 'Drinks'], true),\n  ('CMB', 'Combo', 'Value-packed packages with extras', 2, 6, 290, array['Wifi', 'Coffee', 'Bath', 'Parking Space', 'Swimming Pool', 'Breakfast', 'GYM', 'Drinks'], true)\non conflict (code) do update set is_active = true;\n\n-- 3. ROOMS (40 PH√íNG ƒê·∫¶Y ƒê·ª¶)\ninsert into public.rooms (id, room_no, name, room_type_id, floor, size, type, category, price, description, status) values\n  -- Standard\n  (gen_random_uuid(), 'STD-01', 'Standard Room', (select id from public.room_types where code='STD'), 1, 30, 'Standard', 'standard', 115, 'Comfortable room with essential amenities.', 'available'),\n  (gen_random_uuid(), 'STD-02', 'Cozy Studio Standard', (select id from public.room_types where code='STD'), 1, 28, 'Standard', 'standard', 145, 'Intimate studio with integrated work space.', 'available'),\n  (gen_random_uuid(), 'STD-03', 'Garden View Standard', (select id from public.room_types where code='STD'), 1, 35, 'Standard', 'standard', 195, 'Charming room with garden views.', 'available'),\n  (gen_random_uuid(), 'STD-04', 'Courtyard Classic Standard', (select id from public.room_types where code='STD'), 1, 32, 'Standard', 'standard', 185, 'Peaceful room overlooking the courtyard.', 'available'),\n  (gen_random_uuid(), 'STD-05', 'Urban Escape Standard', (select id from public.room_types where code='STD'), 2, 38, 'Standard', 'standard', 205, 'Modern room in city center.', 'available'),\n  (gen_random_uuid(), 'STD-06', 'Zen Retreat Standard', (select id from public.room_types where code='STD'), 2, 42, 'Standard', 'standard', 225, 'Tranquil room designed for relaxation.', 'available'),\n  (gen_random_uuid(), 'STD-07', 'Heritage Standard', (select id from public.room_types where code='STD'), 2, 55, 'Standard', 'standard', 275, 'Elegant room with cultural charm.', 'available'),\n  (gen_random_uuid(), 'STD-08', 'Skyline View Standard', (select id from public.room_types where code='STD'), 2, 45, 'Standard', 'standard', 255, 'Room with panoramic city views.', 'available'),\n  -- Deluxe\n  (gen_random_uuid(), 'DLX-01', 'Deluxe Room', (select id from public.room_types where code='DLX'), 3, 50, 'Deluxe', 'deluxe', 265, 'Premium experience with elegant design.', 'available'),\n  (gen_random_uuid(), 'DLX-02', 'Deluxe Comfort', (select id from public.room_types where code='DLX'), 3, 38, 'Deluxe', 'deluxe', 245, 'Comfortable deluxe room.', 'available'),\n  (gen_random_uuid(), 'DLX-03', 'Deluxe Modern', (select id from public.room_types where code='DLX'), 3, 42, 'Deluxe', 'deluxe', 265, 'Modern deluxe room.', 'available'),\n  (gen_random_uuid(), 'DLX-04', 'Deluxe Sophisticated', (select id from public.room_types where code='DLX'), 3, 46, 'Deluxe', 'deluxe', 295, 'Sophisticated deluxe suite.', 'available'),\n  (gen_random_uuid(), 'DLX-05', 'Deluxe Exquisite', (select id from public.room_types where code='DLX'), 4, 50, 'Deluxe', 'deluxe', 315, 'Exquisite deluxe room.', 'available'),"
    },
    {
      "path": "Query_V2\\05_ADD_NEW_TABLES.sql",
      "ext": ".sql",
      "size": 0,
      "mtime": 1764761961152.7444,
      "lines": 1,
      "snippet": ""
    },
    {
      "path": "Query_V2\\06_OPTIMIZE_INDEXES.sql",
      "ext": ".sql",
      "size": 2192,
      "mtime": 1764762899451.298,
      "lines": 37,
      "snippet": "-- =====================================\n-- 06_OPTIMIZE_INDEXES.SQL\n-- Optimize query performance with strategic indexes\n-- =====================================\n\n-- Booking query optimization\ncreate index if not exists idx_bookings_status_created on public.bookings(status, created_at desc);\ncreate index if not exists idx_bookings_check_in on public.bookings(check_in);\ncreate index if not exists idx_bookings_check_out on public.bookings(check_out);\ncreate index if not exists idx_bookings_room_check on public.bookings(room_id, check_in, check_out);\n\n-- Room availability search optimization\ncreate index if not exists idx_rooms_status_type on public.rooms(status, room_type_id);\n\n-- Price rules for date range queries\ncreate index if not exists idx_price_rules_dates on public.price_rules(start_date, end_date) where is_active = true;\ncreate index if not exists idx_price_rules_room_type on public.price_rules(room_type_id, rule_type) where is_active = true;\n\n-- Promotions active search\ncreate index if not exists idx_promotions_active_date on public.promotions(is_active, start_date, end_date);\n\n-- Restaurant & Spa bookings\ncreate index if not exists idx_restaurant_bookings_user on public.restaurant_bookings(user_id, created_at desc);\ncreate index if not exists idx_restaurant_bookings_status on public.restaurant_bookings(status, created_at desc);\ncreate index if not exists idx_restaurant_bookings_date on public.restaurant_bookings(reservation_at);\n\ncreate index if not exists idx_spa_bookings_user on public.spa_bookings(user_id, created_at desc);\ncreate index if not exists idx_spa_bookings_status on public.spa_bookings(status, created_at desc);\ncreate index if not exists idx_spa_bookings_date on public.spa_bookings(appointment_at);\n\n-- Review search optimization\ncreate index if not exists idx_room_reviews_room_type on public.room_reviews(room_type_id, rating);\ncreate index if not exists idx_room_reviews_user_stay on public.room_reviews(user_id, stay_date desc);\n\n-- Audit logs (if exists)\ncreate index if not exists idx_audit_logs_user_action on public.audit_logs(user_id, action, created_at desc) where exists (select 1 from pg_tables where tablename = 'audit_logs');\n"
    },
    {
      "path": "Query_V2\\README_SIMPLE_SETUP.md",
      "ext": ".md",
      "size": 3333,
      "mtime": 1764744590110.2612,
      "lines": 133,
      "snippet": "# üöÄ H∆Ø·ªöNG D·∫™N CH·∫†Y 4 FILE SQL ƒê∆†N GI·∫¢N\n\n## üìã Th·ª© t·ª± ch·∫°y c√°c file:\n\n### **1Ô∏è‚É£ 01_Clean_Data_SIMPLE.sql**\n```\nDROP t·∫•t c·∫£ b·∫£ng c≈© ƒë·ªÉ reset\n‚è±Ô∏è M·∫•t: 10 gi√¢y\n```\n\n### **2Ô∏è‚É£ 02_Int_schema_SIMPLE.sql**\n```\nT·∫°o 11 b·∫£ng m·ªõi:\n- admin_users (t√†i kho·∫£n admin ri√™ng)\n- users (t√†i kho·∫£n kh√°ch h√†ng ri√™ng)\n- room_types, rooms, room_images\n- bookings, booking_items\n- room_reviews\n- amenities, price_rules, promotions\n\n‚è±Ô∏è M·∫•t: 5 gi√¢y\n```\n\n### **3Ô∏è‚É£ 03_Setup_RLS_SIMPLE.sql**\n```\nB·∫≠t RLS (Row Level Security)\n- Public: C√≥ th·ªÉ xem ph√≤ng, ·∫£nh m√† kh√¥ng login\n- User: Ch·ªâ th·∫•y booking c·ªßa h·ªç\n- Admin: C√≥ quy·ªÅn ƒë·∫ßy ƒë·ªß\n\n‚è±Ô∏è M·∫•t: 2 gi√¢y\n```\n\n### **4Ô∏è‚É£ 04_Full_seed_data_SIMPLE.sql**\n```\nInsert d·ªØ li·ªáu test:\n- 2 admin: admin@hotel.com, staff@hotel.com\n- 2 user: khach1@example.com, khachvip@example.com\n- 5 room types (STD, DLX, SUI, PEN, CMB)\n- 40 rooms"
    }
  ],
  "sql": [
    {
      "path": "Query_V2\\01_Clean_Data.sql",
      "size": 1870,
      "mtime": 1764743627167.1313,
      "lines": 40,
      "snippet": "-- =====================================================\n-- 01_CLEAN_DB.SQL\n-- =====================================================\n-- X√≥a b·∫£ng theo ƒë√∫ng th·ª© t·ª± ph·ª• thu·ªôc ƒë·ªÉ kh√¥ng l·ªói kh√≥a ngo·∫°i\n\n-- 1. Xo√° trigger tr√™n auth.users\ndrop trigger if exists on_auth_user_created on auth.users;\n\n-- 2. Xo√° b·∫£ng (Drop con tr∆∞·ªõc, cha sau)\ndrop table if exists public.audit_logs cascade;\ndrop table if exists public.password_reset_requests cascade;\ndrop table if exists public.spa_bookings cascade;\ndrop table if exists public.restaurant_bookings cascade;\ndrop table if exists public.booking_events cascade;\ndrop table if exists public.booking_pricing_breakdown cascade;\ndrop table if exists public.room_reviews cascade;\ndrop table if exists public.booking_items cascade;\ndrop table if exists public.bookings cascade;\ndrop table if exists public.promotions cascade;\ndrop table if exists public.price_rules cascade;\ndrop table if exists public.room_images cascade;\ndrop table if exists public.rooms cascade;\ndrop table if exists public.room_type_amenities cascade;\ndrop table if exists public.room_types cascade;\ndrop table if exists public.amenities cascade;\ndrop table if exists public.profiles cascade;\ndrop table if exists public.holiday_calendar cascade;\n\n-- 3. Xo√° h√†m v√† types\ndrop function if exists public.get_available_rooms(date, date, int);\ndrop function if exists public.get_available_rooms(date, date);\ndrop function if exists public.is_room_available(uuid, date, date);\ndrop function if exists public.is_admin(uuid);\ndrop function if exists public.handle_new_user();\ndrop function if exists public.trigger_set_timestamp();\n\ndrop type if exists public.booking_status;\ndrop type if exists public.room_status;\ndrop type if exists public.discount_type;\ndrop type if exists public.price_rule_type;",
      "analysis": {
        "createTables": [],
        "createViews": [],
        "createFunctions": [],
        "createTriggers": [],
        "policies": [],
        "enums": []
      }
    },
    {
      "path": "Query_V2\\02_Int_schema.sql",
      "size": 13034,
      "mtime": 1764813216289.0254,
      "lines": 292,
      "snippet": "-- =====================================\n-- 02_INIT_SCHEMA.SQL\n-- =====================================\n\ncreate extension if not exists \"pgcrypto\";\n\n-- ====== ENUMS ======\ncreate type room_status as enum ('available', 'occupied', 'maintenance', 'cleaning');\ncreate type booking_status as enum ('pending', 'pending_payment', 'approved', 'rejected', 'confirmed', 'checked_in', 'checked_out', 'modified', 'completed', 'cancelled');\ncreate type price_rule_type as enum ('weekend', 'holiday', 'seasonal', 'season');\ncreate type discount_type as enum ('percent', 'fixed');\n\n-- ====== FUNCTION UPDATE TIMESTAMP ======\ncreate or replace function public.trigger_set_timestamp()\nreturns trigger language plpgsql as $$\nbegin\n  new.updated_at = now();\n  return new;\nend$$;\n\n-- ====== 1. PROFILES ======\ncreate table if not exists public.profiles (\n  id uuid primary key references auth.users(id) on delete cascade,\n  full_name text,\n  phone text,\n  avatar_url text,\n  country text,\n  city text,\n  preferences jsonb not null default '[]'::jsonb,\n  language text not null default 'en',\n  newsletter boolean not null default true,\n  bio text,\n  created_at timestamptz not null default now(),\n  updated_at timestamptz not null default now()\n);\ncreate trigger set_profiles_updated_at before update on public.profiles for each row execute procedure public.trigger_set_timestamp();\n\n-- ====== 1.5 ADMIN ACCOUNTS (Ri√™ng bi·ªát, kh√¥ng trong profiles) ======\ncreate table if not exists public.admin_accounts (\n  id uuid primary key default gen_random_uuid(),",
      "analysis": {
        "createTables": [
          "public.profiles",
          "public.admin_accounts",
          "public.amenities",
          "public.room_types",
          "public.room_type_amenities",
          "public.room_images",
          "public.rooms",
          "public.price_rules",
          "public.promotions",
          "public.bookings",
          "public.booking_items",
          "public.room_reviews",
          "public.booking_pricing_breakdown",
          "public.booking_events",
          "public.restaurant_bookings",
          "public.spa_bookings",
          "public.password_reset_requests",
          "public.audit_logs",
          "public.holiday_calendar"
        ],
        "createViews": [],
        "createFunctions": [
          "public.trigger_set_timestamp",
          "public.is_admin",
          "public.is_room_available",
          "public.get_available_rooms"
        ],
        "createTriggers": [
          "set_profiles_updated_at",
          "set_admin_accounts_updated_at",
          "set_room_types_updated_at",
          "set_rooms_updated_at",
          "set_price_rules_updated_at",
          "set_bookings_updated_at",
          "set_restaurant_bookings_updated_at",
          "set_spa_bookings_updated_at"
        ],
        "policies": [],
        "enums": [
          "room_status",
          "booking_status",
          "price_rule_type",
          "discount_type"
        ]
      }
    },
    {
      "path": "Query_V2\\03_Setup_RLS.sql",
      "size": 1387,
      "mtime": 1764763220761.6929,
      "lines": 25,
      "snippet": "-- =========================================\n-- 03_SETUP_RLS.SQL (SIMPLIFIED)\n-- Disable RLS - Permission check on Frontend/Services\n-- =========================================\n\n-- DISABLE RLS - T·∫•t c·∫£ c√°c b·∫£ng kh√¥ng d√πng RLS\n-- Permissions ƒë∆∞·ª£c qu·∫£n l√Ω ·ªü Frontend (AuthContext) & Services layer\n-- Admin check: if (user.role === 'admin') { allow all operations }\n-- User check: if (booking.user_id === current_user.id) { allow update/delete }\n\nalter table public.profiles disable row level security;\nalter table public.room_types disable row level security;\nalter table public.amenities disable row level security;\nalter table public.room_type_amenities disable row level security;\nalter table public.rooms disable row level security;\nalter table public.room_images disable row level security;\nalter table public.room_reviews disable row level security;\nalter table public.price_rules disable row level security;\nalter table public.promotions disable row level security;\nalter table public.bookings disable row level security;\nalter table public.booking_items disable row level security;\nalter table public.audit_logs disable row level security;\nalter table public.restaurant_bookings disable row level security;\nalter table public.spa_bookings disable row level security;\nalter table public.password_reset_requests disable row level security;",
      "analysis": {
        "createTables": [],
        "createViews": [],
        "createFunctions": [],
        "createTriggers": [],
        "policies": [],
        "enums": []
      }
    },
    {
      "path": "Query_V2\\04_Full_seed_data.sql",
      "size": 14041,
      "mtime": 1764808249002.4353,
      "lines": 125,
      "snippet": "-- =====================================================\n-- 04_FULL_SEED_DATA.SQL\n-- =====================================================\n\n-- NOTE: Users are created via seed-users.js (Node.js script)\n-- This file seeds static data only (amenities, rooms, bookings)\n-- To create test users with proper password hashing, run: node seed-users.js\n\n-- 1. AMENITIES\ninsert into public.amenities (name, icon_name) values\n  ('Wifi', 'FaWifi'), ('Coffee', 'FaCoffee'), ('Bath', 'FaBath'), ('Parking Space', 'FaParking'),\n  ('Swimming Pool', 'FaSwimmingPool'), ('Breakfast', 'FaHotdog'), ('GYM', 'FaStopwatch'), ('Drinks', 'FaCocktail')\non conflict (name) do nothing;\n\n-- 2. ROOM TYPES\ninsert into public.room_types (code, name, description, base_capacity, max_person, base_price, facilities, is_active) values\n  ('STD', 'Standard', 'Comfortable rooms with essential amenities', 1, 3, 115, array['Wifi', 'Coffee', 'Bath', 'Parking Space', 'Swimming Pool', 'Breakfast', 'GYM', 'Drinks'], true),\n  ('DLX', 'Deluxe', 'Premium experience with elegant design', 2, 4, 265, array['Wifi', 'Coffee', 'Bath', 'Parking Space', 'Swimming Pool', 'Breakfast', 'GYM', 'Drinks'], true),\n  ('SUI', 'Suite', 'Spacious suites for ultimate comfort', 3, 6, 320, array['Wifi', 'Coffee', 'Bath', 'Parking Space', 'Swimming Pool', 'Breakfast', 'GYM', 'Drinks'], true),\n  ('PEN', 'Penthouse', 'Exclusive top-floor residences', 4, 6, 344, array['Wifi', 'Coffee', 'Bath', 'Parking Space', 'Swimming Pool', 'Breakfast', 'GYM', 'Drinks'], true),\n  ('CMB', 'Combo', 'Value-packed packages with extras', 2, 6, 290, array['Wifi', 'Coffee', 'Bath', 'Parking Space', 'Swimming Pool', 'Breakfast', 'GYM', 'Drinks'], true)\non conflict (code) do update set is_active = true;\n\n-- 3. ROOMS (40 PH√íNG ƒê·∫¶Y ƒê·ª¶)\ninsert into public.rooms (id, room_no, name, room_type_id, floor, size, type, category, price, description, status) values\n  -- Standard\n  (gen_random_uuid(), 'STD-01', 'Standard Room', (select id from public.room_types where code='STD'), 1, 30, 'Standard', 'standard', 115, 'Comfortable room with essential amenities.', 'available'),\n  (gen_random_uuid(), 'STD-02', 'Cozy Studio Standard', (select id from public.room_types where code='STD'), 1, 28, 'Standard', 'standard', 145, 'Intimate studio with integrated work space.', 'available'),\n  (gen_random_uuid(), 'STD-03', 'Garden View Standard', (select id from public.room_types where code='STD'), 1, 35, 'Standard', 'standard', 195, 'Charming room with garden views.', 'available'),\n  (gen_random_uuid(), 'STD-04', 'Courtyard Classic Standard', (select id from public.room_types where code='STD'), 1, 32, 'Standard', 'standard', 185, 'Peaceful room overlooking the courtyard.', 'available'),\n  (gen_random_uuid(), 'STD-05', 'Urban Escape Standard', (select id from public.room_types where code='STD'), 2, 38, 'Standard', 'standard', 205, 'Modern room in city center.', 'available'),\n  (gen_random_uuid(), 'STD-06', 'Zen Retreat Standard', (select id from public.room_types where code='STD'), 2, 42, 'Standard', 'standard', 225, 'Tranquil room designed for relaxation.', 'available'),\n  (gen_random_uuid(), 'STD-07', 'Heritage Standard', (select id from public.room_types where code='STD'), 2, 55, 'Standard', 'standard', 275, 'Elegant room with cultural charm.', 'available'),\n  (gen_random_uuid(), 'STD-08', 'Skyline View Standard', (select id from public.room_types where code='STD'), 2, 45, 'Standard', 'standard', 255, 'Room with panoramic city views.', 'available'),\n  -- Deluxe\n  (gen_random_uuid(), 'DLX-01', 'Deluxe Room', (select id from public.room_types where code='DLX'), 3, 50, 'Deluxe', 'deluxe', 265, 'Premium experience with elegant design.', 'available'),\n  (gen_random_uuid(), 'DLX-02', 'Deluxe Comfort', (select id from public.room_types where code='DLX'), 3, 38, 'Deluxe', 'deluxe', 245, 'Comfortable deluxe room.', 'available'),\n  (gen_random_uuid(), 'DLX-03', 'Deluxe Modern', (select id from public.room_types where code='DLX'), 3, 42, 'Deluxe', 'deluxe', 265, 'Modern deluxe room.', 'available'),\n  (gen_random_uuid(), 'DLX-04', 'Deluxe Sophisticated', (select id from public.room_types where code='DLX'), 3, 46, 'Deluxe', 'deluxe', 295, 'Sophisticated deluxe suite.', 'available'),\n  (gen_random_uuid(), 'DLX-05', 'Deluxe Exquisite', (select id from public.room_types where code='DLX'), 4, 50, 'Deluxe', 'deluxe', 315, 'Exquisite deluxe room.', 'available'),",
      "analysis": {
        "createTables": [],
        "createViews": [],
        "createFunctions": [],
        "createTriggers": [],
        "policies": [],
        "enums": []
      }
    },
    {
      "path": "Query_V2\\05_ADD_NEW_TABLES.sql",
      "size": 0,
      "mtime": 1764761961152.7444,
      "lines": 1,
      "snippet": "",
      "analysis": {
        "createTables": [],
        "createViews": [],
        "createFunctions": [],
        "createTriggers": [],
        "policies": [],
        "enums": []
      }
    },
    {
      "path": "Query_V2\\06_OPTIMIZE_INDEXES.sql",
      "size": 2192,
      "mtime": 1764762899451.298,
      "lines": 37,
      "snippet": "-- =====================================\n-- 06_OPTIMIZE_INDEXES.SQL\n-- Optimize query performance with strategic indexes\n-- =====================================\n\n-- Booking query optimization\ncreate index if not exists idx_bookings_status_created on public.bookings(status, created_at desc);\ncreate index if not exists idx_bookings_check_in on public.bookings(check_in);\ncreate index if not exists idx_bookings_check_out on public.bookings(check_out);\ncreate index if not exists idx_bookings_room_check on public.bookings(room_id, check_in, check_out);\n\n-- Room availability search optimization\ncreate index if not exists idx_rooms_status_type on public.rooms(status, room_type_id);\n\n-- Price rules for date range queries\ncreate index if not exists idx_price_rules_dates on public.price_rules(start_date, end_date) where is_active = true;\ncreate index if not exists idx_price_rules_room_type on public.price_rules(room_type_id, rule_type) where is_active = true;\n\n-- Promotions active search\ncreate index if not exists idx_promotions_active_date on public.promotions(is_active, start_date, end_date);\n\n-- Restaurant & Spa bookings\ncreate index if not exists idx_restaurant_bookings_user on public.restaurant_bookings(user_id, created_at desc);\ncreate index if not exists idx_restaurant_bookings_status on public.restaurant_bookings(status, created_at desc);\ncreate index if not exists idx_restaurant_bookings_date on public.restaurant_bookings(reservation_at);\n\ncreate index if not exists idx_spa_bookings_user on public.spa_bookings(user_id, created_at desc);\ncreate index if not exists idx_spa_bookings_status on public.spa_bookings(status, created_at desc);\ncreate index if not exists idx_spa_bookings_date on public.spa_bookings(appointment_at);\n\n-- Review search optimization\ncreate index if not exists idx_room_reviews_room_type on public.room_reviews(room_type_id, rating);\ncreate index if not exists idx_room_reviews_user_stay on public.room_reviews(user_id, stay_date desc);\n\n-- Audit logs (if exists)\ncreate index if not exists idx_audit_logs_user_action on public.audit_logs(user_id, action, created_at desc) where exists (select 1 from pg_tables where tablename = 'audit_logs');\n",
      "analysis": {
        "createTables": [],
        "createViews": [],
        "createFunctions": [],
        "createTriggers": [],
        "policies": [],
        "enums": []
      }
    }
  ]
}