======================
FULL PROJECT EXPORT
Generated: 2025-12-01T05:54:58.717Z
======================


=================================================================
FILE PATH: .env
=================================================================
# Supabase Configuration
# For Vite, use VITE_ prefix (Vite will expose these as import.meta.env)
VITE_SUPABASE_URL=https://sxteddkozzqniebfstag.supabase.co
VITE_SUPABASE_ANON_KEY=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6InN4dGVkZGtvenpxbmllYmZzdGFnIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NjE4NjQwMDgsImV4cCI6MjA3NzQ0MDAwOH0.FYblHTFrNTthvpcdGy6DFefjnApCe4qwcKZaHdkTiac

# Email Service (optional, for booking confirmations)
VITE_EMAILJS_SERVICE_ID=your-service-id
VITE_EMAILJS_TEMPLATE_ID=your-template-id
VITE_EMAILJS_PUBLIC_KEY=your-public-key


=================================================================
FILE PATH: gop_code_origin.js
=================================================================
import fs from 'fs';
import path from 'path';
import { fileURLToPath } from 'url';

// --- Cáº¤U HÃŒNH ---
const __filename = fileURLToPath(import.meta.url);
const __dirname = path.dirname(__filename);

const OUTPUT_FILE = 'GIAO_DIEN_GOC_DEMO.txt'; // TÃªn file Ä‘áº§u ra má»›i
const TARGET_FOLDER = 'Project_Demo';         // Chá»‰ quÃ©t folder nÃ y

// CÃ¡c file/folder cáº§n loáº¡i bá» Náº¾U NÃ“ Náº°M TRONG Project_Demo
const IGNORE_DIRS = ['node_modules', '.git', '.vscode', 'dist', 'build'];
const IGNORE_FILES = ['.DS_Store', 'package-lock.json', 'yarn.lock'];

// CÃ¡c Ä‘uÃ´i file giao diá»‡n cáº§n láº¥y
const ALLOWED_EXTS = [
    '.html', '.css', '.scss', 
    '.js', '.jsx', '.ts', '.tsx', // Láº¥y cáº£ JS trong demo vÃ¬ cÃ³ thá»ƒ chá»©a logic giao diá»‡n cÅ©
    '.json' // ÄÃ´i khi cáº¥u hÃ¬nh giao diá»‡n náº±m á»Ÿ json
];

function getAllFiles(dirPath, arrayOfFiles) {
    // Kiá»ƒm tra xem thÆ° má»¥c cÃ³ tá»“n táº¡i khÃ´ng
    if (!fs.existsSync(dirPath)) {
        return arrayOfFiles || [];
    }

    const files = fs.readdirSync(dirPath);
    arrayOfFiles = arrayOfFiles || [];

    files.forEach(function(file) {
        const fullPath = path.join(dirPath, file);
        
        // 1. Náº¿u lÃ  thÆ° má»¥c
        if (fs.statSync(fullPath).isDirectory()) {
            if (!IGNORE_DIRS.includes(file)) {
                arrayOfFiles = getAllFiles(fullPath, arrayOfFiles);
            }
        } 
        // 2. Náº¿u lÃ  file
        else {
            if (!IGNORE_FILES.includes(file)) {
                const ext = path.extname(file).toLowerCase();
                if (ALLOWED_EXTS.includes(ext)) {
                    arrayOfFiles.push(fullPath);
                }
            }
        }
    });

    return arrayOfFiles;
}

function mergeFiles() {
    try {
        console.log(`ðŸŽ¯ Äang quÃ©t thÆ° má»¥c gá»‘c: ${TARGET_FOLDER}...`);
        
        // Chá»‰ trá» tháº³ng vÃ o folder Project_Demo
        const targetPath = path.join(__dirname, TARGET_FOLDER);
        const allFiles = getAllFiles(targetPath);
        
        if (allFiles.length === 0) {
            console.log(`âš ï¸ KhÃ´ng tÃ¬m tháº¥y file nÃ o trong ${TARGET_FOLDER}! HÃ£y kiá»ƒm tra láº¡i tÃªn thÆ° má»¥c.`);
            return;
        }

        let content = `=== ORIGINAL UI SOURCE FROM: ${TARGET_FOLDER} ===\n\n`;
        
        allFiles.forEach(filePath => {
            // Láº¥y Ä‘Æ°á»ng dáº«n tÆ°Æ¡ng Ä‘á»‘i
            const relativePath = path.relative(__dirname, filePath);
            
            console.log(`ðŸ“„ Äá»c: ${relativePath}`);
            const fileContent = fs.readFileSync(filePath, 'utf8');
            
            content += `\n\n=================================================================\n`;
            content += `FILE PATH: ${relativePath}\n`;
            content += `=================================================================\n`;
            content += fileContent;
        });

        fs.writeFileSync(OUTPUT_FILE, content, 'utf8');
        console.log(`\nâœ… Xong! TÃ¬m tháº¥y ${allFiles.length} file giao diá»‡n gá»‘c.`);
        console.log(`ðŸ‘‰ File káº¿t quáº£: ${OUTPUT_FILE}`);
        
    } catch (err) {
        console.error('âŒ Lá»—i:', err);
    }
}

mergeFiles();

=================================================================
FILE PATH: gop_code_V2.js
=================================================================
// =========================================================
// GOP_CODE V2 â€” Project Export & Knowledge Base Generator
// Made for long-term reusability across GitHub/Copilot accounts
// =========================================================

import fs from "fs";
import path from "path";
import { fileURLToPath } from "url";

const __filename = fileURLToPath(import.meta.url);
const __dirname = path.dirname(__filename);

// ======= CONFIGURATION =======
const RAW_OUTPUT = "TOAN_BO_DU_AN.txt";
const KB_OUTPUT = "PROJECT_KNOWLEDGE_BASE.md";

// Directories to ignore
const IGNORE_DIRS = [
  "node_modules",
  ".git",
  ".vscode",
  "dist",
  "build",
  "public",
  "Project_Demo",
  "Query",
];

// Files to ignore
const IGNORE_FILES = [
  RAW_OUTPUT,
  KB_OUTPUT,
  "package-lock.json",
  "yarn.lock",
  ".DS_Store",
  "README.md",
  "STRUCTURE.md",
  "USAGE_GUIDE.md",
  "gop_code.js",
];

// Extensions allowed
const ALLOWED_EXTS = [
  ".js",
  ".jsx",
  ".ts",
  ".tsx",
  ".css",
  ".scss",
  ".json",
  ".sql",
  ".env",
];

// ======= FILE SCANNER =======
function scanFiles(dir, list = []) {
  for (const item of fs.readdirSync(dir)) {
    const full = path.join(dir, item);
    const stat = fs.statSync(full);

    // Ignore folders
    if (stat.isDirectory()) {
      if (!IGNORE_DIRS.includes(item)) scanFiles(full, list);
    }

    // Ignore files
    else {
      if (!IGNORE_FILES.includes(item)) {
        const ext = path.extname(item).toLowerCase();
        if (ALLOWED_EXTS.includes(ext) || item.startsWith(".env")) {
          list.push(full);
        }
      }
    }
  }
  return list;
}

// ======= RAW EXPORT (Full Project Dump) =======
function generateRawFile(files) {
  let content = `======================
FULL PROJECT EXPORT
Generated: ${new Date().toISOString()}
======================\n\n`;

  for (const file of files) {
    const relative = path.relative(__dirname, file);
    const text = fs.readFileSync(file, "utf8");

    content += `
=================================================================
FILE PATH: ${relative}
=================================================================
${text}
`;
  }

  fs.writeFileSync(RAW_OUTPUT, content);
  console.log(`âœ… RAW EXPORT DONE: ${RAW_OUTPUT}`);
}

// ======= KNOWLEDGE BASE GENERATOR =======
function generateKnowledgeBase(files) {
  let md = `# ðŸ“˜ PROJECT KNOWLEDGE BASE
*(Auto-generated to help Copilot understand your entire project instantly)*

Generated: **${new Date().toISOString()}**

---

# Table of Contents
- [Project Summary](#project-summary)
- [Tech Stack](#tech-stack)
- [Folder Overview](#folder-overview)
- [Files Included](#files-included)
- [Important Code Snippets](#important-code-snippets)
- [Recommended Copilot Startup Command](#recommended-copilot-startup-command)
- [Next Steps / Roadmap](#next-steps--roadmap)

---

# ðŸ“Œ Project Summary
This file serves as the **brain** of your project.  
Copilot can reload everything from this file after switching GitHub accounts.

---

# âš™ Tech Stack
- React (Vite)
- Supabase (Auth, SQL, Storage, RLS)
- TailwindCSS
- Node scripts
- SQL schema + triggers
- Admin panel + booking system

---

# ðŸ“‚ Folder Overview
`;

  // Group files by top folder
  const groups = {};

  for (const file of files) {
    const relative = path.relative(__dirname, file);
    const folder = relative.split(path.sep)[0];
    if (!groups[folder]) groups[folder] = [];
    groups[folder].push(relative);
  }

  for (const folder of Object.keys(groups)) {
    md += `\n## ðŸ”¸ ${folder}\n`;
    groups[folder].forEach((f) => (md += `- ${f}\n`));
  }

  md += `
---

# ðŸ§© Files Included & Summaries
Below are summaries of important files extracted automatically.
(You may refine manually if desired.)

`;

  // Auto summaries
  for (const file of files) {
    const relative = path.relative(__dirname, file);
    const text = fs.readFileSync(file, "utf8");

    const summary = text.substring(0, 300).replace(/\n+/g, " ");

    md += `### ðŸ“„ ${relative}
${summary}...

---
`;
  }

  md += `
# ðŸš€ Recommended Copilot Startup Command

Copy & paste this into Copilot every time you switch accounts:

\`\`\`
/LOAD_PROJECT_CONTEXT
Please load and understand PROJECT_KNOWLEDGE_BASE.md entirely.
Follow all patterns, architecture, and conventions described here.
\`\`\`

---

# ðŸ§­ Next Steps / Roadmap
Add your ongoing tasks here.  
Copilot will follow it as your personal development roadmap.

---

# âœ… End of Knowledge Base  
`;

  fs.writeFileSync(KB_OUTPUT, md);
  console.log(`âœ… KNOWLEDGE BASE GENERATED: ${KB_OUTPUT}`);
}

// ======= MAIN =======
function main() {
  console.log("â³ Scanning project...");
  const files = scanFiles(__dirname);

  console.log(`ðŸ“¦ Found ${files.length} files to export.`);

  generateRawFile(files);
  generateKnowledgeBase(files);

  console.log("ðŸŽ‰ DONE. Use these 2 files to bootstrap Copilot anytime!");
}

main();


=================================================================
FILE PATH: package.json
=================================================================
{
  "name": "hotelbooking",
  "private": true,
  "version": "0.0.0",
  "type": "module",
  "scripts": {
    "dev": "vite",
    "build": "vite build",
    "preview": "vite preview"
  },
  "dependencies": {
    "@emailjs/browser": "^4.4.1",
    "@supabase/supabase-js": "^2.84.0",
    "html2canvas": "^1.4.1",
    "jspdf": "^3.0.3",
    "qrcode.react": "^4.2.0",
    "react": "^18.2.0",
    "react-dom": "^18.2.0"
  },
  "devDependencies": {
    "@headlessui/react": "^1.7.10",
    "@types/react": "^18.0.27",
    "@types/react-dom": "^18.0.10",
    "@vitejs/plugin-react": "^3.1.0",
    "autoprefixer": "^10.4.13",
    "postcss": "^8.4.21",
    "react-datepicker": "^4.10.0",
    "react-icons": "^4.7.1",
    "react-router-dom": "^6.8.1",
    "spinners-react": "^1.0.7",
    "swiper": "^9.0.4",
    "tailwindcss": "^3.2.6",
    "vite": "^4.1.0",
    "vite-plugin-svgr": "^2.4.0"
  }
}


=================================================================
FILE PATH: Query_V2\01_Clean_Data.sql
=================================================================
-- =====================================================
-- 01_CLEAN_DB.SQL
-- =====================================================
-- XÃ³a báº£ng theo Ä‘Ãºng thá»© tá»± phá»¥ thuá»™c Ä‘á»ƒ khÃ´ng lá»—i khÃ³a ngoáº¡i

-- 1. XoÃ¡ trigger trÃªn auth.users
drop trigger if exists on_auth_user_created on auth.users;

-- 2. XoÃ¡ báº£ng (Drop con trÆ°á»›c, cha sau)
drop table if exists public.audit_logs cascade;
drop table if exists public.password_reset_requests cascade;
drop table if exists public.spa_bookings cascade;
drop table if exists public.restaurant_bookings cascade;
drop table if exists public.booking_events cascade;
drop table if exists public.booking_pricing_breakdown cascade;
drop table if exists public.room_reviews cascade;
drop table if exists public.booking_items cascade;
drop table if exists public.bookings cascade;
drop table if exists public.promotions cascade;
drop table if exists public.price_rules cascade;
drop table if exists public.room_images cascade;
drop table if exists public.rooms cascade;
drop table if exists public.room_type_amenities cascade;
drop table if exists public.room_types cascade;
drop table if exists public.amenities cascade;
drop table if exists public.profiles cascade;
drop table if exists public.holiday_calendar cascade;

-- 3. XoÃ¡ hÃ m vÃ  types
drop function if exists public.get_available_rooms(date, date, int);
drop function if exists public.get_available_rooms(date, date);
drop function if exists public.is_room_available(uuid, date, date);
drop function if exists public.is_admin(uuid);
drop function if exists public.handle_new_user();
drop function if exists public.trigger_set_timestamp();

drop type if exists public.booking_status;
drop type if exists public.room_status;
drop type if exists public.discount_type;
drop type if exists public.price_rule_type;

=================================================================
FILE PATH: Query_V2\02_Int_schema.sql
=================================================================
-- =====================================
-- 02_INIT_SCHEMA.SQL
-- =====================================

create extension if not exists "pgcrypto";

-- ====== ENUMS ======
create type room_status as enum ('available', 'occupied', 'maintenance', 'cleaning');
create type booking_status as enum ('pending', 'pending_payment', 'approved', 'rejected', 'confirmed', 'checked_in', 'checked_out', 'modified', 'completed', 'cancelled');
create type price_rule_type as enum ('weekend', 'holiday', 'seasonal', 'season');
create type discount_type as enum ('percent', 'fixed');

-- ====== FUNCTION UPDATE TIMESTAMP ======
create or replace function public.trigger_set_timestamp()
returns trigger language plpgsql as $$
begin
  new.updated_at = now();
  return new;
end$$;

-- ====== 1. PROFILES ======
create table if not exists public.profiles (
  id uuid primary key default gen_random_uuid(),
  full_name text,
  phone text,
  avatar_url text,
  country text,
  city text,
  preferences jsonb not null default '[]'::jsonb,
  language text not null default 'en',
  newsletter boolean not null default true,
  bio text,
  role text not null default 'user',
  created_at timestamptz not null default now(),
  updated_at timestamptz not null default now()
);
create trigger set_profiles_updated_at before update on public.profiles for each row execute procedure public.trigger_set_timestamp();

-- Trigger User
create or replace function public.handle_new_user()
returns trigger language plpgsql security definer as $$
begin
  insert into public.profiles (id, full_name, role)
  values (new.id, coalesce(new.raw_user_meta_data->>'full_name',''), 'user');
  return new;
end$$;
create trigger on_auth_user_created after insert on auth.users for each row execute procedure public.handle_new_user();

-- Function Check Admin
create or replace function public.is_admin(uid uuid)
returns boolean language sql stable as $$
  select exists(select 1 from public.profiles p where p.id = uid and p.role = 'admin');
$$;

-- ====== 2. AMENITIES ======
create table if not exists public.amenities (
  id uuid primary key default gen_random_uuid(),
  name text unique not null,
  icon_name text,
  created_at timestamptz not null default now()
);

-- ====== 3. ROOM TYPES ======
create table if not exists public.room_types (
  id uuid primary key default gen_random_uuid(),
  code text unique not null,
  name text not null,
  description text,
  base_capacity int not null default 2,
  max_person int not null default 2,
  base_price numeric(12,2) not null,
  is_active boolean not null default true,
  facilities text[] default '{}',
  hotel_rules text[] default '{}',
  cancellation_policy text,
  created_at timestamptz not null default now(),
  updated_at timestamptz not null default now(),
  constraint chk_room_types_capacity check (max_person >= base_capacity)
);
create trigger set_room_types_updated_at before update on public.room_types for each row execute procedure public.trigger_set_timestamp();

-- ====== 4. ROOM TYPE AMENITIES ======
create table if not exists public.room_type_amenities (
  room_type_id uuid not null references public.room_types(id) on delete cascade,
  amenity_id uuid not null references public.amenities(id) on delete cascade,
  primary key (room_type_id, amenity_id)
);

-- ====== 5. ROOM IMAGES ======
create table if not exists public.room_images (
  id uuid primary key default gen_random_uuid(),
  room_type_id uuid not null references public.room_types(id) on delete cascade,
  image_url text not null,
  image_lg_url text,
  display_order int default 0,
  created_at timestamptz not null default now()
);
create index if not exists idx_room_images_room_type_id on public.room_images(room_type_id);

-- ====== 6. ROOMS ======
create table if not exists public.rooms (
  id uuid primary key default gen_random_uuid(),
  room_no text unique not null,
  name text not null,
  room_type_id uuid not null references public.room_types(id),
  floor int,
  size int,
  status room_status not null default 'available',
  -- CÃ¡c cá»™t cached cho frontend
  type text, category text, price numeric(12,2), description text,
  created_at timestamptz not null default now(),
  updated_at timestamptz not null default now()
);
create index if not exists idx_rooms_room_type_id on public.rooms(room_type_id);
create trigger set_rooms_updated_at before update on public.rooms for each row execute procedure public.trigger_set_timestamp();

-- ====== 7. PRICE RULES ======
create table if not exists public.price_rules (
  id uuid primary key default gen_random_uuid(),
  rule_type price_rule_type not null,
  room_type_id uuid references public.room_types(id) on delete cascade,
  start_date date, end_date date, description text,
  apply_fri boolean not null default false,
  apply_sat boolean not null default false,
  apply_sun boolean not null default false,
  price numeric(12,2) not null,
  priority int not null default 10,
  is_active boolean not null default true,
  created_at timestamptz not null default now(),
  updated_at timestamptz not null default now(),
  constraint chk_price_rule_dates check (end_date is null or start_date is null or end_date >= start_date)
);
create trigger set_price_rules_updated_at before update on public.price_rules for each row execute procedure public.trigger_set_timestamp();

-- ====== 8. PROMOTIONS ======
create table if not exists public.promotions (
  id uuid primary key default gen_random_uuid(),
  code text unique not null,
  name text not null,
  description text,
  discount_kind discount_type not null,
  discount_value numeric(12,2) not null,
  start_date date not null,
  end_date date not null,
  is_active boolean not null default true,
  created_at timestamptz not null default now(),
  updated_at timestamptz not null default now(),
  constraint chk_promo_dates check (end_date >= start_date)
);

-- ====== 9. BOOKINGS ======
create table if not exists public.bookings (
  id uuid primary key default gen_random_uuid(),
  user_id uuid references auth.users(id),
  confirmation_code text not null unique,
  booking_type text not null default 'room',
  status booking_status not null default 'pending_payment',
  check_in date not null,
  check_out date not null,
  room_id uuid references public.rooms(id),
  room_name text,
  user_name text, user_email text, guest_name text, guest_phone text, note text,
  promo_code text references public.promotions(code),
  num_adults int not null default 1,
  num_children int not null default 0,
  total_nights int not null default 1,
  subtotal numeric(12,2) not null default 0,
  discount numeric(12,2) not null default 0,
  total_amount numeric(12,2) not null default 0,
  pricing_breakdown jsonb not null default '[]'::jsonb,
  history jsonb not null default '[]'::jsonb,
  payment_code text, payment_method text, paid_at timestamptz,
  created_at timestamptz not null default now(),
  updated_at timestamptz not null default now(),
  constraint chk_dates_valid check (check_out > check_in)
);
create index if not exists idx_bookings_user_id on public.bookings(user_id);
create unique index if not exists idx_bookings_confirmation_code on public.bookings(confirmation_code);
create trigger set_bookings_updated_at before update on public.bookings for each row execute procedure public.trigger_set_timestamp();

-- ====== 10. BOOKING ITEMS ======
create table if not exists public.booking_items (
  id uuid primary key default gen_random_uuid(),
  booking_id uuid not null references public.bookings(id) on delete cascade,
  room_id uuid not null references public.rooms(id),
  room_type_id uuid not null references public.room_types(id),
  price_per_night numeric(12,2) not null,
  nights int not null,
  amount numeric(12,2) not null,
  created_at timestamptz not null default now()
);

-- ====== 11. ROOM REVIEWS ======
create table if not exists public.room_reviews (
  id uuid primary key default gen_random_uuid(),
  room_type_id uuid not null references public.room_types(id) on delete cascade,
  booking_id uuid references public.bookings(id) on delete set null,
  user_id uuid references auth.users(id),
  user_name text, user_email text, rating int not null check (rating between 1 and 5),
  comment text, stay_date date,
  created_at timestamptz not null default now()
);

-- ====== 12. OTHERS (Audit, Restaurant, Spa, Holidays) ======
create table if not exists public.booking_pricing_breakdown (
  id bigint generated by default as identity primary key,
  booking_id uuid not null references public.bookings(id) on delete cascade,
  stay_date date not null, rate_type text not null, rate numeric(12,2) not null,
  created_at timestamptz not null default now(),
  constraint uniq_booking_pricing unique (booking_id, stay_date, rate_type)
);

create table if not exists public.booking_events (
  id bigint generated by default as identity primary key,
  booking_id uuid not null references public.bookings(id) on delete cascade,
  event_type text not null, note text, actor uuid references auth.users(id), meta jsonb,
  created_at timestamptz not null default now()
);

create table if not exists public.restaurant_bookings (
  id uuid primary key default gen_random_uuid(),
  user_id uuid references auth.users(id),
  confirmation_code text not null unique,
  name text not null, email text not null, phone text,
  reservation_at timestamptz not null, guests int default 1, special_requests text,
  price numeric(12,2) default 0, total_price numeric(12,2) default 0,
  status booking_status default 'pending_payment',
  created_at timestamptz not null default now(), updated_at timestamptz not null default now()
);
create trigger set_restaurant_bookings_updated_at before update on public.restaurant_bookings for each row execute procedure public.trigger_set_timestamp();

create table if not exists public.spa_bookings (
  id uuid primary key default gen_random_uuid(),
  user_id uuid references auth.users(id),
  confirmation_code text not null unique,
  name text not null, email text not null, phone text,
  appointment_at timestamptz not null, service_name text not null, service_duration text,
  therapist text, special_requests text,
  price numeric(12,2) default 0, total_price numeric(12,2) default 0,
  status booking_status default 'pending_payment',
  created_at timestamptz not null default now(), updated_at timestamptz not null default now()
);
create trigger set_spa_bookings_updated_at before update on public.spa_bookings for each row execute procedure public.trigger_set_timestamp();

create table if not exists public.password_reset_requests (
  id uuid primary key default gen_random_uuid(),
  email text not null, code text not null, expires_at timestamptz not null, used_at timestamptz,
  created_at timestamptz not null default now()
);

create table if not exists public.audit_logs (
  id bigint generated by default as identity primary key,
  actor uuid references auth.users(id),
  action text not null, target_table text, target_id text, meta jsonb,
  created_at timestamptz not null default now()
);

create table if not exists public.holiday_calendar (
  id uuid primary key default gen_random_uuid(),
  holiday_date date not null unique,
  name text, multiplier numeric(5,2) default 1.35, is_active boolean default true,
  created_at timestamptz not null default now()
);

-- ====== LOGIC FUNCTIONS ======
create or replace function public.is_room_available(p_room_id uuid, p_start date, p_end date)
returns boolean language sql stable as $$
  select 
    (select r.status = 'available'::room_status from public.rooms r where r.id = p_room_id)
    and not exists (
      select 1 from public.bookings b
      join public.booking_items bi on bi.booking_id = b.id
      where b.status in ('confirmed', 'checked_in')
        and bi.room_id = p_room_id
        and daterange(b.check_in, b.check_out) && daterange(p_start, p_end)
    );
$$;

create or replace function public.get_available_rooms(p_start date, p_end date, p_guests int)
returns setof public.rooms language sql stable as $$
  select r.*
  from public.rooms r
  join public.room_types rt on r.room_type_id = rt.id
  where r.status in ('available', 'cleaning')
    and rt.base_capacity >= p_guests
    and public.is_room_available(r.id, p_start, p_end);
$$;

=================================================================
FILE PATH: Query_V2\03_Setup_RLS.sql
=================================================================
-- =========================================
-- 03_SETUP_RLS.SQL
-- =========================================

-- Enable RLS
alter table public.profiles enable row level security;
alter table public.room_types enable row level security;
alter table public.amenities enable row level security;
alter table public.room_type_amenities enable row level security;
alter table public.rooms enable row level security;
alter table public.room_images enable row level security;
alter table public.room_reviews enable row level security;
alter table public.price_rules enable row level security;
alter table public.promotions enable row level security;
alter table public.bookings enable row level security;
alter table public.booking_items enable row level security;
alter table public.audit_logs enable row level security;

-- Policies
create policy "profiles_owner_read" on public.profiles for select using (auth.uid() = id or public.is_admin(auth.uid()));
create policy "profiles_owner_update" on public.profiles for update using (auth.uid() = id or public.is_admin(auth.uid()));

-- PUBLIC READ (Cho phÃ©p xem phÃ²ng, áº£nh, review mÃ  khÃ´ng cáº§n login)
create policy "rt_select_all" on public.room_types for select using (true);
create policy "am_select_all" on public.amenities for select using (true);
create policy "rta_select_all" on public.room_type_amenities for select using (true);
create policy "r_select_all" on public.rooms for select using (true);
create policy "ri_select_all" on public.room_images for select using (true);
create policy "rr_select_all" on public.room_reviews for select using (true);
create policy "pr_select_all" on public.price_rules for select using (true);
create policy "pm_select_all" on public.promotions for select using (true);

-- ADMIN WRITE
create policy "rt_admin_write" on public.room_types for all using (public.is_admin(auth.uid()));
create policy "am_admin_write" on public.amenities for all using (public.is_admin(auth.uid()));
create policy "rta_admin_write" on public.room_type_amenities for all using (public.is_admin(auth.uid()));
create policy "r_admin_write" on public.rooms for all using (public.is_admin(auth.uid()));
create policy "ri_admin_write" on public.room_images for all using (public.is_admin(auth.uid()));
create policy "pr_admin_write" on public.price_rules for all using (public.is_admin(auth.uid()));
create policy "pm_admin_write" on public.promotions for all using (public.is_admin(auth.uid()));

-- REVIEWS (User write)
create policy "rr_user_insert" on public.room_reviews for insert with check (auth.uid() = user_id or user_id is null);
create policy "rr_user_update" on public.room_reviews for update using (auth.uid() = user_id or public.is_admin(auth.uid()));
create policy "rr_admin_delete" on public.room_reviews for delete using (public.is_admin(auth.uid()));

-- BOOKINGS (User own)
create policy "b_owner_read" on public.bookings for select using (auth.uid() = user_id or public.is_admin(auth.uid()));
create policy "b_owner_insert" on public.bookings for insert with check (auth.uid() = user_id or public.is_admin(auth.uid()));
create policy "b_owner_update" on public.bookings for update using (auth.uid() = user_id or public.is_admin(auth.uid()));

create policy "bi_read" on public.booking_items for select using (exists(select 1 from public.bookings b where b.id = booking_items.booking_id and (b.user_id = auth.uid() or public.is_admin(auth.uid()))));
create policy "bi_write" on public.booking_items for all using (exists(select 1 from public.bookings b where b.id = booking_items.booking_id and (b.user_id = auth.uid() or public.is_admin(auth.uid()))));

create policy "audit_admin_read" on public.audit_logs for select using (public.is_admin(auth.uid()));
create policy "audit_admin_write" on public.audit_logs for all using (public.is_admin(auth.uid()));

=================================================================
FILE PATH: Query_V2\04_Full_seed_data.sql
=================================================================
-- =====================================================
-- 04_FULL_SEED_DATA.SQL
-- =====================================================

-- 1. AMENITIES
insert into public.amenities (name, icon_name) values
  ('Wifi', 'FaWifi'), ('Coffee', 'FaCoffee'), ('Bath', 'FaBath'), ('Parking Space', 'FaParking'),
  ('Swimming Pool', 'FaSwimmingPool'), ('Breakfast', 'FaHotdog'), ('GYM', 'FaStopwatch'), ('Drinks', 'FaCocktail')
on conflict (name) do nothing;

-- 2. ROOM TYPES
insert into public.room_types (code, name, description, base_capacity, max_person, base_price, facilities, is_active) values
  ('STD', 'Standard', 'Comfortable rooms with essential amenities', 1, 3, 115, array['Wifi', 'Coffee', 'Bath', 'Parking Space', 'Swimming Pool', 'Breakfast', 'GYM', 'Drinks'], true),
  ('DLX', 'Deluxe', 'Premium experience with elegant design', 2, 4, 265, array['Wifi', 'Coffee', 'Bath', 'Parking Space', 'Swimming Pool', 'Breakfast', 'GYM', 'Drinks'], true),
  ('SUI', 'Suite', 'Spacious suites for ultimate comfort', 3, 6, 320, array['Wifi', 'Coffee', 'Bath', 'Parking Space', 'Swimming Pool', 'Breakfast', 'GYM', 'Drinks'], true),
  ('PEN', 'Penthouse', 'Exclusive top-floor residences', 4, 6, 344, array['Wifi', 'Coffee', 'Bath', 'Parking Space', 'Swimming Pool', 'Breakfast', 'GYM', 'Drinks'], true),
  ('CMB', 'Combo', 'Value-packed packages with extras', 2, 6, 290, array['Wifi', 'Coffee', 'Bath', 'Parking Space', 'Swimming Pool', 'Breakfast', 'GYM', 'Drinks'], true)
on conflict (code) do update set is_active = true;

-- 3. ROOMS (40 PHÃ’NG Äáº¦Y Äá»¦)
insert into public.rooms (id, room_no, name, room_type_id, floor, size, type, category, price, description, status) values
  -- Standard
  (gen_random_uuid(), 'STD-01', 'Standard Room', (select id from public.room_types where code='STD'), 1, 30, 'Standard', 'standard', 115, 'Comfortable room with essential amenities.', 'available'),
  (gen_random_uuid(), 'STD-02', 'Cozy Studio Standard', (select id from public.room_types where code='STD'), 1, 28, 'Standard', 'standard', 145, 'Intimate studio with integrated work space.', 'available'),
  (gen_random_uuid(), 'STD-03', 'Garden View Standard', (select id from public.room_types where code='STD'), 1, 35, 'Standard', 'standard', 195, 'Charming room with garden views.', 'available'),
  (gen_random_uuid(), 'STD-04', 'Courtyard Classic Standard', (select id from public.room_types where code='STD'), 1, 32, 'Standard', 'standard', 185, 'Peaceful room overlooking the courtyard.', 'available'),
  (gen_random_uuid(), 'STD-05', 'Urban Escape Standard', (select id from public.room_types where code='STD'), 2, 38, 'Standard', 'standard', 205, 'Modern room in city center.', 'available'),
  (gen_random_uuid(), 'STD-06', 'Zen Retreat Standard', (select id from public.room_types where code='STD'), 2, 42, 'Standard', 'standard', 225, 'Tranquil room designed for relaxation.', 'available'),
  (gen_random_uuid(), 'STD-07', 'Heritage Standard', (select id from public.room_types where code='STD'), 2, 55, 'Standard', 'standard', 275, 'Elegant room with cultural charm.', 'available'),
  (gen_random_uuid(), 'STD-08', 'Skyline View Standard', (select id from public.room_types where code='STD'), 2, 45, 'Standard', 'standard', 255, 'Room with panoramic city views.', 'available'),
  -- Deluxe
  (gen_random_uuid(), 'DLX-01', 'Deluxe Room', (select id from public.room_types where code='DLX'), 3, 50, 'Deluxe', 'deluxe', 265, 'Premium experience with elegant design.', 'available'),
  (gen_random_uuid(), 'DLX-02', 'Deluxe Comfort', (select id from public.room_types where code='DLX'), 3, 38, 'Deluxe', 'deluxe', 245, 'Comfortable deluxe room.', 'available'),
  (gen_random_uuid(), 'DLX-03', 'Deluxe Modern', (select id from public.room_types where code='DLX'), 3, 42, 'Deluxe', 'deluxe', 265, 'Modern deluxe room.', 'available'),
  (gen_random_uuid(), 'DLX-04', 'Deluxe Sophisticated', (select id from public.room_types where code='DLX'), 3, 46, 'Deluxe', 'deluxe', 295, 'Sophisticated deluxe suite.', 'available'),
  (gen_random_uuid(), 'DLX-05', 'Deluxe Exquisite', (select id from public.room_types where code='DLX'), 4, 50, 'Deluxe', 'deluxe', 315, 'Exquisite deluxe room.', 'available'),
  (gen_random_uuid(), 'DLX-06', 'Deluxe Paramount', (select id from public.room_types where code='DLX'), 4, 54, 'Deluxe', 'deluxe', 335, 'Paramount deluxe suite.', 'available'),
  (gen_random_uuid(), 'DLX-07', 'Deluxe Prestigious', (select id from public.room_types where code='DLX'), 4, 58, 'Deluxe', 'deluxe', 365, 'Prestigious deluxe suite.', 'available'),
  (gen_random_uuid(), 'DLX-08', 'Deluxe Elite', (select id from public.room_types where code='DLX'), 4, 52, 'Deluxe', 'deluxe', 285, 'Elite deluxe experience.', 'available'),
  -- Suite
  (gen_random_uuid(), 'SUI-01', 'Luxury Suite Room', (select id from public.room_types where code='SUI'), 5, 90, 'Suite', 'suite', 320, 'Spacious suite for ultimate comfort.', 'available'),
  (gen_random_uuid(), 'SUI-02', 'Suite Comfort', (select id from public.room_types where code='SUI'), 5, 50, 'Suite', 'suite', 315, 'Comfortable suite.', 'available'),
  (gen_random_uuid(), 'SUI-03', 'Suite Spacious', (select id from public.room_types where code='SUI'), 5, 55, 'Suite', 'suite', 335, 'Spacious suite.', 'available'),
  (gen_random_uuid(), 'SUI-04', 'Suite Elegance', (select id from public.room_types where code='SUI'), 5, 60, 'Suite', 'suite', 365, 'Elegant suite.', 'available'),
  (gen_random_uuid(), 'SUI-05', 'Suite Grand', (select id from public.room_types where code='SUI'), 6, 65, 'Suite', 'suite', 385, 'Grand suite.', 'available'),
  (gen_random_uuid(), 'SUI-06', 'Suite Magnificent', (select id from public.room_types where code='SUI'), 6, 70, 'Suite', 'suite', 415, 'Magnificent suite.', 'available'),
  (gen_random_uuid(), 'SUI-07', 'Suite Premium', (select id from public.room_types where code='SUI'), 6, 75, 'Suite', 'suite', 445, 'Premium suite.', 'available'),
  (gen_random_uuid(), 'SUI-08', 'Suite Royal', (select id from public.room_types where code='SUI'), 6, 80, 'Suite', 'suite', 475, 'Royal suite.', 'available'),
  -- Penthouse
  (gen_random_uuid(), 'PEN-01', 'Penthouse', (select id from public.room_types where code='PEN'), 7, 45, 'Penthouse', 'penthouse', 344, 'Exclusive top-floor residence.', 'available'),
  (gen_random_uuid(), 'PEN-02', 'Penthouse View', (select id from public.room_types where code='PEN'), 7, 50, 'Penthouse', 'penthouse', 375, 'Penthouse with stunning views.', 'available'),
  (gen_random_uuid(), 'PEN-03', 'Penthouse Skyline', (select id from public.room_types where code='PEN'), 7, 55, 'Penthouse', 'penthouse', 395, 'Penthouse overlooking the skyline.', 'available'),
  (gen_random_uuid(), 'PEN-04', 'Penthouse Crown', (select id from public.room_types where code='PEN'), 7, 60, 'Penthouse', 'penthouse', 425, 'Crown jewel penthouse.', 'available'),
  (gen_random_uuid(), 'PEN-05', 'Penthouse Royal', (select id from public.room_types where code='PEN'), 8, 65, 'Penthouse', 'penthouse', 455, 'Royal penthouse.', 'available'),
  (gen_random_uuid(), 'PEN-06', 'Penthouse Ultra', (select id from public.room_types where code='PEN'), 8, 70, 'Penthouse', 'penthouse', 485, 'Ultra-luxury penthouse.', 'available'),
  (gen_random_uuid(), 'PEN-07', 'Penthouse Imperial', (select id from public.room_types where code='PEN'), 8, 75, 'Penthouse', 'penthouse', 515, 'Imperial penthouse.', 'available'),
  (gen_random_uuid(), 'PEN-08', 'Penthouse Supreme', (select id from public.room_types where code='PEN'), 8, 80, 'Penthouse', 'penthouse', 545, 'Supreme penthouse.', 'available'),
  -- Combo
  (gen_random_uuid(), 'CMB-01', 'Combo Premium', (select id from public.room_types where code='CMB'), 1, 40, 'Combo', 'combo', 245, 'Value package with breakfast & spa.', 'available'),
  (gen_random_uuid(), 'CMB-02', 'Combo Family', (select id from public.room_types where code='CMB'), 2, 50, 'Combo', 'combo', 315, 'Family package with activities.', 'available'),
  (gen_random_uuid(), 'CMB-03', 'Combo Romance', (select id from public.room_types where code='CMB'), 2, 42, 'Combo', 'combo', 265, 'Romance package with dinner.', 'available'),
  (gen_random_uuid(), 'CMB-04', 'Combo Business', (select id from public.room_types where code='CMB'), 3, 36, 'Combo', 'combo', 255, 'Business package.', 'available'),
  (gen_random_uuid(), 'CMB-05', 'Combo Adventure', (select id from public.room_types where code='CMB'), 3, 44, 'Combo', 'combo', 275, 'Adventure package.', 'available'),
  (gen_random_uuid(), 'CMB-06', 'Combo Wellness', (select id from public.room_types where code='CMB'), 4, 48, 'Combo', 'combo', 285, 'Wellness package.', 'available'),
  (gen_random_uuid(), 'CMB-07', 'Combo Culinary', (select id from public.room_types where code='CMB'), 4, 45, 'Combo', 'combo', 295, 'Culinary package.', 'available'),
  (gen_random_uuid(), 'CMB-08', 'Combo Ultimate', (select id from public.room_types where code='CMB'), 5, 70, 'Combo', 'combo', 565, 'Ultimate combo package.', 'available')
on conflict (room_no) do nothing;

-- 4. ROOM IMAGES (áº¢NH THáº¬T Tá»ª FILE Báº N ÄÆ¯A)
insert into public.room_images (room_type_id, image_url, image_lg_url, display_order)
select id, 'https://sxteddkozzqniebfstag.supabase.co/storage/v1/object/public/hotel-rooms/img/rooms/1.png', 'https://sxteddkozzqniebfstag.supabase.co/storage/v1/object/public/hotel-rooms/img/rooms/1-lg.png', 1 from public.room_types where code = 'STD'
union all
select id, 'https://sxteddkozzqniebfstag.supabase.co/storage/v1/object/public/hotel-rooms/img/rooms/2.png', 'https://sxteddkozzqniebfstag.supabase.co/storage/v1/object/public/hotel-rooms/img/rooms/2-lg.png', 1 from public.room_types where code = 'DLX'
union all
select id, 'https://sxteddkozzqniebfstag.supabase.co/storage/v1/object/public/hotel-rooms/img/rooms/3.png', 'https://sxteddkozzqniebfstag.supabase.co/storage/v1/object/public/hotel-rooms/img/rooms/3-lg.png', 1 from public.room_types where code = 'SUI'
union all
select id, 'https://sxteddkozzqniebfstag.supabase.co/storage/v1/object/public/hotel-rooms/img/rooms/4.png', 'https://sxteddkozzqniebfstag.supabase.co/storage/v1/object/public/hotel-rooms/img/rooms/4-lg.png', 1 from public.room_types where code = 'PEN'
union all
select id, 'https://sxteddkozzqniebfstag.supabase.co/storage/v1/object/public/hotel-rooms/img/rooms/5.png', 'https://sxteddkozzqniebfstag.supabase.co/storage/v1/object/public/hotel-rooms/img/rooms/5-lg.png', 1 from public.room_types where code = 'CMB'
on conflict do nothing;

-- 5. REVIEWS MáºªU
insert into public.room_reviews (room_type_id, user_name, user_email, rating, comment, stay_date, created_at) values
  ((select id from public.room_types where code='STD'), 'Sophia Nguyen', 'sophia@email.com', 5, 'Room was spotless, pool view stunning.', '2024-10-15', now()),
  ((select id from public.room_types where code='STD'), 'Daniel Park', 'daniel@email.com', 4, 'Bed was plush and breakfast tasty.', '2024-11-10', now()),
  ((select id from public.room_types where code='DLX'), 'Marco Rossi', 'marco@email.com', 5, 'Serene courtyard setting.', '2024-07-22', now());

-- 6. KHUYáº¾N MÃƒI & QUY Táº®C GIÃ
insert into public.price_rules (rule_type, room_type_id, apply_fri, apply_sat, apply_sun, price, priority, description, is_active)
select 'weekend'::price_rule_type, rt.id, false, true, true, rt.base_price * 1.15, 5, 'Weekend rate', true from public.room_types rt on conflict do nothing;

insert into public.promotions (code, name, description, discount_kind, discount_value, start_date, end_date, is_active) values
  ('WELCOME25', 'Welcome 25% Off', 'Giáº£m 25% cho Ä‘áº·t phÃ²ng láº§n Ä‘áº§u', 'percent', 25, '2025-01-01', '2025-12-31', true),
  ('SUMMER50', 'Summer Special 50k', 'Giáº£m 50k cho Ä‘áº·t phÃ²ng mÃ¹a hÃ¨', 'fixed', 50, '2025-06-01', '2025-08-31', true),
  ('WEEKEND15', 'Weekend Bonus', 'Giáº£m 15% cuá»‘i tuáº§n', 'percent', 15, '2025-01-01', '2025-12-31', true)
on conflict (code) do nothing;

-- 7. USERS MáºªU & BOOKINGS (QUAN TRá»ŒNG Äá»‚ TEST)
DO $$
DECLARE
    v_user1_id uuid := '00000000-0000-0000-0000-000000000001';
    v_user2_id uuid := '00000000-0000-0000-0000-000000000002';
BEGIN
    IF NOT EXISTS (SELECT 1 FROM auth.users WHERE id = v_user1_id) THEN
        INSERT INTO auth.users (id, email, encrypted_password, email_confirmed_at, raw_user_meta_data)
        VALUES (v_user1_id, 'khach1@example.com', 'hashed', now(), '{"full_name": "Nguyen Van Khach"}');
    END IF;
    IF NOT EXISTS (SELECT 1 FROM auth.users WHERE id = v_user2_id) THEN
        INSERT INTO auth.users (id, email, encrypted_password, email_confirmed_at, raw_user_meta_data)
        VALUES (v_user2_id, 'khachvip@example.com', 'hashed', now(), '{"full_name": "Tran Thi Vip"}');
    END IF;
END $$;

-- Táº¡o Booking QuÃ¡ khá»©
INSERT INTO public.bookings (id, user_id, confirmation_code, status, check_in, check_out, room_id, room_name, total_amount)
VALUES (gen_random_uuid(), '00000000-0000-0000-0000-000000000001', 'BK-PAST-01', 'checked_out', CURRENT_DATE - 10, CURRENT_DATE - 8, (SELECT id FROM public.rooms WHERE room_no = 'STD-01'), 'Standard Room', 230);
-- Táº¡o Booking TÆ°Æ¡ng lai
INSERT INTO public.bookings (id, user_id, confirmation_code, status, check_in, check_out, room_id, room_name, total_amount)
VALUES (gen_random_uuid(), '00000000-0000-0000-0000-000000000002', 'BK-FUTR-02', 'confirmed', CURRENT_DATE + 5, CURRENT_DATE + 7, (SELECT id FROM public.rooms WHERE room_no = 'DLX-01'), 'Deluxe Room', 530);

-- Táº¡o Booking Items
INSERT INTO public.booking_items (booking_id, room_id, room_type_id, price_per_night, nights, amount)
SELECT b.id, b.room_id, r.room_type_id, r.price, (b.check_out - b.check_in), (r.price * (b.check_out - b.check_in))
FROM public.bookings b JOIN public.rooms r ON b.room_id = r.id;

-- 8. LIÃŠN Káº¾T TIá»†N NGHI (AUTO LINK)
INSERT INTO public.room_type_amenities (room_type_id, amenity_id)
SELECT DISTINCT rt.id, a.id FROM public.room_types rt CROSS JOIN LATERAL unnest(rt.facilities) AS facility_name JOIN public.amenities a ON a.name = facility_name ON CONFLICT DO NOTHING;

-- 9. Lá»ŠCH Lá»„
INSERT INTO public.holiday_calendar (holiday_date, name, multiplier) VALUES
    ('2025-01-01', 'New Year 2025', 1.5), ('2025-04-30', 'Reunification Day', 1.3), ('2025-12-25', 'Christmas Day', 1.5)
ON CONFLICT (holiday_date) DO NOTHING;

=================================================================
FILE PATH: src\App.jsx
=================================================================
import { BrowserRouter, Route, Routes, useLocation } from "react-router-dom";
import { Footer, Header, PageNotFound, ProtectedRoute } from "./components";
import ChatBox from "./components/chatBox";
import {
  Home,
  RoomDetails,
  Admin,
  Login,
  Register,
  ForgotPassword,
  ResetPassword,
  RoomsPage,
  Contact,
  UserDashboard,
  RestaurantPage,
  SpaPage,
  CleanupPage,
} from "./pages";
import "./style/chatbox.css";

const AppContent = () => {
  const location = useLocation();
  const isAdminPage = location.pathname.startsWith("/admin");
  const isLoginPage =
    location.pathname === "/login" || location.pathname === "/admin/login";
  const isRegisterPage = location.pathname === "/register";
  const isForgotPasswordPage = location.pathname === "/forgot-password";
  const isResetPasswordPage = location.pathname === "/reset-password";
  const isUserDashboardPage = location.pathname === "/account";
  const shouldHideHeaderFooter =
    isAdminPage ||
    isLoginPage ||
    isRegisterPage ||
    isForgotPasswordPage ||
    isResetPasswordPage ||
    isUserDashboardPage;

  return (
    <>
      {!shouldHideHeaderFooter && <Header />}

      <Routes>
        <Route path={"/"} element={<Home />} />
        <Route path={"/room/:id"} element={<RoomDetails />} />
        <Route path={"/rooms"} element={<RoomsPage />} />
        <Route path={"/restaurant"} element={<RestaurantPage />} />
        <Route path={"/spa"} element={<SpaPage />} />
        <Route path={"/contact"} element={<Contact />} />
        <Route
          path={"/account"}
          element={
            <ProtectedRoute redirectTo="/login" disallowAdmin={true}>
              <UserDashboard />
            </ProtectedRoute>
          }
        />
        <Route path={"/login"} element={<Login />} />
        <Route path={"/register"} element={<Register />} />
        <Route path={"/forgot-password"} element={<ForgotPassword />} />
        <Route path={"/reset-password"} element={<ResetPassword />} />
        <Route path={"/admin/login"} element={<Login />} />
        <Route
          path={"/admin"}
          element={
            <ProtectedRoute requireAdmin={true} redirectTo="/admin/login">
              <Admin />
            </ProtectedRoute>
          }
        />
        <Route path={"/cleanup"} element={<CleanupPage />} />
        <Route path={"*"} element={<PageNotFound />} />
      </Routes>

      {!shouldHideHeaderFooter && <Footer />}
      {!shouldHideHeaderFooter && <ChatBox />}
    </>
  );
};

const App = () => {
  return (
    <main className="">
      <BrowserRouter>
        <AppContent />
      </BrowserRouter>
    </main>
  );
};

export default App;


=================================================================
FILE PATH: src\assets\index.js
=================================================================
// âš ï¸ DEPRECATED: Room images now come from Supabase Storage
// All room image imports removed - use supabaseStorageUrls.js instead

import Slider1 from './img/heroSlider/1.jpg';
import Slider2 from './img/heroSlider/2.jpg';
import Slider3 from './img/heroSlider/3.jpg';

// Logo exports - still using local SVGs
export { ReactComponent as LogoDark } from './img/logo-dark.svg';
export { ReactComponent as LogoWhite } from './img/logo-white.svg';

const images = {
    Slider1,
    Slider2,
    Slider3,
    // Room images removed - they now come from Supabase Storage
}

export default images;

=================================================================
FILE PATH: src\components\admin\AuditLogsManagement.jsx
=================================================================
import { useEffect } from 'react';
import { useCRUD } from '../../hooks';
import { AdminHeader, AdminTable } from '../../features/admin';
const AuditLogsManagement = () => {
  const { data: logs, isLoading, error, fetchData } = useCRUD(
    'audit_logs',
    '*'
  );

  useEffect(() => {
    fetchData({}, { column: 'created_at', ascending: false });
  }, [fetchData]);

  // Table columns configuration
  const columns = [
    {
      key: 'actor',
      label: 'Actor',
      render: (value) => <span className="font-semibold">{value || 'System'}</span>
    },
    {
      key: 'action',
      label: 'Action',
      render: (value) => (
        <span className={`px-3 py-1 rounded-full text-sm font-semibold ${
          value === 'create' ? 'bg-green-100 text-green-800' :
          value === 'update' ? 'bg-blue-100 text-blue-800' :
          value === 'delete' ? 'bg-red-100 text-red-800' :
          'bg-gray-100 text-gray-800'
        }`}>
          {value?.toUpperCase() || 'N/A'}
        </span>
      )
    },
    {
      key: 'table_name',
      label: 'Table',
      render: (value) => <span className="font-mono text-sm">{value || '-'}</span>
    },
    {
      key: 'record_id',
      label: 'Record ID',
      render: (value) => <span className="text-sm">{value || '-'}</span>
    },
    {
      key: 'changes',
      label: 'Changes',
      render: (value) => <span className="text-sm text-gray-600">{value ? 'Yes' : 'No'}</span>
    },
    {
      key: 'created_at',
      label: 'Timestamp',
      render: (value) => <span className="text-sm">{value ? new Date(value).toLocaleString() : '-'}</span>
    }
  ];

  return (
    <div>
      <AdminHeader
        title="Audit Logs"
        description="Admin action history - Record CRUD operations"
      />

      <AdminTable
        columns={columns}
        data={logs}
        isLoading={isLoading}
        error={error}
        onRetry={() => fetchData({}, { column: 'created_at', ascending: false })}
        emptyMessage="No data found"
      />
    </div>
  );
};

export default AuditLogsManagement;


=================================================================
FILE PATH: src\components\admin\BookingsManagement.jsx
=================================================================
import { useState, useEffect } from "react";
import {
  FaCheck,
  FaTimes,
  FaEdit,
  FaTrash
} from "react-icons/fa";
import {
  fetchAllRoomBookingsForAdmin,
  fetchAllRestaurantBookingsForAdmin,
  fetchAllSpaBookingsForAdmin,
  updateRoomBookingStatus,
  updateRestaurantBookingStatus,
  updateSpaBookingStatus,
  deleteRoomBooking,
  deleteRestaurantBooking,
  deleteSpaBooking
} from "../../services/adminService";

const BookingsManagement = () => {
  const [bookings, setBookings] = useState([]);
  const [selectedBooking, setSelectedBooking] = useState(null);
  const [isModalOpen, setIsModalOpen] = useState(false);
  const [loading, setLoading] = useState(true);
  const [error, setError] = useState(null);
  const [success, setSuccess] = useState(null);

  useEffect(() => {
    loadData();
  }, []);

  const loadData = async () => {
    setLoading(true);
    setError(null);
    try {
      const [roomBookings, restBookings, spaBookings] = await Promise.all([
        fetchAllRoomBookingsForAdmin(),
        fetchAllRestaurantBookingsForAdmin(),
        fetchAllSpaBookingsForAdmin(),
      ]);

      const combined = [
        ...roomBookings.map((b) => ({
          ...b,
          type: "room",
          item_name: b.rooms?.room_no || "Room N/A",
          guestName: b.profiles?.full_name || "N/A",
          guestEmail: b.profiles?.email || "N/A",
          totalPrice: parseFloat(b.total_amount || 0),
        })),
        ...restBookings.map((b) => ({
          ...b,
          type: "restaurant",
          item_name: "Restaurant Table",
          guestName: b.profiles?.full_name || b.name || "N/A",
          guestEmail: b.profiles?.email || b.email || "N/A",
          totalPrice: parseFloat(b.total_price || 0),
          checkIn: b.reservation_at,
          checkOut: b.reservation_at,
        })),
        ...spaBookings.map((b) => ({
          ...b,
          type: "spa",
          item_name: b.service_name || "Spa Service",
          guestName: b.profiles?.full_name || b.name || "N/A",
          guestEmail: b.profiles?.email || b.email || "N/A",
          totalPrice: parseFloat(b.total_price || 0),
          checkIn: b.appointment_at,
          checkOut: b.appointment_at,
        })),
      ].sort((a, b) => new Date(b.created_at) - new Date(a.created_at));

      setBookings(combined);
    } catch (err) {
      console.error("âŒ Error loading admin bookings:", err);
      setError("Failed to load bookings");
      setBookings([]);
    } finally {
      setLoading(false);
    }
  };

  const handleStatusChange = async (booking) => {
    const availableStatuses = statusOptions.map((opt) => opt.value);
    const statusListPrompt = availableStatuses.join(", ");

    const newStatus = prompt(
      `Change status for ${booking.confirmation_code || booking.id.substring(0, 8)} (current: ${booking.status}) to: (${statusListPrompt})`
    );

    if (newStatus && availableStatuses.includes(newStatus)) {
      setLoading(true);
      setError(null);
      try {
        const updateFn =
          booking.type === "room"
            ? updateRoomBookingStatus
            : booking.type === "restaurant"
            ? updateRestaurantBookingStatus
            : updateSpaBookingStatus;

        await updateFn(booking.id, newStatus);
        setSuccess(`Booking status updated to ${newStatus}`);
        await loadData();
        setTimeout(() => setSuccess(null), 3000);
        console.log(
          `âœ… Booking ${booking.confirmation_code || booking.id.substring(0, 8)} status updated to ${newStatus}`
        );
      } catch (err) {
        console.error("âŒ Error updating status:", err);
        setError(err.message || "Failed to update booking status");
      } finally {
        setLoading(false);
      }
    }
  };

  const handleDelete = async (booking) => {
    if (!window.confirm(`Are you sure you want to delete booking #${booking.confirmation_code || booking.id.substring(0, 8)}? This action cannot be undone.`)) return;

    setLoading(true);
    setError(null);
    try {
      const deleteFn =
        booking.type === "room"
          ? deleteRoomBooking
          : booking.type === "restaurant"
          ? deleteRestaurantBooking
          : deleteSpaBooking;

      await deleteFn(booking.id);
      setSuccess(`Booking deleted successfully`);
      await loadData();
      setTimeout(() => setSuccess(null), 3000);
    } catch (err) {
      console.error("âŒ Error deleting booking:", err);
      setError(err.message || "Failed to delete booking");
    } finally {
      setLoading(false);
    }
  };

  const statusOptions = [
    {
      value: "pending",
      label: "Pending Approval",
      color: "bg-yellow-100 text-yellow-800",
    },
    {
      value: "pending_payment",
      label: "Pending Payment",
      color: "bg-yellow-200 text-yellow-800",
    },
    {
      value: "approved",
      label: "Approved",
      color: "bg-green-100 text-green-800",
    },
    {
      value: "confirmed",
      label: "Confirmed",
      color: "bg-blue-100 text-blue-800",
    },
    {
      value: "checked_in",
      label: "Checked In",
      color: "bg-cyan-100 text-cyan-800",
    },
    {
      value: "checked_out",
      label: "Checked Out",
      color: "bg-gray-300 text-gray-800",
    },
    { value: "completed", label: "Completed", color: "bg-gray-500 text-white" },
    {
      value: "modified",
      label: "Modified",
      color: "bg-purple-100 text-purple-800",
    },
    { value: "rejected", label: "Rejected", color: "bg-red-100 text-red-800" },
    {
      value: "cancelled",
      label: "Cancelled",
      color: "bg-red-200 text-red-800",
    },
  ];

  const getStatusBadge = (status) => {
    const option = statusOptions.find((opt) => opt.value === status);
    return (
      <span
        className={`px-3 py-1 rounded-full text-xs font-semibold ${
          option?.color || "bg-gray-100 text-gray-800"
        }`}
      >
        {option?.label || status}
      </span>
    );
  };

  const handleViewDetails = (booking) => {
    setSelectedBooking(booking);
    setIsModalOpen(true);
  };

  const DetailItem = ({ label, value, isTotal = false, isHtml = false }) => (
    <div
      className={`py-1 ${isTotal ? "border-t-2 border-accent mt-4 pt-4" : ""}`}
    >
      <label className="block text-xs font-semibold mb-1 text-primary/70 uppercase">
        {label}
      </label>
      {isHtml ? (
        <div>{value}</div>
      ) : (
        <span
          className={`font-semibold ${
            isTotal ? "text-lg text-accent" : "text-primary"
          }`}
        >
          {value || "N/A"}
        </span>
      )}
    </div>
  );

  return (
    <div>
      <div className="mb-8">
        <h1 className="h2 text-primary mb-2">Bookings Management</h1>
        <p className="text-gray-600">
          Approve, reject, cancel orders and manage guest information
        </p>
      </div>

      {error && (
        <div className="mb-6 p-4 bg-red-50 border border-red-200 rounded-lg text-red-700">
          âŒ {error}
        </div>
      )}

      {success && (
        <div className="mb-6 p-4 bg-green-50 border border-green-200 rounded-lg text-green-700">
          âœ… {success}
        </div>
      )}

      {loading && !error ? <div className="text-center py-8 text-gray-500">Loading...</div> : null}

      <div className="bg-white rounded-lg shadow-md overflow-hidden">
        <div className="overflow-x-auto">
          <table className="w-full">
            <thead className="bg-accent text-white">
              <tr>
                <th className="px-6 py-4 text-left font-tertiary tracking-wider">
                  ID / Type
                </th>
                <th className="px-6 py-4 text-left font-tertiary tracking-wider">
                  Item/Service
                </th>
                <th className="px-6 py-4 text-left font-tertiary tracking-wider">
                  Guest
                </th>
                <th className="px-6 py-4 text-left font-tertiary tracking-wider">
                  Total
                </th>
                <th className="px-6 py-4 text-left font-tertiary tracking-wider">
                  Date/Time
                </th>
                <th className="px-6 py-4 text-left font-tertiary tracking-wider">
                  Created At
                </th>
                <th className="px-6 py-4 text-left font-tertiary tracking-wider">
                  Status
                </th>
                <th className="px-6 py-4 text-center font-tertiary tracking-wider">
                  Actions
                </th>
              </tr>
            </thead>
            <tbody className="divide-y divide-gray-200">
              {bookings.length === 0 ? (
                <tr>
                  <td
                    colSpan="8"
                    className="px-6 py-12 text-center text-gray-500"
                  >
                    No bookings yet.
                  </td>
                </tr>
              ) : (
                bookings.map((booking) => (
                  <tr key={booking.id} className="hover:bg-gray-50">
                    <td className="px-6 py-4">
                      <span className="font-semibold">
                        {booking.confirmation_code ||
                          booking.id.substring(0, 8)}
                      </span>
                      <span
                        className={`ml-2 px-2 py-0.5 rounded text-xs font-medium uppercase tracking-wider ${
                          booking.type === "room"
                            ? "bg-blue-100 text-blue-800"
                            : booking.type === "restaurant"
                            ? "bg-orange-100 text-orange-800"
                            : "bg-pink-100 text-pink-800"
                        }`}
                      >
                        {booking.type}
                      </span>
                    </td>
                    <td className="px-6 py-4">{booking.item_name || "-"}</td>
                    <td className="px-6 py-4">{booking.guestName || "-"}</td>
                    <td className="px-6 py-4 font-semibold">
                      ${booking.totalPrice?.toFixed(2) || "0.00"}
                    </td>
                    <td className="px-6 py-4 text-sm">
                      {booking.checkIn
                        ? new Date(booking.checkIn).toLocaleDateString()
                        : "-"}
                    </td>
                    <td className="px-6 py-4 text-sm">
                      {new Date(booking.created_at).toLocaleDateString()}
                    </td>
                    <td className="px-6 py-4">
                      {getStatusBadge(booking.status)}
                    </td>
                    <td className="px-6 py-4">
                      <div className="flex items-center justify-center gap-2">
                        <button
                          onClick={() => handleViewDetails(booking)}
                          className="p-2 text-accent hover:bg-accent/10 rounded transition-colors disabled:opacity-50"
                          title="View Details"
                          disabled={loading}
                        >
                          <FaEdit />
                        </button>
                        <button
                          onClick={() => handleStatusChange(booking)}
                          className="p-2 text-orange-500 hover:bg-orange-50 rounded transition-colors disabled:opacity-50"
                          title="Change Status"
                          disabled={loading}
                        >
                          <FaCheck />
                        </button>
                        <button
                          onClick={() => handleDelete(booking)}
                          className="p-2 text-red-500 hover:bg-red-50 rounded transition-colors disabled:opacity-50"
                          title="Delete"
                          disabled={loading}
                        >
                          <FaTrash />
                        </button>
                      </div>
                    </td>
                  </tr>
                ))
              )}
            </tbody>
          </table>
        </div>
      </div>

      {isModalOpen && selectedBooking && (
        <div className="fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4">
          <div className="bg-white rounded-lg shadow-xl max-w-2xl w-full max-h-[90vh] overflow-y-auto">
            <div className="p-6 border-b border-gray-200 flex justify-between items-center">
              <h2 className="h3 text-primary">
                Booking Details #
                {selectedBooking.confirmation_code ||
                  selectedBooking.id.substring(0, 8)}
              </h2>
              <button
                onClick={() => setIsModalOpen(false)}
                className="text-gray-500 hover:text-red-500"
              >
                <FaTimes />
              </button>
            </div>

            <div className="p-6 space-y-6">
              <div className="grid grid-cols-2 gap-4">
                <DetailItem
                  label="Type"
                  value={selectedBooking.type?.toUpperCase()}
                />
                <DetailItem
                  label="Status"
                  value={getStatusBadge(selectedBooking.status)}
                  isHtml={true}
                />

                {selectedBooking.type === "room" && (
                  <>
                    <DetailItem
                      label="Room"
                      value={selectedBooking.item_name}
                    />
                    <DetailItem
                      label="Check-in"
                      value={selectedBooking.check_in}
                    />
                    <DetailItem
                      label="Check-out"
                      value={selectedBooking.check_out}
                    />
                    <DetailItem
                      label="Guests"
                      value={`${selectedBooking.num_adults || 0} Adult(s), ${selectedBooking.num_children || 0} Kid(s)`}
                    />
                    <DetailItem
                      label="Total Nights"
                      value={selectedBooking.total_nights}
                    />
                  </>
                )}
                {selectedBooking.type === "restaurant" && (
                  <>
                    <DetailItem
                      label="Reservation Time"
                      value={new Date(
                        selectedBooking.reservation_at
                      ).toLocaleString("vi-VN")}
                    />
                    <DetailItem
                      label="Guests"
                      value={`${selectedBooking.guests || 0} people`}
                    />
                  </>
                )}
                {selectedBooking.type === "spa" && (
                  <>
                    <DetailItem
                      label="Service"
                      value={selectedBooking.service_name}
                    />
                    <DetailItem
                      label="Appointment"
                      value={new Date(
                        selectedBooking.appointment_at
                      ).toLocaleString("vi-VN")}
                    />
                    <DetailItem
                      label="Therapist"
                      value={selectedBooking.therapist || "No preference"}
                    />
                  </>
                )}

                <DetailItem
                  label="Guest Name"
                  value={selectedBooking.guestName}
                />
                <DetailItem
                  label="Email"
                  value={selectedBooking.guestEmail}
                />
                <DetailItem
                  label="Phone"
                  value={selectedBooking.phone || "N/A"}
                />
                <DetailItem
                  label="Subtotal"
                  value={`$${(selectedBooking.subtotal || 0).toFixed(2)}`}
                />
                <DetailItem
                  label="Discount"
                  value={`$${(selectedBooking.discount || 0).toFixed(2)}`}
                />
                <DetailItem
                  label="TOTAL AMOUNT"
                  value={`$${selectedBooking.totalPrice?.toFixed(2) || "0.00"}`}
                  isTotal={true}
                />
              </div>

              <div>
                <label className="block text-sm font-semibold mb-2 text-primary">
                  Notes / Special Requests
                </label>
                <textarea
                  rows="4"
                  readOnly
                  className="w-full px-4 py-2 border border-gray-300 rounded-lg bg-gray-50 resize-none"
                  defaultValue={selectedBooking.note || "N/A"}
                />
              </div>

              <div className="flex gap-4 pt-4 border-t border-gray-200">
                <button
                  onClick={() => setIsModalOpen(false)}
                  className="btn btn-primary btn-sm flex-1"
                >
                  Close
                </button>
              </div>
            </div>
          </div>
        </div>
      )}
    </div>
  );
};

export default BookingsManagement;

=================================================================
FILE PATH: src\components\admin\BookingsManagement_REFACTORED.js
=================================================================
import { useState, useEffect, useCallback } from "react";
import {
  FaCheck,
  FaTimes,
  FaBan,
  FaEdit,
  FaPhone,
  FaUser,
  FaSpinner,
  FaExclamationCircle,
} from "react-icons/fa";
import {
  fetchAllBookingsForAdmin,
  updateBookingStatus,
  deleteBooking,
} from "../../services/adminService";

/**
 * ============================================================================
 * BOOKINGS MANAGEMENT - REFACTORED
 * ============================================================================
 * 
 * This component displays ALL bookings (Room + Restaurant + Spa) in a unified
 * table using the admin service layer.
 * 
 * Key Changes:
 * - âœ… Uses adminService instead of direct supabase calls
 * - âœ… Cleaner, simpler component logic
 * - âœ… Better error handling and loading states
 * - âœ… Data normalization happens in service layer
 * - âœ… All booking types combined at service level
 * ============================================================================
 */

const BookingsManagement = () => {
  const [bookings, setBookings] = useState([]);
  const [selectedBooking, setSelectedBooking] = useState(null);
  const [isModalOpen, setIsModalOpen] = useState(false);
  const [loading, setLoading] = useState(true);
  const [error, setError] = useState(null);
  const [updating, setUpdating] = useState(false);

  // Status options for dropdown
  const statusOptions = [
    {
      value: "pending",
      label: "Pending Approval",
      color: "bg-yellow-100 text-yellow-800",
    },
    {
      value: "pending_payment",
      label: "Pending Payment",
      color: "bg-yellow-200 text-yellow-800",
    },
    {
      value: "approved",
      label: "Approved",
      color: "bg-green-100 text-green-800",
    },
    {
      value: "confirmed",
      label: "Confirmed",
      color: "bg-blue-100 text-blue-800",
    },
    {
      value: "checked_in",
      label: "Checked In",
      color: "bg-cyan-100 text-cyan-800",
    },
    {
      value: "checked_out",
      label: "Checked Out",
      color: "bg-gray-300 text-gray-800",
    },
    { value: "completed", label: "Completed", color: "bg-gray-500 text-white" },
    {
      value: "modified",
      label: "Modified",
      color: "bg-purple-100 text-purple-800",
    },
    { value: "rejected", label: "Rejected", color: "bg-red-100 text-red-800" },
    {
      value: "cancelled",
      label: "Cancelled",
      color: "bg-red-200 text-red-800",
    },
  ];

  /**
   * Load all bookings from service layer
   */
  const loadBookings = useCallback(async () => {
    setLoading(true);
    setError(null);
    try {
      const data = await fetchAllBookingsForAdmin();
      setBookings(data);
      console.log(`âœ… Loaded ${data.length} bookings`);
    } catch (err) {
      console.error("âŒ Error loading bookings:", err);
      setError("Failed to load bookings. Please try again.");
    } finally {
      setLoading(false);
    }
  }, []);

  /**
   * Initial load on component mount
   */
  useEffect(() => {
    loadBookings();
  }, [loadBookings]);

  /**
   * Handle status change via dialog
   */
  const handleStatusChange = async (booking) => {
    const availableStatuses = statusOptions.map((opt) => opt.value);
    const statusListPrompt = availableStatuses.join(", ");

    const newStatus = prompt(
      `Change status for ${booking.confirmation_code} (current: ${booking.status})\n\nAvailable statuses:\n${statusListPrompt}`
    );

    if (!newStatus) return; // User cancelled

    if (!availableStatuses.includes(newStatus)) {
      alert(`Invalid status. Use one of: ${statusListPrompt}`);
      return;
    }

    setUpdating(true);
    try {
      const success = await updateBookingStatus(
        booking.id,
        booking.type,
        newStatus
      );

      if (success) {
        console.log(`âœ… Booking status updated to ${newStatus}`);
        // Update local state
        setBookings((prev) =>
          prev.map((b) =>
            b.id === booking.id ? { ...b, status: newStatus } : b
          )
        );
        if (selectedBooking?.id === booking.id) {
          setSelectedBooking({ ...selectedBooking, status: newStatus });
        }
      } else {
        setError("Failed to update booking status");
      }
    } catch (err) {
      console.error("âŒ Error updating status:", err);
      setError("Error updating status. Please try again.");
    } finally {
      setUpdating(false);
    }
  };

  /**
   * Handle booking deletion
   */
  const handleDeleteBooking = async (booking) => {
    if (
      !window.confirm(
        `Are you sure you want to delete booking ${booking.confirmation_code}? This cannot be undone.`
      )
    ) {
      return;
    }

    setUpdating(true);
    try {
      const success = await deleteBooking(booking.id, booking.type);
      if (success) {
        console.log(`âœ… Booking deleted`);
        setBookings((prev) => prev.filter((b) => b.id !== booking.id));
        if (selectedBooking?.id === booking.id) {
          setIsModalOpen(false);
          setSelectedBooking(null);
        }
      } else {
        setError("Failed to delete booking");
      }
    } catch (err) {
      console.error("âŒ Error deleting booking:", err);
      setError("Error deleting booking. Please try again.");
    } finally {
      setUpdating(false);
    }
  };

  /**
   * Get status badge with color
   */
  const getStatusBadge = (status) => {
    const option = statusOptions.find((opt) => opt.value === status);
    return (
      <span
        className={`px-3 py-1 rounded-full text-xs font-semibold ${
          option?.color || "bg-gray-100 text-gray-800"
        }`}
      >
        {option?.label || status}
      </span>
    );
  };

  /**
   * Get booking type badge with color
   */
  const getTypeBadge = (type) => {
    const typeConfig = {
      room: { label: "ðŸ›ï¸ Room", color: "bg-blue-100 text-blue-800" },
      restaurant: { label: "ðŸ½ï¸ Restaurant", color: "bg-orange-100 text-orange-800" },
      spa: { label: "ðŸ’† Spa", color: "bg-pink-100 text-pink-800" },
    };

    const config = typeConfig[type] || { label: type, color: "bg-gray-100 text-gray-800" };

    return (
      <span className={`px-2 py-0.5 rounded text-xs font-medium uppercase tracking-wider ${config.color}`}>
        {config.label}
      </span>
    );
  };

  /**
   * View booking details in modal
   */
  const handleViewDetails = (booking) => {
    setSelectedBooking(booking);
    setIsModalOpen(true);
  };

  /**
   * Detail item component for modal
   */
  const DetailItem = ({ label, value, isTotal = false, isHtml = false }) => (
    <div
      className={`py-2 ${isTotal ? "border-t-2 border-accent mt-4 pt-4" : ""}`}
    >
      <label className="block text-xs font-semibold mb-1 text-primary/70 uppercase">
        {label}
      </label>
      {isHtml ? (
        <div>{value}</div>
      ) : (
        <span
          className={`font-semibold ${
            isTotal ? "text-lg text-accent" : "text-primary"
          }`}
        >
          {value || "N/A"}
        </span>
      )}
    </div>
  );

  // ========== RENDER ==========

  return (
    <div className="space-y-6">
      {/* Header */}
      <div className="mb-8">
        <h1 className="h2 text-primary mb-2">Bookings Management</h1>
        <p className="text-gray-600">
          Manage all bookings (Room, Restaurant, Spa) - approve, reject, update status, or delete
        </p>
      </div>

      {/* Error Alert */}
      {error && (
        <div className="bg-red-50 border border-red-200 rounded-lg p-4 flex items-center gap-3 text-red-700">
          <FaExclamationCircle size={20} />
          <p>{error}</p>
          <button
            onClick={() => setError(null)}
            className="ml-auto text-red-500 hover:text-red-700"
          >
            <FaTimes />
          </button>
        </div>
      )}

      {/* Loading State */}
      {loading ? (
        <div className="flex items-center justify-center py-12">
          <FaSpinner className="animate-spin text-accent text-3xl" />
          <span className="ml-3 text-gray-600">Loading bookings...</span>
        </div>
      ) : (
        /* Bookings Table */
        <div className="bg-white rounded-lg shadow-md overflow-hidden">
          <div className="overflow-x-auto">
            <table className="w-full">
              <thead className="bg-accent text-white">
                <tr>
                  <th className="px-6 py-4 text-left font-tertiary tracking-wider">
                    ID / Type
                  </th>
                  <th className="px-6 py-4 text-left font-tertiary tracking-wider">
                    Item/Service
                  </th>
                  <th className="px-6 py-4 text-left font-tertiary tracking-wider">
                    Guest
                  </th>
                  <th className="px-6 py-4 text-left font-tertiary tracking-wider">
                    Total
                  </th>
                  <th className="px-6 py-4 text-left font-tertiary tracking-wider">
                    Date
                  </th>
                  <th className="px-6 py-4 text-left font-tertiary tracking-wider">
                    Status
                  </th>
                  <th className="px-6 py-4 text-center font-tertiary tracking-wider">
                    Actions
                  </th>
                </tr>
              </thead>
              <tbody className="divide-y divide-gray-200">
                {bookings.length === 0 ? (
                  <tr>
                    <td colSpan="7" className="px-6 py-12 text-center text-gray-500">
                      No bookings found.
                    </td>
                  </tr>
                ) : (
                  bookings.map((booking) => (
                    <tr key={booking.id} className="hover:bg-gray-50 transition-colors">
                      <td className="px-6 py-4">
                        <div className="flex items-center gap-2">
                          <span className="font-semibold text-sm">
                            {booking.confirmation_code || booking.id.substring(0, 8)}
                          </span>
                          {getTypeBadge(booking.type)}
                        </div>
                      </td>
                      <td className="px-6 py-4 text-sm">
                        {booking.item_name || "-"}
                      </td>
                      <td className="px-6 py-4">
                        <div className="flex items-center gap-2">
                          <FaUser className="text-gray-400" size={14} />
                          <span className="text-sm font-medium">
                            {booking.guestName || "-"}
                          </span>
                        </div>
                      </td>
                      <td className="px-6 py-4 font-semibold text-accent">
                        ${booking.totalPrice?.toFixed(2) || "0.00"}
                      </td>
                      <td className="px-6 py-4 text-sm">
                        {booking.checkIn
                          ? new Date(booking.checkIn).toLocaleDateString()
                          : "-"}
                      </td>
                      <td className="px-6 py-4">
                        {getStatusBadge(booking.status)}
                      </td>
                      <td className="px-6 py-4">
                        <div className="flex items-center justify-center gap-2">
                          <button
                            onClick={() => handleViewDetails(booking)}
                            disabled={updating}
                            className="p-2 text-accent hover:bg-accent/10 rounded transition-colors disabled:opacity-50"
                            title="View Details"
                          >
                            <FaEdit />
                          </button>
                          <button
                            onClick={() => handleStatusChange(booking)}
                            disabled={updating}
                            className="p-2 text-orange-500 hover:bg-orange-50 rounded transition-colors disabled:opacity-50"
                            title="Change Status"
                          >
                            <FaCheck />
                          </button>
                          <button
                            onClick={() => handleDeleteBooking(booking)}
                            disabled={updating}
                            className="p-2 text-red-500 hover:bg-red-50 rounded transition-colors disabled:opacity-50"
                            title="Delete Booking"
                          >
                            <FaBan />
                          </button>
                        </div>
                      </td>
                    </tr>
                  ))
                )}
              </tbody>
            </table>
          </div>
        </div>
      )}

      {/* Details Modal */}
      {isModalOpen && selectedBooking && (
        <div className="fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4">
          <div className="bg-white rounded-lg shadow-xl max-w-2xl w-full max-h-[90vh] overflow-y-auto">
            {/* Modal Header */}
            <div className="p-6 border-b border-gray-200 sticky top-0 bg-white">
              <div className="flex items-center justify-between">
                <h2 className="h3 text-primary">
                  Booking Details
                  <span className="ml-2 font-mono text-sm text-gray-500">
                    #{selectedBooking.confirmation_code || selectedBooking.id.substring(0, 8)}
                  </span>
                </h2>
                <button
                  onClick={() => setIsModalOpen(false)}
                  className="text-gray-500 hover:text-red-500 transition-colors"
                >
                  <FaTimes size={24} />
                </button>
              </div>
            </div>

            {/* Modal Body */}
            <div className="p-6 space-y-6">
              {/* Basic Info Grid */}
              <div className="grid grid-cols-2 gap-4">
                <DetailItem label="Type" value={getTypeBadge(selectedBooking.type)} isHtml={true} />
                <DetailItem label="Status" value={getStatusBadge(selectedBooking.status)} isHtml={true} />

                {/* Room-Specific Details */}
                {selectedBooking.type === "room" && (
                  <>
                    <DetailItem label="Room" value={selectedBooking.item_name} />
                    <DetailItem
                      label="Check-in"
                      value={selectedBooking.check_in
                        ? new Date(selectedBooking.check_in).toLocaleDateString()
                        : "N/A"}
                    />
                    <DetailItem
                      label="Check-out"
                      value={selectedBooking.check_out
                        ? new Date(selectedBooking.check_out).toLocaleDateString()
                        : "N/A"}
                    />
                    <DetailItem label="Guests" value={`${selectedBooking.num_adults || 0} Adult(s), ${selectedBooking.num_children || 0} Child(ren)`} />
                    <DetailItem label="Total Nights" value={selectedBooking.total_nights || "N/A"} />
                  </>
                )}

                {/* Restaurant-Specific Details */}
                {selectedBooking.type === "restaurant" && (
                  <>
                    <DetailItem label="Party Size" value={`${selectedBooking.guests || 1} guest(s)`} />
                    <DetailItem
                      label="Reservation Time"
                      value={selectedBooking.reservation_at
                        ? new Date(selectedBooking.reservation_at).toLocaleString()
                        : "N/A"}
                    />
                    {selectedBooking.special_requests && (
                      <DetailItem label="Special Requests" value={selectedBooking.special_requests} />
                    )}
                  </>
                )}

                {/* Spa-Specific Details */}
                {selectedBooking.type === "spa" && (
                  <>
                    <DetailItem label="Service" value={selectedBooking.item_name} />
                    <DetailItem
                      label="Appointment"
                      value={selectedBooking.appointment_at
                        ? new Date(selectedBooking.appointment_at).toLocaleString()
                        : "N/A"}
                    />
                    <DetailItem label="Therapist" value={selectedBooking.therapist || "No preference"} />
                    {selectedBooking.special_requests && (
                      <DetailItem label="Special Requests" value={selectedBooking.special_requests} />
                    )}
                  </>
                )}

                {/* Guest Info */}
                <DetailItem label="Guest Name" value={selectedBooking.guestName || "-"} />
                <DetailItem label="Email" value={selectedBooking.guestEmail || selectedBooking.email || "-"} />
                <DetailItem label="Phone" value={selectedBooking.guestPhone || selectedBooking.phone || "-"} />

                {/* Pricing */}
                <DetailItem
                  label="Subtotal"
                  value={`$${(selectedBooking.subtotal || selectedBooking.price || 0).toFixed(2)}`}
                />
                <DetailItem
                  label="Discount"
                  value={`$${(selectedBooking.discount || 0).toFixed(2)}`}
                />
                <DetailItem
                  label="TOTAL AMOUNT"
                  value={`$${selectedBooking.totalPrice?.toFixed(2) || "0.00"}`}
                  isTotal={true}
                />
              </div>

              {/* Notes / Special Requests */}
              {(selectedBooking.note || selectedBooking.special_requests) && (
                <div>
                  <label className="block text-sm font-semibold mb-2 text-primary">
                    Notes / Special Requests
                  </label>
                  <textarea
                    rows="4"
                    readOnly
                    className="w-full px-4 py-2 border border-gray-300 rounded-lg bg-gray-50 resize-none text-sm"
                    defaultValue={selectedBooking.note || selectedBooking.special_requests || "N/A"}
                  />
                </div>
              )}

              {/* Modal Actions */}
              <div className="flex gap-4 pt-4 border-t border-gray-200">
                <button
                  onClick={() => setIsModalOpen(false)}
                  className="btn btn-primary btn-sm flex-1"
                  disabled={updating}
                >
                  Close
                </button>
                <button
                  onClick={() => handleStatusChange(selectedBooking)}
                  disabled={updating}
                  className="btn btn-accent btn-sm flex-1 flex items-center justify-center gap-2"
                >
                  {updating && <FaSpinner className="animate-spin" />}
                  Change Status
                </button>
              </div>
            </div>
          </div>
        </div>
      )}
    </div>
  );
};

export default BookingsManagement;


=================================================================
FILE PATH: src\components\admin\index.js
=================================================================
export { default as RoomTypesManagement } from './RoomTypesManagement';
export { default as RoomsManagement } from './RoomsManagement';
export { default as PriceRulesManagement } from './PriceRulesManagement';
export { default as PromotionsManagement } from './PromotionsManagement';
export { default as BookingsManagement } from './BookingsManagement';
export { default as UsersManagement } from './UsersManagement';
export { default as AuditLogsManagement } from './AuditLogsManagement';
export { default as ReportsManagement } from './ReportsManagement';



=================================================================
FILE PATH: src\components\admin\PriceRulesManagement.jsx
=================================================================
import { useEffect, useState } from 'react';
import { useCRUD, useModalForm } from '../../hooks';
import { AdminHeader, AdminTable, AdminModal } from '../../features/admin';
import { supabase } from '../../utils/supabaseClient';

const PriceRulesManagement = () => {
  const { data: priceRules, isLoading, error, fetchData, create, update, remove } = useCRUD(
    'price_rules',
    `
      *,
      room_types:room_type_id (code, name)
    `
  );

  const {
    isModalOpen,
    editingItem,
    formData,
    updateFormData,
    openCreateModal,
    openEditModal,
    closeModal,
    resetFormData
  } = useModalForm({
    rule_type: 'weekend',
    room_type_id: '',
    price: '',
    apply_fri: false,
    apply_sat: true,
    apply_sun: true,
    start_date: '',
    end_date: '',
    description: '',
    priority: '10',
    is_active: true
  });

  // Fetch room types for dropdown
  const [roomTypes, setRoomTypes] = useState([]);
  
  useEffect(() => {
    fetchRoomTypes();
  }, []);

  const fetchRoomTypes = async () => {
    try {
      const { supabase } = await import('../../utils/supabaseClient');
      const { data, error } = await supabase
        .from('room_types')
        .select('*')
        .order('code');
      if (error) throw error;
      setRoomTypes(data || []);
    } catch (err) {
      console.error('âŒ Error fetching room types:', err);
    }
  };

  // Fetch price rules on mount
  useEffect(() => {
    fetchData({}, { column: 'priority', ascending: true });
  }, [fetchData]);

  const handleSubmit = async (e) => {
    e.preventDefault();
    try {
      const values = {
        rule_type: formData.rule_type,
        room_type_id: formData.room_type_id || null,
        price: parseFloat(formData.price),
        apply_fri: formData.apply_fri,
        apply_sat: formData.apply_sat,
        apply_sun: formData.apply_sun,
        start_date: formData.start_date || null,
        end_date: formData.end_date || null,
        description: formData.description,
        priority: parseInt(formData.priority),
        is_active: formData.is_active
      };

      if (editingItem) {
        await update(editingItem.id, values, 'Price rule updated successfully');
      } else {
        await create(values, 'Price rule created successfully');
      }

      closeModal();
      resetFormData();
    } catch (err) {
      console.error('âŒ Error saving price rule:', err);
    }
  };

  const handleEdit = (rule) => {
    openEditModal(rule);
  };

  const handleDelete = async (id) => {
    try {
      await remove(id, 'Price rule deleted successfully');
    } catch (err) {
      console.error('âŒ Error deleting price rule:', err);
    }
  };

  const ruleTypes = [
    { value: 'weekend', label: 'Weekend' },
    { value: 'holiday', label: 'Holiday' },
    { value: 'seasonal', label: 'Seasonal' },
    { value: 'season', label: 'Season' },
  ];

  const columns = [
    {
      key: 'rule_type',
      label: 'Rule Type',
      render: (value) => {
        const type = ruleTypes.find(t => t.value === value);
        return (
          <span className="px-3 py-1 bg-accent/20 text-accent rounded-full text-sm font-semibold">
            {type?.label || value}
          </span>
        );
      }
    },
    {
      key: 'description',
      label: 'Description',
      render: (value) => <span>{value || '-'}</span>
    },
    {
      key: 'price',
      label: 'Price',
      render: (value) => <span className="font-semibold text-accent">${value}</span>
    },
    {
      key: 'start_date',
      label: 'Start Date',
      render: (value) => <span>{value || '-'}</span>
    },
    {
      key: 'end_date',
      label: 'End Date',
      render: (value) => <span>{value || '-'}</span>
    },
    {
      key: 'is_active',
      label: 'Status',
      render: (value) => (
        <span className={`px-3 py-1 rounded-full text-sm font-semibold ${
          value 
            ? 'bg-green-100 text-green-800' 
            : 'bg-gray-100 text-gray-800'
        }`}>
          {value ? 'âœ“ Active' : 'Inactive'}
        </span>
      )
    }
  ];

  return (
    <div>
      <AdminHeader
        title="Price Rules Management"
        description="Set weekend, season and holiday prices - automatically apply by schedule"
        onAddNew={openCreateModal}
        addButtonLabel="Add New Price Rule"
      />

      <AdminTable
        columns={columns}
        data={priceRules}
        isLoading={isLoading}
        error={error}
        onEdit={handleEdit}
        onDelete={handleDelete}
        onRetry={() => fetchData({}, { column: 'priority', ascending: true })}
        emptyMessage="No price rules yet. Add your first rule!"
      />

      <AdminModal
        isOpen={isModalOpen}
        title={editingItem ? 'Edit Price Rule' : 'Add New Price Rule'}
        onClose={closeModal}
        onSubmit={handleSubmit}
        isLoading={isLoading}
        submitLabel={editingItem ? 'Update' : 'Add Rule'}
      >
        <div>
          <label className="block text-sm font-semibold mb-2 text-primary">Rule Type *</label>
          <select
            required
            value={formData.rule_type}
            onChange={(e) => updateFormData({ rule_type: e.target.value })}
            className="w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-accent focus:border-transparent"
          >
            {ruleTypes.map(type => (
              <option key={type.value} value={type.value}>{type.label}</option>
            ))}
          </select>
        </div>

        <div>
          <label className="block text-sm font-semibold mb-2 text-primary">Room Type</label>
          <select
            value={formData.room_type_id}
            onChange={(e) => updateFormData({ room_type_id: e.target.value })}
            className="w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-accent focus:border-transparent"
          >
            <option value="">All Room Types</option>
            {roomTypes.map(rt => (
              <option key={rt.id} value={rt.id}>{rt.code} - {rt.name}</option>
            ))}
          </select>
        </div>

        <div>
          <label className="block text-sm font-semibold mb-2 text-primary">Price (USD) *</label>
          <input
            type="number"
            required
            min="0"
            step="0.01"
            value={formData.price}
            onChange={(e) => updateFormData({ price: e.target.value })}
            className="w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-accent focus:border-transparent"
            placeholder="0.00"
          />
        </div>

        <div className="grid grid-cols-2 gap-4">
          <div>
            <label className="block text-sm font-semibold mb-2 text-primary">Start Date</label>
            <input
              type="date"
              value={formData.start_date}
              onChange={(e) => updateFormData({ start_date: e.target.value })}
              className="w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-accent focus:border-transparent"
            />
          </div>

          <div>
            <label className="block text-sm font-semibold mb-2 text-primary">End Date</label>
            <input
              type="date"
              value={formData.end_date}
              onChange={(e) => updateFormData({ end_date: e.target.value })}
              className="w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-accent focus:border-transparent"
            />
          </div>
        </div>

        <div>
          <label className="block text-sm font-semibold mb-2 text-primary">Priority</label>
          <input
            type="number"
            min="1"
            max="100"
            value={formData.priority}
            onChange={(e) => updateFormData({ priority: e.target.value })}
            className="w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-accent focus:border-transparent"
            placeholder="10"
          />
        </div>

        <div>
          <label className="block text-sm font-semibold mb-2 text-primary">Description</label>
          <textarea
            value={formData.description}
            onChange={(e) => updateFormData({ description: e.target.value })}
            rows="3"
            className="w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-accent focus:border-transparent"
            placeholder="Description of this price rule..."
          />
        </div>

        <div>
          <label className="block text-sm font-semibold mb-2 text-primary">
            <input
              type="checkbox"
              checked={formData.is_active}
              onChange={(e) => updateFormData({ is_active: e.target.checked })}
              className="mr-2"
            />
            Active
          </label>
        </div>
      </AdminModal>
    </div>
  );
};

export default PriceRulesManagement;


=================================================================
FILE PATH: src\components\admin\PromotionsManagement.jsx
=================================================================
import { useEffect } from 'react';
import { FaTag } from 'react-icons/fa';
import { useCRUD, useModalForm } from '../../hooks';
import { AdminHeader, AdminTable, AdminModal } from '../../features/admin';
import { supabase } from '../../utils/supabaseClient';

const PromotionsManagement = () => {
  const { data: promotions, isLoading, error, fetchData, create, update, remove } = useCRUD(
    'promotions',
    '*'
  );

  const {
    isModalOpen,
    editingItem,
    formData,
    updateFormData,
    openCreateModal,
    openEditModal,
    closeModal,
    resetFormData
  } = useModalForm({
    code: '',
    discount_type: 'percentage',
    discount_value: '',
    start_date: '',
    end_date: '',
    description: '',
    is_active: true
  });

  // Fetch promotions on mount
  useEffect(() => {
    fetchData({}, { column: 'code', ascending: true });
  }, [fetchData]);

  const handleSubmit = async (e) => {
    e.preventDefault();
    try {
      const values = {
        code: formData.code,
        discount_type: formData.discount_type,
        discount_value: parseFloat(formData.discount_value),
        start_date: formData.start_date || null,
        end_date: formData.end_date || null,
        description: formData.description,
        is_active: formData.is_active
      };

      if (editingItem) {
        await update(editingItem.id, values, 'Promotion updated successfully');
      } else {
        await create(values, 'Promotion created successfully');
      }

      closeModal();
      resetFormData();
    } catch (err) {
      console.error('âŒ Error saving promotion:', err);
    }
  };

  const handleEdit = (promotion) => {
    openEditModal(promotion);
  };

  const handleDelete = async (id) => {
    try {
      await remove(id, 'Promotion deleted successfully');
    } catch (err) {
      console.error('âŒ Error deleting promotion:', err);
    }
  };

  const formatDiscount = (promo) => {
    if (promo.discount_type === 'percentage') {
      return `${promo.discount_value}%`;
    }
    return `$${promo.discount_value}`;
  };

  const discountTypes = [
    { value: 'percentage', label: 'Percentage (%)' },
    { value: 'fixed', label: 'Fixed Amount ($)' }
  ];

  // Table columns configuration
  const columns = [
    {
      key: 'code',
      label: 'Code',
      render: (value) => (
        <span className="inline-flex items-center gap-2 px-3 py-1 bg-accent/20 text-accent rounded-full text-sm font-semibold">
          <FaTag /> {value}
        </span>
      )
    },
    {
      key: 'discount_type',
      label: 'Discount Type',
      render: (value) => {
        const type = discountTypes.find(t => t.value === value);
        return <span className="text-sm">{type?.label || value}</span>;
      }
    },
    {
      key: 'discount_value',
      label: 'Value',
      render: (value, row) => <span className="font-semibold text-accent">{formatDiscount(row)}</span>
    },
    {
      key: 'start_date',
      label: 'Start Date',
      render: (value) => <span>{value || '-'}</span>
    },
    {
      key: 'end_date',
      label: 'End Date',
      render: (value) => <span>{value || '-'}</span>
    },
    {
      key: 'is_active',
      label: 'Status',
      render: (value) => (
        <span className={`px-3 py-1 rounded-full text-sm font-semibold ${
          value 
            ? 'bg-green-100 text-green-800' 
            : 'bg-gray-100 text-gray-800'
        }`}>
          {value ? 'âœ“ Active' : 'Inactive'}
        </span>
      )
    }
  ];

  return (
    <div>
      <AdminHeader
        title="Promotions Management"
        description="Create and manage discount codes (code, %, or fixed)"
        onAddNew={openCreateModal}
        addButtonLabel="Add New Promotion"
      />

      <AdminTable
        columns={columns}
        data={promotions}
        isLoading={isLoading}
        error={error}
        onEdit={handleEdit}
        onDelete={handleDelete}
        onRetry={() => fetchData({}, { column: 'code', ascending: true })}
        emptyMessage="No promotions yet. Add your first promotion!"
      />

      <AdminModal
        isOpen={isModalOpen}
        title={editingItem ? 'Edit Promotion' : 'Add New Promotion'}
        onClose={closeModal}
        onSubmit={handleSubmit}
        isLoading={isLoading}
        submitLabel={editingItem ? 'Update' : 'Add Promotion'}
      >
        <div>
          <label className="block text-sm font-semibold mb-2 text-primary">Code *</label>
          <input
            type="text"
            required
            value={formData.code}
            onChange={(e) => updateFormData({ code: e.target.value.toUpperCase() })}
            className="w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-accent focus:border-transparent uppercase"
            placeholder="e.g., SUMMER2025"
          />
        </div>

        <div>
          <label className="block text-sm font-semibold mb-2 text-primary">Discount Type *</label>
          <select
            required
            value={formData.discount_type}
            onChange={(e) => updateFormData({ discount_type: e.target.value })}
            className="w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-accent focus:border-transparent"
          >
            {discountTypes.map(type => (
              <option key={type.value} value={type.value}>{type.label}</option>
            ))}
          </select>
        </div>

        <div>
          <label className="block text-sm font-semibold mb-2 text-primary">
            Discount Value * {formData.discount_type === 'percentage' ? '(%)' : '($)'}
          </label>
          <input
            type="number"
            required
            min="0"
            step={formData.discount_type === 'percentage' ? '1' : '0.01'}
            max={formData.discount_type === 'percentage' ? '100' : undefined}
            value={formData.discount_value}
            onChange={(e) => updateFormData({ discount_value: e.target.value })}
            className="w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-accent focus:border-transparent"
            placeholder={formData.discount_type === 'percentage' ? '0-100' : '0.00'}
          />
        </div>

        <div className="grid grid-cols-2 gap-4">
          <div>
            <label className="block text-sm font-semibold mb-2 text-primary">Start Date</label>
            <input
              type="date"
              value={formData.start_date}
              onChange={(e) => updateFormData({ start_date: e.target.value })}
              className="w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-accent focus:border-transparent"
            />
          </div>

          <div>
            <label className="block text-sm font-semibold mb-2 text-primary">End Date</label>
            <input
              type="date"
              value={formData.end_date}
              onChange={(e) => updateFormData({ end_date: e.target.value })}
              className="w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-accent focus:border-transparent"
            />
          </div>
        </div>

        <div>
          <label className="block text-sm font-semibold mb-2 text-primary">Description</label>
          <textarea
            value={formData.description}
            onChange={(e) => updateFormData({ description: e.target.value })}
            rows="3"
            className="w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-accent focus:border-transparent"
            placeholder="Description of this promotion..."
          />
        </div>

        <div>
          <label className="block text-sm font-semibold mb-2 text-primary">
            <input
              type="checkbox"
              checked={formData.is_active}
              onChange={(e) => updateFormData({ is_active: e.target.checked })}
              className="mr-2"
            />
            Active
          </label>
        </div>
      </AdminModal>
    </div>
  );
};

export default PromotionsManagement;


=================================================================
FILE PATH: src\components\admin\ReportsManagement.jsx
=================================================================
import { useState } from 'react';
import { FaChartLine, FaChartBar, FaDollarSign, FaBed } from 'react-icons/fa';

const ReportsManagement = () => {
  const [dateRange, setDateRange] = useState({
    startDate: '',
    endDate: ''
  });
  const [reportType, setReportType] = useState('revenue');

  // Mock data - will be replaced with real data from Supabase
  const revenueData = {
    daily: [],
    monthly: [],
    total: 0
  };

  const occupancyData = {
    rate: 0,
    occupied: 0,
    total: 0
  };

  return (
    <div>
      <div className="mb-8">
        <h1 className="h2 text-primary mb-2">Reports & Statistics</h1>
        <p className="text-gray-600">Revenue, occupancy rate and statistics charts</p>
      </div>

      {/* Filters */}
      <div className="bg-white rounded-lg shadow-md p-6 mb-6">
        <div className="grid grid-cols-1 md:grid-cols-3 gap-4">
          <div>
            <label className="block text-sm font-semibold mb-2 text-primary">Report Type</label>
            <select
              value={reportType}
              onChange={(e) => setReportType(e.target.value)}
              className="w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-accent focus:border-transparent"
            >
              <option value="revenue">Revenue</option>
              <option value="occupancy">Occupancy Rate</option>
            </select>
          </div>

          <div>
            <label className="block text-sm font-semibold mb-2 text-primary">From Date</label>
            <input
              type="date"
              value={dateRange.startDate}
              onChange={(e) => setDateRange({ ...dateRange, startDate: e.target.value })}
              className="w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-accent focus:border-transparent"
            />
          </div>

          <div>
            <label className="block text-sm font-semibold mb-2 text-primary">To Date</label>
            <input
              type="date"
              value={dateRange.endDate}
              onChange={(e) => setDateRange({ ...dateRange, endDate: e.target.value })}
              className="w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-accent focus:border-transparent"
            />
          </div>
        </div>
      </div>

      {/* Stats Cards */}
      <div className="grid grid-cols-1 md:grid-cols-3 gap-6 mb-6">
        <div className="bg-white rounded-lg shadow-md p-6">
          <div className="flex items-center justify-between mb-4">
            <h3 className="text-lg font-semibold text-primary">Total Revenue</h3>
            <FaDollarSign className="text-3xl text-accent" />
          </div>
          <p className="text-3xl font-bold text-accent">${revenueData.total.toLocaleString()}</p>
          <p className="text-sm text-gray-500 mt-2">In selected time period</p>
        </div>

        <div className="bg-white rounded-lg shadow-md p-6">
          <div className="flex items-center justify-between mb-4">
            <h3 className="text-lg font-semibold text-primary">Occupancy Rate</h3>
            <FaBed className="text-3xl text-accent" />
          </div>
          <p className="text-3xl font-bold text-accent">{occupancyData.rate.toFixed(1)}%</p>
          <p className="text-sm text-gray-500 mt-2">
            {occupancyData.occupied} / {occupancyData.total} rooms
          </p>
        </div>

        <div className="bg-white rounded-lg shadow-md p-6">
          <div className="flex items-center justify-between mb-4">
            <h3 className="text-lg font-semibold text-primary">Total Bookings</h3>
            <FaChartBar className="text-3xl text-accent" />
          </div>
          <p className="text-3xl font-bold text-accent">0</p>
          <p className="text-sm text-gray-500 mt-2">Number of bookings</p>
        </div>
      </div>

      {/* Charts */}
      <div className="bg-white rounded-lg shadow-md p-6">
        <div className="mb-6">
          <h2 className="h3 text-primary">
            {reportType === 'revenue' ? 'Revenue Chart' : 'Occupancy Rate Chart'}
          </h2>
        </div>

        <div className="h-64 flex items-center justify-center border-2 border-dashed border-gray-300 rounded-lg">
          <div className="text-center">
            <FaChartLine className="text-5xl text-gray-400 mx-auto mb-4" />
            <p className="text-gray-500 mb-2">Chart will be displayed here</p>
            <p className="text-sm text-gray-400">
              Use Recharts or Chart.js to integrate charts
            </p>
          </div>
        </div>
      </div>

      {/* Revenue Table */}
      {reportType === 'revenue' && (
        <div className="bg-white rounded-lg shadow-md overflow-hidden mt-6">
          <div className="p-6 border-b border-gray-200">
            <h3 className="h3 text-primary">Revenue Details</h3>
          </div>
          <div className="overflow-x-auto">
            <table className="w-full">
              <thead className="bg-accent text-white">
                <tr>
                  <th className="px-6 py-4 text-left font-tertiary tracking-wider">Date</th>
                  <th className="px-6 py-4 text-left font-tertiary tracking-wider">Revenue</th>
                  <th className="px-6 py-4 text-left font-tertiary tracking-wider">Bookings</th>
                </tr>
              </thead>
              <tbody className="divide-y divide-gray-200">
                <tr>
                  <td colSpan="3" className="px-6 py-12 text-center text-gray-500">
                    No data available. Please select a time period and load report.
                  </td>
                </tr>
              </tbody>
            </table>
          </div>
        </div>
      )}
    </div>
  );
};

export default ReportsManagement;


=================================================================
FILE PATH: src\components\admin\RoomsManagement.jsx
=================================================================
import { useState, useEffect } from 'react';
import { FaEdit, FaTrash, FaPlus, FaCheck, FaTimes } from 'react-icons/fa';
import { fetchRoomTypes } from '../../services/roomService';
import { fetchRoomsForAdmin, createRoomAdmin, updateRoomAdmin, deleteRoomAdmin } from '../../services/adminService';

const RoomsManagement = () => {
  const [rooms, setRooms] = useState([]);
  const [roomTypes, setRoomTypes] = useState([]);
  const [isLoading, setIsLoading] = useState(false);
  const [isSaving, setIsSaving] = useState(false);
  const [error, setError] = useState(null);
  const [success, setSuccess] = useState(null);
  const [isModalOpen, setIsModalOpen] = useState(false);
  const [editingRoom, setEditingRoom] = useState(null);
  const [validationErrors, setValidationErrors] = useState({});
  const [formData, setFormData] = useState({
    room_no: '',
    name: '',
    room_type_id: '',
    floor: '',
    size: '',
    price: '',
    description: '',
    status: 'available'
  });

  useEffect(() => {
    loadData();
  }, []);

  const loadData = async () => {
    setIsLoading(true);
    setError(null);
    try {
      const [roomsData, roomTypesData] = await Promise.all([
        fetchRoomsForAdmin(),
        fetchRoomTypes()
      ]);
      setRooms(roomsData);
      setRoomTypes(roomTypesData);
    } catch (err) {
      console.error('Error loading data:', err);
      setError('Failed to load rooms and room types');
    } finally {
      setIsLoading(false);
    }
  };

  const validateForm = () => {
    const errors = {};
    if (!formData.room_no.trim()) errors.room_no = 'Room number is required';
    if (!formData.name.trim()) errors.name = 'Room name is required';
    if (!formData.room_type_id) errors.room_type_id = 'Room type is required';
    if (!formData.price || parseFloat(formData.price) < 0) errors.price = 'Valid price is required';
    if (formData.floor && isNaN(parseInt(formData.floor))) errors.floor = 'Floor must be a number';
    if (formData.size && isNaN(parseInt(formData.size))) errors.size = 'Size must be a number';
    setValidationErrors(errors);
    return Object.keys(errors).length === 0;
  };

  const handleEdit = (room) => {
    setEditingRoom(room);
    setFormData({
      room_no: room.room_no || '',
      name: room.name || '',
      room_type_id: room.room_type_id || '',
      floor: room.floor || '',
      size: room.size || '',
      price: room.price || '',
      description: room.description || '',
      status: room.status || 'available'
    });
    setIsModalOpen(true);
    setValidationErrors({});
  };

  const handleSubmit = async (e) => {
    e.preventDefault();
    if (!validateForm()) return;

    setIsSaving(true);
    setError(null);
    try {
      const roomPayload = {
        room_no: formData.room_no.trim(),
        name: formData.name.trim(),
        room_type_id: formData.room_type_id,
        floor: formData.floor ? parseInt(formData.floor) : null,
        size: formData.size ? parseInt(formData.size) : null,
        price: parseFloat(formData.price),
        description: formData.description.trim(),
        status: formData.status,
      };

      if (editingRoom) {
        await updateRoomAdmin(editingRoom.id, roomPayload);
        setSuccess(`Room ${formData.room_no} updated successfully`);
      } else {
        await createRoomAdmin(roomPayload);
        setSuccess(`Room ${formData.room_no} created successfully`);
      }

      await loadData();
      closeModal();
      setTimeout(() => setSuccess(null), 3000);
    } catch (err) {
      console.error('Error saving room:', err);
      setError(err.message || 'Failed to save room');
    } finally {
      setIsSaving(false);
    }
  };

  const handleDelete = async (roomId, roomNo) => {
    if (!window.confirm(`Are you sure you want to delete room ${roomNo}?`)) return;
    
    setIsLoading(true);
    setError(null);
    try {
      await deleteRoomAdmin(roomId);
      setSuccess(`Room ${roomNo} deleted successfully`);
      await loadData();
      setTimeout(() => setSuccess(null), 3000);
    } catch (err) {
      console.error('Error deleting room:', err);
      setError(err.message || 'Failed to delete room');
    } finally {
      setIsLoading(false);
    }
  };

  const closeModal = () => {
    setIsModalOpen(false);
    setEditingRoom(null);
    setFormData({
      room_no: '',
      name: '',
      room_type_id: '',
      floor: '',
      size: '',
      price: '',
      description: '',
      status: 'available'
    });
    setValidationErrors({});
  };

  const statusOptions = [
    { value: 'available', label: 'Available', color: 'bg-green-100 text-green-800' },
    { value: 'occupied', label: 'Occupied', color: 'bg-red-100 text-red-800' },
    { value: 'maintenance', label: 'Maintenance', color: 'bg-yellow-100 text-yellow-800' },
    { value: 'cleaning', label: 'Cleaning', color: 'bg-blue-100 text-blue-800' }
  ];

  const getStatusBadge = (status) => {
    const option = statusOptions.find(opt => opt.value === status);
    return (
      <span className={`px-3 py-1 rounded-full text-xs font-semibold ${option?.color || 'bg-gray-100 text-gray-800'}`}>
        {option?.label || status}
      </span>
    );
  };

  return (
    <div>
      <div className="mb-8">
        <h1 className="h2 text-primary mb-2">Rooms Management</h1>
        <p className="text-gray-600">Manage hotel rooms, pricing and availability</p>
      </div>

      {error && (
        <div className="mb-6 p-4 bg-red-50 border border-red-200 rounded-lg text-red-700">
          âŒ {error}
        </div>
      )}

      {success && (
        <div className="mb-6 p-4 bg-green-50 border border-green-200 rounded-lg text-green-700">
          âœ… {success}
        </div>
      )}

      <div className="flex justify-end mb-6">
        <button
          onClick={() => setIsModalOpen(true)}
          className="btn btn-primary flex items-center gap-2 disabled:opacity-50"
          disabled={isLoading}
        >
          <FaPlus /> Add New Room
        </button>
      </div>

      {isLoading && !error ? (
        <div className="text-center py-12 text-gray-500">Loading rooms...</div>
      ) : (
        <div className="bg-white rounded-lg shadow-md overflow-hidden">
          <div className="overflow-x-auto">
            <table className="w-full">
              <thead className="bg-accent text-white">
                <tr>
                  <th className="px-6 py-4 text-left font-tertiary tracking-wider">Room No</th>
                  <th className="px-6 py-4 text-left font-tertiary tracking-wider">Name</th>
                  <th className="px-6 py-4 text-left font-tertiary tracking-wider">Type</th>
                  <th className="px-6 py-4 text-left font-tertiary tracking-wider">Floor</th>
                  <th className="px-6 py-4 text-left font-tertiary tracking-wider">Size</th>
                  <th className="px-6 py-4 text-left font-tertiary tracking-wider">Price</th>
                  <th className="px-6 py-4 text-left font-tertiary tracking-wider">Status</th>
                  <th className="px-6 py-4 text-center font-tertiary tracking-wider">Actions</th>
                </tr>
              </thead>
              <tbody className="divide-y divide-gray-200">
                {rooms.length === 0 ? (
                  <tr>
                    <td colSpan="8" className="px-6 py-12 text-center text-gray-500">
                      No rooms added yet.
                    </td>
                  </tr>
                ) : (
                  rooms.map((room) => (
                    <tr key={room.id} className="hover:bg-gray-50">
                      <td className="px-6 py-4 font-mono font-semibold">{room.room_no}</td>
                      <td className="px-6 py-4">{room.name}</td>
                      <td className="px-6 py-4">{room.room_types?.name || '-'}</td>
                      <td className="px-6 py-4">{room.floor || '-'}</td>
                      <td className="px-6 py-4">{room.size ? `${room.size}mÂ²` : '-'}</td>
                      <td className="px-6 py-4 font-semibold">${parseFloat(room.price).toFixed(2) || '0.00'}</td>
                      <td className="px-6 py-4">{getStatusBadge(room.status)}</td>
                      <td className="px-6 py-4">
                        <div className="flex items-center justify-center gap-2">
                          <button
                            onClick={() => handleEdit(room)}
                            className="p-2 text-accent hover:bg-accent/10 rounded transition-colors disabled:opacity-50"
                            title="Edit"
                            disabled={isSaving}
                          >
                            <FaEdit />
                          </button>
                          <button
                            onClick={() => handleDelete(room.id, room.room_no)}
                            className="p-2 text-red-500 hover:bg-red-50 rounded transition-colors disabled:opacity-50"
                            title="Delete"
                            disabled={isSaving}
                          >
                            <FaTrash />
                          </button>
                        </div>
                      </td>
                    </tr>
                  ))
                )}
              </tbody>
            </table>
          </div>
        </div>
      )}

      {isModalOpen && (
        <div className="fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4">
          <div className="bg-white rounded-lg shadow-xl max-w-2xl w-full max-h-[90vh] overflow-y-auto">
            <div className="p-6 border-b border-gray-200">
              <h2 className="h3 text-primary">
                {editingRoom ? 'Edit Room' : 'Add New Room'}
              </h2>
            </div>

            <form onSubmit={handleSubmit} className="p-6 space-y-4">
              <div className="grid grid-cols-2 gap-4">
                <div>
                  <label className="block text-sm font-semibold mb-2 text-primary">
                    Room Number *
                  </label>
                  <input
                    type="text"
                    required
                    value={formData.room_no}
                    onChange={(e) => setFormData({ ...formData, room_no: e.target.value })}
                    className={`w-full px-4 py-2 border rounded-lg focus:ring-2 focus:ring-accent focus:border-transparent ${
                      validationErrors.room_no ? 'border-red-500' : 'border-gray-300'
                    }`}
                    placeholder="e.g., STD-01"
                    disabled={isSaving}
                  />
                  {validationErrors.room_no && (
                    <p className="text-red-500 text-xs mt-1">{validationErrors.room_no}</p>
                  )}
                </div>

                <div>
                  <label className="block text-sm font-semibold mb-2 text-primary">
                    Room Name *
                  </label>
                  <input
                    type="text"
                    required
                    value={formData.name}
                    onChange={(e) => setFormData({ ...formData, name: e.target.value })}
                    className={`w-full px-4 py-2 border rounded-lg focus:ring-2 focus:ring-accent focus:border-transparent ${
                      validationErrors.name ? 'border-red-500' : 'border-gray-300'
                    }`}
                    placeholder="e.g., Standard Room"
                    disabled={isSaving}
                  />
                  {validationErrors.name && (
                    <p className="text-red-500 text-xs mt-1">{validationErrors.name}</p>
                  )}
                </div>
              </div>

              <div className="grid grid-cols-2 gap-4">
                <div>
                  <label className="block text-sm font-semibold mb-2 text-primary">
                    Room Type *
                  </label>
                  <select
                    required
                    value={formData.room_type_id}
                    onChange={(e) => setFormData({ ...formData, room_type_id: e.target.value })}
                    className={`w-full px-4 py-2 border rounded-lg focus:ring-2 focus:ring-accent focus:border-transparent ${
                      validationErrors.room_type_id ? 'border-red-500' : 'border-gray-300'
                    }`}
                    disabled={isSaving}
                  >
                    <option value="">Select room type</option>
                    {roomTypes.map(rt => (
                      <option key={rt.id} value={rt.id}>{rt.code} - {rt.name}</option>
                    ))}
                  </select>
                  {validationErrors.room_type_id && (
                    <p className="text-red-500 text-xs mt-1">{validationErrors.room_type_id}</p>
                  )}
                </div>

                <div>
                  <label className="block text-sm font-semibold mb-2 text-primary">
                    Status *
                  </label>
                  <select
                    required
                    value={formData.status}
                    onChange={(e) => setFormData({ ...formData, status: e.target.value })}
                    className="w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-accent focus:border-transparent"
                    disabled={isSaving}
                  >
                    {statusOptions.map(option => (
                      <option key={option.value} value={option.value}>{option.label}</option>
                    ))}
                  </select>
                </div>
              </div>

              <div className="grid grid-cols-3 gap-4">
                <div>
                  <label className="block text-sm font-semibold mb-2 text-primary">Floor</label>
                  <input
                    type="number"
                    min="1"
                    value={formData.floor}
                    onChange={(e) => setFormData({ ...formData, floor: e.target.value })}
                    className={`w-full px-4 py-2 border rounded-lg focus:ring-2 focus:ring-accent focus:border-transparent ${
                      validationErrors.floor ? 'border-red-500' : 'border-gray-300'
                    }`}
                    disabled={isSaving}
                  />
                  {validationErrors.floor && (
                    <p className="text-red-500 text-xs mt-1">{validationErrors.floor}</p>
                  )}
                </div>

                <div>
                  <label className="block text-sm font-semibold mb-2 text-primary">Size (mÂ²)</label>
                  <input
                    type="number"
                    min="0"
                    value={formData.size}
                    onChange={(e) => setFormData({ ...formData, size: e.target.value })}
                    className={`w-full px-4 py-2 border rounded-lg focus:ring-2 focus:ring-accent focus:border-transparent ${
                      validationErrors.size ? 'border-red-500' : 'border-gray-300'
                    }`}
                    disabled={isSaving}
                  />
                  {validationErrors.size && (
                    <p className="text-red-500 text-xs mt-1">{validationErrors.size}</p>
                  )}
                </div>

                <div>
                  <label className="block text-sm font-semibold mb-2 text-primary">
                    Price (USD) *
                  </label>
                  <input
                    type="number"
                    min="0"
                    step="0.01"
                    value={formData.price}
                    onChange={(e) => setFormData({ ...formData, price: e.target.value })}
                    className={`w-full px-4 py-2 border rounded-lg focus:ring-2 focus:ring-accent focus:border-transparent ${
                      validationErrors.price ? 'border-red-500' : 'border-gray-300'
                    }`}
                    disabled={isSaving}
                  />
                  {validationErrors.price && (
                    <p className="text-red-500 text-xs mt-1">{validationErrors.price}</p>
                  )}
                </div>
              </div>

              <div>
                <label className="block text-sm font-semibold mb-2 text-primary">Description</label>
                <textarea
                  value={formData.description}
                  onChange={(e) => setFormData({ ...formData, description: e.target.value })}
                  rows="3"
                  className="w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-accent focus:border-transparent"
                  placeholder="Room description..."
                  disabled={isSaving}
                />
              </div>

              <div className="flex gap-4 pt-4 border-t border-gray-200">
                <button
                  type="submit"
                  disabled={isSaving}
                  className="btn btn-primary btn-sm flex-1 flex items-center justify-center gap-2 disabled:opacity-50"
                >
                  <FaCheck /> {isSaving ? 'Saving...' : (editingRoom ? 'Update' : 'Add New')}
                </button>
                <button
                  type="button"
                  onClick={closeModal}
                  disabled={isSaving}
                  className="btn btn-secondary btn-sm flex-1 flex items-center justify-center gap-2 disabled:opacity-50"
                >
                  <FaTimes /> Cancel
                </button>
              </div>
            </form>
          </div>
        </div>
      )}
    </div>
  );
};

export default RoomsManagement;

=================================================================
FILE PATH: src\components\admin\RoomTypesManagement.jsx
=================================================================
import { useState, useEffect } from 'react';
import { FaCheck } from 'react-icons/fa';
import { AdminHeader, AdminTable, AdminModal } from '../../features/admin';
import {
  fetchRoomTypesForAdmin,
  createRoomType,
  updateRoomTypeAdmin,
  deleteRoomTypeAdmin,
} from '../../services/adminService';
import { supabase } from '../../utils/supabaseClient';

const RoomTypesManagement = () => {
  const [roomTypes, setRoomTypes] = useState([]);
  const [amenities, setAmenities] = useState([]);
  const [isLoading, setIsLoading] = useState(false);
  const [error, setError] = useState(null);
  
  const [isModalOpen, setIsModalOpen] = useState(false);
  const [editingItem, setEditingItem] = useState(null);
  const [formData, setFormData] = useState({
    code: '',
    name: '',
    description: '',
    base_capacity: '',
    max_person: '',
    base_price: '',
    facilities: [],
    is_active: true
  });

  // Fetch room types and amenities
  useEffect(() => {
    loadData();
  }, []);

  const loadData = async () => {
    setIsLoading(true);
    setError(null);
    try {
      const [roomTypesData, amenitiesData] = await Promise.all([
        fetchRoomTypesForAdmin(),
        supabase.from('amenities').select('name').order('name')
      ]);
      
      setRoomTypes(roomTypesData);
      setAmenities(amenitiesData.data?.map(item => item.name) || []);
    } catch (err) {
      console.error('Error loading data:', err);
      setError('Failed to load data');
    } finally {
      setIsLoading(false);
    }
  };

  const updateFormData = (updates) => {
    setFormData(prev => ({ ...prev, ...updates }));
  };

  const resetFormData = () => {
    setFormData({
      code: '',
      name: '',
      description: '',
      base_capacity: '',
      max_person: '',
      base_price: '',
      facilities: [],
      is_active: true
    });
  };

  const openCreateModal = () => {
    setEditingItem(null);
    resetFormData();
    setIsModalOpen(true);
  };

  const openEditModal = (roomType) => {
    setEditingItem(roomType);
    setFormData({
      code: roomType.code,
      name: roomType.name,
      description: roomType.description || '',
      base_capacity: roomType.base_capacity || '',
      max_person: roomType.max_person || '',
      base_price: roomType.base_price || '',
      facilities: roomType.facilities || [],
      is_active: roomType.is_active
    });
    setIsModalOpen(true);
  };

  const closeModal = () => {
    setIsModalOpen(false);
    setEditingItem(null);
    resetFormData();
  };

  const toggleFacility = (facilityName) => {
    updateFormData({
      facilities: formData.facilities.includes(facilityName)
        ? formData.facilities.filter(name => name !== facilityName)
        : [...formData.facilities, facilityName],
    });
  };

  const handleSubmit = async (e) => {
    e.preventDefault();
    setIsLoading(true);
    setError(null);
    try {
      const values = {
        code: formData.code.trim(),
        name: formData.name.trim(),
        description: formData.description.trim(),
        base_capacity: parseInt(formData.base_capacity) || 1,
        max_person: parseInt(formData.max_person) || 2,
        base_price: parseFloat(formData.base_price) || 0,
        facilities: formData.facilities,
        is_active: formData.is_active
      };

      if (editingItem) {
        await updateRoomTypeAdmin(editingItem.id, values);
      } else {
        await createRoomType(values);
      }

      await loadData();
      closeModal();
    } catch (err) {
      console.error('âŒ Error saving room type:', err);
      setError(err.message || 'Failed to save room type');
    } finally {
      setIsLoading(false);
    }
  };

  const handleEdit = (roomType) => {
    openEditModal(roomType);
  };

  const handleDelete = async (id) => {
    if (!window.confirm('Are you sure you want to delete this room type?')) return;
    
    setIsLoading(true);
    setError(null);
    try {
      await deleteRoomTypeAdmin(id);
      await loadData();
    } catch (err) {
      console.error('âŒ Error deleting room type:', err);
      setError(err.message || 'Failed to delete room type');
    } finally {
      setIsLoading(false);
    }
  };

  const columns = [
    {
      key: 'code',
      label: 'Code',
      render: (value) => <span className="font-mono font-semibold text-accent">{value}</span>
    },
    {
      key: 'name',
      label: 'Name',
      render: (value) => <span className="font-semibold">{value}</span>
    },
    {
      key: 'description',
      label: 'Description',
      render: (value) => <span className="text-sm text-gray-600">{value || '-'}</span>
    },
    {
      key: 'max_person',
      label: 'Max Guests',
      render: (value) => <span>{value}</span>
    },
    {
      key: 'base_price',
      label: 'Price',
      render: (value) => <span className="font-semibold text-accent">${value}</span>
    },
    {
      key: 'facilities',
      label: 'Amenities',
      render: (value) => <span className="text-sm text-gray-600">{value?.length || 0} amenities</span>
    },
    {
      key: 'is_active',
      label: 'Status',
      render: (value) => (
        <span className={`px-3 py-1 rounded-full text-sm font-semibold ${
          value 
            ? 'bg-green-100 text-green-800' 
            : 'bg-gray-100 text-gray-800'
        }`}>
          {value ? 'âœ“ Active' : 'Inactive'}
        </span>
      )
    }
  ];

  return (
    <div>
      <AdminHeader
        title="Room Types Management"
        description="Add, edit, delete and manage room types"
        onAddNew={openCreateModal}
        addButtonLabel="Add New Room Type"
      />

      <AdminTable
        columns={columns}
        data={roomTypes}
        isLoading={isLoading}
        error={error}
        onEdit={handleEdit}
        onDelete={handleDelete}
        onRetry={loadData}
        emptyMessage="No room types yet. Add your first room type!"
      />

      <AdminModal
        isOpen={isModalOpen}
        title={editingItem ? 'Edit Room Type' : 'Add New Room Type'}
        onClose={closeModal}
        onSubmit={handleSubmit}
        isLoading={isLoading}
        submitLabel={editingItem ? 'Update' : 'Add New'}
      >
        <div className="grid grid-cols-2 gap-4">
          <div>
            <label className="block text-sm font-semibold mb-2 text-primary">Code *</label>
            <input
              type="text"
              required
              value={formData.code}
              onChange={(e) => updateFormData({ code: e.target.value.toUpperCase() })}
              className="w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-accent focus:border-transparent"
              placeholder="e.g., STD, DLX, SUI"
              maxLength="10"
            />
          </div>

          <div>
            <label className="block text-sm font-semibold mb-2 text-primary">Room Type Name *</label>
            <input
              type="text"
              required
              value={formData.name}
              onChange={(e) => updateFormData({ name: e.target.value })}
              className="w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-accent focus:border-transparent"
              placeholder="e.g., Deluxe Room"
            />
          </div>
        </div>

        <div>
          <label className="block text-sm font-semibold mb-2 text-primary">Description</label>
          <textarea
            value={formData.description}
            onChange={(e) => updateFormData({ description: e.target.value })}
            rows="3"
            className="w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-accent focus:border-transparent"
            placeholder="Description about the room type..."
          />
        </div>

        <div className="grid grid-cols-2 gap-4">
          <div>
            <label className="block text-sm font-semibold mb-2 text-primary">Base Capacity *</label>
            <input
              type="number"
              required
              min="1"
              value={formData.base_capacity}
              onChange={(e) => updateFormData({ base_capacity: e.target.value })}
              className="w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-accent focus:border-transparent"
            />
          </div>

          <div>
            <label className="block text-sm font-semibold mb-2 text-primary">Max Guests *</label>
            <input
              type="number"
              required
              min="1"
              value={formData.max_person}
              onChange={(e) => updateFormData({ max_person: e.target.value })}
              className="w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-accent focus:border-transparent"
            />
          </div>
        </div>

        <div>
          <label className="block text-sm font-semibold mb-2 text-primary">Base Price (USD) *</label>
          <input
            type="number"
            required
            min="0"
            step="0.01"
            value={formData.base_price}
            onChange={(e) => updateFormData({ base_price: e.target.value })}
            className="w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-accent focus:border-transparent"
          />
        </div>

        <div>
          <label className="block text-sm font-semibold mb-2 text-primary">
            Facilities / Amenities ({formData.facilities.length} selected)
          </label>
          <div className="flex flex-wrap gap-2 max-h-48 overflow-y-auto border border-gray-300 rounded-lg p-4">
            {amenities.map((facility) => (
              <button
                key={facility}
                type="button"
                onClick={() => toggleFacility(facility)}
                className={`px-3 py-1 text-xs font-medium rounded-full transition-colors border ${
                  formData.facilities.includes(facility)
                    ? 'bg-accent text-white border-accent'
                    : 'bg-gray-100 text-primary border-gray-300 hover:bg-gray-200'
                }`}
              >
                {formData.facilities.includes(facility) ? <FaCheck className="inline mr-1" /> : ''}
                {facility}
              </button>
            ))}
            {amenities.length === 0 && <p className="text-sm text-gray-500">No amenities defined. Please add them in Amenities Management.</p>}
          </div>
        </div>

        <div>
          <label className="block text-sm font-semibold mb-2 text-primary">
            <input
              type="checkbox"
              checked={formData.is_active}
              onChange={(e) => updateFormData({ is_active: e.target.checked })}
              className="mr-2"
            />
            Active
          </label>
        </div>
      </AdminModal>
    </div>
  );
};

export default RoomTypesManagement;

=================================================================
FILE PATH: src\components\admin\UsersManagement.jsx
=================================================================
import { useState, useEffect } from 'react';
import { FaEdit, FaTrash, FaUser, FaEnvelope, FaLock, FaCheck, FaTimes, FaBriefcase } from 'react-icons/fa';
import { AdminTable } from '../../features/admin';
import { fetchUsersForAdmin, updateUserAdmin, deleteUserProfileAdmin } from '../../services/adminService';

const UsersManagement = () => {
  const [users, setUsers] = useState([]);
  const [isLoading, setIsLoading] = useState(false);
  const [error, setError] = useState(null);
  const [success, setSuccess] = useState(null);
  const [isModalOpen, setIsModalOpen] = useState(false);
  const [editingUser, setEditingUser] = useState(null);
  const [isUpdating, setIsUpdating] = useState(false);
  
  const [formData, setFormData] = useState({
    full_name: '',
    role: ''
  });

  useEffect(() => {
    loadData();
  }, []);

  const loadData = async () => {
    setIsLoading(true);
    setError(null);
    try {
      const usersData = await fetchUsersForAdmin();
      setUsers(usersData);
    } catch (err) {
      console.error('Error loading users:', err);
      setError('Failed to load users');
    } finally {
      setIsLoading(false);
    }
  };

  const handleEdit = (user) => {
    if (!user.id) {
      setError('Cannot edit user without a valid ID.');
      return;
    }
    setEditingUser(user);
    setFormData({
      full_name: user.full_name || '',
      role: user.role || 'user'
    });
    setIsModalOpen(true);
  };

  const handleSubmit = async (e) => {
    e.preventDefault();
    if (!editingUser) return;
    
    setIsUpdating(true);
    setError(null);
    
    try {
      const valuesToUpdate = {
        full_name: formData.full_name.trim(),
        role: formData.role
      };
      
      await updateUserAdmin(editingUser.id, valuesToUpdate);
      setSuccess(`User ${formData.full_name} updated successfully`);
      await loadData();
      closeModal();
      setTimeout(() => setSuccess(null), 3000);
    } catch (err) {
      console.error('Failed to save changes:', err);
      setError(err.message || 'Failed to update user');
    } finally {
      setIsUpdating(false);
    }
  };

  const handleDelete = async (userId) => {
    if (window.confirm('Are you sure you want to delete this user account? This action cannot be undone.')) {
      setIsLoading(true);
      setError(null);
      try {
        await deleteUserProfileAdmin(userId);
        setSuccess('User deleted successfully');
        await loadData();
        setTimeout(() => setSuccess(null), 3000);
      } catch (err) {
        console.error('Failed to delete user:', err);
        setError(err.message || 'Failed to delete user');
      } finally {
        setIsLoading(false);
      }
    }
  };
  
  const closeModal = () => {
    setIsModalOpen(false);
    setEditingUser(null);
    setFormData({ full_name: '', role: '' });
  };
  
  const getRoleBadge = (role) => {
    let colorClass = 'bg-gray-100 text-gray-800';
    if (role === 'admin') {
      colorClass = 'bg-red-100 text-red-800';
    } else if (role === 'user') {
      colorClass = 'bg-blue-100 text-blue-800';
    }

    return (
      <span className={`px-2 py-1 ${colorClass} rounded-full text-xs font-semibold`}>
        {role?.toUpperCase() || 'N/A'}
      </span>
    );
  };

  return (
    <div>
      <div className="mb-8">
        <h1 className="h2 text-primary mb-2">Users Management</h1>
        <p className="text-gray-600">Manage user accounts - View and edit user information</p>
      </div>

      {error && (
        <div className="mb-6 p-4 bg-red-50 border border-red-200 rounded-lg text-red-700">
          âŒ {error}
        </div>
      )}

      {success && (
        <div className="mb-6 p-4 bg-green-50 border border-green-200 rounded-lg text-green-700">
          âœ… {success}
        </div>
      )}
      
      {/* Stats Cards - Simplified */}
      <div className="grid grid-cols-1 md:grid-cols-3 gap-6 mb-6">
        <div className="bg-white rounded-lg shadow-md p-6">
          <div className="flex items-center justify-between mb-4">
            <h3 className="text-lg font-semibold text-primary">Total Profiles</h3>
            <FaUser className="text-3xl text-accent" />
          </div>
          <p className="text-3xl font-bold text-accent">{users.length}</p>
          <p className="text-sm text-gray-500 mt-2">Total user profiles</p>
        </div>
        
        <div className="bg-white rounded-lg shadow-md p-6">
          <div className="flex items-center justify-between mb-4">
            <h3 className="text-lg font-semibold text-primary">Admins</h3>
            <FaBriefcase className="text-3xl text-red-500" />
          </div>
          <p className="text-3xl font-bold text-accent">
            {users.filter(u => u.role === 'admin').length}
          </p>
          <p className="text-sm text-gray-500 mt-2">Users with admin role</p>
        </div>
        
        <div className="bg-white rounded-lg shadow-md p-6">
          <div className="flex items-center justify-between mb-4">
            <h3 className="text-lg font-semibold text-primary">Standard Users</h3>
            <FaUser className="text-3xl text-blue-500" />
          </div>
          <p className="text-3xl font-bold text-accent">
            {users.filter(u => u.role === 'user').length}
          </p>
          <p className="text-sm text-gray-500 mt-2">Standard authenticated users</p>
        </div>
      </div>

      {/* Users Table */}
      <div className="bg-white rounded-lg shadow-md overflow-hidden">
        <div className="overflow-x-auto">
          <table className="w-full">
            <thead className="bg-accent text-white">
              <tr>
                <th className="px-6 py-4 text-left font-tertiary tracking-wider">Name</th>
                <th className="px-6 py-4 text-left font-tertiary tracking-wider">Email</th>
                <th className="px-6 py-4 text-left font-tertiary tracking-wider">Role</th>
                <th className="px-6 py-4 text-left font-tertiary tracking-wider">Created At</th>
                <th className="px-6 py-4 text-center font-tertiary tracking-wider">Actions</th>
              </tr>
            </thead>
            <tbody className="divide-y divide-gray-200">
              {users.length === 0 && !isLoading ? (
                <tr>
                  <td colSpan="5" className="px-6 py-12 text-center text-gray-500">
                    No users found
                  </td>
                </tr>
              ) : (
                users.map((user) => (
                  <tr key={user.id} className="hover:bg-gray-50">
                    <td className="px-6 py-4 font-semibold">{user.full_name || '-'}</td>
                    <td className="px-6 py-4">{user.email || '-'}</td>
                    <td className="px-6 py-4">
                      {getRoleBadge(user.role)}
                    </td>
                    <td className="px-6 py-4 text-sm text-gray-600">
                      {user.created_at
                        ? new Date(user.created_at).toLocaleDateString('en-US', {
                            year: 'numeric',
                            month: 'short',
                            day: 'numeric'
                          })
                        : '-'
                      }
                    </td>
                    <td className="px-6 py-4">
                      <div className="flex items-center justify-center gap-2">
                        <button
                          onClick={() => handleEdit(user)}
                          className="p-2 text-accent hover:bg-accent/10 rounded transition-colors disabled:opacity-50"
                          title="Edit"
                          disabled={isUpdating}
                        >
                          <FaEdit />
                        </button>
                        <button
                          onClick={() => handleDelete(user.id)}
                          className="p-2 text-red-500 hover:bg-red-50 rounded transition-colors disabled:opacity-50"
                          title="Delete"
                          disabled={isUpdating}
                        >
                          <FaTrash />
                        </button>
                      </div>
                    </td>
                  </tr>
                ))
              )}
            </tbody>
          </table>
        </div>
      </div>

      {/* Edit Modal */}
      {isModalOpen && editingUser && (
        <div className="fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4">
          <div className="bg-white rounded-lg shadow-xl max-w-md w-full">
            <div className="p-6 border-b border-gray-200">
              <h2 className="h3 text-primary">Edit User Profile</h2>
            </div>
            
            <form onSubmit={handleSubmit} className="p-6 space-y-4">
              
              <div>
                <label className="block text-sm font-semibold mb-2 text-primary">Full Name *</label>
                <div className="relative">
                  <div className="absolute inset-y-0 left-0 pl-4 flex items-center pointer-events-none">
                    <FaUser className="text-gray-400" />
                  </div>
                  <input
                    type="text"
                    required
                    value={formData.full_name}
                    onChange={(e) => setFormData({ ...formData, full_name: e.target.value })}
                    className="w-full pl-12 pr-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-accent focus:border-transparent"
                    placeholder="User full name"
                    disabled={isUpdating}
                  />
                </div>
              </div>

              <div>
                <label className="block text-sm font-semibold mb-2 text-primary">Role *</label>
                <div className="relative">
                  <div className="absolute inset-y-0 left-0 pl-4 flex items-center pointer-events-none">
                    <FaBriefcase className="text-gray-400" />
                  </div>
                  <select
                    required
                    value={formData.role}
                    onChange={(e) => setFormData({ ...formData, role: e.target.value })}
                    className="w-full pl-12 pr-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-accent focus:border-transparent appearance-none"
                    disabled={isUpdating}
                  >
                    <option value="user">User</option>
                    <option value="admin">Admin</option>
                  </select>
                </div>
              </div>
              
              <div className="flex gap-4 pt-4 border-t border-gray-200">
                <button
                  type="submit"
                  className="btn btn-primary btn-sm flex-1 flex items-center justify-center gap-2 disabled:opacity-50"
                  disabled={isUpdating}
                >
                  {isUpdating ? 'Saving...' : <><FaCheck /> Save Changes</>}
                </button>
                <button
                  type="button"
                  onClick={closeModal}
                  className="btn btn-secondary btn-sm flex-1 flex items-center justify-center gap-2 disabled:opacity-50"
                  disabled={isUpdating}
                >
                  <FaTimes /> Cancel
                </button>
              </div>
            </form>
          </div>
        </div>
      )}
    </div>
  );
};

export default UsersManagement;



=================================================================
FILE PATH: src\components\admin\UsersManagement_REFACTORED.js
=================================================================
import { useState, useEffect } from 'react';
import {
  FaEdit,
  FaTrash,
  FaUser,
  FaEnvelope,
  FaSpinner,
  FaCheck,
  FaTimes,
  FaBriefcase,
  FaExclamationCircle,
} from 'react-icons/fa';
import { fetchAllUsers, updateUser, deleteUser, fetchUserById } from '../../services/adminService';

/**
 * ============================================================================
 * USERS MANAGEMENT - REFACTORED
 * ============================================================================
 * 
 * Displays all user profiles from the database and allows admin to:
 * - View user details
 * - Edit user information (full_name, role)
 * - Delete user accounts
 * 
 * Uses adminService for all data operations
 * ============================================================================
 */

const UsersManagement = () => {
  const [users, setUsers] = useState([]);
  const [loading, setLoading] = useState(true);
  const [error, setError] = useState(null);
  const [isModalOpen, setIsModalOpen] = useState(false);
  const [editingUser, setEditingUser] = useState(null);
  const [isUpdating, setIsUpdating] = useState(false);

  const [formData, setFormData] = useState({
    full_name: '',
    role: '',
  });

  /**
   * Load all users from service
   */
  const loadUsers = async () => {
    setLoading(true);
    setError(null);
    try {
      const data = await fetchAllUsers();
      setUsers(data);
      console.log(`âœ… Loaded ${data.length} users`);
    } catch (err) {
      console.error('âŒ Error loading users:', err);
      setError('Failed to load users. Please try again.');
    } finally {
      setLoading(false);
    }
  };

  /**
   * Initial load on mount
   */
  useEffect(() => {
    loadUsers();
  }, []);

  /**
   * Open edit modal for user
   */
  const handleEdit = async (user) => {
    if (!user.id) {
      setError('Cannot edit user without a valid ID.');
      return;
    }
    
    // Fetch full user data
    const fullUser = await fetchUserById(user.id);
    if (!fullUser) {
      setError('Failed to load user details');
      return;
    }

    setEditingUser(fullUser);
    setFormData({
      full_name: fullUser.full_name || '',
      role: fullUser.role || 'user',
    });
    setIsModalOpen(true);
  };

  /**
   * Handle form input change
   */
  const handleInputChange = (e) => {
    const { name, value } = e.target;
    setFormData((prev) => ({
      ...prev,
      [name]: value,
    }));
  };

  /**
   * Submit user update
   */
  const handleSubmit = async (e) => {
    e.preventDefault();
    if (!editingUser?.id) return;

    setIsUpdating(true);
    try {
      const updated = await updateUser(editingUser.id, {
        full_name: formData.full_name,
        role: formData.role,
      });

      if (updated) {
        // Update local state
        setUsers((prev) =>
          prev.map((u) =>
            u.id === editingUser.id
              ? { ...u, full_name: formData.full_name, role: formData.role }
              : u
          )
        );
        closeModal();
        console.log('âœ… User updated successfully');
      } else {
        setError('Failed to update user');
      }
    } catch (err) {
      console.error('âŒ Error updating user:', err);
      setError('Error updating user. Please try again.');
    } finally {
      setIsUpdating(false);
    }
  };

  /**
   * Handle user deletion
   */
  const handleDelete = async (userId) => {
    if (
      !window.confirm(
        'Are you sure you want to delete this user account? This action cannot be undone.'
      )
    ) {
      return;
    }

    setIsUpdating(true);
    try {
      const success = await deleteUser(userId);
      if (success) {
        setUsers((prev) => prev.filter((u) => u.id !== userId));
        console.log('âœ… User deleted successfully');
      } else {
        setError('Failed to delete user');
      }
    } catch (err) {
      console.error('âŒ Error deleting user:', err);
      setError('Error deleting user. Please try again.');
    } finally {
      setIsUpdating(false);
    }
  };

  /**
   * Close modal and reset form
   */
  const closeModal = () => {
    setIsModalOpen(false);
    setEditingUser(null);
    setFormData({ full_name: '', role: '' });
  };

  /**
   * Get role badge with color
   */
  const getRoleBadge = (role) => {
    let colorClass = 'bg-gray-100 text-gray-800';
    if (role === 'admin') {
      colorClass = 'bg-red-100 text-red-800';
    } else if (role === 'user') {
      colorClass = 'bg-blue-100 text-blue-800';
    }

    return (
      <span className={`px-3 py-1 ${colorClass} rounded-full text-xs font-semibold uppercase tracking-wider`}>
        {role?.toUpperCase() || 'USER'}
      </span>
    );
  };

  // ========== RENDER ==========

  return (
    <div className="space-y-6">
      {/* Header */}
      <div className="mb-8">
        <h1 className="h2 text-primary mb-2">Users Management</h1>
        <p className="text-gray-600">
          View, edit, and manage all user accounts
        </p>
      </div>

      {/* Error Alert */}
      {error && (
        <div className="bg-red-50 border border-red-200 rounded-lg p-4 flex items-center gap-3 text-red-700">
          <FaExclamationCircle size={20} />
          <p>{error}</p>
          <button
            onClick={() => setError(null)}
            className="ml-auto text-red-500 hover:text-red-700"
          >
            <FaTimes />
          </button>
        </div>
      )}

      {/* Loading State */}
      {loading ? (
        <div className="flex items-center justify-center py-12">
          <FaSpinner className="animate-spin text-accent text-3xl" />
          <span className="ml-3 text-gray-600">Loading users...</span>
        </div>
      ) : (
        /* Users Table */
        <div className="bg-white rounded-lg shadow-md overflow-hidden">
          <div className="overflow-x-auto">
            <table className="w-full">
              <thead className="bg-accent text-white">
                <tr>
                  <th className="px-6 py-4 text-left font-tertiary tracking-wider">Name</th>
                  <th className="px-6 py-4 text-left font-tertiary tracking-wider">Email</th>
                  <th className="px-6 py-4 text-left font-tertiary tracking-wider">Phone</th>
                  <th className="px-6 py-4 text-left font-tertiary tracking-wider">Role</th>
                  <th className="px-6 py-4 text-left font-tertiary tracking-wider">Joined</th>
                  <th className="px-6 py-4 text-center font-tertiary tracking-wider">Actions</th>
                </tr>
              </thead>
              <tbody className="divide-y divide-gray-200">
                {users.length === 0 ? (
                  <tr>
                    <td colSpan="6" className="px-6 py-12 text-center text-gray-500">
                      No users found.
                    </td>
                  </tr>
                ) : (
                  users.map((user) => (
                    <tr key={user.id} className="hover:bg-gray-50 transition-colors">
                      <td className="px-6 py-4">
                        <div className="flex items-center gap-2">
                          <div className="w-8 h-8 bg-accent/10 rounded-full flex items-center justify-center">
                            <FaUser className="text-accent" size={14} />
                          </div>
                          <span className="font-medium">{user.full_name || 'N/A'}</span>
                        </div>
                      </td>
                      <td className="px-6 py-4 text-sm">
                        <div className="flex items-center gap-2">
                          <FaEnvelope className="text-gray-400" size={14} />
                          {user.email}
                        </div>
                      </td>
                      <td className="px-6 py-4 text-sm">{user.phone || '-'}</td>
                      <td className="px-6 py-4">{getRoleBadge(user.role)}</td>
                      <td className="px-6 py-4 text-sm text-gray-600">
                        {user.created_at
                          ? new Date(user.created_at).toLocaleDateString()
                          : 'N/A'}
                      </td>
                      <td className="px-6 py-4">
                        <div className="flex items-center justify-center gap-2">
                          <button
                            onClick={() => handleEdit(user)}
                            disabled={isUpdating}
                            className="p-2 text-accent hover:bg-accent/10 rounded transition-colors disabled:opacity-50"
                            title="Edit User"
                          >
                            <FaEdit />
                          </button>
                          <button
                            onClick={() => handleDelete(user.id)}
                            disabled={isUpdating}
                            className="p-2 text-red-500 hover:bg-red-50 rounded transition-colors disabled:opacity-50"
                            title="Delete User"
                          >
                            <FaTrash />
                          </button>
                        </div>
                      </td>
                    </tr>
                  ))
                )}
              </tbody>
            </table>
          </div>
        </div>
      )}

      {/* Edit Modal */}
      {isModalOpen && editingUser && (
        <div className="fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4">
          <div className="bg-white rounded-lg shadow-xl max-w-md w-full">
            {/* Modal Header */}
            <div className="p-6 border-b border-gray-200">
              <h2 className="h3 text-primary">Edit User</h2>
              <p className="text-sm text-gray-600 mt-1">
                Update user information
              </p>
            </div>

            {/* Modal Body */}
            <form onSubmit={handleSubmit} className="p-6 space-y-4">
              {/* Full Name */}
              <div>
                <label className="block text-sm font-semibold mb-2 text-primary">
                  Full Name
                </label>
                <input
                  type="text"
                  name="full_name"
                  value={formData.full_name}
                  onChange={handleInputChange}
                  className="w-full px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-accent"
                  placeholder="Enter full name"
                  disabled={isUpdating}
                />
              </div>

              {/* Role */}
              <div>
                <label className="block text-sm font-semibold mb-2 text-primary">
                  Role
                </label>
                <select
                  name="role"
                  value={formData.role}
                  onChange={handleInputChange}
                  className="w-full px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-accent"
                  disabled={isUpdating}
                >
                  <option value="user">User</option>
                  <option value="admin">Admin</option>
                </select>
              </div>

              {/* Read-Only Email */}
              <div>
                <label className="block text-sm font-semibold mb-2 text-primary">
                  Email (Read-Only)
                </label>
                <input
                  type="email"
                  value={editingUser.email || ''}
                  disabled
                  className="w-full px-4 py-2 border border-gray-300 rounded-lg bg-gray-50 text-gray-600"
                />
              </div>

              {/* Modal Actions */}
              <div className="flex gap-3 pt-4 border-t border-gray-200">
                <button
                  type="button"
                  onClick={closeModal}
                  disabled={isUpdating}
                  className="btn btn-secondary btn-sm flex-1"
                >
                  Cancel
                </button>
                <button
                  type="submit"
                  disabled={isUpdating}
                  className="btn btn-primary btn-sm flex-1 flex items-center justify-center gap-2"
                >
                  {isUpdating ? (
                    <>
                      <FaSpinner className="animate-spin" />
                      Saving...
                    </>
                  ) : (
                    <>
                      <FaCheck />
                      Save Changes
                    </>
                  )}
                </button>
              </div>
            </form>
          </div>
        </div>
      )}
    </div>
  );
};

export default UsersManagement;


=================================================================
FILE PATH: src\components\AdminSidebar.jsx
=================================================================
import { Link, useNavigate } from 'react-router-dom';
import {
  FaHome,
  FaBed,
  FaDoorOpen,
  FaDollarSign,
  FaTag,
  FaCalendarCheck,
  FaHistory,
  FaChartBar,
  FaSignOutAlt,
  FaUser,
  FaUsers
} from 'react-icons/fa';
import { LogoDark } from '../assets';
import { useAuth } from '../context/AuthContext';
import { useMemo } from 'react';

const AdminSidebar = ({ activeSection, setActiveSection }) => {
  const { user, logout, updateUserProfile } = useAuth();
  const navigate = useNavigate();

  const avatarLetter = useMemo(() => {
    if (!user?.name && !user?.email) return '';
    return (user.name || user.email).charAt(0).toUpperCase();
  }, [user]);

  const handleLogout = () => {
    logout();
    navigate('/');
  };

  const handleAvatarChange = (event) => {
    const file = event.target.files?.[0];
    if (!file) return;
    const reader = new FileReader();
    reader.onloadend = () => {
      updateUserProfile({ avatar: reader.result });
    };
    reader.readAsDataURL(file);
  };
  const menuItems = [
    { id: 'room-types', label: 'Room Types', icon: FaBed },
    { id: 'rooms', label: 'Rooms', icon: FaDoorOpen },
    { id: 'price-rules', label: 'Price Rules', icon: FaDollarSign },
    { id: 'promotions', label: 'Promotions', icon: FaTag },
    { id: 'bookings', label: 'Bookings', icon: FaCalendarCheck },
    { id: 'users', label: 'Users', icon: FaUsers },
    { id: 'audit-logs', label: 'Audit Logs', icon: FaHistory },
    { id: 'reports', label: 'Reports', icon: FaChartBar },
  ];

  return (
    <aside className="fixed left-0 top-0 h-full w-64 bg-primary text-white shadow-2xl z-40 hidden lg:block">
      {/* Logo */}
      <div className="p-6 border-b border-accent/20">
        <Link to="/" className="flex items-center">
          <LogoDark className="w-[140px] brightness-0 invert" />
        </Link>
        <p className="text-sm text-gray-400 mt-2 uppercase tracking-wider">Admin Panel</p>
      </div>

      {/* Navigation */}
      <nav className="p-4">
        <div className="mb-4">
          <Link
            to="/"
            className="flex items-center gap-3 px-4 py-3 rounded-lg hover:bg-accent/20 transition-colors text-gray-300 hover:text-white"
          >
            <FaHome className="text-lg" />
            <span className="font-tertiary tracking-wider">Home</span>
          </Link>
        </div>

        <div className="space-y-2">
          {menuItems.map((item) => {
            const Icon = item.icon;
            const isActive = activeSection === item.id;

            return (
              <button
                key={item.id}
                onClick={() => setActiveSection(item.id)}
                className={`w-full flex items-center gap-3 px-4 py-3 rounded-lg transition-all ${
                  isActive
                    ? 'bg-accent text-white shadow-lg'
                    : 'text-gray-300 hover:bg-accent/10 hover:text-white'
                }`}
              >
                <Icon className="text-lg" />
                <span className="font-tertiary tracking-wider text-sm">{item.label}</span>
              </button>
            );
          })}
        </div>
      </nav>

      {/* User Info & Logout */}
      <div className="absolute bottom-0 left-0 right-0 border-t border-accent/20">
        {user && (
          <div className="p-4 border-b border-accent/20">
            <div className="flex items-center gap-3 mb-3">
              <div className="relative">
                <div className="w-12 h-12 rounded-full bg-accent/20 flex items-center justify-center uppercase text-accent font-semibold border border-accent/40 overflow-hidden">
                  {user?.avatar ? (
                    <img src={user.avatar} alt={user.name} className="w-full h-full object-cover" />
                  ) : (
                    avatarLetter || <FaUser className="text-accent" />
                  )}
                </div>
                <label className="absolute -bottom-1 -right-1 bg-accent text-white p-1 rounded-full text-[10px] cursor-pointer">
                  âœŽ
                  <input type="file" accept="image/*" className="hidden" onChange={handleAvatarChange} />
                </label>
              </div>
              <div className="flex-1 min-w-0">
                <p className="text-sm font-semibold text-white truncate">{user.name || user.email}</p>
                <p className="text-xs text-gray-400 truncate">{user.email}</p>
              </div>
            </div>
          </div>
        )}

        <div className="p-4">
          <button
            onClick={handleLogout}
            className="w-full flex items-center gap-3 px-4 py-3 rounded-lg text-gray-300 hover:bg-accent/20 hover:text-white transition-colors"
          >
            <FaSignOutAlt />
            <span className="font-tertiary tracking-wider text-sm">Sign Out</span>
          </button>

          <p className="text-xs text-gray-500 text-center mt-4">
            Â© {new Date().getFullYear()} Hotel Booking
          </p>
        </div>
      </div>
    </aside>
  );
};

export default AdminSidebar;



=================================================================
FILE PATH: src\components\AdultsDropdown.jsx
=================================================================
import { useRoomContext } from '../context/RoomContext';
import { BsChevronDown } from 'react-icons/bs';
import { adultsList } from '../constants/data';
import { Menu } from '@headlessui/react';


const AdultsDropdown = () => {

  const { adults, setAdults, } = useRoomContext();


  return (
    <Menu as='div' className='w-full h-full bg-white relative'>


      <Menu.Button className='w-full h-full flex items-center justify-between px-8'>
        {adults}
        <BsChevronDown className='text-base text-accent-hover' />
      </Menu.Button>


      <Menu.Items as='ul' className='bg-white absolute w-full flex flex-col z-40'>
        {
          adultsList.map(({ name }, idx) =>
            <Menu.Item
              as='li'
              key={idx}
              onClick={() => setAdults(name)}
              className='border-b last-of-type:border-b-0 h-10 hover:bg-accent hover:text-white w-full flex items-center justify-center cursor-pointer'
            >
              {name}
            </Menu.Item>
          )
        }
      </Menu.Items>


    </Menu>
  );
};

export default AdultsDropdown;


=================================================================
FILE PATH: src\components\BookForm.jsx
=================================================================
import {
  AdultsDropdown,
  CheckIn,
  CheckOut,
  KidsDropdown,
  RoomTypeSelector,
} from ".";
import { useRoomContext } from "../context/RoomContext";

const BookForm = () => {
  const { handleCheck } = useRoomContext();

  const handleSubmit = (e) => {
    handleCheck(e);
    // Scroll to rooms section after a short delay to allow filtering
    setTimeout(() => {
      const roomsSection = document.getElementById("rooms-section");
      if (roomsSection) {
        roomsSection.scrollIntoView({ behavior: "smooth", block: "start" });
      }
    }, 900);
  };

  return (
    <form className="w-full" onSubmit={handleSubmit}>
      <div className="flex flex-col lg:flex-row lg:items-stretch w-full divide-y lg:divide-y-0 lg:divide-x divide-gray-200">
        <div className="flex-1 min-h-[60px] lg:min-h-auto">
          <CheckIn />
        </div>

        <div className="flex-1 min-h-[60px] lg:min-h-auto">
          <CheckOut />
        </div>

        <div className="flex-1 min-h-[60px] lg:min-h-auto">
          <RoomTypeSelector />
        </div>

        <div className="flex-1 min-h-[60px] lg:min-h-auto">
          <AdultsDropdown />
        </div>

        <div className="flex-1 min-h-[60px] lg:min-h-auto">
          <KidsDropdown />
        </div>

        <div className="flex items-center justify-center min-h-[60px] lg:min-h-auto lg:px-6 bg-white">
          <button type="submit" className="btn btn-primary w-full lg:w-auto">
            Check Now
          </button>
        </div>
      </div>
    </form>
  );
};

export default BookForm;


=================================================================
FILE PATH: src\components\CategoryFilter.jsx
=================================================================
import React, { useMemo } from "react";
import { useRoomContext } from "../context/RoomContext";

const CategoryFilter = () => {
  const { allRooms, selectedCategory, updateCategory } = useRoomContext();

  // Derive categories from actual room types in Supabase
  const roomTypes = useMemo(() => {
    const typeMap = new Map();
    allRooms.forEach((room) => {
      if (room.type && !typeMap.has(room.type)) {
        typeMap.set(room.type, {
          id: room.category,
          code: room.type,
          name: room.type === 'STD' ? 'Standard' : 
                room.type === 'DLX' ? 'Deluxe' :
                room.type === 'SUI' ? 'Suite' :
                room.type === 'PEN' ? 'Penthouse' :
                room.type === 'CMB' ? 'Combo Package' :
                room.type,
          description: `${room.type} rooms`
        });
      }
    });
    return Array.from(typeMap.values()).sort((a, b) => a.code.localeCompare(b.code));
  }, [allRooms]);

  return (
    <div className="mb-8 p-6 bg-white rounded-lg shadow-md">
      <h3 className="text-lg font-bold text-gray-800 mb-4">
        Filter by Room Type
      </h3>
      <div className="flex flex-wrap gap-3">
        {/* All Rooms Button */}
        <button
          onClick={() => updateCategory(null)}
          className={`px-6 py-2 rounded-full font-medium transition-all duration-300 ${
            selectedCategory === null
              ? "bg-teal-600 text-white shadow-lg"
              : "bg-gray-100 text-gray-700 hover:bg-gray-200"
          }`}
        >
          All Rooms
        </button>

        {/* Dynamic Room Type Buttons from Supabase */}
        {roomTypes.map((roomType) => (
          <button
            key={roomType.id}
            onClick={() => updateCategory(roomType.id)}
            className={`px-6 py-2 rounded-full font-medium transition-all duration-300 ${
              selectedCategory === roomType.id
                ? "bg-teal-600 text-white shadow-lg"
                : "bg-gray-100 text-gray-700 hover:bg-gray-200"
            }`}
            title={roomType.description}
          >
            {roomType.name}
          </button>
        ))}
      </div>
    </div>
  );
};

export default CategoryFilter;


=================================================================
FILE PATH: src\components\chatBox\ChatBox.jsx
=================================================================
import { useState, useMemo, useEffect, useRef } from "react";
import { useNavigate } from "react-router-dom";
import { useRoomContext } from "../../context/RoomContext";
import { useAuth } from "../../context/AuthContext";
import { FiMessageCircle, FiX, FiSend } from "react-icons/fi";
import QRPaymentModal from "../QRPaymentModal";

// AI Response templates for hotel consultation
const AI_RESPONSES = {
  greetings: [
    "Hello! ðŸ‘‹ I'm your booking assistant. I'll help you find the perfect room. What do you need?",
    "Welcome! ðŸ¨ I'm here to provide you with an amazing booking experience.",
  ],
  room_suggestions: [
    "Based on your requirements, I recommend these rooms:",
    "I found rooms that match your needs:",
  ],
  price_inquiry: [
    "Room prices vary by season. Choose dates to see exact pricing!",
    "Best rates on weekdays. Weekend rates are different!",
  ],
  amenities: [
    "ðŸŠ Swimming Pool, ðŸ‹ï¸ Gym, ðŸ½ï¸ Restaurant, ðŸ§– Spa",
    "ðŸŽ° Casino, ðŸŽª Tennis Court, ðŸš´ Bike Rental",
  ],
  special_requests: [
    "I've noted your special request. Our team will contact you soon!",
    "A staff member will reach out to confirm this request.",
  ],
};

const QuickReply = ({ label, onClick, icon = "âœ“" }) => (
  <button
    onClick={onClick}
    className="px-4 py-2 text-sm rounded-full bg-blue-50 hover:bg-blue-100 text-blue-700 border border-blue-200 transition transform hover:scale-105 active:scale-95 duration-200 font-medium flex items-center gap-2 whitespace-nowrap"
  >
    <span>{icon}</span>
    {label}
  </button>
);

const ChatMessage = ({ role = "ai", children, timestamp = null }) => {
  const isUser = role === "user";
  return (
    <div
      className={`w-full flex ${
        isUser ? "justify-end" : "justify-start"
      } my-3 animate-fade-in`}
    >
      <div
        className={`max-w-[85%] px-4 py-3 rounded-2xl text-sm leading-relaxed shadow-sm transition-all hover:shadow-md ${
          isUser
            ? "bg-blue-600 text-white rounded-br-sm"
            : "bg-gray-100 text-gray-900 border border-gray-200 rounded-bl-sm"
        }`}
      >
        {children}
        {timestamp && (
          <div
            className={`text-xs mt-1 ${
              isUser ? "text-blue-100" : "text-gray-500"
            }`}
          >
            {timestamp}
          </div>
        )}
      </div>
    </div>
  );
};

const TypingDots = () => (
  <div className="w-full flex justify-start my-3">
    <div className="px-4 py-3 rounded-2xl text-sm bg-gray-100 border border-gray-200 text-gray-500">
      <span className="inline-flex gap-1">
        <span
          className="w-2 h-2 rounded-full bg-gray-400 animate-bounce"
          style={{ animationDelay: "0ms" }}
        ></span>
        <span
          className="w-2 h-2 rounded-full bg-gray-400 animate-bounce"
          style={{ animationDelay: "150ms" }}
        ></span>
        <span
          className="w-2 h-2 rounded-full bg-gray-400 animate-bounce"
          style={{ animationDelay: "300ms" }}
        ></span>
      </span>
    </div>
  </div>
);

const RoomCard = ({ room, onSelect, showPrice = true }) => (
  <div
    onClick={() => onSelect(room)}
    className="flex gap-3 p-3 border border-gray-200 rounded-xl bg-white hover:bg-blue-50 transition transform hover:scale-[1.02] hover:shadow-lg duration-200 cursor-pointer"
  >
    <img
      src={room.image}
      alt={room.name}
      className="w-20 h-20 rounded-lg object-cover shadow-sm"
    />
    <div className="flex-1">
      <div className="font-semibold text-gray-900 text-sm">{room.name}</div>
      <div className="text-xs text-gray-600 mt-1">{room.description}</div>
      {showPrice && (
        <div className="text-blue-600 font-bold text-sm mt-2">
          ${room.price}/night
        </div>
      )}
    </div>
  </div>
);

const ChatBox = () => {
  const navigate = useNavigate();
  const { bookRoom, confirmBookingPayment, rooms: allRooms } = useRoomContext();
  const { isAuthenticated, user } = useAuth();

  const [open, setOpen] = useState(false);
  const [messages, setMessages] = useState([]);
  const [input, setInput] = useState("");
  const [isTyping, setIsTyping] = useState(false);
  const [stage, setStage] = useState("idle"); // idle | filter | book | payment | chat_after_booking
  const [bookingConfirmed, setBookingConfirmed] = useState(null);
  const [showQRPayment, setShowQRPayment] = useState(false);

  const messagesEndRef = useRef(null);

  const [filterForm, setFilterForm] = useState({
    checkIn: new Date().toISOString().split("T")[0],
    checkOut: new Date(Date.now() + 86400000).toISOString().split("T")[0],
    adults: 1,
    kids: 0,
  });

  const [bookingForm, setBookingForm] = useState({
    roomName: "",
    checkIn: new Date().toISOString().split("T")[0],
    checkOut: new Date(Date.now() + 86400000).toISOString().split("T")[0],
    adults: 1,
    kids: 0,
    name: "",
    email: "",
    phone: "",
    specialRequests: "",
  });

  const [adults, setAdults] = useState("1 Adult");
  const [kids, setKids] = useState("0 Kid");
  const [checkInDate, setCheckInDate] = useState(
    new Date().toISOString().split("T")[0]
  );
  const [checkOutDate, setCheckOutDate] = useState(
    new Date(Date.now() + 86400000).toISOString().split("T")[0]
  );
  const handleCheck = () => {};

  const candidateRooms = useMemo(() => {
    if (!bookingForm.roomName.trim()) return [];
    const keyword = bookingForm.roomName.toLowerCase();
    return allRooms.filter((r) => r.name.toLowerCase().includes(keyword));
  }, [bookingForm.roomName, allRooms]);

  const getRandomResponse = (type) => {
    const responses = AI_RESPONSES[type] || [];
    return responses[Math.floor(Math.random() * responses.length)] || "";
  };

  const getTimestamp = () => {
    const now = new Date();
    return now.toLocaleTimeString([], { hour: "2-digit", minute: "2-digit" });
  };

  useEffect(() => {
    messagesEndRef.current?.scrollIntoView({ behavior: "smooth" });
  }, [messages, isTyping]);

  useEffect(() => {
    if (open && messages.length === 0) {
      setTimeout(() => {
        pushAI(getRandomResponse("greetings"));
      }, 500);
    }
  }, [open]);

  const pushAI = (text, delay = 800) => {
    setIsTyping(true);
    setTimeout(() => {
      setMessages((prev) => [
        ...prev,
        {
          role: "ai",
          text,
          timestamp: getTimestamp(),
        },
      ]);
      setIsTyping(false);
    }, delay);
  };

  const pushUser = (text) => {
    setMessages((prev) => [
      ...prev,
      {
        role: "user",
        text,
        timestamp: getTimestamp(),
      },
    ]);
  };

  const onQuick = (type) => {
    if (type === "filter") {
      pushUser("Find suitable rooms");
      setStage("filter");
      pushAI(
        "Great! ðŸŽ¯ Please select check-in date, check-out date, and number of guests. I'll find the best rooms for you."
      );
    } else if (type === "book") {
      pushUser("Book now");
      setStage("book");
      pushAI(
        "Ready! ðŸ“‹ Please enter a room type or keyword (e.g., Deluxe, Family, Sea View), then fill in your details."
      );
    } else if (type === "amenities") {
      pushUser("Ask about amenities");
      pushAI(
        `${getRandomResponse(
          "amenities"
        )} âœ¨\n\nOther features:\nðŸŽµ Karaoke, ðŸ“º Movie Room, ðŸŒ® 24h Food Court`
      );
    } else if (type === "contact") {
      pushUser("Contact support");
      pushAI(
        "ðŸ“ž Hotline: 1-800-HOTEL\nðŸ“§ Email: support@hotel.com\nðŸ’¬ 24/7 Live chat support\n\nOr leave your phone number and we'll call back!"
      );
    } else if (type === "promo") {
      pushUser("Special offers");
      pushAI(
        "ðŸŽ‰ Today's Promotions:\nâ€¢ 15% off for 3+ nights\nâ€¢ Free room upgrade (available)\nâ€¢ Breakfast voucher for families\n\nBook now to not miss out!"
      );
    }
  };

  const handleSend = () => {
    const text = input.trim();
    if (!text) return;
    pushUser(text);
    setInput("");
    const t = text.toLowerCase();

    if (t.includes("book") || t.includes("booking")) {
      setStage("book");
      pushAI(
        "Perfect! ðŸ›ï¸ What type of room would you like to book? Enter the room name or keyword, then provide your details."
      );
    } else if (
      t.includes("find") ||
      t.includes("room") ||
      t.includes("recommend") ||
      t.includes("suggest")
    ) {
      setStage("filter");
      pushAI(
        "Sure! ðŸ‘ Select your check-in and check-out dates, and number of guests. I'll recommend the best rooms for you."
      );
    } else if (
      t.includes("amenities") ||
      t.includes("facilities") ||
      t.includes("services")
    ) {
      pushAI(
        `${getRandomResponse(
          "amenities"
        )}\n\nWould you like to know more details about any specific amenity?`
      );
    } else if (t.includes("price") || t.includes("cost")) {
      pushAI(getRandomResponse("price_inquiry"));
    } else if (t.includes("contact") || t.includes("support")) {
      pushAI(
        "ðŸ“ž Hotline: 1-800-HOTEL\nðŸ“§ Email: support@hotel.com\n\nHow can I help you?"
      );
    } else {
      pushAI(
        "Thank you! ðŸ˜Š You can use the buttons below or ask me about:\nâ€¢ Find suitable rooms\nâ€¢ Book a room\nâ€¢ Prices & promotions\nâ€¢ Amenities & services"
      );
    }
  };

  const applyFilter = () => {
    if (filterForm.checkIn >= filterForm.checkOut) {
      pushAI(
        "âš ï¸ Check-out date must be after check-in date. Please try again!"
      );
      return;
    }
    setAdults(`${filterForm.adults} Adult`);
    setKids(`${filterForm.kids} Kid`);
    setCheckInDate(filterForm.checkIn);
    setCheckOutDate(filterForm.checkOut);
    try {
      handleCheck({ preventDefault: () => {} });
    } catch (_) {}
    pushAI("âœ… Filter applied successfully. Redirecting to room list...");
    setTimeout(() => navigate("/"), 800);
    setTimeout(() => {
      const el = document.getElementById("rooms-section");
      if (el) el.scrollIntoView({ behavior: "smooth", block: "start" });
    }, 1000);
  };

  const selectRoomFromCard = (room) => {
    setBookingForm((f) => ({ ...f, roomName: room.name }));
    pushAI(
      `ðŸ‘ You selected ${room.name}. Price: $${room.price}/night. Please confirm dates and enter your contact information.`
    );
    setStage("book");
  };

  const createBooking = () => {
    if (!bookingForm.roomName.trim()) {
      pushAI("âŒ Please enter a room name or select a room from the list!");
      return;
    }
    if (bookingForm.checkIn >= bookingForm.checkOut) {
      pushAI("âš ï¸ Check-out date must be after check-in date!");
      return;
    }
    if (!bookingForm.name.trim()) {
      pushAI("âŒ Please enter your name!");
      return;
    }
    if (!bookingForm.email.trim() || !bookingForm.email.includes("@")) {
      pushAI("âŒ Please enter a valid email address!");
      return;
    }

    const room = candidateRooms[0];
    if (!room) {
      pushAI("âŒ No matching room found. Please try a different keyword!");
      return;
    }

    const res = bookRoom({
      roomId: room.id,
      roomName: room.name,
      userId: user?.id || "guest",
      userName: bookingForm.name,
      userEmail: bookingForm.email,
      userPhone: bookingForm.phone,
      checkIn: bookingForm.checkIn,
      checkOut: bookingForm.checkOut,
      adults: bookingForm.adults,
      kids: bookingForm.kids,
      specialRequests: bookingForm.specialRequests,
      note: "Booked via AI ChatBox",
    });

    if (res?.success) {
      setBookingConfirmed(res.booking);
      pushAI(
        `ðŸŽ‰ Booking Details Confirmed!\n\n` +
          `ðŸ›ï¸ Room: ${room.name}\n` +
          `ðŸ“… Check-in: ${bookingForm.checkIn}\n` +
          `ðŸ“… Check-out: ${bookingForm.checkOut}\n` +
          `ðŸ‘¥ Guests: ${bookingForm.adults} adults, ${bookingForm.kids} children\n` +
          `ðŸ’° Total: $${res.booking.totalPrice}\n` +
          `âœ… Confirmation Code: ${res.booking.confirmationCode}\n\n` +
          `Now proceeding to QR payment...`
      );
      setStage("payment");
      setTimeout(() => {
        setShowQRPayment(true);
      }, 1500);
    } else {
      pushAI(
        `âŒ Unable to create booking: ${
          res?.error || "Please check your information and try again."
        }`
      );
    }
  };

  const handleQRPaymentConfirm = (booking) => {
    // Confirm payment in the system
    confirmBookingPayment(booking.id, {
      paymentMethod: "QR Code",
      paymentCode: `QR-${Date.now()}`,
    });

    setShowQRPayment(false);
    pushAI(
      `âœ… Payment successful!\n\n` +
        `Your booking has been confirmed and saved to your account.\n` +
        `Confirmation details have been sent to ${bookingForm.email}.\n\n` +
        `Would you like to book another room or need anything else?`
    );
    setStage("idle");
    setBookingForm({
      roomName: "",
      checkIn: new Date().toISOString().split("T")[0],
      checkOut: new Date(Date.now() + 86400000).toISOString().split("T")[0],
      adults: 1,
      kids: 0,
      name: "",
      email: "",
      phone: "",
      specialRequests: "",
    });
    setBookingConfirmed(null);
  };

  return (
    <div className="fixed bottom-6 right-6 z-50">
      {!open && (
        <button
          aria-label="Open AI Chat"
          onClick={() => setOpen(true)}
          className="flex items-center gap-3 px-5 py-4 rounded-full shadow-2xl bg-gradient-to-r from-blue-600 to-blue-700 text-white hover:from-blue-700 hover:to-blue-800 transition transform hover:scale-110 active:scale-95 duration-200 animate-bounce font-semibold"
        >
          <FiMessageCircle size={20} />
          <span>Chat AI</span>
        </button>
      )}

      {open && (
        <div className="w-[360px] sm:w-[400px] h-[600px] bg-white rounded-3xl shadow-2xl border border-gray-200 flex flex-col animate-slide-up animate-fade-in overflow-hidden">
          {/* Header */}
          <div className="px-6 py-4 flex items-center justify-between bg-gradient-to-r from-blue-600 to-blue-700 text-white rounded-t-3xl shadow-md">
            <div>
              <div className="font-bold text-lg">Booking Assistant</div>
              <div className="text-xs text-blue-100">
                24/7 Support â€¢ Fast & Friendly
              </div>
            </div>
            <button
              onClick={() => setOpen(false)}
              className="p-1 text-white/80 hover:text-white hover:bg-white/20 rounded-lg transition"
              aria-label="Close"
            >
              <FiX size={20} />
            </button>
          </div>

          {/* Body */}
          <div className="flex-1 overflow-y-auto px-4 py-4 bg-gradient-to-b from-blue-50 to-gray-50 space-y-1">
            {messages.map((m, idx) => (
              <ChatMessage key={idx} role={m.role} timestamp={m.timestamp}>
                {m.text}
              </ChatMessage>
            ))}
            {isTyping && <TypingDots />}
            <div ref={messagesEndRef} />

            {/* Suggestions when user types a room name */}
            {stage === "book" &&
              bookingForm.roomName &&
              candidateRooms.length > 0 && (
                <div className="mt-4 space-y-2 animate-fade-in">
                  <div className="text-xs font-semibold text-gray-600 px-2">
                    ðŸ’¡ Recommended Rooms:
                  </div>
                  {candidateRooms.slice(0, 3).map((room) => (
                    <RoomCard
                      key={room.id}
                      room={room}
                      onSelect={selectRoomFromCard}
                    />
                  ))}
                </div>
              )}

            {/* Quick actions */}
            {stage === "idle" && messages.length <= 2 && (
              <div className="flex flex-wrap gap-2 p-2">
                <QuickReply
                  label="ðŸ” Find Rooms"
                  onClick={() => onQuick("filter")}
                />
                <QuickReply
                  label="ðŸ“‹ Book Now"
                  onClick={() => onQuick("book")}
                />
                <QuickReply
                  label="âœ¨ Amenities"
                  onClick={() => onQuick("amenities")}
                />
                <QuickReply
                  label="ðŸŽ‰ Specials"
                  onClick={() => onQuick("promo")}
                />
                <QuickReply
                  label="ðŸ“ž Contact"
                  onClick={() => onQuick("contact")}
                />
              </div>
            )}

            {/* Filter form */}
            {stage === "filter" && (
              <div className="p-4 bg-white border border-gray-200 rounded-2xl animate-fade-in space-y-4">
                <h3 className="font-semibold text-gray-900">Find Rooms</h3>
                <div className="grid grid-cols-2 gap-3">
                  <label className="text-xs text-gray-600 font-medium">
                    Check-in
                    <input
                      type="date"
                      value={filterForm.checkIn}
                      onChange={(e) =>
                        setFilterForm((f) => ({
                          ...f,
                          checkIn: e.target.value,
                        }))
                      }
                      className="mt-1 w-full border border-gray-300 rounded-lg px-3 py-2 text-sm focus:ring-2 focus:ring-blue-500 focus:border-transparent"
                    />
                  </label>
                  <label className="text-xs text-gray-600 font-medium">
                    Check-out
                    <input
                      type="date"
                      value={filterForm.checkOut}
                      onChange={(e) =>
                        setFilterForm((f) => ({
                          ...f,
                          checkOut: e.target.value,
                        }))
                      }
                      className="mt-1 w-full border border-gray-300 rounded-lg px-3 py-2 text-sm focus:ring-2 focus:ring-blue-500 focus:border-transparent"
                    />
                  </label>
                  <label className="text-xs text-gray-600 font-medium">
                    ðŸ‘¥ Adults
                    <input
                      type="number"
                      min={1}
                      max={10}
                      value={filterForm.adults}
                      onChange={(e) =>
                        setFilterForm((f) => ({
                          ...f,
                          adults: Number(e.target.value),
                        }))
                      }
                      className="mt-1 w-full border border-gray-300 rounded-lg px-3 py-2 text-sm focus:ring-2 focus:ring-blue-500 focus:border-transparent"
                    />
                  </label>
                  <label className="text-xs text-gray-600 font-medium">
                    ðŸ‘¶ Children
                    <input
                      type="number"
                      min={0}
                      max={10}
                      value={filterForm.kids}
                      onChange={(e) =>
                        setFilterForm((f) => ({
                          ...f,
                          kids: Number(e.target.value),
                        }))
                      }
                      className="mt-1 w-full border border-gray-300 rounded-lg px-3 py-2 text-sm focus:ring-2 focus:ring-blue-500 focus:border-transparent"
                    />
                  </label>
                </div>
                <button
                  onClick={applyFilter}
                  className="w-full py-3 bg-gradient-to-r from-blue-600 to-blue-700 text-white font-semibold rounded-lg hover:from-blue-700 hover:to-blue-800 transition transform hover:scale-105 active:scale-95 duration-200"
                >
                  ðŸ” Find Rooms
                </button>

                {/* Featured rooms preview (top 3) */}
                <div className="space-y-2 border-t pt-4">
                  <div className="text-xs font-semibold text-gray-600">
                    ðŸ¨ Featured Rooms:
                  </div>
                  {allRooms.slice(0, 3).map((room) => (
                    <RoomCard
                      key={room.id}
                      room={room}
                      onSelect={selectRoomFromCard}
                    />
                  ))}
                </div>
              </div>
            )}

            {/* Booking form */}
            {stage === "book" && (
              <div className="p-4 bg-white border border-gray-200 rounded-2xl animate-fade-in space-y-4">
                <h3 className="font-semibold text-gray-900">
                  ðŸ“‹ Booking Information
                </h3>
                <div className="grid grid-cols-2 gap-3">
                  <label className="text-xs text-gray-600 font-medium col-span-2">
                    Room Name / Search
                    <input
                      type="text"
                      value={bookingForm.roomName}
                      onChange={(e) =>
                        setBookingForm((f) => ({
                          ...f,
                          roomName: e.target.value,
                        }))
                      }
                      placeholder="e.g., Deluxe, Family, Sea View..."
                      className="mt-1 w-full border border-gray-300 rounded-lg px-3 py-2 text-sm focus:ring-2 focus:ring-blue-500 focus:border-transparent"
                    />
                  </label>
                  <label className="text-xs text-gray-600 font-medium">
                    Check-in
                    <input
                      type="date"
                      value={bookingForm.checkIn}
                      onChange={(e) =>
                        setBookingForm((f) => ({
                          ...f,
                          checkIn: e.target.value,
                        }))
                      }
                      className="mt-1 w-full border border-gray-300 rounded-lg px-3 py-2 text-sm focus:ring-2 focus:ring-blue-500 focus:border-transparent"
                    />
                  </label>
                  <label className="text-xs text-gray-600 font-medium">
                    Check-out
                    <input
                      type="date"
                      value={bookingForm.checkOut}
                      onChange={(e) =>
                        setBookingForm((f) => ({
                          ...f,
                          checkOut: e.target.value,
                        }))
                      }
                      className="mt-1 w-full border border-gray-300 rounded-lg px-3 py-2 text-sm focus:ring-2 focus:ring-blue-500 focus:border-transparent"
                    />
                  </label>
                  <label className="text-xs text-gray-600 font-medium">
                    ðŸ‘¥ Adults
                    <input
                      type="number"
                      min={1}
                      max={10}
                      value={bookingForm.adults}
                      onChange={(e) =>
                        setBookingForm((f) => ({
                          ...f,
                          adults: Number(e.target.value),
                        }))
                      }
                      className="mt-1 w-full border border-gray-300 rounded-lg px-3 py-2 text-sm focus:ring-2 focus:ring-blue-500 focus:border-transparent"
                    />
                  </label>
                  <label className="text-xs text-gray-600 font-medium">
                    ðŸ‘¶ Children
                    <input
                      type="number"
                      min={0}
                      max={10}
                      value={bookingForm.kids}
                      onChange={(e) =>
                        setBookingForm((f) => ({
                          ...f,
                          kids: Number(e.target.value),
                        }))
                      }
                      className="mt-1 w-full border border-gray-300 rounded-lg px-3 py-2 text-sm focus:ring-2 focus:ring-blue-500 focus:border-transparent"
                    />
                  </label>
                  <label className="text-xs text-gray-600 font-medium col-span-2">
                    Full Name
                    <input
                      type="text"
                      value={bookingForm.name}
                      onChange={(e) =>
                        setBookingForm((f) => ({ ...f, name: e.target.value }))
                      }
                      placeholder="John Doe"
                      className="mt-1 w-full border border-gray-300 rounded-lg px-3 py-2 text-sm focus:ring-2 focus:ring-blue-500 focus:border-transparent"
                    />
                  </label>
                  <label className="text-xs text-gray-600 font-medium col-span-2">
                    Email
                    <input
                      type="email"
                      value={bookingForm.email}
                      onChange={(e) =>
                        setBookingForm((f) => ({ ...f, email: e.target.value }))
                      }
                      placeholder="email@example.com"
                      className="mt-1 w-full border border-gray-300 rounded-lg px-3 py-2 text-sm focus:ring-2 focus:ring-blue-500 focus:border-transparent"
                    />
                  </label>
                  <label className="text-xs text-gray-600 font-medium col-span-2">
                    Phone (Optional)
                    <input
                      type="tel"
                      value={bookingForm.phone}
                      onChange={(e) =>
                        setBookingForm((f) => ({ ...f, phone: e.target.value }))
                      }
                      placeholder="+1 (555) 123-4567"
                      className="mt-1 w-full border border-gray-300 rounded-lg px-3 py-2 text-sm focus:ring-2 focus:ring-blue-500 focus:border-transparent"
                    />
                  </label>
                  <label className="text-xs text-gray-600 font-medium col-span-2">
                    Special Requests (Optional)
                    <textarea
                      value={bookingForm.specialRequests}
                      onChange={(e) =>
                        setBookingForm((f) => ({
                          ...f,
                          specialRequests: e.target.value,
                        }))
                      }
                      placeholder="e.g., High floor, near elevator, quiet room..."
                      rows="2"
                      className="mt-1 w-full border border-gray-300 rounded-lg px-3 py-2 text-sm focus:ring-2 focus:ring-blue-500 focus:border-transparent resize-none"
                    />
                  </label>
                </div>

                {bookingForm.roomName && candidateRooms.length > 0 && (
                  <div className="p-2 bg-blue-50 border border-blue-200 rounded-lg text-xs text-blue-900">
                    âœ… Suggestions:{" "}
                    {candidateRooms
                      .slice(0, 2)
                      .map((r) => r.name)
                      .join(", ")}
                  </div>
                )}

                <button
                  onClick={createBooking}
                  className="w-full py-3 bg-gradient-to-r from-green-600 to-green-700 text-white font-semibold rounded-lg hover:from-green-700 hover:to-green-800 transition transform hover:scale-105 active:scale-95 duration-200 flex items-center justify-center gap-2"
                >
                  <FiSend size={18} />
                  Confirm Booking
                </button>
              </div>
            )}

            {/* Payment stage placeholder */}
            {stage === "payment" && (
              <div className="p-4 bg-white border border-gray-200 rounded-2xl animate-fade-in space-y-4">
                <h3 className="font-semibold text-gray-900">ðŸ’³ Payment</h3>
                <div className="p-4 bg-yellow-50 border border-yellow-200 rounded-lg text-sm text-yellow-900">
                  Payment gateway integration coming soon. Your booking details
                  have been saved.
                </div>
              </div>
            )}
          </div>

          {/* Input */}
          <div className="px-4 py-3 border-t bg-white rounded-b-3xl">
            <div className="flex gap-2">
              <input
                value={input}
                onChange={(e) => setInput(e.target.value)}
                onKeyDown={(e) => {
                  if (e.key === "Enter" && !e.shiftKey) {
                    e.preventDefault();
                    handleSend();
                  }
                }}
                placeholder="Ask me anything..."
                className="flex-1 border border-gray-300 rounded-full px-4 py-2 text-sm focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent"
              />
              <button
                onClick={handleSend}
                className="px-4 py-2 rounded-full bg-blue-600 text-white hover:bg-blue-700 transition transform hover:scale-105 active:scale-95 duration-200 flex items-center justify-center"
              >
                <FiSend size={18} />
              </button>
            </div>
          </div>
        </div>
      )}

      {/* QR Payment Modal */}
      {showQRPayment && bookingConfirmed && (
        <QRPaymentModal
          booking={bookingConfirmed}
          onConfirmPayment={handleQRPaymentConfirm}
          onClose={() => setShowQRPayment(false)}
        />
      )}
    </div>
  );
};

export default ChatBox;


=================================================================
FILE PATH: src\components\chatBox\index.js
=================================================================
export { default } from './ChatBox';

=================================================================
FILE PATH: src\components\CheckIn.jsx
=================================================================
import { BsCalendar } from 'react-icons/bs';
import DatePicker from 'react-datepicker';
import 'react-datepicker/dist/react-datepicker.css';
import '../style/datepicker.css';
import { useRoomContext } from '../context/RoomContext';

const CheckIn = () => {
  const { checkInDate, setCheckInDate, checkOutDate, setCheckOutDate } = useRoomContext();

  const handleChange = (date) => {
    setCheckInDate(date);
    if (checkOutDate && date && date >= checkOutDate) {
      setCheckOutDate(null);
    }
  };

  return (
    <div className='relative flex items-center justify-end h-full'>
      <div className='absolute z-10 pr-8'>
        <div><BsCalendar className='text-accent text-base' /></div>
      </div>

      <DatePicker
        className='w-full h-full'
        selected={checkInDate}
        placeholderText='Check in'
        minDate={new Date()}
        onChange={handleChange}
      />
    </div>
  );
};

export default CheckIn;


=================================================================
FILE PATH: src\components\CheckOut.jsx
=================================================================
import { BsCalendar } from 'react-icons/bs';
import DatePicker from 'react-datepicker';
import 'react-datepicker/dist/react-datepicker.css';
import '../style/datepicker.css';
import { useRoomContext } from '../context/RoomContext';

const CheckOut = () => {
  const { checkInDate, checkOutDate, setCheckOutDate } = useRoomContext();

  const minDate = checkInDate ? new Date(checkInDate.getTime() + 24 * 60 * 60 * 1000) : new Date();

  return (
    <div className='relative flex items-center justify-end h-full'>
      <div className='absolute z-10 pr-8'>
        <div><BsCalendar className='text-accent text-base' /></div>
      </div>

      <DatePicker
        className='w-full h-full'
        selected={checkOutDate}
        placeholderText='Check out'
        minDate={minDate}
        onChange={(date) => setCheckOutDate(date)}
        disabled={!checkInDate}
      />

    </div>
  );
};

export default CheckOut;


=================================================================
FILE PATH: src\components\Footer.jsx
=================================================================
const STORAGE_URL = 'https://sxteddkozzqniebfstag.supabase.co/storage/v1/object/public/hotel-rooms/img';

const Footer = () => (
  <footer className='bg-primary py-12'>
    <div className='container mx-auto text-white flex items-center gap-5 sm:justify-between flex-col sm:flex-row'>
      <a href="/">
        <img src={`${STORAGE_URL}/logo-white.svg`} alt="logo" className="w-[120px]" />
      </a>
      <div className="flex flex-col items-center">
        <p>Copyright &copy; {new Date().getFullYear()}, All Right Reserved,</p>
      </div>
    </div>
  </footer>
);

export default Footer;

=================================================================
FILE PATH: src\components\Header.jsx
=================================================================
import { useRoomContext } from "../context/RoomContext";
import { useAuth } from "../context/AuthContext";
import { useEffect, useMemo, useState } from "react";
import { Link, useNavigate, useLocation } from "react-router-dom";
import { FaUser, FaSignOutAlt, FaSignInAlt } from "react-icons/fa";

const STORAGE_URL = 'https://sxteddkozzqniebfstag.supabase.co/storage/v1/object/public/hotel-rooms/img';

const Header = () => {
  const { resetRoomFilterData } = useRoomContext();
  const { user, logout, isAuthenticated } = useAuth();
  const navigate = useNavigate();
  const location = useLocation();

  const [header, setHeader] = useState(false);

  useEffect(() => {
    const handleScroll = () => {
      if (location.pathname !== "/") {
        setHeader(true);
      } else {
        setHeader(window.scrollY > 50);
      }
    };

    handleScroll();
    window.addEventListener("scroll", handleScroll);
    return () => window.removeEventListener("scroll", handleScroll);
  }, [location.pathname]);

  const navLinks = [
    { label: "Home", path: "/" },
    { label: "Rooms", path: "/rooms" },
    { label: "Restaurant", path: "/restaurant" },
    { label: "Spa", path: "/spa" },
    { label: "Contact", path: "/contact" },
  ];

  const handleLogout = () => {
    logout();
    navigate("/");
  };

  const avatarLetter = useMemo(() => {
    if (!user?.name && !user?.email) return "";
    const source = user.name || user.email;
    return source.charAt(0).toUpperCase();
  }, [user]);

  return (
    <header
      className={`fixed z-50 w-full transition-all duration-300 
      ${header ? "bg-white py-6 shadow-lg" : "bg-transparent py-8"}`}
    >
      <div className="container mx-auto flex flex-col lg:flex-row items-center lg:justify-between gap-y-6 lg:gap-y-0">
        <Link to="/" onClick={resetRoomFilterData}>
          {header ? (
            <img src={`${STORAGE_URL}/logo-dark.svg`} alt="logo" className="w-[160px]" />
          ) : (
            <img src={`${STORAGE_URL}/logo-white.svg`} alt="logo" className="w-[160px]" />
          )}
        </Link>

        <nav
          className={`${header ? "text-primary" : "text-white"}
        flex gap-x-4 lg:gap-x-8 font-tertiary tracking-[3px] text-[15px] items-center uppercase`}
        >
          {navLinks.map(({ label, path }) => (
            <Link
              to={path}
              className="transition hover:text-accent"
              key={label}
            >
              {label}
            </Link>
          ))}

          <div className="flex items-center gap-3 ml-4 pl-4 border-l border-current/20">
            {isAuthenticated() ? (
              <>
                <div
                  className={`flex items-center gap-3 text-sm ${
                    header ? "text-primary" : "text-white"
                  }`}
                >
                  <div className="w-9 h-9 rounded-full bg-accent/20 flex items-center justify-center uppercase font-semibold text-accent border border-accent/40">
                    {user?.avatar ? (
                      <img
                        src={user.avatar}
                        alt={user.name}
                        className="w-full h-full rounded-full object-cover"
                      />
                    ) : (
                      avatarLetter || <FaUser />
                    )}
                  </div>
                  <span className="hidden sm:inline font-semibold">
                    {user?.name || user?.email?.split("@")[0]}
                  </span>
                </div>
                {user?.role !== "admin" && (
                  <Link
                    to="/account"
                    className={`transition hover:text-accent flex items-center gap-2 text-sm ${
                      header ? "text-primary" : "text-white"
                    }`}
                  >
                    <span className="hidden sm:inline">Dashboard</span>
                  </Link>
                )}
                {user?.role === "admin" && (
                  <Link
                    to="/admin"
                    className={`transition hover:text-accent flex items-center gap-2 text-sm ${
                      header ? "text-primary" : "text-white"
                    }`}
                  >
                    <span className="hidden sm:inline">Admin</span>
                  </Link>
                )}
                <button
                  onClick={handleLogout}
                  className={`transition hover:text-accent flex items-center gap-2 text-sm ${
                    header ? "text-primary" : "text-white"
                  }`}
                  title="Sign Out"
                >
                  <FaSignOutAlt />
                  <span className="hidden sm:inline">Sign Out</span>
                </button>
              </>
            ) : (
              <>
                <Link
                  to="/register"
                  className={`transition hover:text-accent flex items-center gap-2 text-sm ${
                    header ? "text-primary" : "text-white"
                  }`}
                >
                  <span className="hidden sm:inline">Sign Up</span>
                </Link>
                <Link
                  to="/login"
                  className={`transition hover:text-accent flex items-center gap-2 text-sm ${
                    header ? "text-primary" : "text-white"
                  }`}
                >
                  <FaSignInAlt />
                  <span className="hidden sm:inline">Sign In</span>
                </Link>
              </>
            )}
          </div>
        </nav>
      </div>
    </header>
  );
};

export default Header;

=================================================================
FILE PATH: src\components\HeroSlider.jsx
=================================================================
import { Swiper, SwiperSlide } from 'swiper/react';
import { sliderData } from '../constants/data';
import { EffectFade, Autoplay } from 'swiper';
import 'swiper/css/effect-fade';
import 'swiper/css';

const STORAGE_URL = 'https://sxteddkozzqniebfstag.supabase.co/storage/v1/object/public/hotel-rooms';

const HeroSlider = () => {
  return (
    <Swiper
      modules={[EffectFade, Autoplay]}
      effect={'fade'}
      loop={true}
      autoplay={{
        delay: 3000,
        disableOnInteraction: false,
      }}
      className='heroSlider h-[600px] lg:h-[860px]'
    >
      {
        sliderData.map(({ id, title, btnNext }) =>
          <SwiperSlide className='h-full relative flex justify-center items-center' key={id}>

            <div className='z-20 text-white text-center'>
              <div className='uppercase font-tertiary tracking-[6px] mb-5'>Just Enjoy & Relax</div>
              <h1 className='font-primary text-[32px] uppercase tracking-[2px] max-w-[920px] lg:text-[68px] leading-tight mb-6'>
                {title}
              </h1>
              <button className='btn btn-lg btn-primary mx-auto'>{btnNext}</button>
            </div>

            <div className='absolute top-0 w-full h-full'>
              <img className='object-cover h-full w-full' src={`${STORAGE_URL}/img/heroSlider/${id}.jpg`} alt={title} />
            </div>

            <div className='absolute w-full h-full bg-black/70' />
          </SwiperSlide>
        )
      }
    </Swiper>
  )
};

export default HeroSlider;

=================================================================
FILE PATH: src\components\index.js
=================================================================
export { default as AdultsDropdown } from "./AdultsDropdown";
export { default as PageNotFound } from "./PageNotFound";
export { default as KidsDropdown } from "./KidsDropdown";
export { default as HeroSlider } from "./HeroSlider";
export { default as BookForm } from "./BookForm";
export { default as CheckOut } from "./CheckOut";
export { default as CheckIn } from "./CheckIn";
export { default as Footer } from "./Footer";
export { default as Header } from "./Header";
export { default as Rooms } from "./Rooms";
export { default as Room } from "./Room";
export { default as AdminSidebar } from "./AdminSidebar";
export { default as ProtectedRoute } from "./ProtectedRoute";
export { default as Toast } from "./Toast";
export { default as LanguageSwitcher } from "./LanguageSwitcher";
export { default as QRPaymentModal } from "./QRPaymentModal";
export { default as Invoice } from "./Invoice";
export { default as Pagination } from "./Pagination";
export { default as CategoryFilter } from "./CategoryFilter";
export { default as RoomTypeSelector } from "./RoomTypeSelector";

export { default as ScrollToTop } from "../utils/ScrollToTop";


=================================================================
FILE PATH: src\components\Invoice.jsx
=================================================================
import { useRef } from "react";
import { FaFileInvoice, FaEnvelope, FaTimes } from "react-icons/fa";
import { LogoDark } from "../assets";

const Invoice = ({ booking, onClose, onDownload, onEmail }) => {
  const invoiceRef = useRef(null);
  const formatDate = (dateString) => {
    if (!dateString) return "N/A";
    const date = new Date(dateString);
    return date.toLocaleDateString("en-US", {
      year: "numeric",
      month: "long",
      day: "numeric",
    });
  };

  const formatDateTime = (dateString) => {
    if (!dateString) return "N/A";
    const date = new Date(dateString);
    return date.toLocaleString("en-US", {
      year: "numeric",
      month: "long",
      day: "numeric",
      hour: "2-digit",
      minute: "2-digit",
    });
  };

  const getBookingType = () => {
    if (booking.type === "restaurant") return "Restaurant Reservation";
    if (booking.type === "spa") return "Spa Appointment";
    return "Room Booking";
  };

  return (
    <div
      className="fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4 overflow-y-auto"
      onClick={(e) => {
        if (e.target === e.currentTarget && onClose) {
          onClose();
        }
      }}
    >
      <div
        ref={invoiceRef}
        className="bg-white rounded-lg shadow-xl max-w-3xl w-full my-8 max-h-[90vh] flex flex-col invoice-pdf"
      >
        {/* Header - Fixed */}
        <div className="bg-gradient-to-r from-accent/20 to-accent/10 p-8 border-b-2 border-accent/30 flex-shrink-0">
          <div className="flex items-center justify-between mb-6">
            <div className="flex items-center gap-4">
              <div className="bg-white p-3 rounded-lg shadow-sm">
                <LogoDark className="w-32" />
              </div>
              <div>
                <h2 className="text-3xl font-primary text-primary mb-1">
                  Invoice
                </h2>
                <p className="text-sm text-primary/60">Adina Hotel & Spa</p>
              </div>
            </div>
            {onClose && (
              <button
                onClick={onClose}
                className="text-primary/60 hover:text-primary transition p-2 hover:bg-white/50 rounded-full close-btn"
                title="Close"
              >
                <FaTimes className="text-2xl" />
              </button>
            )}
          </div>
          <div className="flex items-center gap-4 text-sm flex-wrap action-buttons">
            <div className="flex items-center gap-2 px-5 py-2.5 bg-green-50 border-2 border-green-200 text-green-700 rounded-lg email-badge">
              <FaEnvelope />
              <span>Invoice sent to email</span>
            </div>
          </div>
        </div>

        {/* Invoice Content - Scrollable */}
        <div className="p-8 overflow-y-auto flex-1">
          {/* Invoice Details */}
          <div className="grid grid-cols-1 md:grid-cols-2 gap-8 mb-8">
            <div className="bg-[#f7f4ef] p-6 rounded-lg border border-[#eadfcf]">
              <h3 className="font-semibold text-primary mb-4 text-lg flex items-center gap-2">
                <span className="w-1 h-6 bg-accent block"></span>
                Bill To:
              </h3>
              <div className="space-y-2">
                <p className="text-primary font-semibold text-lg">
                  {booking.userName || booking.name}
                </p>
                <p className="text-primary/70">
                  {booking.userEmail || booking.email}
                </p>
                {booking.phone && (
                  <p className="text-primary/70">{booking.phone}</p>
                )}
              </div>
            </div>
            <div className="bg-[#f7f4ef] p-6 rounded-lg border border-[#eadfcf] text-right md:text-left">
              <h3 className="font-semibold text-primary mb-4 text-lg flex items-center gap-2 md:justify-end">
                <span className="w-1 h-6 bg-accent block"></span>
                Invoice Details:
              </h3>
              <div className="space-y-2">
                <p className="text-primary/70">
                  <span className="font-semibold">Invoice #:</span>{" "}
                  <span className="font-mono">
                    {booking.invoiceNumber || booking.confirmationCode}
                  </span>
                </p>
                {booking.paymentCode && (
                  <p className="text-primary/70">
                    <span className="font-semibold">Payment Code:</span>{" "}
                    <span className="font-mono">{booking.paymentCode}</span>
                  </p>
                )}
                <p className="text-primary/70">
                  <span className="font-semibold">Date:</span>{" "}
                  {formatDate(booking.paidAt || booking.createdAt)}
                </p>
                <p className="text-primary/70">
                  <span className="font-semibold">Payment:</span>{" "}
                  {booking.paymentMethod || "QR Code"}
                </p>
                {booking.status && (
                  <p className="text-primary/70">
                    <span className="font-semibold">Status:</span>{" "}
                    <span className="capitalize">{booking.status}</span>
                  </p>
                )}
                {booking.roomId && (
                  <p className="text-primary/70">
                    <span className="font-semibold">Room ID:</span>{" "}
                    {booking.roomId}
                  </p>
                )}
              </div>
            </div>
          </div>

          {/* Booking Type */}
          <div className="mb-8">
            <h3 className="font-primary text-2xl mb-6 text-primary border-b-2 border-accent/30 pb-3">
              {getBookingType()}
            </h3>
            <div className="bg-gradient-to-r from-accent/10 to-accent/5 p-6 rounded-lg border-2 border-accent/20">
              <div className="grid grid-cols-1 md:grid-cols-2 gap-4">
                <div>
                  <p className="text-sm text-primary/60 mb-1">
                    Confirmation Code
                  </p>
                  <p className="font-mono font-semibold text-lg text-primary">
                    {booking.confirmationCode}
                  </p>
                </div>
                {booking.paymentCode && (
                  <div>
                    <p className="text-sm text-primary/60 mb-1">Payment Code</p>
                    <p className="font-mono font-semibold text-lg text-primary">
                      {booking.paymentCode}
                    </p>
                  </div>
                )}
              </div>
            </div>
          </div>

          {/* Booking Details */}
          <div className="mb-8">
            {booking.type === "room" && (
              <>
                <div className="grid grid-cols-2 md:grid-cols-3 gap-4 mb-6">
                  <div className="bg-white p-4 rounded-lg border border-[#eadfcf]">
                    <p className="text-xs text-primary/60 mb-2 uppercase tracking-wide">
                      Room
                    </p>
                    <p className="font-semibold text-lg text-primary">
                      {booking.roomName}
                    </p>
                  </div>
                  <div className="bg-white p-4 rounded-lg border border-[#eadfcf]">
                    <p className="text-xs text-primary/60 mb-2 uppercase tracking-wide">
                      Check-in
                    </p>
                    <p className="font-semibold text-lg text-primary">
                      {formatDate(booking.checkIn)}
                    </p>
                  </div>
                  <div className="bg-white p-4 rounded-lg border border-[#eadfcf]">
                    <p className="text-xs text-primary/60 mb-2 uppercase tracking-wide">
                      Check-out
                    </p>
                    <p className="font-semibold text-lg text-primary">
                      {formatDate(booking.checkOut)}
                    </p>
                  </div>
                  <div className="bg-white p-4 rounded-lg border border-[#eadfcf]">
                    <p className="text-xs text-primary/60 mb-2 uppercase tracking-wide">
                      Nights
                    </p>
                    <p className="font-semibold text-lg text-accent">
                      {booking.totalNights || 1}
                    </p>
                  </div>
                  <div className="bg-white p-4 rounded-lg border border-[#eadfcf] col-span-2">
                    <p className="text-xs text-primary/60 mb-2 uppercase tracking-wide">
                      Guests
                    </p>
                    <p className="font-semibold text-lg text-primary">
                      {booking.adults || 1} Adult(s)
                      {booking.kids ? `, ${booking.kids} Kid(s)` : ""}
                    </p>
                  </div>
                </div>
                {booking.pricingBreakdown &&
                  booking.pricingBreakdown.length > 0 && (
                    <div className="mt-6">
                      <h4 className="font-semibold text-lg mb-4 text-primary border-b border-[#eadfcf] pb-2">
                        Pricing Breakdown:
                      </h4>
                      <div className="space-y-2 text-sm max-h-60 overflow-y-auto border-2 border-[#eadfcf] rounded-lg p-4 bg-white">
                        {booking.pricingBreakdown.map((day, idx) => (
                          <div
                            key={idx}
                            className="flex justify-between items-center text-primary/70 py-2 border-b border-[#eadfcf]/50 last:border-0"
                          >
                            <div className="flex-1">
                              <span className="font-medium">
                                {formatDate(day.date)}
                              </span>
                              {day.label && (
                                <span className="text-primary/50 text-xs ml-2">
                                  ({day.label})
                                </span>
                              )}
                            </div>
                            <span className="font-semibold text-accent text-base">
                              ${day.price || day.rate || 0}
                            </span>
                          </div>
                        ))}
                      </div>
                    </div>
                  )}
                {(booking.note || booking.specialRequests) && (
                  <div className="mt-6">
                    <h4 className="font-semibold text-lg mb-4 text-primary border-b border-[#eadfcf] pb-2">
                      Special Requests / Notes:
                    </h4>
                    <div className="bg-[#f7f4ef] p-4 rounded-lg border border-[#eadfcf]">
                      <p className="text-primary/80 whitespace-pre-wrap">
                        {booking.note || booking.specialRequests}
                      </p>
                    </div>
                  </div>
                )}
              </>
            )}

            {booking.type === "restaurant" && (
              <>
                <div className="grid grid-cols-1 md:grid-cols-2 gap-4 mb-6">
                  <div className="bg-white p-4 rounded-lg border border-[#eadfcf]">
                    <p className="text-xs text-primary/60 mb-2 uppercase tracking-wide">
                      Date & Time
                    </p>
                    <p className="font-semibold text-lg text-primary">
                      {formatDateTime(booking.date)}
                    </p>
                  </div>
                  <div className="bg-white p-4 rounded-lg border border-[#eadfcf]">
                    <p className="text-xs text-primary/60 mb-2 uppercase tracking-wide">
                      Number of Guests
                    </p>
                    <p className="font-semibold text-lg text-primary">
                      {booking.guests || 1} Guest(s)
                    </p>
                  </div>
                  {booking.serviceName && (
                    <div className="bg-white p-4 rounded-lg border border-[#eadfcf] md:col-span-2">
                      <p className="text-xs text-primary/60 mb-2 uppercase tracking-wide">
                        Service
                      </p>
                      <p className="font-semibold text-lg text-primary">
                        {booking.serviceName}
                      </p>
                    </div>
                  )}
                </div>
                {booking.specialRequests && (
                  <div className="mt-4">
                    <h4 className="font-semibold text-lg mb-4 text-primary border-b border-[#eadfcf] pb-2">
                      Special Requests:
                    </h4>
                    <div className="bg-[#f7f4ef] p-4 rounded-lg border border-[#eadfcf]">
                      <p className="text-primary/80 whitespace-pre-wrap">
                        {booking.specialRequests}
                      </p>
                    </div>
                  </div>
                )}
              </>
            )}

            {booking.type === "spa" && (
              <>
                <div className="grid grid-cols-1 md:grid-cols-2 gap-4 mb-6">
                  <div className="bg-white p-4 rounded-lg border border-[#eadfcf]">
                    <p className="text-xs text-primary/60 mb-2 uppercase tracking-wide">
                      Date & Time
                    </p>
                    <p className="font-semibold text-lg text-primary">
                      {formatDateTime(booking.date)}
                    </p>
                  </div>
                  <div className="bg-white p-4 rounded-lg border border-[#eadfcf]">
                    <p className="text-xs text-primary/60 mb-2 uppercase tracking-wide">
                      Service
                    </p>
                    <p className="font-semibold text-lg text-primary">
                      {booking.serviceName || booking.service}
                    </p>
                  </div>
                  {booking.duration && (
                    <div className="bg-white p-4 rounded-lg border border-[#eadfcf]">
                      <p className="text-xs text-primary/60 mb-2 uppercase tracking-wide">
                        Duration
                      </p>
                      <p className="font-semibold text-lg text-primary">
                        {booking.duration}
                      </p>
                    </div>
                  )}
                  {booking.therapist && (
                    <div className="bg-white p-4 rounded-lg border border-[#eadfcf]">
                      <p className="text-xs text-primary/60 mb-2 uppercase tracking-wide">
                        Therapist
                      </p>
                      <p className="font-semibold text-lg text-primary">
                        {booking.therapist}
                      </p>
                    </div>
                  )}
                </div>
                {booking.specialRequests && (
                  <div className="mt-4">
                    <h4 className="font-semibold text-lg mb-4 text-primary border-b border-[#eadfcf] pb-2">
                      Special Requests:
                    </h4>
                    <div className="bg-[#f7f4ef] p-4 rounded-lg border border-[#eadfcf]">
                      <p className="text-primary/80 whitespace-pre-wrap">
                        {booking.specialRequests}
                      </p>
                    </div>
                  </div>
                )}
              </>
            )}
          </div>

          {/* Total */}
          <div className="bg-gradient-to-r from-accent/10 to-accent/5 border-2 border-accent/20 rounded-lg p-6 mt-8">
            <div className="space-y-3">
              <div className="flex justify-between items-center">
                <span className="text-primary/70 text-base">Subtotal:</span>
                <span className="font-semibold text-lg text-primary">
                  ${booking.totalPrice || booking.price}
                </span>
              </div>
              <div className="flex justify-between items-center">
                <span className="text-primary/70 text-base">Tax (10%):</span>
                <span className="font-semibold text-lg text-primary">
                  ${((booking.totalPrice || booking.price) * 0.1).toFixed(2)}
                </span>
              </div>
              <div className="border-t-2 border-accent/30 pt-3 mt-3">
                <div className="flex justify-between items-center">
                  <span className="text-2xl font-primary text-primary">
                    Total:
                  </span>
                  <span className="text-3xl font-primary text-accent font-bold">
                    ${((booking.totalPrice || booking.price) * 1.1).toFixed(2)}
                  </span>
                </div>
              </div>
            </div>
          </div>

          {/* Footer */}
          <div className="mt-8 pt-6 border-t-2 border-[#eadfcf] text-center">
            <p className="text-lg font-semibold text-primary mb-4">
              Thank you for your booking!
            </p>
            <div className="bg-[#f7f4ef] p-4 rounded-lg border border-[#eadfcf]">
              <p className="text-sm text-primary/70 font-medium mb-1">
                12 Tran Hung Dao, Hoan Kiem, Ha Noi
              </p>
              <p className="text-sm text-primary/60">
                Email: booking@adinahotel.com | Phone: +84 24 1234 5678
              </p>
            </div>
          </div>
        </div>

        {/* Close Button at Bottom */}
        {onClose && (
          <div className="p-4 border-t border-[#eadfcf] flex-shrink-0 bg-white">
            <button
              onClick={onClose}
              className="w-full btn btn-primary uppercase tracking-[2px]"
            >
              Close Invoice
            </button>
          </div>
        )}
      </div>
    </div>
  );
};

export default Invoice;


=================================================================
FILE PATH: src\components\KidsDropdown.jsx
=================================================================
import { useRoomContext } from '../context/RoomContext';
import { BsChevronDown } from 'react-icons/bs';
import { kidsList } from '../constants/data';
import { Menu } from '@headlessui/react';


const KidsDropdown = () => {

  const { kids, setKids } = useRoomContext();


  return (
    <Menu as='div' className='w-full h-full bg-white relative'>


      <Menu.Button className='w-full h-full flex items-center justify-between px-8 hover:bg-accent/5 transition'>
        {kids === '0 Kid' ? 'No Kid' : kids}
        <BsChevronDown className='text-base text-accent-hover' />
      </Menu.Button>


      <Menu.Items as='ul' className='bg-white absolute w-full flex flex-col z-50 mt-1 shadow-lg border border-[#eadfcf] max-h-60 overflow-y-auto'>
        {
          kidsList.map(({ name }, idx) =>
            <Menu.Item
              as='li'
              key={idx}
              onClick={() => setKids(name)}
              className='border-b last-of-type:border-b-0 h-12 hover:bg-accent hover:text-white w-full flex items-center justify-center cursor-pointer transition px-4'
            >
              {name === '0 Kid' ? 'No Kid' : name}
            </Menu.Item>
          )
        }
      </Menu.Items>


    </Menu>
  );
};

export default KidsDropdown;


=================================================================
FILE PATH: src\components\LanguageSwitcher.jsx
=================================================================
import { useLanguage } from '../context/LanguageContext';

const LanguageSwitcher = () => {
  const { language, setLanguage, t } = useLanguage();
  const options = [
    { code: 'en', label: t('languageSwitcher.english') },
    { code: 'vi', label: t('languageSwitcher.vietnamese') },
  ];

  return (
    <div className='flex items-center border border-current/20 rounded-full overflow-hidden text-xs uppercase tracking-[2px]'>
      {options.map((option) => (
        <button
          key={option.code}
          onClick={() => setLanguage(option.code)}
          className={`px-2 py-1 transition ${
            language === option.code ? 'bg-accent text-white' : 'bg-transparent'
          }`}
        >
          {option.label}
        </button>
      ))}
    </div>
  );
};

export default LanguageSwitcher;



=================================================================
FILE PATH: src\components\NotificationContainer.jsx
=================================================================
import { useState, useEffect } from 'react';
import { FaCheckCircle, FaExclamationCircle, FaInfoCircle, FaTimesCircle, FaTimes } from 'react-icons/fa';
import { subscribeToNotifications, removeNotification } from '../utils/notifications';

const NotificationContainer = () => {
  const [notifications, setNotifications] = useState([]);

  useEffect(() => {
    const unsubscribe = subscribeToNotifications(setNotifications);
    return unsubscribe;
  }, []);

  const getIcon = (type) => {
    switch (type) {
      case 'success':
        return <FaCheckCircle className="text-green-500" />;
      case 'error':
        return <FaTimesCircle className="text-red-500" />;
      case 'warning':
        return <FaExclamationCircle className="text-yellow-500" />;
      case 'info':
      default:
        return <FaInfoCircle className="text-blue-500" />;
    }
  };

  const getStyles = (type) => {
    switch (type) {
      case 'success':
        return 'bg-green-50 border-green-200 text-green-800';
      case 'error':
        return 'bg-red-50 border-red-200 text-red-800';
      case 'warning':
        return 'bg-yellow-50 border-yellow-200 text-yellow-800';
      case 'info':
      default:
        return 'bg-blue-50 border-blue-200 text-blue-800';
    }
  };

  return (
    <div className="fixed top-4 right-4 z-[9999] space-y-2 max-w-md">
      {notifications.map((notification) => (
        <div
          key={notification.id}
          className={`flex items-center gap-3 p-4 border rounded-lg shadow-lg animate-in fade-in slide-in-from-top-2 ${getStyles(notification.type)}`}
        >
          <div className="flex-shrink-0 text-xl">
            {getIcon(notification.type)}
          </div>
          <div className="flex-1">
            <p className="font-semibold text-sm">{notification.message}</p>
          </div>
          <button
            onClick={() => removeNotification(notification.id)}
            className="flex-shrink-0 text-lg hover:opacity-70 transition-opacity"
          >
            <FaTimes />
          </button>
        </div>
      ))}
    </div>
  );
};

export default NotificationContainer;


=================================================================
FILE PATH: src\components\PageNotFound.jsx
=================================================================
import React from 'react'

const PageNotFound = () => {
  return (
    <div>404 Page Not Found</div>
  )
}

export default PageNotFound

=================================================================
FILE PATH: src\components\Pagination.jsx
=================================================================
import { FaChevronLeft, FaChevronRight } from "react-icons/fa";

const Pagination = ({
  currentPage,
  totalPages,
  onPageChange,
  itemsPerPage,
  totalItems,
}) => {
  if (totalPages <= 1) return null;

  // Generate page numbers to display
  const getPageNumbers = () => {
    const pages = [];
    const maxPagesToShow = 7;
    const halfRange = Math.floor(maxPagesToShow / 2);

    let startPage = Math.max(1, currentPage - halfRange);
    let endPage = Math.min(totalPages, startPage + maxPagesToShow - 1);

    if (endPage - startPage < maxPagesToShow - 1) {
      startPage = Math.max(1, endPage - maxPagesToShow + 1);
    }

    if (startPage > 1) {
      pages.push(1);
      if (startPage > 2) {
        pages.push("...");
      }
    }

    for (let i = startPage; i <= endPage; i++) {
      pages.push(i);
    }

    if (endPage < totalPages) {
      if (endPage < totalPages - 1) {
        pages.push("...");
      }
      pages.push(totalPages);
    }

    return pages;
  };

  const pageNumbers = getPageNumbers();
  const startItem = (currentPage - 1) * itemsPerPage + 1;
  const endItem = Math.min(currentPage * itemsPerPage, totalItems);

  return (
    <div className="py-12 px-6 lg:px-0">
      <div className="flex flex-col items-center gap-8">
        {/* Info */}
        <div className="text-center">
          <p className="text-sm text-primary/70">
            Showing{" "}
            <span className="font-semibold text-primary">{startItem}</span> to{" "}
            <span className="font-semibold text-primary">{endItem}</span> of{" "}
            <span className="font-semibold text-primary">{totalItems}</span>{" "}
            rooms
          </p>
        </div>

        {/* Pagination Controls */}
        <div className="flex items-center justify-center gap-2 flex-wrap">
          {/* Previous Button */}
          <button
            onClick={() => onPageChange(Math.max(1, currentPage - 1))}
            disabled={currentPage === 1}
            className="p-2.5 rounded-full border border-[#eadfcf] text-primary transition-all duration-300 disabled:opacity-40 disabled:cursor-not-allowed hover:bg-accent hover:text-white hover:border-accent disabled:hover:bg-white disabled:hover:border-[#eadfcf] disabled:hover:text-primary"
            aria-label="Previous page"
          >
            <FaChevronLeft size={16} />
          </button>

          {/* Page Numbers */}
          <div className="flex items-center gap-1 flex-wrap justify-center">
            {pageNumbers.map((page, index) =>
              page === "..." ? (
                <span
                  key={`ellipsis-${index}`}
                  className="px-2 text-primary/50 font-tertiary"
                >
                  ...
                </span>
              ) : (
                <button
                  key={page}
                  onClick={() => onPageChange(page)}
                  className={`min-w-[40px] h-[40px] rounded-full font-tertiary font-semibold text-sm transition-all duration-300 ${
                    currentPage === page
                      ? "bg-accent text-white border border-accent shadow-lg scale-105"
                      : "border border-[#eadfcf] text-primary hover:bg-accent/10 hover:border-accent"
                  }`}
                  aria-label={`Go to page ${page}`}
                  aria-current={currentPage === page ? "page" : undefined}
                >
                  {page}
                </button>
              )
            )}
          </div>

          {/* Next Button */}
          <button
            onClick={() => onPageChange(Math.min(totalPages, currentPage + 1))}
            disabled={currentPage === totalPages}
            className="p-2.5 rounded-full border border-[#eadfcf] text-primary transition-all duration-300 disabled:opacity-40 disabled:cursor-not-allowed hover:bg-accent hover:text-white hover:border-accent disabled:hover:bg-white disabled:hover:border-[#eadfcf] disabled:hover:text-primary"
            aria-label="Next page"
          >
            <FaChevronRight size={16} />
          </button>
        </div>

        {/* Page Info */}
        <div className="text-center text-xs text-primary/60 uppercase tracking-[2px]">
          Page <span className="font-semibold">{currentPage}</span> of{" "}
          <span className="font-semibold">{totalPages}</span>
        </div>
      </div>
    </div>
  );
};

export default Pagination;


=================================================================
FILE PATH: src\components\ProtectedRoute.jsx
=================================================================
import { Navigate, useLocation } from 'react-router-dom';
import { useAuth } from '../context/AuthContext';
import { FaSpinner } from 'react-icons/fa';

const ProtectedRoute = ({ children, requireAdmin = false, disallowAdmin = false, redirectTo }) => {
  const { isAuthenticated, isAdmin, loading, session } = useAuth();
  const location = useLocation();
  const fallbackLogin = redirectTo || (requireAdmin ? '/admin/login' : '/login');

  if (loading) {
    return (
      <div className="min-h-screen flex items-center justify-center bg-gray-50">
        <div className="text-center">
          <FaSpinner className="animate-spin text-4xl text-accent mx-auto mb-4" />
          <p className="text-gray-600">Checking authentication...</p>
        </div>
      </div>
    );
  }

  // Check if user has valid session
  if (!isAuthenticated() || !session) {
    // Redirect to login page with return url
    return <Navigate to={fallbackLogin} state={{ from: location }} replace />;
  }

  if (disallowAdmin && isAdmin()) {
    return <Navigate to="/admin" replace />;
  }

  if (requireAdmin && !isAdmin()) {
    // User is logged in but not admin
    return (
      <div className="min-h-screen flex items-center justify-center bg-gray-50">
        <div className="text-center max-w-md p-8">
          <h1 className="h2 text-primary mb-4">Access Denied</h1>
          <p className="text-gray-600 mb-6">
            You need administrator privileges to access this page.
          </p>
          <a href="/" className="btn btn-primary btn-sm">
            Go to Home
          </a>
        </div>
      </div>
    );
  }

  return children;
};

export default ProtectedRoute;



=================================================================
FILE PATH: src\components\QRPayment.jsx
=================================================================
import { useState, useEffect } from 'react';
import { QRCodeSVG } from 'qrcode.react';
import { FaQrcode, FaClock, FaCheckCircle, FaTimes } from 'react-icons/fa';

const QRPayment = ({ 
  bookingData, 
  onPaymentSuccess, 
  onClose,
  type = 'room' // 'room', 'restaurant', 'spa'
}) => {
  const [timeLeft, setTimeLeft] = useState(15 * 60); // 15 minutes in seconds
  const [isPaid, setIsPaid] = useState(false);
  const [paymentCode] = useState(() => {
    // Generate a unique payment code
    return `PAY-${Date.now()}-${Math.random().toString(36).substring(2, 8).toUpperCase()}`;
  });

  useEffect(() => {
    if (isPaid || timeLeft <= 0) return;

    const timer = setInterval(() => {
      setTimeLeft((prev) => {
        if (prev <= 1) {
          clearInterval(timer);
          return 0;
        }
        return prev - 1;
      });
    }, 1000);

    return () => clearInterval(timer);
  }, [isPaid, timeLeft]);

  const formatTime = (seconds) => {
    const mins = Math.floor(seconds / 60);
    const secs = seconds % 60;
    return `${mins.toString().padStart(2, '0')}:${secs.toString().padStart(2, '0')}`;
  };

  const handleSimulatePayment = () => {
    setIsPaid(true);
    setTimeout(() => {
      onPaymentSuccess({
        ...bookingData,
        paymentCode,
        paidAt: new Date().toISOString(),
        paymentMethod: 'QR Code',
      });
    }, 1500);
  };

  const qrData = JSON.stringify({
    paymentCode,
    amount: bookingData.totalPrice || bookingData.price,
    type,
    bookingId: bookingData.id || bookingData.confirmationCode,
    timestamp: new Date().toISOString(),
  });

  if (isPaid) {
    return (
      <div className='fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4'>
        <div className='bg-white rounded-lg shadow-xl max-w-md w-full p-8 text-center'>
          <div className='mb-6'>
            <FaCheckCircle className='text-6xl text-green-500 mx-auto mb-4' />
            <h2 className='text-2xl font-primary mb-2'>Payment Successful!</h2>
            <p className='text-primary/70'>Your booking has been confirmed.</p>
          </div>
          <button
            onClick={onClose}
            className='btn btn-primary w-full'
          >
            Close
          </button>
        </div>
      </div>
    );
  }

  if (timeLeft <= 0) {
    return (
      <div className='fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4'>
        <div className='bg-white rounded-lg shadow-xl max-w-md w-full p-8 text-center'>
          <div className='mb-6'>
            <FaTimes className='text-6xl text-red-500 mx-auto mb-4' />
            <h2 className='text-2xl font-primary mb-2'>Payment Expired</h2>
            <p className='text-primary/70'>The payment code has expired. Please try again.</p>
          </div>
          <button
            onClick={onClose}
            className='btn btn-primary w-full'
          >
            Close
          </button>
        </div>
      </div>
    );
  }

  return (
    <div className='fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4'>
      <div className='bg-white rounded-lg shadow-xl max-w-md w-full p-8'>
        <div className='flex items-center justify-between mb-6'>
          <h2 className='text-2xl font-primary'>Payment via QR Code</h2>
          <button
            onClick={onClose}
            className='text-primary/60 hover:text-primary transition'
          >
            <FaTimes className='text-xl' />
          </button>
        </div>

        <div className='text-center mb-6'>
          <div className='bg-white p-6 rounded-lg border-2 border-dashed border-accent/30 inline-block mb-4'>
            <QRCodeSVG
              value={qrData}
              size={200}
              level='H'
              includeMargin={true}
            />
          </div>
          <p className='text-sm text-primary/60 mb-2'>Scan this QR code to pay</p>
          <div className='flex items-center justify-center gap-2 text-accent font-semibold mb-4'>
            <FaClock />
            <span>Time remaining: {formatTime(timeLeft)}</span>
          </div>
        </div>

        <div className='bg-accent/10 p-4 rounded-lg mb-6'>
          <div className='flex justify-between items-center mb-2'>
            <span className='text-primary/70'>Payment Code:</span>
            <span className='font-mono font-semibold'>{paymentCode}</span>
          </div>
          <div className='flex justify-between items-center mb-2'>
            <span className='text-primary/70'>Amount:</span>
            <span className='font-primary text-xl text-accent'>
              ${bookingData.totalPrice || bookingData.price}
            </span>
          </div>
          {bookingData.confirmationCode && (
            <div className='flex justify-between items-center'>
              <span className='text-primary/70'>Booking Code:</span>
              <span className='font-mono font-semibold'>{bookingData.confirmationCode}</span>
            </div>
          )}
        </div>

        <div className='space-y-3'>
          <button
            onClick={handleSimulatePayment}
            className='btn btn-primary w-full'
          >
            Simulate Payment (Demo)
          </button>
          <button
            onClick={onClose}
            className='btn btn-outline w-full'
          >
            Cancel
          </button>
        </div>

        <p className='text-xs text-primary/50 text-center mt-4'>
          This is a demo payment. In production, users would scan the QR code with their payment app.
        </p>
      </div>
    </div>
  );
};

export default QRPayment;


=================================================================
FILE PATH: src\components\QRPaymentModal.jsx
=================================================================
import { useState } from "react";
import { FaTimes, FaCheck, FaCopy } from "react-icons/fa";

const QRPaymentModal = ({ booking, onConfirmPayment, onClose }) => {
  const [paymentConfirmed, setPaymentConfirmed] = useState(false);
  const [copied, setCopied] = useState(false);

  const handleCopyCode = () => {
    navigator.clipboard.writeText(booking.confirmationCode);
    setCopied(true);
    setTimeout(() => setCopied(false), 2000);
  };

  if (!booking) return null;

  return (
    <div className="fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4">
      <div className="bg-white rounded-2xl shadow-2xl max-w-md w-full p-6 space-y-6">
        {!paymentConfirmed ? (
          <>
            {/* Header */}
            <div className="flex items-center justify-between">
              <h3 className="text-2xl font-primary text-primary">QR Payment</h3>
              <button
                onClick={onClose}
                className="text-primary/60 hover:text-primary p-1 hover:bg-gray-100 rounded-full transition"
              >
                <FaTimes size={20} />
              </button>
            </div>

            {/* Booking Summary */}
            <div className="bg-gradient-to-r from-blue-50 to-blue-100 p-4 rounded-lg space-y-2 text-sm">
              <p className="text-primary/70">
                <span className="font-semibold">Room:</span> {booking.roomName}
              </p>
              <p className="text-primary/70">
                <span className="font-semibold">Check-in:</span>{" "}
                {booking.checkIn}
              </p>
              <p className="text-primary/70">
                <span className="font-semibold">Check-out:</span>{" "}
                {booking.checkOut}
              </p>
              <p className="text-primary/70">
                <span className="font-semibold">Guests:</span> {booking.adults}{" "}
                adult(s){booking.kids ? `, ${booking.kids} kid(s)` : ""}
              </p>
              <div className="pt-2 border-t border-blue-200 mt-2 flex justify-between">
                <span className="font-semibold">Total Amount:</span>
                <span className="text-lg font-bold text-blue-600">
                  ${booking.totalPrice}
                </span>
              </div>
            </div>

            {/* QR Code Display */}
            <div className="space-y-4">
              <div className="bg-gray-100 p-6 rounded-lg text-center space-y-3">
                <div className="text-sm text-primary/70 mb-4">
                  Scan this QR code to complete payment:
                </div>
                {/* Placeholder for QR Code - in production, use a QR code library like qrcode.react */}
                <div className="w-48 h-48 mx-auto bg-white border-4 border-gray-300 rounded-lg flex items-center justify-center">
                  <div className="text-center">
                    <div className="text-5xl mb-2">ðŸ“±</div>
                    <p className="text-xs text-gray-500">QR Code</p>
                    <p className="text-xs text-gray-400 mt-1">
                      Amount: ${booking.totalPrice}
                    </p>
                  </div>
                </div>
              </div>

              {/* Confirmation Code */}
              <div className="bg-gray-50 p-4 rounded-lg">
                <p className="text-xs text-primary/60 mb-2 uppercase tracking-wide">
                  Confirmation Code
                </p>
                <div className="flex items-center gap-2">
                  <input
                    type="text"
                    value={booking.confirmationCode}
                    readOnly
                    className="flex-1 px-3 py-2 bg-white border border-gray-200 rounded font-mono text-sm focus:outline-none"
                  />
                  <button
                    onClick={handleCopyCode}
                    className="px-3 py-2 bg-blue-500 text-white rounded hover:bg-blue-600 transition flex items-center gap-1"
                    title="Copy code"
                  >
                    <FaCopy size={14} />
                  </button>
                </div>
                {copied && (
                  <p className="text-xs text-green-600 mt-1">Copied!</p>
                )}
              </div>
            </div>

            {/* Instructions */}
            <div className="bg-yellow-50 border border-yellow-200 p-4 rounded-lg text-sm text-primary/70 space-y-2">
              <p className="font-semibold text-yellow-800">
                Payment Instructions:
              </p>
              <ol className="list-decimal list-inside space-y-1 text-xs">
                <li>Scan the QR code with your phone</li>
                <li>Complete the payment (${booking.totalPrice})</li>
                <li>Payment will be verified automatically</li>
                <li>
                  Booking confirmation will be sent to {booking.userEmail}
                </li>
              </ol>
            </div>

            {/* Payment Confirmed Button */}
            <button
              onClick={() => setPaymentConfirmed(true)}
              className="w-full py-3 bg-green-600 text-white rounded-lg hover:bg-green-700 transition font-semibold"
            >
              I have paid via QR code
            </button>

            <button
              onClick={onClose}
              className="w-full py-2 bg-gray-200 text-gray-700 rounded-lg hover:bg-gray-300 transition text-sm"
            >
              Cancel
            </button>
          </>
        ) : (
          <>
            {/* Payment Confirmation */}
            <div className="space-y-6">
              <div className="flex flex-col items-center gap-4">
                <div className="w-16 h-16 bg-green-100 rounded-full flex items-center justify-center">
                  <FaCheck className="text-2xl text-green-600" />
                </div>
                <h3 className="text-2xl font-primary text-green-600">
                  Payment Confirmed!
                </h3>
              </div>

              <div className="bg-green-50 p-4 rounded-lg space-y-2 text-sm">
                <p className="text-primary/70">
                  <span className="font-semibold">Confirmation Code:</span>{" "}
                  {booking.confirmationCode}
                </p>
                <p className="text-primary/70">
                  <span className="font-semibold">Amount Paid:</span> $
                  {booking.totalPrice}
                </p>
                <p className="text-primary/70">
                  <span className="font-semibold">Status:</span>{" "}
                  <span className="text-green-600 font-semibold">
                    Confirmed
                  </span>
                </p>
              </div>

              <div className="bg-blue-50 border border-blue-200 p-4 rounded-lg text-sm text-primary/70 space-y-2">
                <p className="font-semibold">What's next?</p>
                <ul className="list-disc list-inside space-y-1 text-xs">
                  <li>Confirmation email sent to {booking.userEmail}</li>
                  <li>Booking will appear in your account</li>
                  <li>Check-in details will be sent 24 hours before arrival</li>
                </ul>
              </div>

              <button
                onClick={() => onConfirmPayment(booking)}
                className="w-full py-3 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition font-semibold"
              >
                Complete Booking
              </button>
            </div>
          </>
        )}
      </div>
    </div>
  );
};

export default QRPaymentModal;


=================================================================
FILE PATH: src\components\Room.jsx
=================================================================
import { BsArrowsFullscreen, BsPeople } from "react-icons/bs";
import { FaStar } from "react-icons/fa";
import { Link } from "react-router-dom";

const PLACEHOLDER_IMG = "data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='400' height='300'%3E%3Crect fill='%23ddd' width='400' height='300'/%3E%3Ctext x='50%' y='50%' font-size='18' fill='%23999' text-anchor='middle' dy='.3em'%3ELoading image...%3C/text%3E%3C/svg%3E";

const Room = ({ room }) => {
  if (!room) return null;

  const {
    id,
    name,
    image,
    size,
    maxPerson,
    description,
    price,
    type,
    reviews,
  } = room;

  // Use Supabase image URL if available
  const displayImage = image || PLACEHOLDER_IMG;

  // Calculate average rating from reviews
  const averageRating = reviews && reviews.length > 0
    ? Math.round(reviews.reduce((sum, r) => sum + r.rating, 0) / reviews.length)
    : 4;

  return (
    <div className="bg-white shadow-2xl min-h-[500px] group relative">
      <div className="overflow-hidden">
        <img
          src={displayImage}
          alt={name || "room"}
          className="group-hover:scale-110 transition-all duration-300 w-full object-cover h-64"
          onError={(e) => {
            console.warn('Image failed to load from Supabase:', displayImage);
            e.target.src = PLACEHOLDER_IMG;
          }}
        />
        {type && (
          <div className="absolute top-4 right-4 bg-teal-600 text-white px-3 py-1 rounded-full text-xs font-semibold uppercase tracking-[1px]">
            {type}
          </div>
        )}
      </div>

      <div className="bg-white shadow-lg max-w-[300px] mx-auto h-[60px] -translate-y-1/2 flex justify-center items-center uppercase font-tertiary tracking-[1px] font-semibold text-base">
        <div className="flex justify-between w-[80%]">
          <div className="flex items-center gap-x-2">
            <div className="text-accent">
              <BsArrowsFullscreen className="text-[15px]" />
            </div>
            <div className="flex gap-x-1">
              <div>Size</div>
              <div>{size || 0}mÂ²</div>
            </div>
          </div>

          <div className="flex items-center gap-x-2">
            <div className="text-accent">
              <BsPeople className="text-[18px]" />
            </div>
            <div className="flex gap-x-1">
              <div>Max people</div>
              <div>{maxPerson || 2}</div>
            </div>
          </div>
        </div>
      </div>

      <div className="text-center px-6">
        <Link to={`/room/${id}`}>
          <h3 className="h3">{name || 'Standard Room'}</h3>
        </Link>

        {type && (
          <p className="text-xs uppercase tracking-[3px] text-primary/60 mb-2">
            {type} Room
          </p>
        )}
        <p className="max-w-[300px] mx-auto mb-3 lg:mb-6">
          {description ? description.slice(0, 56) : 'Comfortable room with modern amenities'}..
        </p>
        <div className="flex justify-center items-center gap-2 mb-4 text-sm text-primary/80">
          <div className="flex items-center gap-1 text-accent">
            {[...Array(5)].map((_, index) => (
              <FaStar
                key={index}
                className={`${
                  index < averageRating ? "text-accent" : "text-accent/30"
                }`}
              />
            ))}
          </div>
          <span>{averageRating}.0 â€¢ {reviews?.length || 0} reviews</span>
        </div>
      </div>

      <Link
        to={`/room/${id}`}
        className="btn btn-secondary btn-sm max-w-[240px] mx-auto duration-300"
      >
        Book now from ${(price || 0).toFixed(2)}
      </Link>
    </div>
  );
};

export default Room;

=================================================================
FILE PATH: src\components\Rooms.jsx
=================================================================
import { useRoomContext } from "../context/RoomContext";
import { SpinnerDotted } from "spinners-react";
import { Room, Pagination } from ".";
import { useState, useMemo } from "react";

const Rooms = () => {
  const { rooms, loading } = useRoomContext();
  const [currentPage, setCurrentPage] = useState(1);
  const itemsPerPage = 12;

  const { paginatedRooms, totalPages } = useMemo(() => {
    const validRooms = Array.isArray(rooms) ? rooms : [];
    const total = Math.ceil(validRooms.length / itemsPerPage);
    const start = (currentPage - 1) * itemsPerPage;
    const end = start + itemsPerPage;
    return {
      paginatedRooms: validRooms.slice(start, end),
      totalPages: total || 1,
    };
  }, [rooms, currentPage]);

  const handlePageChange = (page) => {
    setCurrentPage(page);
    const roomsSection = document.getElementById("rooms-section");
    if (roomsSection) {
      roomsSection.scrollIntoView({ behavior: "smooth", block: "start" });
    }
  };

  if (loading) {
    return (
      <section id="rooms-section" className="py-24">
        <div className="h-screen w-full fixed bottom-0 top-0 bg-black/80 z-50 grid place-items-center">
          <SpinnerDotted />
        </div>
      </section>
    );
  }

  return (
    <section id="rooms-section" className="py-24">
      <div className="container mx-auto lg:px-0">
        <div className="text-center">
          <p className="font-tertiary uppercase text-[15px] tracking-[6px]">
            Hotel & Spa Adina
          </p>
          <h2 className="font-primary text-[45px] mb-6">Room & Suites</h2>
        </div>

        {!paginatedRooms || paginatedRooms.length === 0 ? (
          <div className="text-center py-16 text-primary/70">
            No rooms match these preferences yet. Try adjusting your filters and
            search again.
          </div>
        ) : (
          <>
            <div className="grid grid-cols-1 max-w-sm mx-auto gap-[30px] lg:grid-cols-3 lg:max-w-none lg:mx-0">
              {paginatedRooms.map((room) => (
                <Room key={room.id} room={room} />
              ))}
            </div>

            {totalPages > 1 && (
              <Pagination
                currentPage={currentPage}
                totalPages={totalPages}
                onPageChange={handlePageChange}
                itemsPerPage={itemsPerPage}
                totalItems={Array.isArray(rooms) ? rooms.length : 0}
              />
            )}
          </>
        )}
      </div>
    </section>
  );
};

export default Rooms;

=================================================================
FILE PATH: src\components\RoomTypeSelector.jsx
=================================================================
import { useRoomContext } from "../context/RoomContext";
import { useMemo } from "react";

const RoomTypeSelector = () => {
  const { allRooms, selectedCategory, updateCategory } = useRoomContext();

  // Derive room types from actual rooms in Supabase
  const roomTypes = useMemo(() => {
    const typeMap = new Map();
    allRooms.forEach((room) => {
      if (room.type && !typeMap.has(room.type)) {
        typeMap.set(room.type, {
          id: room.category,
          code: room.type,
          name: room.type === 'STD' ? 'Standard' : 
                room.type === 'DLX' ? 'Deluxe' :
                room.type === 'SUI' ? 'Suite' :
                room.type === 'PEN' ? 'Penthouse' :
                room.type === 'CMB' ? 'Combo Package' :
                room.type,
        });
      }
    });
    return Array.from(typeMap.values()).sort((a, b) => a.code.localeCompare(b.code));
  }, [allRooms]);

  return (
    <div className="flex flex-col justify-center h-full px-4 lg:px-3 bg-white">
      <label className="text-xs uppercase tracking-[1px] text-primary/60 mb-2 lg:mb-1">
        Room Type
      </label>
      <select
        value={selectedCategory || ""}
        onChange={(e) => updateCategory(e.target.value || null)}
        className="w-full border-0 outline-none bg-white text-sm text-primary font-medium cursor-pointer"
      >
        <option value="">All Rooms</option>
        {roomTypes.map((roomType) => (
          <option key={roomType.id} value={roomType.id}>
            {roomType.name}
          </option>
        ))}
      </select>
    </div>
  );
};

export default RoomTypeSelector;


=================================================================
FILE PATH: src\components\Toast.jsx
=================================================================
import { useEffect } from 'react';
import { FaCheckCircle, FaTimesCircle, FaInfoCircle, FaTimes } from 'react-icons/fa';

const Toast = ({ message, type = 'success', onClose, duration = 3000 }) => {
  useEffect(() => {
    if (duration > 0) {
      const timer = setTimeout(() => {
        onClose();
      }, duration);
      return () => clearTimeout(timer);
    }
  }, [duration, onClose]);

  const icons = {
    success: FaCheckCircle,
    error: FaTimesCircle,
    info: FaInfoCircle,
  };

  const colors = {
    success: 'bg-green-500',
    error: 'bg-red-500',
    info: 'bg-blue-500',
  };

  const Icon = icons[type] || FaInfoCircle;

  return (
    <div className={`fixed top-20 right-4 z-50 animate-slide-in-right ${colors[type]} text-white px-6 py-4 rounded-lg shadow-lg flex items-center gap-3 min-w-[300px] max-w-md`}>
      <Icon className="text-xl flex-shrink-0" />
      <p className="flex-1 font-medium">{message}</p>
      <button
        onClick={onClose}
        className="flex-shrink-0 hover:bg-white/20 rounded p-1 transition-colors"
      >
        <FaTimes />
      </button>
    </div>
  );
};

export default Toast;



=================================================================
FILE PATH: src\constants\data.js
=================================================================
import { FaCheck } from "react-icons/fa";
import images from "../assets";


export const adultsList = [
    { name: '1 Adult' },
    { name: '2 Adults' },
    { name: '3 Adults' },
    { name: '4 Adults' },
]


export const kidsList = [
    { name: '0 Kid' },
    { name: '1 Kid' },
    { name: '2 Kids' },
    { name: '3 Kids' },
    { name: '4 Kids' },
]


export const sliderData = [
    {
        id: 1,
        title: 'Your Luxury Hotel For Vacation',
        bg: images.Slider1,
        btnNext: 'See our rooms',
    },
    {
        id: 2,
        title: 'Feel Relax & Enjoy Your Luxuriousness',
        bg: images.Slider2,
        btnNext: 'See our rooms',
    },
    {
        id: 3,
        title: 'Your Luxury Hotel For Vacation',
        bg: images.Slider3,
        btnNext: 'See our rooms',
    },
]


export const hotelRules = [
    {
        rules: 'Check-in : 3:00 PM - 9:00 PM',
    },
    {
        rules: 'Check-out : 10:30 AM',
    },
    {
        rules: 'No Smoking',
    },
    {
        rules: 'No Pet',
    },
]

=================================================================
FILE PATH: src\constants\translations.js
=================================================================
const translations = {
  en: {
    header: {
      home: 'Home',
      rooms: 'Rooms',
      restaurant: 'Restaurant',
      spa: 'Spa',
      contact: 'Contact',
      dashboard: 'Dashboard',
      admin: 'Admin',
      signIn: 'Sign In',
      signOut: 'Sign Out',
      signUp: 'Sign Up',
      languageLabel: 'Language',
    },
    common: {
      bookRoom: 'Book a room',
      backHome: 'Back to homepage',
      manageBooking: 'Manage booking',
      confirmed: 'confirmed',
      bookingType: {
        room: 'Room',
        restaurant: 'Restaurant',
        spa: 'Spa',
      }
    },
    languageSwitcher: {
      english: 'EN',
      vietnamese: 'VI',
    },
    userDashboard: {
      tabs: {
        overview: 'Overview',
        bookings: 'Bookings',
        profile: 'Profile & Preferences',
      },
      filters: {
        upcoming: 'Upcoming',
        past: 'Past',
        cancelled: 'Cancelled',
      },
      welcomeTitle: 'Your private Maison awaits,',
      welcomeSubtitle: 'Track upcoming retreats, earn loyalty nights, and curate personal details for a seamless arrival. Our concierge is on standby 24/7.',
      loyaltyTier: 'Loyalty tier',
      loyaltyDetail: (nights) => `Next upgrade in ${nights} nights`,
      stats: {
        upcoming: 'Upcoming stays',
        completed: 'Completed stays',
        loyalty: 'Loyalty nights',
      },
      nextReservation: 'Next reservation',
      bookAnotherStay: 'Book another stay',
      noUpcoming: 'No upcoming stay yet. Start planning your next visit!',
      conciergePerks: 'Concierge perks',
      perks: {
        lateCheckout: {
          title: 'Late checkout',
          desc: 'Complimentary 1-hour grace period on availability',
        },
        spaCredit: {
          title: 'Spa credit',
          desc: '$25 spa credit for every 5 nights stayed',
        },
        conciergeChat: {
          title: 'Concierge chat',
          desc: 'Direct WhatsApp line for bespoke planning',
        },
      },
      nextButton: 'Manage booking',
      overviewGreeting: 'Welcome back',
    },
    adminSidebar: {
      panel: 'Admin Panel',
      home: 'Home',
      signOut: 'Sign Out',
    },
  },
  vi: {
    header: {
      home: 'Trang chá»§',
      rooms: 'PhÃ²ng',
      restaurant: 'NhÃ  hÃ ng',
      spa: 'Spa',
      contact: 'LiÃªn há»‡',
      dashboard: 'TÃ i khoáº£n',
      admin: 'Quáº£n trá»‹',
      signIn: 'ÄÄƒng nháº­p',
      signOut: 'ÄÄƒng xuáº¥t',
      signUp: 'ÄÄƒng kÃ½',
      languageLabel: 'NgÃ´n ngá»¯',
    },
    common: {
      bookRoom: 'Äáº·t phÃ²ng',
      backHome: 'Vá» trang chá»§',
      manageBooking: 'Quáº£n lÃ½ Ä‘áº·t phÃ²ng',
      confirmed: 'Ä‘Ã£ xÃ¡c nháº­n',
      bookingType: {
        room: 'PhÃ²ng',
        restaurant: 'NhÃ  hÃ ng',
        spa: 'Spa',
      }
    },
    languageSwitcher: {
      english: 'EN',
      vietnamese: 'VI',
    },
    userDashboard: {
      tabs: {
        overview: 'Tá»•ng quan',
        bookings: 'Äáº·t phÃ²ng',
        profile: 'Há»“ sÆ¡ & Tuá»³ chá»‰nh',
      },
      filters: {
        upcoming: 'Sáº¯p tá»›i',
        past: 'HoÃ n thÃ nh',
        cancelled: 'ÄÃ£ huá»·',
      },
      welcomeTitle: 'Biá»‡t thá»± riÃªng cá»§a báº¡n Ä‘Ã£ sáºµn sÃ ng,',
      welcomeSubtitle: 'Theo dÃµi ká»³ nghá»‰, tÃ­ch luá»¹ Ä‘Ãªm lÆ°u trÃº vÃ  cáº­p nháº­t thÃ´ng tin cÃ¡ nhÃ¢n Ä‘á»ƒ chuyáº¿n Ä‘i tháº­t mÆ°á»£t mÃ . Concierge phá»¥c vá»¥ 24/7.',
      loyaltyTier: 'Háº¡ng há»™i viÃªn',
      loyaltyDetail: (nights) => `CÃ²n ${nights} Ä‘Ãªm Ä‘á»ƒ lÃªn háº¡ng`,
      stats: {
        upcoming: 'Chuyáº¿n Ä‘i sáº¯p tá»›i',
        completed: 'Chuyáº¿n Ä‘i Ä‘Ã£ xong',
        loyalty: 'ÄÃªm tÃ­ch luá»¹',
      },
      nextReservation: 'Äáº·t phÃ²ng tiáº¿p theo',
      bookAnotherStay: 'Äáº·t thÃªm ká»³ nghá»‰',
      noUpcoming: 'Báº¡n chÆ°a cÃ³ chuyáº¿n Ä‘i nÃ o, hÃ£y lÃªn káº¿ hoáº¡ch ngay!',
      conciergePerks: 'Äáº·c quyá»n concierge',
      perks: {
        lateCheckout: {
          title: 'Tráº£ phÃ²ng muá»™n',
          desc: 'Miá»…n phÃ­ 1 giá» náº¿u cÃ²n phÃ²ng trá»‘ng',
        },
        spaCredit: {
          title: 'Voucher spa',
          desc: 'Táº·ng $25 cho má»—i 5 Ä‘Ãªm lÆ°u trÃº',
        },
        conciergeChat: {
          title: 'TrÃ² chuyá»‡n concierge',
          desc: 'Nháº¯n WhatsApp Ä‘á»ƒ Ä‘Æ°á»£c thiáº¿t káº¿ tráº£i nghiá»‡m riÃªng',
        },
      },
      nextButton: 'Quáº£n lÃ½ Ä‘áº·t phÃ²ng',
      overviewGreeting: 'ChÃ o má»«ng trá»Ÿ láº¡i',
    },
    adminSidebar: {
      panel: 'Báº£ng Ä‘iá»u khiá»ƒn',
      home: 'Trang chá»§',
      signOut: 'ÄÄƒng xuáº¥t',
    },
  },
};

export default translations;



=================================================================
FILE PATH: src\context\AuthContext.jsx
=================================================================
import { createContext, useContext, useState, useEffect, useCallback } from 'react';
import { supabase } from '../utils/supabaseClient';

const AuthInfo = createContext();

/**
 * Transform Supabase user to application user shape
 */
const enrichUser = (supabaseUser, userMetadata = {}) => {
  if (!supabaseUser) return null;

  return {
    id: supabaseUser.id,
    email: supabaseUser.email,
    name: userMetadata.full_name || supabaseUser.user_metadata?.full_name || '',
    phone: userMetadata.phone || supabaseUser.user_metadata?.phone || '',
    avatar: userMetadata.avatar_url || supabaseUser.user_metadata?.avatar_url || '',
    role: userMetadata.role || supabaseUser.user_metadata?.role || 'user',
    country: userMetadata.country || supabaseUser.user_metadata?.country || '',
    city: userMetadata.city || supabaseUser.user_metadata?.city || '',
    preferences: userMetadata.preferences || supabaseUser.user_metadata?.preferences || [],
    language: userMetadata.language || supabaseUser.user_metadata?.language || 'en',
    newsletter: userMetadata.newsletter !== false,
    bio: userMetadata.bio || supabaseUser.user_metadata?.bio || '',
    emailVerified: supabaseUser.email_confirmed_at !== null,
    createdAt: supabaseUser.created_at,
  };
};

/**
 * Fetch user profile from database
 */
const fetchUserProfile = async (userId) => {
  try {
    const { data, error } = await supabase
      .from('profiles')
      .select('*')
      .eq('id', userId)
      .single();

    if (error) {
      console.warn('Profile not found in DB, using auth metadata:', error);
      return null;
    }
    return data;
  } catch (err) {
    console.error('Error fetching user profile:', err);
    return null;
  }
};

/**
 * Create or update user profile in database
 */
const upsertUserProfile = async (userId, userData) => {
  try {
    const { error } = await supabase
      .from('profiles')
      .upsert(
        {
          id: userId,
          full_name: userData.name,
          phone: userData.phone,
          avatar_url: userData.avatar,
          country: userData.country,
          city: userData.city,
          preferences: userData.preferences || [],
          language: userData.language || 'en',
          newsletter: userData.newsletter !== false,
          bio: userData.bio,
          role: userData.role || 'user',
          updated_at: new Date().toISOString(),
        },
        { onConflict: 'id' }
      );

    if (error) {
      console.error('Error upserting profile:', error);
      return false;
    }
    return true;
  } catch (err) {
    console.error('Error in upsertUserProfile:', err);
    return false;
  }
};

export const AuthContext = ({ children }) => {
  const [user, setUser] = useState(null);
  const [loading, setLoading] = useState(true);
  const [error, setError] = useState(null);
  const [session, setSession] = useState(null);

  /**
   * Initialize auth state on app load
   */
  useEffect(() => {
    const initializeAuth = async () => {
      try {
        setLoading(true);
        setError(null);

        // Check if user has existing session
        const {
          data: { session: currentSession },
          error: sessionError,
        } = await supabase.auth.getSession();

        if (sessionError) {
          console.error('Session error:', sessionError);
          setError(sessionError.message);
          setUser(null);
          setSession(null);
        } else if (currentSession?.user) {
          // User is logged in
          setSession(currentSession);

          // Fetch extended profile from database
          const profile = await fetchUserProfile(currentSession.user.id);
          const enrichedUser = enrichUser(currentSession.user, profile);
          setUser(enrichedUser);
        } else {
          // No active session
          setSession(null);
          setUser(null);
        }
      } catch (err) {
        console.error('Error initializing auth:', err);
        setError(err.message);
      } finally {
        setLoading(false);
      }
    };

    initializeAuth();
  }, []);

  /**
   * Listen for auth state changes
   */
  useEffect(() => {
    const {
      data: { subscription },
    } = supabase.auth.onAuthStateChange(async (event, newSession) => {
      console.log('Auth state changed:', event);
      setSession(newSession);

      if (newSession?.user) {
        const profile = await fetchUserProfile(newSession.user.id);
        const enrichedUser = enrichUser(newSession.user, profile);
        setUser(enrichedUser);
        setError(null);
      } else {
        setUser(null);
      }
    });

    // Cleanup subscription on unmount
    return () => {
      subscription?.unsubscribe();
    };
  }, []);

  /**
   * Email/Password Login
   */
  const login = useCallback(async (email, password) => {
    try {
      setLoading(true);
      setError(null);

      const { data, error: loginError } = await supabase.auth.signInWithPassword({
        email,
        password,
      });

      if (loginError) {
        setError(loginError.message);
        return { success: false, error: loginError.message };
      }

      if (data?.session?.user) {
        const profile = await fetchUserProfile(data.session.user.id);
        const enrichedUser = enrichUser(data.session.user, profile);
        setUser(enrichedUser);
        setSession(data.session);
        return { success: true, user: enrichedUser };
      }

      return { success: false, error: 'Login failed' };
    } catch (err) {
      const errorMsg = err.message || 'An error occurred during login';
      setError(errorMsg);
      return { success: false, error: errorMsg };
    } finally {
      setLoading(false);
    }
  }, []);

  /**
   * Admin Login (same as login, but with role check)
   */
  const adminLogin = useCallback(async (email, password) => {
    try {
      setLoading(true);
      setError(null);

      const { data, error: loginError } = await supabase.auth.signInWithPassword({
        email,
        password,
      });

      if (loginError) {
        setError(loginError.message);
        return { success: false, error: loginError.message };
      }

      if (data?.session?.user) {
        const profile = await fetchUserProfile(data.session.user.id);
        const enrichedUser = enrichUser(data.session.user, profile);

        // Check if user is admin
        if (enrichedUser.role !== 'admin') {
          await supabase.auth.signOut();
          const adminError = 'User does not have admin privileges';
          setError(adminError);
          setUser(null);
          setSession(null);
          return { success: false, error: adminError };
        }

        setUser(enrichedUser);
        setSession(data.session);
        return { success: true, user: enrichedUser };
      }

      return { success: false, error: 'Admin login failed' };
    } catch (err) {
      const errorMsg = err.message || 'An error occurred during admin login';
      setError(errorMsg);
      return { success: false, error: errorMsg };
    } finally {
      setLoading(false);
    }
  }, []);

  /**
   * User Registration
   */
  const register = useCallback(async (email, password, name = '') => {
    try {
      setLoading(true);
      setError(null);

      const { data, error: signUpError } = await supabase.auth.signUp({
        email,
        password,
        options: {
          data: {
            full_name: name,
            role: 'user',
          },
        },
      });

      if (signUpError) {
        setError(signUpError.message);
        return { success: false, error: signUpError.message };
      }

      if (data?.user) {
        // Create profile in database
        const enrichedUser = enrichUser(data.user, { full_name: name, role: 'user' });
        await upsertUserProfile(data.user.id, enrichedUser);

        // If email confirmation is not required, auto-login
        if (data?.session) {
          setSession(data.session);
          setUser(enrichedUser);
          return { success: true, user: enrichedUser };
        }

        // Email confirmation required
        return {
          success: true,
          user: enrichedUser,
          needsEmailConfirmation: true,
        };
      }

      return { success: false, error: 'Registration failed' };
    } catch (err) {
      const errorMsg = err.message || 'An error occurred during registration';
      setError(errorMsg);
      return { success: false, error: errorMsg };
    } finally {
      setLoading(false);
    }
  }, []);

  /**
   * OAuth Login (Google, etc.)
   */
  const loginWithOAuth = useCallback(async (provider) => {
    try {
      setLoading(true);
      setError(null);

      const { data, error: oauthError } = await supabase.auth.signInWithOAuth({
        provider,
        options: {
          redirectTo: `${window.location.origin}/`,
        },
      });

      if (oauthError) {
        setError(oauthError.message);
        return { success: false, error: oauthError.message };
      }

      return { success: true };
    } catch (err) {
      const errorMsg = err.message || `An error occurred during ${provider} login`;
      setError(errorMsg);
      return { success: false, error: errorMsg };
    } finally {
      setLoading(false);
    }
  }, []);

  /**
   * Logout
   */
  const logout = useCallback(async () => {
    try {
      setLoading(true);
      setError(null);

      const { error: logoutError } = await supabase.auth.signOut();

      if (logoutError) {
        setError(logoutError.message);
        return { success: false, error: logoutError.message };
      }

      setUser(null);
      setSession(null);
      return { success: true };
    } catch (err) {
      const errorMsg = err.message || 'An error occurred during logout';
      setError(errorMsg);
      return { success: false, error: errorMsg };
    } finally {
      setLoading(false);
    }
  }, []);

  /**
   * Password Reset Request
   */
  const resetPassword = useCallback(async (email) => {
    try {
      setLoading(true);
      setError(null);

      const { error: resetError } = await supabase.auth.resetPasswordForEmail(email, {
        redirectTo: `${window.location.origin}/reset-password`,
      });

      if (resetError) {
        setError(resetError.message);
        return { success: false, error: resetError.message };
      }

      return { success: true };
    } catch (err) {
      const errorMsg = err.message || 'An error occurred during password reset';
      setError(errorMsg);
      return { success: false, error: errorMsg };
    } finally {
      setLoading(false);
    }
  }, []);

  /**
   * Update Password (after reset or for logged-in user)
   */
  const updatePassword = useCallback(async (newPassword) => {
    try {
      setLoading(true);
      setError(null);

      const { error: updateError } = await supabase.auth.updateUser({
        password: newPassword,
      });

      if (updateError) {
        setError(updateError.message);
        return { success: false, error: updateError.message };
      }

      return { success: true };
    } catch (err) {
      const errorMsg = err.message || 'An error occurred updating password';
      setError(errorMsg);
      return { success: false, error: errorMsg };
    } finally {
      setLoading(false);
    }
  }, []);

  /**
   * Update User Profile
   */
  const updateUserProfile = useCallback(async (updates) => {
    try {
      setLoading(true);
      setError(null);

      if (!user?.id) {
        throw new Error('User not authenticated');
      }

      // Update auth user metadata
      const { error: authError } = await supabase.auth.updateUser({
        data: {
          full_name: updates.name,
          phone: updates.phone,
          avatar_url: updates.avatar,
          country: updates.country,
          city: updates.city,
          bio: updates.bio,
        },
      });

      if (authError) {
        setError(authError.message);
        return { success: false, error: authError.message };
      }

      // Update profile in database
      const success = await upsertUserProfile(user.id, updates);

      if (success) {
        const updatedUser = { ...user, ...updates };
        setUser(updatedUser);
        return { success: true, user: updatedUser };
      }

      return { success: false, error: 'Failed to update profile' };
    } catch (err) {
      const errorMsg = err.message || 'An error occurred updating profile';
      setError(errorMsg);
      return { success: false, error: errorMsg };
    } finally {
      setLoading(false);
    }
  }, [user?.id]);

  /**
   * Helper functions
   */
  const isAuthenticated = useCallback(() => {
    return user !== null && session !== null;
  }, [user, session]);

  const isAdmin = useCallback(() => {
    return user?.role === 'admin';
  }, [user]);

  const clearError = useCallback(() => {
    setError(null);
  }, []);

  const shareWithChildren = {
    // State
    user,
    loading,
    error,
    session,

    // Auth methods
    login,
    adminLogin,
    register,
    loginWithOAuth,
    logout,
    resetPassword,
    updatePassword,
    updateUserProfile,

    // Helper methods
    isAuthenticated,
    isAdmin,
    clearError,
  };

  return (
    <AuthInfo.Provider value={shareWithChildren}>
      {children}
    </AuthInfo.Provider>
  );
};

export const useAuth = () => {
  const context = useContext(AuthInfo);
  if (!context) {
    throw new Error('useAuth must be used within AuthContext provider');
  }
  return context;
};



=================================================================
FILE PATH: src\context\BookingContext.jsx
=================================================================
import { createContext, useContext, useState, useEffect } from 'react';
import { isBookingEmailConfigured, sendBookingConfirmationEmail } from '../utils/emailService';
import {
  createBooking, // for room bookings
  updateBookingStatus, // for room bookings
  createRestaurantBooking,
  updateRestaurantBookingStatus,
  createSpaBooking,
  updateSpaBookingStatus,
} from '../services/bookingService';

const BookingContext = createContext();

const getInitialBookings = (type) => {
  try {
    const key = `hotel_${type}_bookings`;
    return JSON.parse(localStorage.getItem(key)) || [];
  } catch (error) {
    console.error(`Failed to parse stored ${type} bookings`, error);
    return [];
  }
};

const persistBookings = (bookings, type) => {
  const key = `hotel_${type}_bookings`;
  localStorage.setItem(key, JSON.stringify(bookings));
};

const createId = () => {
  if (typeof crypto !== 'undefined' && crypto.randomUUID) {
    return crypto.randomUUID();
  }
  return Date.now().toString();
};

export const BookingProvider = ({ children }) => {
  const [roomBookings, setRoomBookings] = useState(() => getInitialBookings('room'));
  const [restaurantBookings, setRestaurantBookings] = useState(() => getInitialBookings('restaurant'));
  const [spaBookings, setSpaBookings] = useState(() => getInitialBookings('spa'));

  useEffect(() => {
    persistBookings(roomBookings, 'room');
  }, [roomBookings]);

  useEffect(() => {
    persistBookings(restaurantBookings, 'restaurant');
  }, [restaurantBookings]);

  useEffect(() => {
    persistBookings(spaBookings, 'spa');
  }, [spaBookings]);

  const createRoomBookingHandler = (bookingData) => {
    const confirmationCode = `ROOM-${Math.random().toString(36).substring(2, 7).toUpperCase()}`;
    const newBooking = {
      id: createId(),
      confirmationCode,
      bookingType: 'room',
      ...bookingData,
      status: 'pending_payment',
      createdAt: new Date().toISOString(),
    };

    // Prepare data for Supabase (matching schema in 01_create_schema_tables.txt)
    const supabaseData = {
      user_id: bookingData.userId,
      confirmation_code: confirmationCode,
      check_in: bookingData.checkIn,
      check_out: bookingData.checkOut,
      room_id: bookingData.roomId,
      room_name: bookingData.roomName,
      user_name: bookingData.userName,
      user_email: bookingData.userEmail,
      guest_name: bookingData.guestName,
      guest_phone: bookingData.guestPhone,
      note: bookingData.note,
      num_adults: bookingData.numAdults || 1,
      num_children: bookingData.numChildren || 0,
      total_nights: bookingData.totalNights || 1,
      subtotal: bookingData.subtotal || 0,
      discount: bookingData.discount || 0,
      total_amount: bookingData.totalAmount || 0,
      pricing_breakdown: bookingData.pricingBreakdown || [],
      status: 'pending_payment',
    };

    // âœ… SAVE TO SUPABASE
    createBooking(supabaseData).then((dbBooking) => {
      if (dbBooking) {
        newBooking.id = dbBooking.id;
        setRoomBookings(prev => [newBooking, ...prev]);
        console.log('âœ… Room booking synced:', confirmationCode);
      }
    }).catch((err) => {
      console.error('âŒ Failed to save room booking to Supabase:', err);
      // Fallback to localStorage
      setRoomBookings(prev => [newBooking, ...prev]);
    });

    return { success: true, booking: newBooking };
  };

  const createRestaurantBookingHandler = (bookingData) => {
    const confirmationCode = `RES-${Math.random().toString(36).substring(2, 7).toUpperCase()}`;
    const newBooking = {
      id: createId(),
      confirmationCode,
      type: 'restaurant',
      ...bookingData,
      status: 'pending_payment',
      createdAt: new Date().toISOString(),
    };

    // âœ… SAVE TO SUPABASE
    createRestaurantBooking({
      userId: bookingData.userId,
      confirmationCode,
      name: bookingData.name || bookingData.userName,
      email: bookingData.email || bookingData.userEmail,
      phone: bookingData.phone,
      reservationAt: bookingData.date,
      guests: bookingData.guests || 1,
      specialRequests: bookingData.specialRequests || '',
      price: bookingData.price || 0,
      totalPrice: bookingData.totalPrice || 0,
      status: 'pending_payment',
    }).then((dbBooking) => {
      if (dbBooking) {
        newBooking.id = dbBooking.id;
        setRestaurantBookings(prev => [newBooking, ...prev]);
        console.log('âœ… Restaurant booking synced:', confirmationCode);
      }
    }).catch((err) => {
      console.error('âŒ Failed to save to Supabase:', err);
      // Fallback to localStorage
      setRestaurantBookings(prev => [newBooking, ...prev]);
    });

    return { success: true, booking: newBooking };
  };

  const createSpaBookingHandler = (bookingData) => {
    const confirmationCode = `SPA-${Math.random().toString(36).substring(2, 7).toUpperCase()}`;
    const newBooking = {
      id: createId(),
      confirmationCode,
      type: 'spa',
      ...bookingData,
      status: 'pending_payment',
      createdAt: new Date().toISOString(),
    };

    // âœ… SAVE TO SUPABASE
    createSpaBooking({
      userId: bookingData.userId,
      confirmationCode,
      name: bookingData.name || bookingData.userName,
      email: bookingData.email || bookingData.userEmail,
      phone: bookingData.phone,
      appointmentAt: bookingData.date,
      serviceName: bookingData.serviceName || bookingData.service,
      duration: bookingData.duration || '',
      therapist: bookingData.therapist || '',
      specialRequests: bookingData.specialRequests || '',
      price: bookingData.price || 0,
      totalPrice: bookingData.totalPrice || 0,
      status: 'pending_payment',
    }).then((dbBooking) => {
      if (dbBooking) {
        newBooking.id = dbBooking.id;
        setSpaBookings(prev => [newBooking, ...prev]);
        console.log('âœ… Spa booking synced:', confirmationCode);
      }
    }).catch((err) => {
      console.error('âŒ Failed to save to Supabase:', err);
      // Fallback to localStorage
      setSpaBookings(prev => [newBooking, ...prev]);
    });

    return { success: true, booking: newBooking };
  };

  const confirmRoomBooking = (bookingId, paymentData) => {
    let confirmedBooking = null;
    setRoomBookings(prev => prev.map(booking => {
      if (booking.id !== bookingId) return booking;
      confirmedBooking = {
        ...booking,
        ...paymentData,
        status: 'confirmed',
        paidAt: paymentData.paidAt || new Date().toISOString(),
      };

      // âœ… SYNC TO SUPABASE
      updateBookingStatus(booking.id, 'confirmed', {
        payment_method: paymentData.paymentMethod,
        payment_code: paymentData.paymentCode,
        paid_at: confirmedBooking.paidAt,
      }).catch((err) => {
        console.error('âŒ Failed to update Supabase:', err);
      });
      
      // Automatically send invoice email
      sendBookingConfirmationEmail({
        toEmail: booking.userEmail || booking.email,
        toName: booking.userName || booking.name,
        booking: confirmedBooking
      });
      
      return confirmedBooking;
    }));
    return confirmedBooking;
  };

  const confirmRestaurantBooking = (bookingId, paymentData) => {
    let confirmedBooking = null;
    setRestaurantBookings(prev => prev.map(booking => {
      if (booking.id !== bookingId) return booking;
      confirmedBooking = {
        ...booking,
        ...paymentData,
        status: 'confirmed',
        paidAt: paymentData.paidAt || new Date().toISOString(),
      };

      // âœ… SYNC TO SUPABASE
      updateRestaurantBookingStatus(booking.id, 'confirmed', {
        payment_method: paymentData.paymentMethod,
        payment_code: paymentData.paymentCode,
        paid_at: confirmedBooking.paidAt,
      }).catch((err) => {
        console.error('âŒ Failed to update Supabase:', err);
      });
      
      // Automatically send invoice email
      sendBookingConfirmationEmail({
        toEmail: booking.userEmail || booking.email,
        toName: booking.userName || booking.name,
        booking: confirmedBooking
      });
      
      return confirmedBooking;
    }));
    return confirmedBooking;
  };

  const confirmSpaBooking = (bookingId, paymentData) => {
    let confirmedBooking = null;
    setSpaBookings(prev => prev.map(booking => {
      if (booking.id !== bookingId) return booking;
      confirmedBooking = {
        ...booking,
        ...paymentData,
        status: 'confirmed',
        paidAt: paymentData.paidAt || new Date().toISOString(),
      };

      // âœ… SYNC TO SUPABASE
      updateSpaBookingStatus(booking.id, 'confirmed', {
        payment_method: paymentData.paymentMethod,
        payment_code: paymentData.paymentCode,
        paid_at: confirmedBooking.paidAt,
      }).catch((err) => {
        console.error('âŒ Failed to update Supabase:', err);
      });
      
      // Automatically send invoice email
      sendBookingConfirmationEmail({
        toEmail: booking.userEmail || booking.email,
        toName: booking.userName || booking.name,
        booking: confirmedBooking
      });
      
      return confirmedBooking;
    }));
    return confirmedBooking;
  };

  const getUserRoomBookings = (userId) => {
    return roomBookings.filter(booking => booking.userId === userId);
  };

  const getUserRestaurantBookings = (userId) => {
    return restaurantBookings.filter(booking => booking.userId === userId);
  };

  const getUserSpaBookings = (userId) => {
    return spaBookings.filter(booking => booking.userId === userId);
  };

  const getAllBookings = () => {
    return {
      room: roomBookings,
      restaurant: restaurantBookings,
      spa: spaBookings,
    };
  };

  const value = {
    roomBookings,
    restaurantBookings,
    spaBookings,
    createRoomBooking: createRoomBookingHandler,
    createRestaurantBooking: createRestaurantBookingHandler,
    createSpaBooking: createSpaBookingHandler,
    confirmRoomBooking,
    confirmRestaurantBooking,
    confirmSpaBooking,
    getUserRoomBookings,
    getUserRestaurantBookings,
    getUserSpaBookings,
    getAllBookings,
  };

  return (
    <BookingContext.Provider value={value}>
      {children}
    </BookingContext.Provider>
  );
};

export const useBookingContext = () => {
  const context = useContext(BookingContext);
  if (!context) {
    throw new Error('useBookingContext must be used within BookingProvider');
  }
  return context;
};


=================================================================
FILE PATH: src\context\LanguageContext.jsx
=================================================================
import { createContext, useContext, useEffect, useMemo, useState, useCallback } from 'react';
import translations from '../constants/translations';

const LanguageInfo = createContext();

const getNestedValue = (obj, path) => {
  return path.split('.').reduce((acc, segment) => (acc && acc[segment] !== undefined ? acc[segment] : null), obj);
};

export const LanguageProvider = ({ children }) => {
  const [language, setLanguage] = useState(() => {
    return localStorage.getItem('hotel_language') || 'en';
  });

  useEffect(() => {
    localStorage.setItem('hotel_language', language);
  }, [language]);

  const t = useCallback(
    (key, fallbackValue) => {
      const value = getNestedValue(translations[language], key);
      if (typeof value === 'function') {
        return value(fallbackValue);
      }
      if (value !== null && value !== undefined) return value;
      const fallback = getNestedValue(translations.en, key);
      return fallback ?? fallbackValue ?? key;
    },
    [language]
  );

  const value = useMemo(
    () => ({
      language,
      setLanguage,
      t,
    }),
    [language, t]
  );

  return <LanguageInfo.Provider value={value}>{children}</LanguageInfo.Provider>;
};

export const useLanguage = () => useContext(LanguageInfo);



=================================================================
FILE PATH: src\context\RoomContext.jsx
=================================================================
import { createContext, useContext, useEffect, useMemo, useState } from "react";
import {
  isBookingEmailConfigured,
  sendBookingConfirmationEmail,
} from "../utils/emailService";
import {
  fetchRoomsWithImages,
  fetchRoomReviews,
  createReview,
  checkRoomAvailability,
  hasUserBookedRoomType,
  fetchPriceRules,
  fetchPromotions,
} from "../services/roomService";
import {
  fetchUserBookings,
  createBooking,
  updateBookingStatus,
} from "../services/bookingService";

const RoomInfo = createContext();

const HOLIDAY_CALENDAR = [
  "2025-01-01",
  "2025-02-03",
  "2025-04-30",
  "2025-05-01",
  "2025-09-02",
  "2025-12-24",
  "2025-12-31",
];

const PRICING_DEFAULTS = {
  weekendMultiplier: 1.15,
  holidayMultiplier: 1.35,
  hourlyRateFactor: 0.25,
};

const getInitialReviews = () => {
  try {
    return JSON.parse(localStorage.getItem("hotel_room_reviews")) || {};
  } catch (error) {
    console.error("Failed to parse stored reviews", error);
    return {};
  }
};

const getInitialBookings = () => {
  try {
    return JSON.parse(localStorage.getItem("hotel_bookings")) || [];
  } catch (error) {
    console.error("Failed to parse stored bookings", error);
    return [];
  }
};

const persistBookings = (bookings) => {
  localStorage.setItem("hotel_bookings", JSON.stringify(bookings));
};

/**
 * Transform DB room object to frontend shape
 * DB shape: { id, room_no, floor, room_type_id, status, room_types: {...}, image_url, image_lg_url }
 * Frontend shape: { id, name, type, category, price, maxPerson, size, facilities, reviews, image, imageLg, ... }
 */
const transformDbRoomToFrontend = (dbRoom, reviews = []) => {
  const rt = dbRoom.room_types || {};
  return {
    id: dbRoom.id, // UUID string from DB
    roomTypeId: rt.id, // UUID string of room type (NEW)
    roomNo: dbRoom.room_no,
    floor: dbRoom.floor,
    name: rt.name || `Room ${dbRoom.room_no}`,
    type: rt.code || rt.name || 'Standard',
    category: rt.code || 'standard',
    description: rt.description || 'A comfortable room.',
    price: Number(rt.base_price) || 115,
    maxPerson: rt.max_person || 2,
    size: dbRoom.size || 35, // From rooms table
    image: dbRoom.image_url || null, // From room_images (Supabase Storage URL)
    imageLg: dbRoom.image_lg_url || null, // From room_images large version
    facilities: (rt.facilities || []).map((name) => ({ name })),
    reviews: reviews || [],
    pricing: {
      weekendMultiplier: 1.15,
      holidayMultiplier: 1.35,
      hourlyRate: Math.round((Number(rt.base_price) || 115) * 0.25),
    },
  };
};

/**
 * Fallback: Generate local seed rooms (when Supabase unavailable)
 * Creates basic room data with placeholder images
 */
const enhanceRoomsWithReviews = () => {
  const persistedReviews = getInitialReviews();
  
  // Generate 40 sample rooms (5 types Ã— 8 rooms each)
  const roomTypes = [
    { id: 'std', code: 'STD', name: 'Standard Room', basePrice: 115, maxPerson: 2 },
    { id: 'dlx', code: 'DLX', name: 'Deluxe Room', basePrice: 200, maxPerson: 2 },
    { id: 'sui', code: 'SUI', name: 'Suite', basePrice: 350, maxPerson: 4 },
    { id: 'pen', code: 'PEN', name: 'Penthouse', basePrice: 500, maxPerson: 4 },
    { id: 'cmb', code: 'CMB', name: 'Combo Package', basePrice: 400, maxPerson: 3 },
  ];
  
  const localRooms = [];
  roomTypes.forEach((roomType, typeIdx) => {
    for (let i = 1; i <= 8; i++) {
      const roomId = `room-${typeIdx * 8 + i}`;
      localRooms.push({
        id: roomId,
        roomNo: `${roomType.code}-${String(i).padStart(2, '0')}`,
        floor: Math.ceil(i / 4),
        name: `${roomType.name} #${i}`,
        type: roomType.code,
        category: roomType.id,
        description: `${roomType.name} - Comfortable and well-equipped`,
        price: roomType.basePrice,
        maxPerson: roomType.maxPerson,
        size: 35,
        image: null, // Placeholder - no local image
        imageLg: null,
        facilities: [
          { name: 'Free Wi-Fi' },
          { name: 'Air Conditioning' },
          { name: 'Flat-screen TV' },
        ],
        reviews: persistedReviews[roomId] || [],
        pricing: {
          weekendMultiplier: 1.15,
          holidayMultiplier: 1.35,
          hourlyRate: Math.round(roomType.basePrice * 0.25),
        },
      });
    }
  });
  
  return localRooms;
};


const getPriceBounds = (rooms) => {
  const prices = rooms.map((room) => room.price);
  if (prices.length === 0) return { min: 115, max: 545 };
  return {
    min: Math.min(...prices),
    max: Math.max(...prices),
  };
};

const getAverageRating = (room) => {
  if (!room?.reviews?.length) return 0;
  const sum = room.reviews.reduce((acc, review) => acc + review.rating, 0);
  return sum / room.reviews.length;
};

const createId = () => {
  if (typeof crypto !== "undefined" && crypto.randomUUID) {
    return crypto.randomUUID();
  }
  return Date.now().toString();
};

const formatDateKey = (date) => {
  if (!date) return "";
  const d = new Date(date);
  return `${d.getFullYear()}-${String(d.getMonth() + 1).padStart(
    2,
    "0"
  )}-${String(d.getDate()).padStart(2, "0")}`;
};

const normalizeDateInput = (value) => {
  if (!value) return null;
  return formatDateKey(value);
};

const addDays = (date, days) => {
  const result = new Date(date);
  result.setDate(result.getDate() + days);
  return result;
};

const iterateDates = (start, end, callback) => {
  let cursor = new Date(start);
  const limit = new Date(end);
  while (cursor < limit) {
    callback(new Date(cursor));
    cursor = addDays(cursor, 1);
  }
};

const isOverlap = (startA, endA, startB, endB) => {
  return new Date(startA) < new Date(endB) && new Date(startB) < new Date(endA);
};

export const RoomContext = ({ children }) => {
  const [allRooms, setAllRooms] = useState([]);
  const [rooms, setRooms] = useState([]);
  const [loading, setLoading] = useState(true);
  const [dbConnected, setDbConnected] = useState(false);

  const [adults, setAdults] = useState("1 Adult");
  const [kids, setKids] = useState("0 Kid");
  const [checkInDate, setCheckInDate] = useState(null);
  const [checkOutDate, setCheckOutDate] = useState(null);
  const [selectedRoomTypes, setSelectedRoomTypes] = useState([]);
  const [selectedAmenities, setSelectedAmenities] = useState([]);

  const [searchTerm, setSearchTerm] = useState("");
  const [sortOption, setSortOption] = useState("recommended");
  const [selectedCategory, setSelectedCategory] = useState(null);

  const [bookings, setBookings] = useState([]);
  const [priceRange, setPriceRange] = useState([115, 545]);
  
  // Pricing state
  const [priceRules, setPriceRules] = useState([]);
  const [promotions, setPromotions] = useState([]);

  /**
   * Load rooms from Supabase (with fallback to local seed data)
   */
  useEffect(() => {
    const loadRooms = async () => {
      setLoading(true);
      try {
        // Try to fetch from Supabase (with images)
        const [dbRooms, dbRules, dbPromotions] = await Promise.all([
          fetchRoomsWithImages(),
          fetchPriceRules(),
          fetchPromotions(),
        ]);
        
        if (dbRooms && dbRooms.length > 0) {
          // Transform DB rooms to frontend shape
          const transformedRooms = dbRooms.map((dbRoom) =>
            transformDbRoomToFrontend(dbRoom, [])
          );
          setAllRooms(transformedRooms);
          setRooms(transformedRooms);
          setPriceRules(dbRules);
          setPromotions(dbPromotions);
          setDbConnected(true);
          console.log(`âœ“ Loaded ${transformedRooms.length} rooms, ${dbRules.length} rules, ${dbPromotions.length} promotions from Supabase`);
        } else {
          throw new Error('No rooms from DB');
        }
      } catch (error) {
        console.warn('Supabase unavailable, using local seed data:', error.message);
        // Fallback to local seed data
        const localRooms = enhanceRoomsWithReviews();
        setAllRooms(localRooms);
        setRooms(localRooms);
        setDbConnected(false);
      } finally {
        setLoading(false);
      }
    };

    loadRooms();
  }, []);

  // Update price bounds based on loaded rooms
  const priceBounds = useMemo(() => getPriceBounds(allRooms), [allRooms]);

  useEffect(() => {
    setPriceRange([priceBounds.min, priceBounds.max]);
  }, [priceBounds]);

  /**
   * Load bookings (try DB first, fallback to localStorage)
   */
  useEffect(() => {
    setBookings((prev) => {
      let changed = false;
      const now = new Date();
      const updated = prev.map((booking) => {
        if (booking.status === "cancelled" || booking.status === "completed")
          return booking;
        if (new Date(booking.checkOut) < now) {
          changed = true;
          return { ...booking, status: "completed" };
        }
        return booking;
      });
      if (changed) {
        persistBookings(updated);
        return updated;
      }
      return prev;
    });
  }, []);

  const availableRoomTypes = useMemo(() => {
    const types = new Set();
    allRooms.forEach((room) => types.add(room.type));
    return Array.from(types);
  }, [allRooms]);

  const availableAmenities = useMemo(() => {
    const amenities = new Set();
    allRooms.forEach((room) =>
      room.facilities.forEach((f) => amenities.add(f.name))
    );
    return Array.from(amenities).sort();
  }, [allRooms]);

  const totalGuests = useMemo(() => {
    const adultNumber = parseInt(adults, 10) || 0;
    const kidNumber = parseInt(kids, 10) || 0;
    return adultNumber + kidNumber;
  }, [adults, kids]);

  const getRoomById = (roomId) => allRooms.find((room) => room.id === roomId);

  const getApplicablePriceRules = (roomTypeId, date) => {
    const day = date.getDay(); // 0=Sun, 6=Sat
    const dateKey = formatDateKey(date);

    // 1. Filter rules relevant to the room type or all types (room_type_id IS NULL implies all types, but our seeded data links rules to specific types)
    const applicableRules = priceRules.filter(rule =>
      rule.is_active &&
      (rule.room_type_id === null || roomTypeId === rule.room_type_id)
    );

    // 2. Find the highest priority rule for the date
    let bestRule = null;
    let highestPriority = Infinity;

    for (const rule of applicableRules) {
      let isApplied = false;

      // Check date range rules (seasonal, holiday defined by date range)
      if (rule.start_date && rule.end_date) {
        if (dateKey >= formatDateKey(rule.start_date) && dateKey < formatDateKey(rule.end_date)) {
          isApplied = true;
        }
      }
      
      // Check day of week rules (weekend)
      if (!isApplied && rule.rule_type === 'weekend') {
        if (rule.apply_sun && day === 0) isApplied = true;
        if (rule.apply_fri && day === 5) isApplied = true;
        if (rule.apply_sat && day === 6) isApplied = true;
      }
      
      // Check holiday/seasonal rules that might define exact dates (if implemented later, for now we rely on date range)

      if (isApplied && rule.priority < highestPriority) {
        highestPriority = rule.priority;
        bestRule = rule;
      }
    }
    
    return bestRule;
  };

  const calculatePricingForRoom = (room, start, end) => {
    if (!room || !start || !end) {
      return {
        total: room?.price || 0,
        breakdown: [],
        hourlyRate: room?.pricing?.hourlyRate || 0,
      };
    }

    const roomBasePrice = Number(room.price);
    const roomTypeId = room.roomTypeId; // Using the newly exposed roomTypeId (UUID)

    const breakdown = [];
    let total = 0;

    iterateDates(start, end, (currentDate) => {
      const dayKey = formatDateKey(currentDate);
      let label = "Standard rate";
      let rate = roomBasePrice;

      // 1. Find Price Rule (Highest Priority applies)
      const rule = getApplicablePriceRules(roomTypeId, currentDate);
      
      if (rule) {
        // Price field in DB is the actual rate multiplier (e.g., 1.15) or fixed price (not implemented yet)
        const multiplier = Number(rule.price);
        rate = Math.round(roomBasePrice * multiplier);
        
        // Use rule type/description for label
        label = rule.description || `${rule.rule_type} rate`;
      }
      
      // We ignore promotions here, promotions are applied globally to the total booking amount later.

      breakdown.push({
        date: dayKey,
        label,
        rate,
      });
      total += rate;
    });

    return {
      total,
      breakdown,
      hourlyRate:
        room.pricing?.hourlyRate ??
        Math.round(roomBasePrice * PRICING_DEFAULTS.hourlyRateFactor),
    };
  };

  const isRoomAvailable = (roomId, start, end, excludeBookingId = null) => {
    if (!start || !end) return true;
    
    // Check local bookings (both DB-synced and pending)
    return bookings
      .filter(
        (booking) =>
          booking.roomId === roomId &&
          booking.status !== "cancelled" &&
          booking.id !== excludeBookingId
      )
      .every(
        (booking) => !isOverlap(start, end, booking.checkIn, booking.checkOut)
      );
  };

  /**
   * Async availability check (if Supabase available, use DB; else use local cache)
   */
  const checkAvailabilityAsync = async (roomId, start, end, excludeBookingId = null) => {
    if (dbConnected) {
      return await checkRoomAvailability(roomId, start, end, excludeBookingId);
    }
    return isRoomAvailable(roomId, start, end, excludeBookingId);
  };

  const sortRooms = (roomsList, sortValue = sortOption) => {
    if (sortValue === "price-low") {
      return [...roomsList].sort((a, b) => a.price - b.price);
    }
    if (sortValue === "price-high") {
      return [...roomsList].sort((a, b) => b.price - a.price);
    }
    if (sortValue === "rating-high") {
      return [...roomsList].sort(
        (a, b) => getAverageRating(b) - getAverageRating(a)
      );
    }
    return roomsList;
  };

  const filterRooms = (options = {}) => {
    const term = (options.searchTerm ?? searchTerm ?? "").toLowerCase().trim();
    const [minPrice, maxPrice] = options.priceRange ?? priceRange;
    const sortValue = options.sortOption ?? sortOption;
    const roomTypes = options.selectedRoomTypes ?? selectedRoomTypes;
    const amenities = options.selectedAmenities ?? selectedAmenities;
    const rangeCheckIn = options.checkIn ?? checkInDate;
    const rangeCheckOut = options.checkOut ?? checkOutDate;
    const category = options.selectedCategory ?? selectedCategory;

    const baseRooms = options.sourceRooms ?? allRooms;

    const filtered = baseRooms.filter((room) => {
      const matchesGuests =
        totalGuests === 0 ? true : totalGuests <= room.maxPerson;
      const matchesPrice = room.price >= minPrice && room.price <= maxPrice;
      const matchesTerm =
        !term ||
        room.name.toLowerCase().includes(term) ||
        room.description.toLowerCase().includes(term);
      const matchesType =
        roomTypes.length === 0 || roomTypes.includes(room.type);
      const matchesCategory = !category || room.category === category;
      const roomAmenities = room.facilities.map((f) => f.name);
      const matchesAmenities =
        amenities.length === 0 ||
        amenities.every((item) => roomAmenities.includes(item));
      const matchesAvailability =
        !rangeCheckIn || !rangeCheckOut
          ? true
          : isRoomAvailable(room.id, rangeCheckIn, rangeCheckOut);

      return (
        matchesGuests &&
        matchesPrice &&
        matchesTerm &&
        matchesType &&
        matchesCategory &&
        matchesAmenities &&
        matchesAvailability
      );
    });

    return sortRooms(filtered, sortValue);
  };

  const persistReviews = (roomsList) => {
    const payload = roomsList.reduce((acc, room) => {
      acc[room.id] = room.reviews || [];
      return acc;
    }, {});
    localStorage.setItem("hotel_room_reviews", JSON.stringify(payload));
  };

  const handleCheck = (e) => {
    e.preventDefault();
    setLoading(true);
    setTimeout(() => {
      setRooms(filterRooms());
      setLoading(false);
    }, 800);
  };

  const resetRoomFilterData = () => {
    setAdults("1 Adult");
    setKids("0 Kid");
    setSearchTerm("");
    setPriceRange([priceBounds.min, priceBounds.max]);
    setSortOption("recommended");
    setCheckInDate(null);
    setCheckOutDate(null);
    setSelectedRoomTypes([]);
    setSelectedAmenities([]);
    setRooms(allRooms);
  };

  const updateSearch = (value) => {
    setSearchTerm(value);
    setRooms(filterRooms({ searchTerm: value }));
  };

  const updatePriceRange = (min, max) => {
    const sanitizedMin = Math.max(priceBounds.min, Math.min(min, max));
    const sanitizedMax = Math.min(priceBounds.max, Math.max(max, sanitizedMin));
    const nextRange = [sanitizedMin, sanitizedMax];
    setPriceRange(nextRange);
    setRooms(filterRooms({ priceRange: nextRange }));
  };

  const updateSortOption = (value) => {
    setSortOption(value);
    setRooms(filterRooms({ sortOption: value }));
  };

  const toggleRoomType = (type) => {
    setSelectedRoomTypes((prev) => {
      const next = prev.includes(type)
        ? prev.filter((item) => item !== type)
        : [...prev, type];
      setRooms(filterRooms({ selectedRoomTypes: next }));
      return next;
    });
  };

  const toggleAmenity = (amenity) => {
    setSelectedAmenities((prev) => {
      const next = prev.includes(amenity)
        ? prev.filter((item) => item !== amenity)
        : [...prev, amenity];
      setRooms(filterRooms({ selectedAmenities: next }));
      return next;
    });
  };

  const updateCategory = (category) => {
    setSelectedCategory(category);
    setRooms(filterRooms({ selectedCategory: category }));
  };

  const clearAllFilters = () => {
    setSelectedRoomTypes([]);
    setSelectedAmenities([]);
    setCheckInDate(null);
    setCheckOutDate(null);
    setPriceRange([priceBounds.min, priceBounds.max]);
    setSortOption("recommended");
    setSearchTerm("");
    setSelectedCategory(null);
    setRooms(
      filterRooms({
        selectedRoomTypes: [],
        selectedAmenities: [],
        searchTerm: "",
        checkIn: null,
        checkOut: null,
        priceRange: [priceBounds.min, priceBounds.max],
        sortOption: "recommended",
        selectedCategory: null,
      })
    );
  };

  const saveBookings = (updater) => {
    setBookings((prev) => {
      const updated = typeof updater === "function" ? updater(prev) : updater;
      persistBookings(updated);
      return updated;
    });
  };

  const bookRoom = ({
    roomId,
    roomName,
    userId,
    userName,
    userEmail,
    checkIn,
    checkOut,
    adults: bookingAdults,
    kids: bookingKids,
    note,
    promoCode = null, // ThÃªm promoCode
  }) => {
    const room = getRoomById(roomId);
    if (!room) {
      return { success: false, error: "Room not found" };
    }
    if (!checkIn || !checkOut) {
      return {
        success: false,
        error: "Please select check-in and check-out dates",
      };
    }
    if (!isRoomAvailable(roomId, checkIn, checkOut)) {
      return {
        success: false,
        error: "Room is not available for the selected dates",
      };
    }

    const normalizedCheckIn = normalizeDateInput(checkIn);
    const normalizedCheckOut = normalizeDateInput(checkOut);

    const { total, breakdown } = calculatePricingForRoom(
      room,
      normalizedCheckIn,
      normalizedCheckOut
    );
    const confirmationCode = `AD-${Math.random()
      .toString(36)
      .substring(2, 7)
      .toUpperCase()}`;

    // --- 1. Apply Promotion (if provided) ---
    let discount = 0;
    let finalTotal = total;
    let promo = null;

    if (promoCode) {
      promo = promotions.find(p => p.code === promoCode && new Date(p.end_date) >= new Date() && p.is_active);
      if (promo) {
        if (promo.discount_kind === 'percent') {
          discount = Math.round(total * (Number(promo.discount_value) / 100));
        } else if (promo.discount_kind === 'fixed') {
          discount = Number(promo.discount_value);
        }
        finalTotal = total - discount;
        if (finalTotal < 0) finalTotal = 0;
      }
    }

    // Prepare booking object
    const newBooking = {
      id: dbConnected ? undefined : createId(), // Let DB generate UUID if connected
      confirmation_code: confirmationCode,
      user_id: userId,
      user_email: userEmail,
      user_name: userName,
      room_name: roomName,
      room_id: roomId, // References room UUID
      check_in: normalizedCheckIn,
      check_out: normalizedCheckOut,
      num_adults: bookingAdults,
      num_children: bookingKids,
      note,
      promo_code: promo?.code || null, // Store applied promo code
      subtotal: total, // Store total BEFORE discount
      discount: discount, // Store applied discount amount
      status: "pending_payment",
      total_nights: breakdown.length,
      total_amount: finalTotal, // Store total AFTER discount
      pricing_breakdown: breakdown,
      created_at: new Date().toISOString(),
      history: [],
    };

    // Save to DB if available, else to localStorage
    if (dbConnected) {
      // Create in Supabase (async, but we'll optimistically update UI)
      createBooking(newBooking).then((dbBooking) => {
        if (dbBooking) {
          const frontendBooking = {
            id: dbBooking.id,
            confirmationCode: dbBooking.confirmation_code,
            roomId: dbBooking.room_id,
            roomName: dbBooking.room_name,
            userId: dbBooking.user_id,
            userEmail: dbBooking.user_email,
            userName: dbBooking.user_name,
            checkIn: dbBooking.check_in,
            checkOut: dbBooking.check_out,
            adults: dbBooking.num_adults,
            kids: dbBooking.num_children,
            totalNights: dbBooking.total_nights,
            totalPrice: parseFloat(dbBooking.total_amount),
            pricingBreakdown: dbBooking.pricing_breakdown,
            note: dbBooking.note,
            status: dbBooking.status,
            type: "room",
            createdAt: dbBooking.created_at,
            history: dbBooking.history || [],
            promoCode: dbBooking.promo_code, // NEW
            subtotal: parseFloat(dbBooking.subtotal), // NEW
            discount: parseFloat(dbBooking.discount), // NEW
          };
          saveBookings((prev) => [frontendBooking, ...prev]);
        }
      });
    } else {
      // Local storage only
      const frontendBooking = {
        id: createId(),
        confirmationCode,
        roomId,
        roomName,
        userId,
        userEmail,
        userName,
        checkIn: normalizedCheckIn,
        checkOut: normalizedCheckOut,
        adults: bookingAdults,
        kids: bookingKids,
        totalNights: breakdown.length,
        totalPrice: finalTotal, // Use final total
        pricingBreakdown: breakdown,
        note,
        promoCode: promo?.code || null, // Store applied promo code
        subtotal: total,
        discount: discount,
        status: "pending_payment",
        type: "room",
        createdAt: new Date().toISOString(),
        history: [],
      };
      saveBookings((prev) => [frontendBooking, ...prev]);
    }

    // Return optimistic booking data
    return {
      success: true,
      booking: {
        id: dbConnected ? "pending-db-sync" : createId(),
        confirmationCode,
        roomId,
        roomName,
        userId,
        userEmail,
        userName,
        checkIn: normalizedCheckIn,
        checkOut: normalizedCheckOut,
        adults: bookingAdults,
        kids: bookingKids,
        totalNights: breakdown.length,
        totalPrice: finalTotal, // Use final total
        pricingBreakdown: breakdown,
        note,
        promoCode: promo?.code || null,
        subtotal: total,
        discount: discount,
        status: "pending_payment",
        type: "room",
        createdAt: new Date().toISOString(),
        history: [],
      },
    };
  };

  const confirmBookingPayment = (bookingId, paymentData) => {
    let confirmedBooking = null;
    saveBookings((prev) =>
      prev.map((booking) => {
        if (booking.id !== bookingId) return booking;
        confirmedBooking = {
          ...booking,
          ...paymentData,
          status: "confirmed",
          paidAt: paymentData.paidAt || new Date().toISOString(),
        };

        // âœ… SYNC TO SUPABASE
        if (dbConnected && booking.id !== "pending") {
          updateBookingStatus(booking.id, "confirmed", {
            payment_method: paymentData.paymentMethod,
            payment_code: paymentData.paymentCode,
            paid_at: confirmedBooking.paidAt,
          }).catch((err) => {
            console.error('âŒ Failed to update Supabase:', err);
          });
        }

        // Send confirmation email
        if (isBookingEmailConfigured()) {
          sendBookingConfirmationEmail({
            toEmail: booking.userEmail,
            toName: booking.userName,
            booking: confirmedBooking,
          });
        }

        return confirmedBooking;
      })
    );
    return confirmedBooking;
  };

  const cancelBooking = (bookingId, reason = "Cancelled by guest") => {
    let cancelledBooking = null;
    saveBookings((prev) =>
      prev.map((booking) => {
        if (booking.id !== bookingId) return booking;
        cancelledBooking = {
          ...booking,
          status: "cancelled",
          cancelledAt: new Date().toISOString(),
          cancelReason: reason,
          history: [
            ...(booking.history || []),
            { type: "cancel", reason, at: new Date().toISOString() },
          ],
        };

        // âœ… SYNC TO SUPABASE
        if (dbConnected && booking.id !== "pending") {
          updateBookingStatus(booking.id, "cancelled", {
            note: reason,
          }).catch((err) => {
            console.error('âŒ Failed to update Supabase:', err);
          });
        }

        return cancelledBooking;
      })
    );
    return cancelledBooking;
  };

  const modifyBookingDates = (bookingId, { checkIn, checkOut }) => {
    let updatedBooking = null;
    saveBookings((prev) =>
      prev.map((booking) => {
        if (booking.id !== bookingId) return booking;
        const normalizedCheckIn = normalizeDateInput(checkIn);
        const normalizedCheckOut = normalizeDateInput(checkOut);

        if (
          !isRoomAvailable(
            booking.roomId,
            normalizedCheckIn,
            normalizedCheckOut,
            bookingId
          )
        ) {
          throw new Error("Room is not available for the new dates");
        }
        const room = getRoomById(booking.roomId);
        const { total, breakdown } = calculatePricingForRoom(
          room,
          normalizedCheckIn,
          normalizedCheckOut
        );
        updatedBooking = {
          ...booking,
          checkIn: normalizedCheckIn,
          checkOut: normalizedCheckOut,
          totalNights: breakdown.length,
          totalPrice: total,
          pricingBreakdown: breakdown,
          status: "modified",
          history: [
            ...(booking.history || []),
            {
              type: "modify",
              at: new Date().toISOString(),
              checkIn: normalizedCheckIn,
              checkOut: normalizedCheckOut,
            },
          ],
        };
        return updatedBooking;
      })
    );
    return updatedBooking;
  };

  const hasUserBookedRoom = (userId, roomId) => {
    if (!userId || !roomId) return false;
    return bookings.some(
      (booking) =>
        booking.userId === userId &&
        booking.roomId === roomId &&
        booking.status !== "cancelled"
    );
  };

  /**
   * Add review - save to DB if available, else to localStorage
   */
  const addReview = (roomId, review) => {
    // Optimistically update UI
    setAllRooms((prevRooms) => {
      const updatedRooms = prevRooms.map((room) =>
        room.id === roomId
          ? { ...room, reviews: [review, ...(room.reviews || [])] }
          : room
      );
      persistReviews(updatedRooms);
      setRooms(filterRooms({ sourceRooms: updatedRooms }));
      return updatedRooms;
    });

    // âœ… SAVE TO SUPABASE
    if (dbConnected) {
      const reviewData = {
        room_type_id: roomId, // Note: DB schema expects room_type_id, not room_id
        user_id: review.userId,
        user_name: review.userName,
        user_email: review.userEmail,
        rating: review.rating,
        comment: review.comment,
        stay_date: review.stayDate || null,
        created_at: review.createdAt || new Date().toISOString(),
      };
      createReview(reviewData)
        .then((dbReview) => {
          if (dbReview) {
            console.log('âœ… Review saved to Supabase');
          }
        })
        .catch((err) => {
          console.error('âŒ Error saving review to Supabase:', err);
        });
    }
  };

  const getUserBookings = (userId) =>
    bookings.filter((booking) => booking.userId === userId);

  const shareWithChildren = {
    allRooms,
    rooms,
    loading,
    dbConnected, // Indicates if Supabase is available
    adults,
    setAdults,
    kids,
    setKids,
    checkInDate,
    setCheckInDate,
    checkOutDate,
    setCheckOutDate,
    selectedRoomTypes,
    toggleRoomType,
    availableRoomTypes,
    selectedAmenities,
    toggleAmenity,
    availableAmenities,
    selectedCategory,
    updateCategory,
    clearAllFilters,
    handleCheck,
    resetRoomFilterData,
    searchTerm,
    updateSearch,
    priceRange,
    priceBounds,
    updatePriceRange,
    sortOption,
    updateSortOption,
    bookRoom,
    bookings,
    getUserBookings,
    confirmBookingPayment,
    cancelBooking,
    modifyBookingDates,
    hasUserBookedRoom,
    addReview,
    calculatePricingForRoom,
    getRoomPricingPreview: (roomId, start, end) =>
      calculatePricingForRoom(getRoomById(roomId), start, end),
  };

  return (
    <RoomInfo.Provider value={shareWithChildren}>{children}</RoomInfo.Provider>
  );
};

export const useRoomContext = () => useContext(RoomInfo);


=================================================================
FILE PATH: src\db\constants\bookingStatus.js
=================================================================
/**
 * Booking Status Constants
 */

export const BOOKING_STATUS = {
  PENDING: 'pending',
  CONFIRMED: 'confirmed',
  CANCELLED: 'cancelled',
  COMPLETED: 'completed',
  NO_SHOW: 'no_show',
};

export const BOOKING_STATUS_LABELS = {
  pending: 'Pending',
  confirmed: 'Confirmed',
  cancelled: 'Cancelled',
  completed: 'Completed',
  no_show: 'No Show',
};

export const BOOKING_STATUS_COLORS = {
  pending: '#FFA500',    // Orange
  confirmed: '#4CAF50',  // Green
  cancelled: '#F44336',  // Red
  completed: '#2196F3',  // Blue
  no_show: '#9C27B0',    // Purple
};

export const PAYMENT_STATUS = {
  PENDING: 'pending',
  PAID: 'paid',
  FAILED: 'failed',
  REFUNDED: 'refunded',
};

export const PAYMENT_STATUS_LABELS = {
  pending: 'Pending',
  paid: 'Paid',
  failed: 'Failed',
  refunded: 'Refunded',
};

export const PAYMENT_METHODS = {
  CREDIT_CARD: 'credit_card',
  DEBIT_CARD: 'debit_card',
  BANK_TRANSFER: 'bank_transfer',
  CASH: 'cash',
  WALLET: 'wallet',
};

export const PAYMENT_METHOD_LABELS = {
  credit_card: 'Credit Card',
  debit_card: 'Debit Card',
  bank_transfer: 'Bank Transfer',
  cash: 'Cash',
  wallet: 'Wallet',
};

/**
 * Get booking status label
 * @param {string} status - Booking status
 * @returns {string} Status label
 */
export const getBookingStatusLabel = (status) => {
  return BOOKING_STATUS_LABELS[status] || status;
};

/**
 * Get booking status color
 * @param {string} status - Booking status
 * @returns {string} Color hex code
 */
export const getBookingStatusColor = (status) => {
  return BOOKING_STATUS_COLORS[status] || '#999999';
};

/**
 * Get payment status label
 * @param {string} status - Payment status
 * @returns {string} Status label
 */
export const getPaymentStatusLabel = (status) => {
  return PAYMENT_STATUS_LABELS[status] || status;
};

/**
 * Get payment method label
 * @param {string} method - Payment method
 * @returns {string} Method label
 */
export const getPaymentMethodLabel = (method) => {
  return PAYMENT_METHOD_LABELS[method] || method;
};

/**
 * Check if booking status is valid
 * @param {string} status - Booking status
 * @returns {boolean} True if valid
 */
export const isValidBookingStatus = (status) => {
  return Object.values(BOOKING_STATUS).includes(status);
};

/**
 * Check if payment status is valid
 * @param {string} status - Payment status
 * @returns {boolean} True if valid
 */
export const isValidPaymentStatus = (status) => {
  return Object.values(PAYMENT_STATUS).includes(status);
};

/**
 * Check if payment method is valid
 * @param {string} method - Payment method
 * @returns {boolean} True if valid
 */
export const isValidPaymentMethod = (method) => {
  return Object.values(PAYMENT_METHODS).includes(method);
};

/**
 * Check if booking can be cancelled
 * @param {string} status - Booking status
 * @returns {boolean} True if can be cancelled
 */
export const canCancelBooking = (status) => {
  return [BOOKING_STATUS.PENDING, BOOKING_STATUS.CONFIRMED].includes(status);
};

/**
 * Check if booking is completed
 * @param {string} status - Booking status
 * @returns {boolean} True if completed
 */
export const isBookingCompleted = (status) => {
  return [BOOKING_STATUS.COMPLETED, BOOKING_STATUS.NO_SHOW].includes(status);
};


=================================================================
FILE PATH: src\db\constants\errors.js
=================================================================
/**
 * Error Messages & Codes
 */

export const ERROR_CODES = {
  // Room errors
  ROOM_NOT_FOUND: 'ROOM_NOT_FOUND',
  ROOM_UNAVAILABLE: 'ROOM_UNAVAILABLE',
  ROOM_TYPE_NOT_FOUND: 'ROOM_TYPE_NOT_FOUND',

  // Booking errors
  BOOKING_NOT_FOUND: 'BOOKING_NOT_FOUND',
  BOOKING_FAILED: 'BOOKING_FAILED',
  BOOKING_ALREADY_EXISTS: 'BOOKING_ALREADY_EXISTS',
  BOOKING_CANNOT_CANCEL: 'BOOKING_CANNOT_CANCEL',
  BOOKING_EXPIRED: 'BOOKING_EXPIRED',

  // Payment errors
  PAYMENT_FAILED: 'PAYMENT_FAILED',
  PAYMENT_INVALID: 'PAYMENT_INVALID',
  PAYMENT_DECLINED: 'PAYMENT_DECLINED',

  // Review errors
  REVIEW_NOT_FOUND: 'REVIEW_NOT_FOUND',
  REVIEW_FAILED: 'REVIEW_FAILED',
  REVIEW_INVALID: 'REVIEW_INVALID',

  // Restaurant errors
  RESTAURANT_BOOKING_FAILED: 'RESTAURANT_BOOKING_FAILED',
  RESTAURANT_SLOT_UNAVAILABLE: 'RESTAURANT_SLOT_UNAVAILABLE',

  // Spa errors
  SPA_BOOKING_FAILED: 'SPA_BOOKING_FAILED',
  SPA_SLOT_UNAVAILABLE: 'SPA_SLOT_UNAVAILABLE',

  // User errors
  USER_NOT_FOUND: 'USER_NOT_FOUND',
  USER_UNAUTHORIZED: 'USER_UNAUTHORIZED',
  USER_INVALID_EMAIL: 'USER_INVALID_EMAIL',

  // Validation errors
  VALIDATION_ERROR: 'VALIDATION_ERROR',
  INVALID_DATE_RANGE: 'INVALID_DATE_RANGE',
  INVALID_GUEST_COUNT: 'INVALID_GUEST_COUNT',

  // Database errors
  DATABASE_ERROR: 'DATABASE_ERROR',
  CONNECTION_ERROR: 'CONNECTION_ERROR',

  // General errors
  UNKNOWN_ERROR: 'UNKNOWN_ERROR',
  NETWORK_ERROR: 'NETWORK_ERROR',
};

export const ERROR_MESSAGES = {
  // Room errors
  ROOM_NOT_FOUND: 'Room not found',
  ROOM_UNAVAILABLE: 'Room is not available for the selected dates',
  ROOM_TYPE_NOT_FOUND: 'Room type not found',

  // Booking errors
  BOOKING_NOT_FOUND: 'Booking not found',
  BOOKING_FAILED: 'Failed to create booking',
  BOOKING_ALREADY_EXISTS: 'Booking already exists',
  BOOKING_CANNOT_CANCEL: 'This booking cannot be cancelled',
  BOOKING_EXPIRED: 'Booking has expired',

  // Payment errors
  PAYMENT_FAILED: 'Payment failed',
  PAYMENT_INVALID: 'Invalid payment information',
  PAYMENT_DECLINED: 'Payment was declined',

  // Review errors
  REVIEW_NOT_FOUND: 'Review not found',
  REVIEW_FAILED: 'Failed to create review',
  REVIEW_INVALID: 'Invalid review data',

  // Restaurant errors
  RESTAURANT_BOOKING_FAILED: 'Failed to create restaurant booking',
  RESTAURANT_SLOT_UNAVAILABLE: 'Selected time slot is not available',

  // Spa errors
  SPA_BOOKING_FAILED: 'Failed to create spa booking',
  SPA_SLOT_UNAVAILABLE: 'Selected time slot is not available',

  // User errors
  USER_NOT_FOUND: 'User not found',
  USER_UNAUTHORIZED: 'You are not authorized to perform this action',
  USER_INVALID_EMAIL: 'Invalid email address',

  // Validation errors
  VALIDATION_ERROR: 'Validation error',
  INVALID_DATE_RANGE: 'Invalid date range',
  INVALID_GUEST_COUNT: 'Invalid number of guests',

  // Database errors
  DATABASE_ERROR: 'Database error occurred',
  CONNECTION_ERROR: 'Connection error',

  // General errors
  UNKNOWN_ERROR: 'An unknown error occurred',
  NETWORK_ERROR: 'Network error occurred',
};

/**
 * Get error message
 * @param {string} code - Error code
 * @returns {string} Error message
 */
export const getErrorMessage = (code) => {
  return ERROR_MESSAGES[code] || ERROR_MESSAGES.UNKNOWN_ERROR;
};

/**
 * Create error object
 * @param {string} code - Error code
 * @param {string} details - Additional details
 * @returns {Object} Error object
 */
export const createError = (code, details = '') => {
  return {
    code,
    message: getErrorMessage(code),
    details,
    timestamp: new Date().toISOString(),
  };
};

/**
 * Handle error and return user-friendly message
 * @param {Error} error - Error object
 * @returns {Object} Error object with message
 */
export const handleError = (error) => {
  console.error('âŒ Error:', error);

  if (error.code) {
    return createError(error.code, error.message);
  }

  if (error.message) {
    return createError(ERROR_CODES.UNKNOWN_ERROR, error.message);
  }

  return createError(ERROR_CODES.UNKNOWN_ERROR);
};

/**
 * Validation error messages
 */
export const VALIDATION_ERRORS = {
  REQUIRED_FIELD: 'This field is required',
  INVALID_EMAIL: 'Invalid email address',
  INVALID_PHONE: 'Invalid phone number',
  INVALID_DATE: 'Invalid date',
  INVALID_TIME: 'Invalid time',
  INVALID_NUMBER: 'Invalid number',
  MIN_LENGTH: (min) => `Must be at least ${min} characters`,
  MAX_LENGTH: (max) => `Must be at most ${max} characters`,
  MIN_VALUE: (min) => `Must be at least ${min}`,
  MAX_VALUE: (max) => `Must be at most ${max}`,
  INVALID_FORMAT: 'Invalid format',
};

/**
 * Get validation error message
 * @param {string} type - Error type
 * @param {any} param - Parameter for error message
 * @returns {string} Error message
 */
export const getValidationError = (type, param) => {
  const errorFn = VALIDATION_ERRORS[type];
  if (typeof errorFn === 'function') {
    return errorFn(param);
  }
  return VALIDATION_ERRORS[type] || 'Validation error';
};


=================================================================
FILE PATH: src\db\constants\reviewRatings.js
=================================================================
/**
 * Review Rating Constants
 */

export const RATING_SCALE = {
  POOR: 1,
  FAIR: 2,
  GOOD: 3,
  VERY_GOOD: 4,
  EXCELLENT: 5,
};

export const RATING_LABELS = {
  1: 'Poor',
  2: 'Fair',
  3: 'Good',
  4: 'Very Good',
  5: 'Excellent',
};

export const RATING_COLORS = {
  1: '#F44336', // Red
  2: '#FF9800', // Orange
  3: '#FFC107', // Amber
  4: '#8BC34A', // Light Green
  5: '#4CAF50', // Green
};

export const RATING_DESCRIPTIONS = {
  1: 'Poor - Did not meet expectations',
  2: 'Fair - Below average experience',
  3: 'Good - Satisfactory experience',
  4: 'Very Good - Above average experience',
  5: 'Excellent - Exceeded expectations',
};

export const REVIEW_ASPECTS = {
  CLEANLINESS: 'cleanliness',
  COMFORT: 'comfort',
  LOCATION: 'location',
  SERVICE: 'service',
  VALUE: 'value',
  AMENITIES: 'amenities',
};

export const REVIEW_ASPECT_LABELS = {
  cleanliness: 'Cleanliness',
  comfort: 'Comfort',
  location: 'Location',
  service: 'Service',
  value: 'Value for Money',
  amenities: 'Amenities',
};

/**
 * Get rating label
 * @param {number} rating - Rating (1-5)
 * @returns {string} Rating label
 */
export const getRatingLabel = (rating) => {
  return RATING_LABELS[rating] || 'Unknown';
};

/**
 * Get rating color
 * @param {number} rating - Rating (1-5)
 * @returns {string} Color hex code
 */
export const getRatingColor = (rating) => {
  return RATING_COLORS[rating] || '#999999';
};

/**
 * Get rating description
 * @param {number} rating - Rating (1-5)
 * @returns {string} Rating description
 */
export const getRatingDescription = (rating) => {
  return RATING_DESCRIPTIONS[rating] || '';
};

/**
 * Get review aspect label
 * @param {string} aspect - Review aspect
 * @returns {string} Aspect label
 */
export const getReviewAspectLabel = (aspect) => {
  return REVIEW_ASPECT_LABELS[aspect] || aspect;
};

/**
 * Check if rating is valid
 * @param {number} rating - Rating
 * @returns {boolean} True if valid (1-5)
 */
export const isValidRating = (rating) => {
  return Number.isInteger(rating) && rating >= 1 && rating <= 5;
};

/**
 * Check if review aspect is valid
 * @param {string} aspect - Review aspect
 * @returns {boolean} True if valid
 */
export const isValidReviewAspect = (aspect) => {
  return Object.values(REVIEW_ASPECTS).includes(aspect);
};

/**
 * Get rating percentage
 * @param {number} rating - Rating (1-5)
 * @returns {number} Percentage (0-100)
 */
export const getRatingPercentage = (rating) => {
  return (rating / 5) * 100;
};

/**
 * Get average rating category
 * @param {number} average - Average rating
 * @returns {string} Category (Excellent, Very Good, Good, Fair, Poor)
 */
export const getAverageRatingCategory = (average) => {
  if (average >= 4.5) return 'Excellent';
  if (average >= 4) return 'Very Good';
  if (average >= 3) return 'Good';
  if (average >= 2) return 'Fair';
  return 'Poor';
};

/**
 * Get rating distribution
 * @param {Array} reviews - Array of reviews
 * @returns {Object} Distribution object
 */
export const getRatingDistribution = (reviews) => {
  const distribution = {
    1: 0,
    2: 0,
    3: 0,
    4: 0,
    5: 0,
  };

  reviews.forEach((review) => {
    const rating = review.overall_rating || 0;
    if (isValidRating(rating)) {
      distribution[rating]++;
    }
  });

  return distribution;
};

/**
 * Calculate average rating
 * @param {Array} reviews - Array of reviews
 * @returns {number} Average rating (0-5)
 */
export const calculateAverageRating = (reviews) => {
  if (!reviews || reviews.length === 0) return 0;

  const sum = reviews.reduce((acc, review) => {
    const rating = review.overall_rating || 0;
    return acc + (isValidRating(rating) ? rating : 0);
  }, 0);

  return Math.round((sum / reviews.length) * 10) / 10;
};


=================================================================
FILE PATH: src\db\constants\roomTypes.js
=================================================================
/**
 * Room Type Constants
 */

export const ROOM_TYPES = {
  STANDARD: 'STD',
  DELUXE: 'DLX',
  SUITE: 'SUI',
  PENTHOUSE: 'PEN',
  COMBO: 'CMB',
};

export const ROOM_TYPE_NAMES = {
  STD: 'Standard',
  DLX: 'Deluxe',
  SUI: 'Suite',
  PEN: 'Penthouse',
  CMB: 'Combo Package',
};

export const ROOM_TYPE_DESCRIPTIONS = {
  STD: 'Comfortable rooms with essential amenities',
  DLX: 'Premium experience with elegant design',
  SUI: 'Spacious suites for ultimate comfort',
  PEN: 'Exclusive top-floor residences',
  CMB: 'Value-packed packages with extras',
};

export const ROOM_TYPE_IMAGE_MAP = {
  STD: 1,
  DLX: 2,
  SUI: 3,
  PEN: 4,
  CMB: 5,
};

export const ROOM_STATUS = {
  AVAILABLE: 'available',
  OCCUPIED: 'occupied',
  MAINTENANCE: 'maintenance',
  RESERVED: 'reserved',
  UNAVAILABLE: 'unavailable',
};

export const ROOM_STATUS_LABELS = {
  available: 'Available',
  occupied: 'Occupied',
  maintenance: 'Maintenance',
  reserved: 'Reserved',
  unavailable: 'Unavailable',
};

/**
 * Get room type name
 * @param {string} code - Room type code
 * @returns {string} Room type name
 */
export const getRoomTypeName = (code) => {
  return ROOM_TYPE_NAMES[code] || 'Unknown';
};

/**
 * Get room type description
 * @param {string} code - Room type code
 * @returns {string} Room type description
 */
export const getRoomTypeDescription = (code) => {
  return ROOM_TYPE_DESCRIPTIONS[code] || '';
};

/**
 * Get room type image number
 * @param {string} code - Room type code
 * @returns {number} Image number
 */
export const getRoomTypeImageNumber = (code) => {
  return ROOM_TYPE_IMAGE_MAP[code] || 1;
};

/**
 * Get room status label
 * @param {string} status - Room status
 * @returns {string} Status label
 */
export const getRoomStatusLabel = (status) => {
  return ROOM_STATUS_LABELS[status] || status;
};

/**
 * Check if room type is valid
 * @param {string} code - Room type code
 * @returns {boolean} True if valid
 */
export const isValidRoomType = (code) => {
  return Object.values(ROOM_TYPES).includes(code);
};

/**
 * Check if room status is valid
 * @param {string} status - Room status
 * @returns {boolean} True if valid
 */
export const isValidRoomStatus = (status) => {
  return Object.values(ROOM_STATUS).includes(status);
};


=================================================================
FILE PATH: src\db\data.js
=================================================================
// âš ï¸ DEPRECATED: This file is kept for reference only
// All room data and images now come from Supabase
// Icons are no longer needed (was used for seed data only)

// ==================== ROOM CATEGORIES ====================
// Room categories for better organization and management
export const roomCategories = [
  { id: "standard", name: "Standard", description: "Comfortable rooms with essential amenities" },
  { id: "deluxe", name: "Deluxe", description: "Premium experience with elegant design" },
  { id: "suite", name: "Suite", description: "Spacious suites for ultimate comfort" },
  { id: "penthouse", name: "Penthouse", description: "Exclusive top-floor residences" },
  { id: "combo", name: "Combo Package", description: "Value-packed packages with extras" },
];

// âš ï¸ DEPRECATED: roomData is no longer used
// All room data now comes from Supabase database
// This seed data is kept for reference only
/*
export const roomData = [
  // STANDARD: Rooms 1-8 (8 rooms)
  createRoom(1, "Standard Room", "Standard", "standard", 30, 1, 115, images.Room1Img, images.Room1ImgLg, "Comfortable room with essential amenities.", [defaultReview(1, "Sophia Nguyen", "Room was spotless, pool view stunning."), defaultReview(1, "Daniel Park", "Bed was plush and breakfast tasty.")]),
  // ... (40 rooms total - see git history or backup for full data)
];
*/


=================================================================
FILE PATH: src\db\index.js
=================================================================
/**
 * Database Module - Central Export Point
 * Import all queries, mutations, constants, and transformers from here
 */

// ============ QUERIES ============
export * from './queries/rooms';
export * from './queries/bookings';
export * from './queries/reviews';
export * from './queries/restaurants';
export * from './queries/spas';

// ============ MUTATIONS ============
export * from './mutations/bookings';
export * from './mutations/reviews';
export * from './mutations/restaurants';
export * from './mutations/spas';

// ============ CONSTANTS ============
export * from './constants/roomTypes';
export * from './constants/bookingStatus';
export * from './constants/reviewRatings';
export * from './constants/errors';

// ============ TRANSFORMERS ============
export * from './transformers/room';

/**
 * Usage Examples:
 * 
 * // Import queries
 * import { fetchAllRooms, fetchRoomById } from './db';
 * 
 * // Import mutations
 * import { createBooking, updateBookingStatus } from './db';
 * 
 * // Import constants
 * import { ROOM_TYPES, BOOKING_STATUS, RATING_SCALE } from './db';
 * 
 * // Import transformers
 * import { transformDbRoomToFrontend } from './db';
 */


=================================================================
FILE PATH: src\db\mutations\bookings.js
=================================================================
/**
 * Booking Mutations - Create, update, delete booking data in Supabase
 */

import { supabase } from '../../utils/supabaseClient';

/**
 * Create new booking
 * @param {Object} bookingData - Booking data
 * @returns {Promise<Object|null>} Created booking or null
 */
export const createBooking = async (bookingData) => {
  try {
    const { data, error } = await supabase
      .from('bookings')
      .insert([bookingData])
      .select()
      .single();

    if (error) throw error;
    console.log('âœ… Booking created:', data.id);
    return data;
  } catch (err) {
    console.error('âŒ Error creating booking:', err);
    return null;
  }
};

/**
 * Update booking status
 * @param {string} bookingId - Booking ID
 * @param {string} status - New status
 * @returns {Promise<Object|null>} Updated booking or null
 */
export const updateBookingStatus = async (bookingId, status) => {
  try {
    const { data, error } = await supabase
      .from('bookings')
      .update({ status, updated_at: new Date().toISOString() })
      .eq('id', bookingId)
      .select()
      .single();

    if (error) throw error;
    console.log(`âœ… Booking ${bookingId} status updated to ${status}`);
    return data;
  } catch (err) {
    console.error(`âŒ Error updating booking status:`, err);
    return null;
  }
};

/**
 * Update booking payment details
 * @param {string} bookingId - Booking ID
 * @param {Object} paymentData - Payment data
 * @returns {Promise<Object|null>} Updated booking or null
 */
export const updateBookingPayment = async (bookingId, paymentData) => {
  try {
    const { data, error } = await supabase
      .from('bookings')
      .update({
        ...paymentData,
        updated_at: new Date().toISOString(),
      })
      .eq('id', bookingId)
      .select()
      .single();

    if (error) throw error;
    console.log(`âœ… Booking ${bookingId} payment updated`);
    return data;
  } catch (err) {
    console.error(`âŒ Error updating booking payment:`, err);
    return null;
  }
};

/**
 * Cancel booking
 * @param {string} bookingId - Booking ID
 * @param {string} reason - Cancellation reason
 * @returns {Promise<Object|null>} Updated booking or null
 */
export const cancelBooking = async (bookingId, reason = '') => {
  try {
    const { data, error } = await supabase
      .from('bookings')
      .update({
        status: 'cancelled',
        cancellation_reason: reason,
        cancelled_at: new Date().toISOString(),
        updated_at: new Date().toISOString(),
      })
      .eq('id', bookingId)
      .select()
      .single();

    if (error) throw error;
    console.log(`âœ… Booking ${bookingId} cancelled`);
    return data;
  } catch (err) {
    console.error(`âŒ Error cancelling booking:`, err);
    return null;
  }
};

/**
 * Add booking item (extra service, etc.)
 * @param {string} bookingId - Booking ID
 * @param {Object} itemData - Item data
 * @returns {Promise<Object|null>} Created item or null
 */
export const addBookingItem = async (bookingId, itemData) => {
  try {
    const { data, error } = await supabase
      .from('booking_items')
      .insert([{ booking_id: bookingId, ...itemData }])
      .select()
      .single();

    if (error) throw error;
    console.log(`âœ… Booking item added to ${bookingId}`);
    return data;
  } catch (err) {
    console.error(`âŒ Error adding booking item:`, err);
    return null;
  }
};

/**
 * Remove booking item
 * @param {string} itemId - Booking item ID
 * @returns {Promise<boolean>} True if successful
 */
export const removeBookingItem = async (itemId) => {
  try {
    const { error } = await supabase
      .from('booking_items')
      .delete()
      .eq('id', itemId);

    if (error) throw error;
    console.log(`âœ… Booking item ${itemId} removed`);
    return true;
  } catch (err) {
    console.error(`âŒ Error removing booking item:`, err);
    return false;
  }
};

/**
 * Update booking notes
 * @param {string} bookingId - Booking ID
 * @param {string} notes - Notes
 * @returns {Promise<Object|null>} Updated booking or null
 */
export const updateBookingNotes = async (bookingId, notes) => {
  try {
    const { data, error } = await supabase
      .from('bookings')
      .update({
        special_requests: notes,
        updated_at: new Date().toISOString(),
      })
      .eq('id', bookingId)
      .select()
      .single();

    if (error) throw error;
    console.log(`âœ… Booking ${bookingId} notes updated`);
    return data;
  } catch (err) {
    console.error(`âŒ Error updating booking notes:`, err);
    return null;
  }
};

/**
 * Bulk update bookings
 * @param {Array} bookingIds - Array of booking IDs
 * @param {Object} updateData - Data to update
 * @returns {Promise<Array|null>} Updated bookings or null
 */
export const bulkUpdateBookings = async (bookingIds, updateData) => {
  try {
    const { data, error } = await supabase
      .from('bookings')
      .update({
        ...updateData,
        updated_at: new Date().toISOString(),
      })
      .in('id', bookingIds)
      .select();

    if (error) throw error;
    console.log(`âœ… ${data.length} bookings updated`);
    return data;
  } catch (err) {
    console.error(`âŒ Error bulk updating bookings:`, err);
    return null;
  }
};

/**
 * Delete booking (hard delete - use with caution)
 * @param {string} bookingId - Booking ID
 * @returns {Promise<boolean>} True if successful
 */
export const deleteBooking = async (bookingId) => {
  try {
    const { error } = await supabase
      .from('bookings')
      .delete()
      .eq('id', bookingId);

    if (error) throw error;
    console.log(`âœ… Booking ${bookingId} deleted`);
    return true;
  } catch (err) {
    console.error(`âŒ Error deleting booking:`, err);
    return false;
  }
};


=================================================================
FILE PATH: src\db\mutations\restaurants.js
=================================================================
/**
 * Restaurant Booking Mutations - Create, update, delete restaurant booking data
 */

import { supabase } from '../../utils/supabaseClient';

/**
 * Create restaurant booking
 * @param {Object} bookingData - Booking data
 * @returns {Promise<Object|null>} Created booking or null
 */
export const createRestaurantBooking = async (bookingData) => {
  try {
    const { data, error } = await supabase
      .from('restaurant_bookings')
      .insert([bookingData])
      .select()
      .single();

    if (error) throw error;
    console.log('âœ… Restaurant booking created:', data.id);
    return data;
  } catch (err) {
    console.error('âŒ Error creating restaurant booking:', err);
    return null;
  }
};

/**
 * Update restaurant booking status
 * @param {string} bookingId - Booking ID
 * @param {string} status - New status
 * @returns {Promise<Object|null>} Updated booking or null
 */
export const updateRestaurantBookingStatus = async (bookingId, status) => {
  try {
    const { data, error } = await supabase
      .from('restaurant_bookings')
      .update({ status, updated_at: new Date().toISOString() })
      .eq('id', bookingId)
      .select()
      .single();

    if (error) throw error;
    console.log(`âœ… Restaurant booking ${bookingId} status updated to ${status}`);
    return data;
  } catch (err) {
    console.error(`âŒ Error updating restaurant booking status:`, err);
    return null;
  }
};

/**
 * Update restaurant booking payment
 * @param {string} bookingId - Booking ID
 * @param {Object} paymentData - Payment data
 * @returns {Promise<Object|null>} Updated booking or null
 */
export const updateRestaurantBookingPayment = async (bookingId, paymentData) => {
  try {
    const { data, error } = await supabase
      .from('restaurant_bookings')
      .update({
        ...paymentData,
        updated_at: new Date().toISOString(),
      })
      .eq('id', bookingId)
      .select()
      .single();

    if (error) throw error;
    console.log(`âœ… Restaurant booking ${bookingId} payment updated`);
    return data;
  } catch (err) {
    console.error(`âŒ Error updating restaurant booking payment:`, err);
    return null;
  }
};

/**
 * Cancel restaurant booking
 * @param {string} bookingId - Booking ID
 * @param {string} reason - Cancellation reason
 * @returns {Promise<Object|null>} Updated booking or null
 */
export const cancelRestaurantBooking = async (bookingId, reason = '') => {
  try {
    const { data, error } = await supabase
      .from('restaurant_bookings')
      .update({
        status: 'cancelled',
        cancellation_reason: reason,
        cancelled_at: new Date().toISOString(),
        updated_at: new Date().toISOString(),
      })
      .eq('id', bookingId)
      .select()
      .single();

    if (error) throw error;
    console.log(`âœ… Restaurant booking ${bookingId} cancelled`);
    return data;
  } catch (err) {
    console.error(`âŒ Error cancelling restaurant booking:`, err);
    return null;
  }
};

/**
 * Update restaurant booking notes
 * @param {string} bookingId - Booking ID
 * @param {string} notes - Special requests/notes
 * @returns {Promise<Object|null>} Updated booking or null
 */
export const updateRestaurantBookingNotes = async (bookingId, notes) => {
  try {
    const { data, error } = await supabase
      .from('restaurant_bookings')
      .update({
        special_requests: notes,
        updated_at: new Date().toISOString(),
      })
      .eq('id', bookingId)
      .select()
      .single();

    if (error) throw error;
    console.log(`âœ… Restaurant booking ${bookingId} notes updated`);
    return data;
  } catch (err) {
    console.error(`âŒ Error updating restaurant booking notes:`, err);
    return null;
  }
};

/**
 * Delete restaurant booking
 * @param {string} bookingId - Booking ID
 * @returns {Promise<boolean>} True if successful
 */
export const deleteRestaurantBooking = async (bookingId) => {
  try {
    const { error } = await supabase
      .from('restaurant_bookings')
      .delete()
      .eq('id', bookingId);

    if (error) throw error;
    console.log(`âœ… Restaurant booking ${bookingId} deleted`);
    return true;
  } catch (err) {
    console.error(`âŒ Error deleting restaurant booking:`, err);
    return false;
  }
};

/**
 * Bulk update restaurant bookings
 * @param {Array} bookingIds - Array of booking IDs
 * @param {Object} updateData - Data to update
 * @returns {Promise<Array|null>} Updated bookings or null
 */
export const bulkUpdateRestaurantBookings = async (bookingIds, updateData) => {
  try {
    const { data, error } = await supabase
      .from('restaurant_bookings')
      .update({
        ...updateData,
        updated_at: new Date().toISOString(),
      })
      .in('id', bookingIds)
      .select();

    if (error) throw error;
    console.log(`âœ… ${data.length} restaurant bookings updated`);
    return data;
  } catch (err) {
    console.error(`âŒ Error bulk updating restaurant bookings:`, err);
    return null;
  }
};


=================================================================
FILE PATH: src\db\mutations\reviews.js
=================================================================
/**
 * Review Mutations - Create, update, delete review data in Supabase
 */

import { supabase } from '../../utils/supabaseClient';

/**
 * Create new review
 * @param {Object} reviewData - Review data
 * @returns {Promise<Object|null>} Created review or null
 */
export const createReview = async (reviewData) => {
  try {
    const { data, error } = await supabase
      .from('reviews')
      .insert([reviewData])
      .select()
      .single();

    if (error) throw error;
    console.log('âœ… Review created:', data.id);
    return data;
  } catch (err) {
    console.error('âŒ Error creating review:', err);
    return null;
  }
};

/**
 * Update review
 * @param {string} reviewId - Review ID
 * @param {Object} updateData - Data to update
 * @returns {Promise<Object|null>} Updated review or null
 */
export const updateReview = async (reviewId, updateData) => {
  try {
    const { data, error } = await supabase
      .from('reviews')
      .update({
        ...updateData,
        updated_at: new Date().toISOString(),
      })
      .eq('id', reviewId)
      .select()
      .single();

    if (error) throw error;
    console.log(`âœ… Review ${reviewId} updated`);
    return data;
  } catch (err) {
    console.error(`âŒ Error updating review:`, err);
    return null;
  }
};

/**
 * Approve review (for admin)
 * @param {string} reviewId - Review ID
 * @returns {Promise<Object|null>} Updated review or null
 */
export const approveReview = async (reviewId) => {
  try {
    const { data, error } = await supabase
      .from('reviews')
      .update({
        is_approved: true,
        approved_at: new Date().toISOString(),
        updated_at: new Date().toISOString(),
      })
      .eq('id', reviewId)
      .select()
      .single();

    if (error) throw error;
    console.log(`âœ… Review ${reviewId} approved`);
    return data;
  } catch (err) {
    console.error(`âŒ Error approving review:`, err);
    return null;
  }
};

/**
 * Reject review (for admin)
 * @param {string} reviewId - Review ID
 * @param {string} reason - Rejection reason
 * @returns {Promise<Object|null>} Updated review or null
 */
export const rejectReview = async (reviewId, reason = '') => {
  try {
    const { data, error } = await supabase
      .from('reviews')
      .update({
        is_approved: false,
        rejection_reason: reason,
        updated_at: new Date().toISOString(),
      })
      .eq('id', reviewId)
      .select()
      .single();

    if (error) throw error;
    console.log(`âœ… Review ${reviewId} rejected`);
    return data;
  } catch (err) {
    console.error(`âŒ Error rejecting review:`, err);
    return null;
  }
};

/**
 * Delete review
 * @param {string} reviewId - Review ID
 * @returns {Promise<boolean>} True if successful
 */
export const deleteReview = async (reviewId) => {
  try {
    const { error } = await supabase
      .from('reviews')
      .delete()
      .eq('id', reviewId);

    if (error) throw error;
    console.log(`âœ… Review ${reviewId} deleted`);
    return true;
  } catch (err) {
    console.error(`âŒ Error deleting review:`, err);
    return false;
  }
};

/**
 * Add review response (for admin/staff)
 * @param {string} reviewId - Review ID
 * @param {string} response - Response text
 * @returns {Promise<Object|null>} Updated review or null
 */
export const addReviewResponse = async (reviewId, response) => {
  try {
    const { data, error } = await supabase
      .from('reviews')
      .update({
        admin_response: response,
        responded_at: new Date().toISOString(),
        updated_at: new Date().toISOString(),
      })
      .eq('id', reviewId)
      .select()
      .single();

    if (error) throw error;
    console.log(`âœ… Response added to review ${reviewId}`);
    return data;
  } catch (err) {
    console.error(`âŒ Error adding review response:`, err);
    return null;
  }
};

/**
 * Mark review as helpful
 * @param {string} reviewId - Review ID
 * @returns {Promise<Object|null>} Updated review or null
 */
export const markReviewHelpful = async (reviewId) => {
  try {
    const { data, error } = await supabase
      .from('reviews')
      .update({
        helpful_count: supabase.raw('helpful_count + 1'),
        updated_at: new Date().toISOString(),
      })
      .eq('id', reviewId)
      .select()
      .single();

    if (error) throw error;
    console.log(`âœ… Review ${reviewId} marked as helpful`);
    return data;
  } catch (err) {
    console.error(`âŒ Error marking review as helpful:`, err);
    return null;
  }
};

/**
 * Bulk approve reviews
 * @param {Array} reviewIds - Array of review IDs
 * @returns {Promise<Array|null>} Updated reviews or null
 */
export const bulkApproveReviews = async (reviewIds) => {
  try {
    const { data, error } = await supabase
      .from('reviews')
      .update({
        is_approved: true,
        approved_at: new Date().toISOString(),
        updated_at: new Date().toISOString(),
      })
      .in('id', reviewIds)
      .select();

    if (error) throw error;
    console.log(`âœ… ${data.length} reviews approved`);
    return data;
  } catch (err) {
    console.error(`âŒ Error bulk approving reviews:`, err);
    return null;
  }
};


=================================================================
FILE PATH: src\db\mutations\spas.js
=================================================================
/**
 * Spa Booking Mutations - Create, update, delete spa booking data
 */

import { supabase } from '../../utils/supabaseClient';

/**
 * Create spa booking
 * @param {Object} bookingData - Booking data
 * @returns {Promise<Object|null>} Created booking or null
 */
export const createSpaBooking = async (bookingData) => {
  try {
    const { data, error } = await supabase
      .from('spa_bookings')
      .insert([bookingData])
      .select()
      .single();

    if (error) throw error;
    console.log('âœ… Spa booking created:', data.id);
    return data;
  } catch (err) {
    console.error('âŒ Error creating spa booking:', err);
    return null;
  }
};

/**
 * Update spa booking status
 * @param {string} bookingId - Booking ID
 * @param {string} status - New status
 * @returns {Promise<Object|null>} Updated booking or null
 */
export const updateSpaBookingStatus = async (bookingId, status) => {
  try {
    const { data, error } = await supabase
      .from('spa_bookings')
      .update({ status, updated_at: new Date().toISOString() })
      .eq('id', bookingId)
      .select()
      .single();

    if (error) throw error;
    console.log(`âœ… Spa booking ${bookingId} status updated to ${status}`);
    return data;
  } catch (err) {
    console.error(`âŒ Error updating spa booking status:`, err);
    return null;
  }
};

/**
 * Update spa booking payment
 * @param {string} bookingId - Booking ID
 * @param {Object} paymentData - Payment data
 * @returns {Promise<Object|null>} Updated booking or null
 */
export const updateSpaBookingPayment = async (bookingId, paymentData) => {
  try {
    const { data, error } = await supabase
      .from('spa_bookings')
      .update({
        ...paymentData,
        updated_at: new Date().toISOString(),
      })
      .eq('id', bookingId)
      .select()
      .single();

    if (error) throw error;
    console.log(`âœ… Spa booking ${bookingId} payment updated`);
    return data;
  } catch (err) {
    console.error(`âŒ Error updating spa booking payment:`, err);
    return null;
  }
};

/**
 * Cancel spa booking
 * @param {string} bookingId - Booking ID
 * @param {string} reason - Cancellation reason
 * @returns {Promise<Object|null>} Updated booking or null
 */
export const cancelSpaBooking = async (bookingId, reason = '') => {
  try {
    const { data, error } = await supabase
      .from('spa_bookings')
      .update({
        status: 'cancelled',
        cancellation_reason: reason,
        cancelled_at: new Date().toISOString(),
        updated_at: new Date().toISOString(),
      })
      .eq('id', bookingId)
      .select()
      .single();

    if (error) throw error;
    console.log(`âœ… Spa booking ${bookingId} cancelled`);
    return data;
  } catch (err) {
    console.error(`âŒ Error cancelling spa booking:`, err);
    return null;
  }
};

/**
 * Update spa booking notes
 * @param {string} bookingId - Booking ID
 * @param {string} notes - Special requests/notes
 * @returns {Promise<Object|null>} Updated booking or null
 */
export const updateSpaBookingNotes = async (bookingId, notes) => {
  try {
    const { data, error } = await supabase
      .from('spa_bookings')
      .update({
        special_requests: notes,
        updated_at: new Date().toISOString(),
      })
      .eq('id', bookingId)
      .select()
      .single();

    if (error) throw error;
    console.log(`âœ… Spa booking ${bookingId} notes updated`);
    return data;
  } catch (err) {
    console.error(`âŒ Error updating spa booking notes:`, err);
    return null;
  }
};

/**
 * Delete spa booking
 * @param {string} bookingId - Booking ID
 * @returns {Promise<boolean>} True if successful
 */
export const deleteSpaBooking = async (bookingId) => {
  try {
    const { error } = await supabase
      .from('spa_bookings')
      .delete()
      .eq('id', bookingId);

    if (error) throw error;
    console.log(`âœ… Spa booking ${bookingId} deleted`);
    return true;
  } catch (err) {
    console.error(`âŒ Error deleting spa booking:`, err);
    return false;
  }
};

/**
 * Bulk update spa bookings
 * @param {Array} bookingIds - Array of booking IDs
 * @param {Object} updateData - Data to update
 * @returns {Promise<Array|null>} Updated bookings or null
 */
export const bulkUpdateSpaBookings = async (bookingIds, updateData) => {
  try {
    const { data, error } = await supabase
      .from('spa_bookings')
      .update({
        ...updateData,
        updated_at: new Date().toISOString(),
      })
      .in('id', bookingIds)
      .select();

    if (error) throw error;
    console.log(`âœ… ${data.length} spa bookings updated`);
    return data;
  } catch (err) {
    console.error(`âŒ Error bulk updating spa bookings:`, err);
    return null;
  }
};


=================================================================
FILE PATH: src\db\queries\bookings.js
=================================================================
/**
 * Booking Queries - Fetch booking data from Supabase
 */

import { supabase } from '../../utils/supabaseClient';

/**
 * Fetch all bookings for current user
 * @param {string} userId - User ID
 * @returns {Promise<Array>} Array of user bookings
 */
export const fetchUserBookings = async (userId) => {
  try {
    const { data, error } = await supabase
      .from('bookings')
      .select(`
        *,
        rooms:room_id (
          room_no,
          room_types:room_type_id (name, code)
        ),
        booking_items (*)
      `)
      .eq('user_id', userId)
      .order('check_in_date', { ascending: false });

    if (error) throw error;
    return data || [];
  } catch (err) {
    console.error(`âŒ Error fetching bookings for user ${userId}:`, err);
    return [];
  }
};

/**
 * Fetch single booking by ID
 * @param {string} bookingId - Booking ID
 * @returns {Promise<Object|null>} Booking object or null
 */
export const fetchBookingById = async (bookingId) => {
  try {
    const { data, error } = await supabase
      .from('bookings')
      .select(`
        *,
        rooms:room_id (
          room_no,
          room_types:room_type_id (name, code)
        ),
        booking_items (*)
      `)
      .eq('id', bookingId)
      .single();

    if (error) throw error;
    return data || null;
  } catch (err) {
    console.error(`âŒ Error fetching booking ${bookingId}:`, err);
    return null;
  }
};

/**
 * Fetch bookings by status
 * @param {string} status - Booking status (pending, confirmed, cancelled, completed)
 * @returns {Promise<Array>} Array of bookings with that status
 */
export const fetchBookingsByStatus = async (status) => {
  try {
    const { data, error } = await supabase
      .from('bookings')
      .select(`
        *,
        rooms:room_id (room_no),
        booking_items (*)
      `)
      .eq('status', status)
      .order('created_at', { ascending: false });

    if (error) throw error;
    return data || [];
  } catch (err) {
    console.error(`âŒ Error fetching bookings with status ${status}:`, err);
    return [];
  }
};

/**
 * Fetch bookings for date range
 * @param {string} startDate - Start date (YYYY-MM-DD)
 * @param {string} endDate - End date (YYYY-MM-DD)
 * @returns {Promise<Array>} Array of bookings in date range
 */
export const fetchBookingsByDateRange = async (startDate, endDate) => {
  try {
    const { data, error } = await supabase
      .from('bookings')
      .select(`
        *,
        rooms:room_id (room_no),
        booking_items (*)
      `)
      .gte('check_in_date', startDate)
      .lte('check_out_date', endDate)
      .order('check_in_date', { ascending: true });

    if (error) throw error;
    return data || [];
  } catch (err) {
    console.error(`âŒ Error fetching bookings for date range:`, err);
    return [];
  }
};

/**
 * Fetch booking items for a booking
 * @param {string} bookingId - Booking ID
 * @returns {Promise<Array>} Array of booking items
 */
export const fetchBookingItems = async (bookingId) => {
  try {
    const { data, error } = await supabase
      .from('booking_items')
      .select('*')
      .eq('booking_id', bookingId);

    if (error) throw error;
    return data || [];
  } catch (err) {
    console.error(`âŒ Error fetching booking items for ${bookingId}:`, err);
    return [];
  }
};

/**
 * Check if user has booked a specific room type
 * @param {string} userId - User ID
 * @param {string} roomTypeId - Room type ID
 * @returns {Promise<boolean>} True if user has booked this room type
 */
export const hasUserBookedRoomType = async (userId, roomTypeId) => {
  try {
    const { data, error } = await supabase
      .from('bookings')
      .select('id', { count: 'exact' })
      .eq('user_id', userId)
      .eq('status', 'confirmed')
      .in('room_id', 
        supabase.from('rooms').select('id').eq('room_type_id', roomTypeId)
      );

    if (error) throw error;
    return (data?.length || 0) > 0;
  } catch (err) {
    console.error(`âŒ Error checking if user booked room type:`, err);
    return false;
  }
};

/**
 * Fetch recent bookings (last N days)
 * @param {number} days - Number of days to look back
 * @returns {Promise<Array>} Array of recent bookings
 */
export const fetchRecentBookings = async (days = 30) => {
  try {
    const startDate = new Date();
    startDate.setDate(startDate.getDate() - days);
    const dateStr = startDate.toISOString().split('T')[0];

    const { data, error } = await supabase
      .from('bookings')
      .select(`
        *,
        rooms:room_id (room_no),
        booking_items (*)
      `)
      .gte('created_at', dateStr)
      .order('created_at', { ascending: false });

    if (error) throw error;
    return data || [];
  } catch (err) {
    console.error(`âŒ Error fetching recent bookings:`, err);
    return [];
  }
};


=================================================================
FILE PATH: src\db\queries\restaurants.js
=================================================================
/**
 * Restaurant Booking Queries - Fetch restaurant booking data from Supabase
 */

import { supabase } from '../../utils/supabaseClient';

/**
 * Fetch all restaurant bookings for user
 * @param {string} userId - User ID
 * @returns {Promise<Array>} Array of restaurant bookings
 */
export const fetchUserRestaurantBookings = async (userId) => {
  try {
    const { data, error } = await supabase
      .from('restaurant_bookings')
      .select('*')
      .eq('user_id', userId)
      .order('booking_date', { ascending: false });

    if (error) throw error;
    return data || [];
  } catch (err) {
    console.error(`âŒ Error fetching restaurant bookings for user ${userId}:`, err);
    return [];
  }
};

/**
 * Fetch single restaurant booking by ID
 * @param {string} bookingId - Restaurant booking ID
 * @returns {Promise<Object|null>} Restaurant booking or null
 */
export const fetchRestaurantBookingById = async (bookingId) => {
  try {
    const { data, error } = await supabase
      .from('restaurant_bookings')
      .select('*')
      .eq('id', bookingId)
      .single();

    if (error) throw error;
    return data || null;
  } catch (err) {
    console.error(`âŒ Error fetching restaurant booking ${bookingId}:`, err);
    return null;
  }
};

/**
 * Fetch restaurant bookings by status
 * @param {string} status - Booking status (pending, confirmed, cancelled, completed)
 * @returns {Promise<Array>} Array of restaurant bookings
 */
export const fetchRestaurantBookingsByStatus = async (status) => {
  try {
    const { data, error } = await supabase
      .from('restaurant_bookings')
      .select('*')
      .eq('status', status)
      .order('booking_date', { ascending: false });

    if (error) throw error;
    return data || [];
  } catch (err) {
    console.error(`âŒ Error fetching restaurant bookings with status ${status}:`, err);
    return [];
  }
};

/**
 * Fetch restaurant bookings for date range
 * @param {string} startDate - Start date (YYYY-MM-DD)
 * @param {string} endDate - End date (YYYY-MM-DD)
 * @returns {Promise<Array>} Array of restaurant bookings
 */
export const fetchRestaurantBookingsByDateRange = async (startDate, endDate) => {
  try {
    const { data, error } = await supabase
      .from('restaurant_bookings')
      .select('*')
      .gte('booking_date', startDate)
      .lte('booking_date', endDate)
      .order('booking_date', { ascending: true });

    if (error) throw error;
    return data || [];
  } catch (err) {
    console.error(`âŒ Error fetching restaurant bookings for date range:`, err);
    return [];
  }
};

/**
 * Fetch available restaurant time slots for date
 * @param {string} bookingDate - Date (YYYY-MM-DD)
 * @param {number} partySize - Number of people
 * @returns {Promise<Array>} Array of available time slots
 */
export const fetchAvailableRestaurantSlots = async (bookingDate, partySize) => {
  try {
    const { data, error } = await supabase
      .rpc('get_available_restaurant_slots', {
        p_booking_date: bookingDate,
        p_party_size: partySize,
      });

    if (error) throw error;
    return data || [];
  } catch (err) {
    console.error(`âŒ Error fetching available restaurant slots:`, err);
    return [];
  }
};

/**
 * Check restaurant availability for time slot
 * @param {string} bookingDate - Date (YYYY-MM-DD)
 * @param {string} timeSlot - Time slot (HH:MM)
 * @param {number} partySize - Number of people
 * @returns {Promise<boolean>} True if available
 */
export const checkRestaurantAvailability = async (bookingDate, timeSlot, partySize) => {
  try {
    const { data, error } = await supabase
      .rpc('check_restaurant_availability', {
        p_booking_date: bookingDate,
        p_time_slot: timeSlot,
        p_party_size: partySize,
      });

    if (error) throw error;
    return data === true;
  } catch (err) {
    console.error(`âŒ Error checking restaurant availability:`, err);
    return false;
  }
};

/**
 * Fetch restaurant booking statistics
 * @returns {Promise<Object>} Statistics object
 */
export const fetchRestaurantBookingStats = async () => {
  try {
    const { data: total, error: totalError } = await supabase
      .from('restaurant_bookings')
      .select('id', { count: 'exact' });

    const { data: confirmed, error: confirmedError } = await supabase
      .from('restaurant_bookings')
      .select('id', { count: 'exact' })
      .eq('status', 'confirmed');

    const { data: pending, error: pendingError } = await supabase
      .from('restaurant_bookings')
      .select('id', { count: 'exact' })
      .eq('status', 'pending');

    if (totalError || confirmedError || pendingError) {
      throw new Error('Error fetching stats');
    }

    return {
      total: total?.length || 0,
      confirmed: confirmed?.length || 0,
      pending: pending?.length || 0,
    };
  } catch (err) {
    console.error('âŒ Error fetching restaurant booking stats:', err);
    return { total: 0, confirmed: 0, pending: 0 };
  }
};


=================================================================
FILE PATH: src\db\queries\reviews.js
=================================================================
/**
 * Review Queries - Fetch review data from Supabase
 */

import { supabase } from '../../utils/supabaseClient';

/**
 * Fetch all reviews for a room
 * @param {string} roomId - Room ID
 * @returns {Promise<Array>} Array of reviews
 */
export const fetchRoomReviews = async (roomId) => {
  try {
    const { data, error } = await supabase
      .from('reviews')
      .select('*')
      .eq('room_id', roomId)
      .eq('is_approved', true)
      .order('created_at', { ascending: false });

    if (error) throw error;
    return data || [];
  } catch (err) {
    console.error(`âŒ Error fetching reviews for room ${roomId}:`, err);
    return [];
  }
};

/**
 * Fetch reviews for a room type
 * @param {string} roomTypeId - Room type ID
 * @returns {Promise<Array>} Array of reviews
 */
export const fetchRoomTypeReviews = async (roomTypeId) => {
  try {
    const { data, error } = await supabase
      .from('reviews')
      .select(`
        *,
        rooms:room_id (room_type_id)
      `)
      .eq('rooms.room_type_id', roomTypeId)
      .eq('is_approved', true)
      .order('created_at', { ascending: false });

    if (error) throw error;
    return data || [];
  } catch (err) {
    console.error(`âŒ Error fetching reviews for room type ${roomTypeId}:`, err);
    return [];
  }
};

/**
 * Fetch user reviews
 * @param {string} userId - User ID
 * @returns {Promise<Array>} Array of user reviews
 */
export const fetchUserReviews = async (userId) => {
  try {
    const { data, error } = await supabase
      .from('reviews')
      .select(`
        *,
        rooms:room_id (room_no, room_types:room_type_id (name))
      `)
      .eq('user_id', userId)
      .order('created_at', { ascending: false });

    if (error) throw error;
    return data || [];
  } catch (err) {
    console.error(`âŒ Error fetching reviews for user ${userId}:`, err);
    return [];
  }
};

/**
 * Fetch single review by ID
 * @param {string} reviewId - Review ID
 * @returns {Promise<Object|null>} Review object or null
 */
export const fetchReviewById = async (reviewId) => {
  try {
    const { data, error } = await supabase
      .from('reviews')
      .select(`
        *,
        rooms:room_id (room_no)
      `)
      .eq('id', reviewId)
      .single();

    if (error) throw error;
    return data || null;
  } catch (err) {
    console.error(`âŒ Error fetching review ${reviewId}:`, err);
    return null;
  }
};

/**
 * Fetch reviews with rating filter
 * @param {number} minRating - Minimum rating (1-5)
 * @returns {Promise<Array>} Array of reviews with rating >= minRating
 */
export const fetchReviewsByRating = async (minRating) => {
  try {
    const { data, error } = await supabase
      .from('reviews')
      .select('*')
      .gte('overall_rating', minRating)
      .eq('is_approved', true)
      .order('overall_rating', { ascending: false });

    if (error) throw error;
    return data || [];
  } catch (err) {
    console.error(`âŒ Error fetching reviews with rating >= ${minRating}:`, err);
    return [];
  }
};

/**
 * Fetch pending reviews (for admin approval)
 * @returns {Promise<Array>} Array of pending reviews
 */
export const fetchPendingReviews = async () => {
  try {
    const { data, error } = await supabase
      .from('reviews')
      .select(`
        *,
        rooms:room_id (room_no)
      `)
      .eq('is_approved', false)
      .order('created_at', { ascending: true });

    if (error) throw error;
    return data || [];
  } catch (err) {
    console.error('âŒ Error fetching pending reviews:', err);
    return [];
  }
};

/**
 * Get average rating for a room
 * @param {string} roomId - Room ID
 * @returns {Promise<number>} Average rating (0-5)
 */
export const fetchRoomAverageRating = async (roomId) => {
  try {
    const { data, error } = await supabase
      .from('reviews')
      .select('overall_rating')
      .eq('room_id', roomId)
      .eq('is_approved', true);

    if (error) throw error;

    if (!data || data.length === 0) return 0;

    const sum = data.reduce((acc, review) => acc + (review.overall_rating || 0), 0);
    return Math.round((sum / data.length) * 10) / 10;
  } catch (err) {
    console.error(`âŒ Error calculating average rating for room ${roomId}:`, err);
    return 0;
  }
};

/**
 * Get review statistics for a room
 * @param {string} roomId - Room ID
 * @returns {Promise<Object>} Review statistics
 */
export const fetchRoomReviewStats = async (roomId) => {
  try {
    const { data, error } = await supabase
      .from('reviews')
      .select('overall_rating')
      .eq('room_id', roomId)
      .eq('is_approved', true);

    if (error) throw error;

    if (!data || data.length === 0) {
      return { count: 0, average: 0, distribution: {} };
    }

    const ratings = data.map(r => r.overall_rating || 0);
    const sum = ratings.reduce((a, b) => a + b, 0);
    const average = Math.round((sum / ratings.length) * 10) / 10;

    const distribution = {};
    for (let i = 1; i <= 5; i++) {
      distribution[i] = ratings.filter(r => r === i).length;
    }

    return {
      count: data.length,
      average,
      distribution,
    };
  } catch (err) {
    console.error(`âŒ Error fetching review stats for room ${roomId}:`, err);
    return { count: 0, average: 0, distribution: {} };
  }
};


=================================================================
FILE PATH: src\db\queries\rooms.js
=================================================================
/**
 * Room Queries - Fetch room data from Supabase
 */

import { supabase } from '../../utils/supabaseClient';
import { getImageUrlsByRoomType } from '../../utils/supabaseStorageUrls';

/**
 * Fetch all rooms with room types and images
 * @returns {Promise<Array>} Array of rooms with images
 */
export const fetchAllRooms = async () => {
  try {
    const { data, error } = await supabase
      .from('rooms')
      .select(`
        *,
        room_types:room_type_id (*)
      `)
      .eq('status', 'available');

    if (error) throw error;

    // Enrich with Supabase Storage image URLs
    return (data || []).map((room) => {
      const roomTypeCode = room.room_types?.code;
      const imageUrls = getImageUrlsByRoomType(roomTypeCode);

      return {
        ...room,
        image_url: imageUrls.image_url,
        image_lg_url: imageUrls.image_lg_url,
      };
    });
  } catch (err) {
    console.error('âŒ Error fetching all rooms:', err);
    return [];
  }
};

/**
 * Fetch single room by ID
 * @param {string} roomId - Room ID
 * @returns {Promise<Object|null>} Room object or null
 */
export const fetchRoomById = async (roomId) => {
  try {
    const { data, error } = await supabase
      .from('rooms')
      .select(`
        *,
        room_types:room_type_id (*)
      `)
      .eq('id', roomId)
      .single();

    if (error) throw error;

    if (!data) return null;

    // Enrich with images
    const roomTypeCode = data.room_types?.code;
    const imageUrls = getImageUrlsByRoomType(roomTypeCode);

    return {
      ...data,
      image_url: imageUrls.image_url,
      image_lg_url: imageUrls.image_lg_url,
    };
  } catch (err) {
    console.error(`âŒ Error fetching room ${roomId}:`, err);
    return null;
  }
};

/**
 * Fetch rooms by room type
 * @param {string} roomTypeCode - Room type code (STD, DLX, SUI, PEN, CMB)
 * @returns {Promise<Array>} Array of rooms of that type
 */
export const fetchRoomsByType = async (roomTypeCode) => {
  try {
    // First get room type ID
    const { data: roomType, error: typeError } = await supabase
      .from('room_types')
      .select('id')
      .eq('code', roomTypeCode)
      .single();

    if (typeError) throw typeError;
    if (!roomType) return [];

    // Then fetch rooms of that type
    const { data, error } = await supabase
      .from('rooms')
      .select(`
        *,
        room_types:room_type_id (*)
      `)
      .eq('room_type_id', roomType.id)
      .eq('status', 'available');

    if (error) throw error;

    // Enrich with images
    const imageUrls = getImageUrlsByRoomType(roomTypeCode);
    return (data || []).map((room) => ({
      ...room,
      image_url: imageUrls.image_url,
      image_lg_url: imageUrls.image_lg_url,
    }));
  } catch (err) {
    console.error(`âŒ Error fetching rooms by type ${roomTypeCode}:`, err);
    return [];
  }
};

/**
 * Fetch available rooms for date range
 * @param {string} checkIn - Check-in date (YYYY-MM-DD)
 * @param {string} checkOut - Check-out date (YYYY-MM-DD)
 * @param {number} guests - Number of guests
 * @returns {Promise<Array>} Array of available rooms
 */
export const fetchAvailableRooms = async (checkIn, checkOut, guests) => {
  try {
    const { data, error } = await supabase
      .rpc('get_available_rooms', {
        p_check_in: checkIn,
        p_check_out: checkOut,
        p_guest_count: guests,
      });

    if (error) throw error;

    // Enrich with images
    return (data || []).map((room) => {
      const roomTypeCode = room.room_types?.code;
      const imageUrls = getImageUrlsByRoomType(roomTypeCode);

      return {
        ...room,
        image_url: imageUrls.image_url,
        image_lg_url: imageUrls.image_lg_url,
      };
    });
  } catch (err) {
    console.error('âŒ Error fetching available rooms:', err);
    return [];
  }
};

/**
 * Fetch room types
 * @returns {Promise<Array>} Array of room types
 */
export const fetchRoomTypes = async () => {
  try {
    const { data, error } = await supabase
      .from('room_types')
      .select('*')
      .eq('is_active', true);

    if (error) throw error;
    return data || [];
  } catch (err) {
    console.error('âŒ Error fetching room types:', err);
    return [];
  }
};

/**
 * Fetch room amenities
 * @returns {Promise<Array>} Array of amenities
 */
export const fetchAmenities = async () => {
  try {
    const { data, error } = await supabase
      .from('amenities')
      .select('*')
      .eq('is_active', true);

    if (error) throw error;
    return data || [];
  } catch (err) {
    console.error('âŒ Error fetching amenities:', err);
    return [];
  }
};

/**
 * Check room availability for specific date range
 * @param {string} roomId - Room ID
 * @param {string} checkIn - Check-in date (YYYY-MM-DD)
 * @param {string} checkOut - Check-out date (YYYY-MM-DD)
 * @returns {Promise<boolean>} True if available
 */
export const checkRoomAvailability = async (roomId, checkIn, checkOut) => {
  try {
    const { data, error } = await supabase
      .rpc('check_room_availability', {
        p_room_id: roomId,
        p_check_in: checkIn,
        p_check_out: checkOut,
      });

    if (error) throw error;
    return data === true;
  } catch (err) {
    console.error(`âŒ Error checking availability for room ${roomId}:`, err);
    return false;
  }
};


=================================================================
FILE PATH: src\db\queries\spas.js
=================================================================
/**
 * Spa Booking Queries - Fetch spa booking data from Supabase
 */

import { supabase } from '../../utils/supabaseClient';

/**
 * Fetch all spa bookings for user
 * @param {string} userId - User ID
 * @returns {Promise<Array>} Array of spa bookings
 */
export const fetchUserSpaBookings = async (userId) => {
  try {
    const { data, error } = await supabase
      .from('spa_bookings')
      .select('*')
      .eq('user_id', userId)
      .order('booking_date', { ascending: false });

    if (error) throw error;
    return data || [];
  } catch (err) {
    console.error(`âŒ Error fetching spa bookings for user ${userId}:`, err);
    return [];
  }
};

/**
 * Fetch single spa booking by ID
 * @param {string} bookingId - Spa booking ID
 * @returns {Promise<Object|null>} Spa booking or null
 */
export const fetchSpaBookingById = async (bookingId) => {
  try {
    const { data, error } = await supabase
      .from('spa_bookings')
      .select('*')
      .eq('id', bookingId)
      .single();

    if (error) throw error;
    return data || null;
  } catch (err) {
    console.error(`âŒ Error fetching spa booking ${bookingId}:`, err);
    return null;
  }
};

/**
 * Fetch spa bookings by status
 * @param {string} status - Booking status (pending, confirmed, cancelled, completed)
 * @returns {Promise<Array>} Array of spa bookings
 */
export const fetchSpaBookingsByStatus = async (status) => {
  try {
    const { data, error } = await supabase
      .from('spa_bookings')
      .select('*')
      .eq('status', status)
      .order('booking_date', { ascending: false });

    if (error) throw error;
    return data || [];
  } catch (err) {
    console.error(`âŒ Error fetching spa bookings with status ${status}:`, err);
    return [];
  }
};

/**
 * Fetch spa bookings for date range
 * @param {string} startDate - Start date (YYYY-MM-DD)
 * @param {string} endDate - End date (YYYY-MM-DD)
 * @returns {Promise<Array>} Array of spa bookings
 */
export const fetchSpaBookingsByDateRange = async (startDate, endDate) => {
  try {
    const { data, error } = await supabase
      .from('spa_bookings')
      .select('*')
      .gte('booking_date', startDate)
      .lte('booking_date', endDate)
      .order('booking_date', { ascending: true });

    if (error) throw error;
    return data || [];
  } catch (err) {
    console.error(`âŒ Error fetching spa bookings for date range:`, err);
    return [];
  }
};

/**
 * Fetch available spa time slots for date
 * @param {string} bookingDate - Date (YYYY-MM-DD)
 * @param {string} serviceType - Service type (massage, facial, etc.)
 * @returns {Promise<Array>} Array of available time slots
 */
export const fetchAvailableSpaSlots = async (bookingDate, serviceType) => {
  try {
    const { data, error } = await supabase
      .rpc('get_available_spa_slots', {
        p_booking_date: bookingDate,
        p_service_type: serviceType,
      });

    if (error) throw error;
    return data || [];
  } catch (err) {
    console.error(`âŒ Error fetching available spa slots:`, err);
    return [];
  }
};

/**
 * Check spa availability for time slot
 * @param {string} bookingDate - Date (YYYY-MM-DD)
 * @param {string} timeSlot - Time slot (HH:MM)
 * @param {string} serviceType - Service type
 * @returns {Promise<boolean>} True if available
 */
export const checkSpaAvailability = async (bookingDate, timeSlot, serviceType) => {
  try {
    const { data, error } = await supabase
      .rpc('check_spa_availability', {
        p_booking_date: bookingDate,
        p_time_slot: timeSlot,
        p_service_type: serviceType,
      });

    if (error) throw error;
    return data === true;
  } catch (err) {
    console.error(`âŒ Error checking spa availability:`, err);
    return false;
  }
};

/**
 * Fetch spa services
 * @returns {Promise<Array>} Array of spa services
 */
export const fetchSpaServices = async () => {
  try {
    const { data, error } = await supabase
      .from('spa_services')
      .select('*')
      .eq('is_active', true)
      .order('name', { ascending: true });

    if (error) throw error;
    return data || [];
  } catch (err) {
    console.error('âŒ Error fetching spa services:', err);
    return [];
  }
};

/**
 * Fetch spa service by ID
 * @param {string} serviceId - Service ID
 * @returns {Promise<Object|null>} Spa service or null
 */
export const fetchSpaServiceById = async (serviceId) => {
  try {
    const { data, error } = await supabase
      .from('spa_services')
      .select('*')
      .eq('id', serviceId)
      .single();

    if (error) throw error;
    return data || null;
  } catch (err) {
    console.error(`âŒ Error fetching spa service ${serviceId}:`, err);
    return null;
  }
};

/**
 * Fetch spa booking statistics
 * @returns {Promise<Object>} Statistics object
 */
export const fetchSpaBookingStats = async () => {
  try {
    const { data: total, error: totalError } = await supabase
      .from('spa_bookings')
      .select('id', { count: 'exact' });

    const { data: confirmed, error: confirmedError } = await supabase
      .from('spa_bookings')
      .select('id', { count: 'exact' })
      .eq('status', 'confirmed');

    const { data: pending, error: pendingError } = await supabase
      .from('spa_bookings')
      .select('id', { count: 'exact' })
      .eq('status', 'pending');

    if (totalError || confirmedError || pendingError) {
      throw new Error('Error fetching stats');
    }

    return {
      total: total?.length || 0,
      confirmed: confirmed?.length || 0,
      pending: pending?.length || 0,
    };
  } catch (err) {
    console.error('âŒ Error fetching spa booking stats:', err);
    return { total: 0, confirmed: 0, pending: 0 };
  }
};


=================================================================
FILE PATH: src\features\admin\AdminHeader.jsx
=================================================================
/**
 * AdminHeader Component
 * Reusable header for admin sections
 * Props:
 *   - title: String
 *   - description: String
 *   - onAddNew: Function
 *   - addButtonLabel: String
 */

import { FaPlus } from 'react-icons/fa';

const AdminHeader = ({
  title,
  description,
  onAddNew,
  addButtonLabel = 'Add New'
}) => {
  return (
    <>
      <div className="mb-8">
        <h1 className="h2 text-primary mb-2">{title}</h1>
        <p className="text-gray-600">{description}</p>
      </div>

      <div className="bg-white rounded-lg shadow-md p-6 mb-6">
        <button
          onClick={onAddNew}
          className="btn btn-primary btn-sm flex items-center gap-2 w-auto"
        >
          <FaPlus /> {addButtonLabel}
        </button>
      </div>
    </>
  );
};

export default AdminHeader;


=================================================================
FILE PATH: src\features\admin\AdminModal.jsx
=================================================================
/**
 * AdminModal Component
 * Reusable modal component for admin forms
 * Props:
 *   - isOpen: Boolean
 *   - title: String
 *   - onClose: Function
 *   - onSubmit: Function
 *   - isLoading: Boolean
 *   - children: ReactNode (form fields)
 *   - submitLabel: String
 */

import { FaCheck } from 'react-icons/fa';

const AdminModal = ({
  isOpen,
  title,
  onClose,
  onSubmit,
  isLoading,
  children,
  submitLabel = 'Save'
}) => {
  if (!isOpen) return null;

  return (
    <div className="fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4">
      <div className="bg-white rounded-lg shadow-xl max-w-2xl w-full max-h-[90vh] overflow-y-auto">
        <div className="p-6 border-b border-gray-200">
          <h2 className="h3 text-primary">{title}</h2>
        </div>

        <form onSubmit={onSubmit} className="p-6 space-y-4">
          {children}

          <div className="flex gap-4 pt-4 border-t border-gray-200">
            <button
              type="submit"
              disabled={isLoading}
              className="btn btn-primary btn-sm flex-1 flex items-center justify-center gap-2 disabled:opacity-50 disabled:cursor-not-allowed"
            >
              <FaCheck /> {isLoading ? 'Saving...' : submitLabel}
            </button>
            <button
              type="button"
              onClick={onClose}
              disabled={isLoading}
              className="btn btn-secondary btn-sm flex-1 disabled:opacity-50 disabled:cursor-not-allowed"
            >
              Cancel
            </button>
          </div>
        </form>
      </div>
    </div>
  );
};

export default AdminModal;


=================================================================
FILE PATH: src\features\admin\AdminTable.jsx
=================================================================
/**
 * AdminTable Component
 * Reusable table component for admin panels
 * Props:
 *   - columns: Array of { key, label, render? }
 *   - data: Array of data
 *   - isLoading: Boolean
 *   - error: String
 *   - onEdit: Function
 *   - onDelete: Function
 *   - onRetry: Function
 */

import { FaEdit, FaTrash } from 'react-icons/fa';

const AdminTable = ({
  columns,
  data,
  isLoading,
  error,
  onEdit,
  onDelete,
  onRetry,
  emptyMessage = 'No data yet'
}) => {
  if (isLoading) {
    return (
      <div className="bg-white rounded-lg shadow-md p-12 text-center">
        <div className="inline-block animate-spin rounded-full h-8 w-8 border-b-2 border-accent"></div>
        <p className="mt-4 text-gray-600">Loading...</p>
      </div>
    );
  }

  if (error) {
    return (
      <div className="bg-red-50 border border-red-200 rounded-lg shadow-md p-6 mb-6">
        <p className="text-red-700 font-semibold">âŒ Error: {error}</p>
        <button
          onClick={onRetry}
          className="mt-4 px-4 py-2 bg-red-600 text-white rounded hover:bg-red-700 transition-colors"
        >
          Retry
        </button>
      </div>
    );
  }

  return (
    <div className="bg-white rounded-lg shadow-md overflow-hidden">
      <div className="overflow-x-auto">
        <table className="w-full">
          <thead className="bg-accent text-white">
            <tr>
              {columns.map((col) => (
                <th
                  key={col.key}
                  className="px-6 py-4 text-left font-tertiary tracking-wider"
                >
                  {col.label}
                </th>
              ))}
              <th className="px-6 py-4 text-center font-tertiary tracking-wider">
                Actions
              </th>
            </tr>
          </thead>
          <tbody className="divide-y divide-gray-200">
            {data.length === 0 ? (
              <tr>
                <td
                  colSpan={columns.length + 1}
                  className="px-6 py-12 text-center text-gray-500"
                >
                  {emptyMessage}
                </td>
              </tr>
            ) : (
              data.map((item) => (
                <tr key={item.id} className="hover:bg-gray-50">
                  {columns.map((col) => (
                    <td key={`${item.id}-${col.key}`} className="px-6 py-4">
                      {col.render ? col.render(item[col.key], item) : item[col.key]}
                    </td>
                  ))}
                  <td className="px-6 py-4">
                    <div className="flex items-center justify-center gap-2">
                      <button
                        onClick={() => onEdit(item)}
                        className="p-2 text-accent hover:bg-accent/10 rounded transition-colors"
                        title="Edit"
                      >
                        <FaEdit />
                      </button>
                      <button
                        onClick={() => {
                          if (window.confirm('Are you sure you want to delete this item?')) {
                            onDelete(item.id);
                          }
                        }}
                        className="p-2 text-red-500 hover:bg-red-50 rounded transition-colors"
                        title="Delete"
                      >
                        <FaTrash />
                      </button>
                    </div>
                  </td>
                </tr>
              ))
            )}
          </tbody>
        </table>
      </div>
    </div>
  );
};

export default AdminTable;


=================================================================
FILE PATH: src\features\admin\index.js
=================================================================
/**
 * Admin Features Index
 * Central export point for admin components
 */

export { default as AdminTable } from './AdminTable';
export { default as AdminModal } from './AdminModal';
export { default as AdminHeader } from './AdminHeader';


=================================================================
FILE PATH: src\hooks\index.js
=================================================================
/**
 * Hooks Index
 * Central export point for all custom hooks
 */

export { useCRUD } from './useCRUD';
export { useModalForm } from './useModalForm';


=================================================================
FILE PATH: src\hooks\useCRUD.js
=================================================================
/**
 * Custom Hook: useCRUD
 * Reusable CRUD operations for any Supabase table
 * Handles: Fetch, Create, Update, Delete with loading/error states
 */

import { useState, useCallback } from 'react';
import { notifySuccess, notifyError } from '../utils/notifications';
// supabase client import removed as it is now encapsulated in services

/**
 * Defines the required structure for the service layer API used by this hook.
 *
 * @typedef {object} CRUDServiceAPI
 * @property {string} resourceName - Name of the resource (e.g., 'Room Types') for logging and notifications.
 * @property {(filters?: object, orderBy?: { column: string, ascending?: boolean }) => Promise<Array<any>>} fetch - Function to fetch data.
 * @property {(values: object, options?: object) => Promise<any>} create - Function to create a new record.
 * @property {(id: number, values: object, options?: object) => Promise<any>} update - Function to update an existing record.
 * @property {(id: number, options?: object) => Promise<any>} remove - Function to delete a record.
 */

/**
 * Custom Hook: useCRUD
 * Reusable CRUD operations, decoupled from direct Supabase calls via a Service Layer API.
 * Handles: Fetch, Create, Update, Delete with loading/error states
 *
 * @param {CRUDServiceAPI} api - An object containing service functions (fetch, create, update, remove) and resourceName.
 */
export const useCRUD = ({ resourceName, fetch: fetchApi, create: createApi, update: updateApi, remove: removeApi }) => {
  const [data, setData] = useState([]);
  const [isLoading, setIsLoading] = useState(false);
  const [error, setError] = useState(null);
  
  // Ensure the resource name is available for logging
  const name = resourceName || 'Resource';

  // FETCH
  const fetchData = useCallback(async (filters = {}, orderBy = null) => {
    if (!fetchApi) {
        console.error(`âŒ ${name} does not support fetching.`);
        return [];
    }
    
    try {
      setIsLoading(true);
      setError(null);

      // The service layer function handles the actual DB querying, filtering, and ordering
      const result = await fetchApi(filters, orderBy);

      console.log(`âœ… Fetched ${name}:`, result);
      setData(result || []);
      return result || [];
    } catch (err) {
      console.error(`âŒ Error fetching ${name}:`, err);
      setError(err.message);
      notifyError(`Error fetching ${name}: ${err.message}`);
      return [];
    } finally {
      setIsLoading(false);
    }
  }, [name, fetchApi, setData]);

  // CREATE
  const create = useCallback(async (values, successMessage = `Created ${name} successfully`) => {
    if (!createApi) {
        console.error(`âŒ ${name} does not support creation.`);
        throw new Error('Creation not supported');
    }

    try {
      setIsLoading(true);
      
      const result = await createApi(values);
      
      console.log(`âœ… Created ${name}:`, result);
      notifySuccess(successMessage);
      await fetchData(); // Refresh data after creation
      return result;
    } catch (err) {
      console.error(`âŒ Error creating ${name}:`, err);
      notifyError(`Error creating ${name}: ${err.message}`);
      throw err;
    } finally {
      setIsLoading(false);
    }
  }, [name, createApi, fetchData]);

  // UPDATE
  const update = useCallback(async (id, values, successMessage = `Updated ${name} successfully`) => {
    if (!updateApi) {
        console.error(`âŒ ${name} does not support updating.`);
        throw new Error('Updating not supported');
    }

    try {
      setIsLoading(true);
      
      const result = await updateApi(id, values);

      console.log(`âœ… Updated ${name}:`, result);
      notifySuccess(successMessage);
      await fetchData(); // Refresh data after update
      return result;
    } catch (err) {
      console.error(`âŒ Error updating ${name}:`, err);
      notifyError(`Error updating ${name}: ${err.message}`);
      throw err;
    } finally {
      setIsLoading(false);
    }
  }, [name, updateApi, fetchData]);

  // DELETE
  const remove = useCallback(async (id, successMessage = `Deleted ${name} successfully`) => {
    if (!removeApi) {
        console.error(`âŒ ${name} does not support deletion.`);
        throw new Error('Deletion not supported');
    }

    try {
      setIsLoading(true);
      
      await removeApi(id);

      console.log(`âœ… Deleted ${name}`);
      notifySuccess(successMessage);
      await fetchData(); // Refresh data after deletion
    } catch (err) {
      console.error(`âŒ Error deleting ${name}:`, err);
      notifyError(`Error deleting ${name}: ${err.message}`);
      throw err;
    } finally {
      setIsLoading(false);
    }
  }, [name, removeApi, fetchData]);

  return {
    data,
    setData,
    isLoading,
    error,
    fetchData,
    create,
    update,
    remove
  };
};


=================================================================
FILE PATH: src\hooks\useModalForm.js
=================================================================
/**
 * Custom Hook: useModalForm
 * Reusable modal form management
 * Handles: Open/Close modal, Edit/Create mode, Form data reset
 */

import { useState, useCallback } from 'react';

export const useModalForm = (initialFormData) => {
  const [isModalOpen, setIsModalOpen] = useState(false);
  const [editingItem, setEditingItem] = useState(null);
  const [formData, setFormData] = useState(initialFormData);

  // Open modal for creating new item
  const openCreateModal = useCallback(() => {
    setEditingItem(null);
    setFormData(initialFormData);
    setIsModalOpen(true);
  }, [initialFormData]);

  // Open modal for editing existing item
  const openEditModal = useCallback((item) => {
    setEditingItem(item);
    setFormData(item);
    setIsModalOpen(true);
  }, []);

  // Close modal
  const closeModal = useCallback(() => {
    setIsModalOpen(false);
    setEditingItem(null);
    setFormData(initialFormData);
  }, [initialFormData]);

  // Update form data
  const updateFormData = useCallback((updates) => {
    setFormData(prev => ({ ...prev, ...updates }));
  }, []);

  // Reset form data
  const resetFormData = useCallback(() => {
    setFormData(initialFormData);
  }, [initialFormData]);

  return {
    isModalOpen,
    editingItem,
    formData,
    setFormData,
    openCreateModal,
    openEditModal,
    closeModal,
    updateFormData,
    resetFormData,
    isEditing: !!editingItem
  };
};


=================================================================
FILE PATH: src\main.jsx
=================================================================
import { RoomContext } from './context/RoomContext';
import { AuthContext } from './context/AuthContext';
import { LanguageProvider } from './context/LanguageContext';
import { BookingProvider } from './context/BookingContext';
import ReactDOM from 'react-dom/client'
import React from 'react'
import App from './App'
import './style/index.css';


ReactDOM
  .createRoot(document.getElementById('root'))
  .render(
    <LanguageProvider>
      <AuthContext>
        <RoomContext>
          <BookingProvider>
            <React.StrictMode>
              <App />
            </React.StrictMode>
          </BookingProvider>
        </RoomContext>
      </AuthContext>
    </LanguageProvider>,
  )

=================================================================
FILE PATH: src\pages\Admin.jsx
=================================================================
import { useState } from 'react';
import AdminSidebar from '../components/AdminSidebar';
import RoomTypesManagement from '../components/admin/RoomTypesManagement';
import RoomsManagement from '../components/admin/RoomsManagement';
import PriceRulesManagement from '../components/admin/PriceRulesManagement';
import PromotionsManagement from '../components/admin/PromotionsManagement';
import BookingsManagement from '../components/admin/BookingsManagement';
import UsersManagement from '../components/admin/UsersManagement';
import AuditLogsManagement from '../components/admin/AuditLogsManagement';
import ReportsManagement from '../components/admin/ReportsManagement';

const Admin = () => {
  const [activeSection, setActiveSection] = useState('room-types');

  const renderContent = () => {
    switch (activeSection) {
      case 'room-types':
        return <RoomTypesManagement />;
      case 'rooms':
        return <RoomsManagement />;
      case 'price-rules':
        return <PriceRulesManagement />;
      case 'promotions':
        return <PromotionsManagement />;
      case 'bookings':
        return <BookingsManagement />;
      case 'users':
        return <UsersManagement />;
      case 'audit-logs':
        return <AuditLogsManagement />;
      case 'reports':
        return <ReportsManagement />;
      default:
        return <RoomTypesManagement />;
    }
  };

  return (
    <div className="min-h-screen bg-gray-50">
      <div className="flex relative">
        {/* Sidebar */}
        <AdminSidebar activeSection={activeSection} setActiveSection={setActiveSection} />
        
        {/* Main Content */}
        <div className="flex-1 lg:ml-64">
          <div className="p-4 lg:p-8">
            {renderContent()}
          </div>
        </div>
      </div>
    </div>
  );
};

export default Admin;



=================================================================
FILE PATH: src\pages\CleanupPage.jsx
=================================================================
import { useNavigate } from "react-router-dom";
import {
  clearAllTestData,
  clearBookings,
  clearReviews,
} from "../utils/clearTestData";
import { LogoDark } from "../assets";

const CleanupPage = () => {
  const navigate = useNavigate();

  const handleClearAll = () => {
    if (
      window.confirm(
        "âš ï¸ Are you sure? This will delete ALL data (bookings, reviews, users)!"
      )
    ) {
      clearAllTestData();
      alert("âœ… All data cleared! Redirecting...");
      localStorage.clear();
      window.location.href = "/";
    }
  };

  const handleClearBookings = () => {
    if (window.confirm("âš ï¸ Delete all bookings?")) {
      clearBookings();
      alert("âœ… Bookings cleared!");
      window.location.reload();
    }
  };

  const handleClearReviews = () => {
    if (window.confirm("âš ï¸ Delete all reviews?")) {
      clearReviews();
      alert("âœ… Reviews cleared!");
      window.location.reload();
    }
  };

  return (
    <div className="min-h-screen py-12 bg-gradient-to-br from-red-50 to-orange-50">
      <div className="container mx-auto px-6 max-w-md">
        <LogoDark className="w-40 mx-auto mb-10 opacity-80" />

        <div className="bg-white rounded-2xl shadow-xl p-8 space-y-6">
          <div>
            <h1 className="text-3xl font-primary text-primary mb-2">
              System Cleanup
            </h1>
            <p className="text-primary/70 text-sm">
              Delete test data to start fresh
            </p>
          </div>

          <div className="bg-yellow-50 border-l-4 border-yellow-500 p-4 rounded">
            <p className="text-sm text-yellow-800">
              âš ï¸ <strong>Warning:</strong> These actions cannot be undone.
              Deleted data will be permanently removed.
            </p>
          </div>

          <div className="space-y-3">
            <button
              onClick={handleClearBookings}
              className="w-full py-3 px-4 bg-blue-500 hover:bg-blue-600 text-white rounded-lg font-semibold transition"
            >
              ðŸ—‘ï¸ Clear Bookings Only
            </button>

            <button
              onClick={handleClearReviews}
              className="w-full py-3 px-4 bg-purple-500 hover:bg-purple-600 text-white rounded-lg font-semibold transition"
            >
              â­ Clear Reviews Only
            </button>

            <button
              onClick={handleClearAll}
              className="w-full py-3 px-4 bg-red-600 hover:bg-red-700 text-white rounded-lg font-semibold transition"
            >
              ðŸ”¥ Clear Everything
            </button>
          </div>

          <button
            onClick={() => navigate("/")}
            className="w-full py-2 px-4 bg-gray-200 hover:bg-gray-300 text-gray-800 rounded-lg font-semibold transition"
          >
            â† Back to Home
          </button>

          <div className="text-xs text-primary/60 text-center pt-4 border-t">
            <p>All data is stored in browser localStorage</p>
            <p>You can also manually clear by running in console:</p>
            <code className="block mt-2 bg-gray-100 p-2 rounded text-xs break-all">
              localStorage.clear(); location.reload();
            </code>
          </div>
        </div>
      </div>
    </div>
  );
};

export default CleanupPage;


=================================================================
FILE PATH: src\pages\Contact.jsx
=================================================================
import { useState } from 'react';
import { ScrollToTop, Toast } from '../components';
import { FaEnvelope, FaMapMarkerAlt, FaPhoneAlt, FaClock } from 'react-icons/fa';

const STORAGE_URL = 'https://sxteddkozzqniebfstag.supabase.co/storage/v1/object/public/hotel-rooms';

const contactCards = [
  {
    title: 'Concierge Desk',
    detail: '+84 24 1234 5678',
    subtitle: 'Available 24/7 for urgent assistance',
    icon: FaPhoneAlt,
  },
  {
    title: 'Reservations',
    detail: 'booking@adinahotel.com',
    subtitle: 'Response within 30 minutes',
    icon: FaEnvelope,
  },
  {
    title: 'Visit Us',
    detail: '12 Tran Hung Dao, Hoan Kiem, Ha Noi',
    subtitle: 'Private transfers on request',
    icon: FaMapMarkerAlt,
  },
  {
    title: 'Opening Hours',
    detail: 'Daily â€¢ 06:00 - 23:00',
    subtitle: 'Spa & Restaurant 09:00 - 22:00',
    icon: FaClock,
  },
];

const initialFormState = {
  fullName: '',
  email: '',
  phone: '',
  subject: '',
  message: '',
};

const Contact = () => {
  const [formData, setFormData] = useState(initialFormState);
  const [errors, setErrors] = useState({});
  const [submitting, setSubmitting] = useState(false);
  const [toast, setToast] = useState(null);

  const validate = () => {
    const nextErrors = {};
    if (!formData.fullName.trim()) nextErrors.fullName = 'Please enter your full name.';
    if (!formData.email.trim()) {
      nextErrors.email = 'Please enter an email address.';
    } else if (!/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(formData.email)) {
      nextErrors.email = 'Email format looks incorrect.';
    }
    if (!formData.phone.trim()) nextErrors.phone = 'Please enter a phone number.';
    if (!formData.subject.trim()) nextErrors.subject = 'Please add a subject.';
    if (formData.message.trim().length < 10) nextErrors.message = 'Message should be at least 10 characters.';
    return nextErrors;
  };

  const handleChange = (e) => {
    const { name, value } = e.target;
    setFormData((prev) => ({ ...prev, [name]: value }));
    setErrors((prev) => ({ ...prev, [name]: '' }));
  };

  const handleSubmit = async (e) => {
    e.preventDefault();
    const validationErrors = validate();
    if (Object.keys(validationErrors).length) {
      setErrors(validationErrors);
      return;
    }

    setSubmitting(true);
    try {
      await new Promise((resolve) => setTimeout(resolve, 1200));
      setToast({
        type: 'success',
        message: 'Thank you! Our concierge will get back to you within 30 minutes.',
      });
      setFormData(initialFormState);
    } catch (error) {
      console.error(error);
      setToast({
        type: 'error',
        message: 'Something went wrong, please try again shortly.',
      });
    } finally {
      setSubmitting(false);
    }
  };

  return (
    <div className='bg-[#f7f4ef] min-h-screen'>
      <ScrollToTop />
      {toast && <Toast message={toast.message} type={toast.type} onClose={() => setToast(null)} />}

      <section className='relative h-[50vh] min-h-[420px] flex items-center justify-center text-center'>
        <img
          src={`${STORAGE_URL}/img/heroSlider/2.jpg`}
          alt='Lobby welcome area'
          className='absolute inset-0 h-full w-full object-cover'
        />
        <div className='absolute inset-0 bg-black/60' />
        <div className='relative z-10 max-w-2xl px-6 text-white'>
          <p className='font-tertiary uppercase tracking-[6px] text-sm mb-4'>
            We are at your service
          </p>
          <h1 className='font-primary text-4xl md:text-5xl lg:text-6xl leading-tight mb-6'>
            Contact Adina Hotel &amp; Spa
          </h1>
          <p className='text-lg text-white/80'>
            Whether it is tailor-made experiences, private events, or urgent supportâ€”our concierge team is always on standby.
          </p>
        </div>
      </section>

      <section className='container mx-auto px-6 lg:px-0 mt-10 relative z-20'>
        <div className='bg-white/95 shadow-2xl border border-[#eadfcf] rounded-lg px-6 py-8 lg:px-10 lg:py-10'>
          <div className='grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6'>
            {contactCards.map(({ title, detail, subtitle, icon: Icon }) => (
              <div key={title} className='h-full border border-[#eadfcf]/60 rounded-lg p-6 flex flex-col gap-3 bg-white min-w-0'>
                <Icon className='text-accent text-3xl' />
                <p className='font-tertiary uppercase tracking-[3px] text-xs text-primary/70'>
                  {title}
                </p>
                <h3 className='font-primary text-2xl leading-tight break-words'>{detail}</h3>
                <p className='text-sm text-primary/70'>{subtitle}</p>
              </div>
            ))}
          </div>
        </div>
      </section>

      <section className='container mx-auto px-6 lg:px-0 py-16 grid grid-cols-1 lg:grid-cols-2 gap-10'>
        <div className='bg-white p-8 shadow-sm border border-[#eadfcf]'>
          <p className='font-tertiary uppercase tracking-[4px] text-xs text-primary/70 mb-2'>
            Leave a Message
          </p>
          <h2 className='font-primary text-3xl mb-6'>Book a Private Consultation</h2>
          <form onSubmit={handleSubmit} className='space-y-5'>
            <div>
              <label className='block text-sm font-semibold mb-2'>Full name</label>
              <input
                type='text'
                name='fullName'
                value={formData.fullName}
                onChange={handleChange}
                className={`w-full border px-4 py-3 focus:outline-none focus:border-accent ${
                  errors.fullName ? 'border-red-400' : 'border-[#eadfcf]'
                }`}
                placeholder='John Carter'
              />
              {errors.fullName && <p className='text-sm text-red-500 mt-1'>{errors.fullName}</p>}
            </div>

            <div className='grid grid-cols-1 md:grid-cols-2 gap-5'>
              <div>
                <label className='block text-sm font-semibold mb-2'>Email</label>
                <input
                  type='email'
                  name='email'
                  value={formData.email}
                  onChange={handleChange}
                  className={`w-full border px-4 py-3 focus:outline-none focus:border-accent ${
                    errors.email ? 'border-red-400' : 'border-[#eadfcf]'
                  }`}
                  placeholder='ban@example.com'
                />
                {errors.email && <p className='text-sm text-red-500 mt-1'>{errors.email}</p>}
              </div>
              <div>
                <label className='block text-sm font-semibold mb-2'>Phone number</label>
                <input
                  type='tel'
                  name='phone'
                  value={formData.phone}
                  onChange={handleChange}
                  className={`w-full border px-4 py-3 focus:outline-none focus:border-accent ${
                    errors.phone ? 'border-red-400' : 'border-[#eadfcf]'
                  }`}
                  placeholder='+84 987 654 321'
                />
                {errors.phone && <p className='text-sm text-red-500 mt-1'>{errors.phone}</p>}
              </div>
            </div>

            <div>
              <label className='block text-sm font-semibold mb-2'>Subject</label>
              <input
                type='text'
                name='subject'
                value={formData.subject}
                onChange={handleChange}
                className={`w-full border px-4 py-3 focus:outline-none focus:border-accent ${
                  errors.subject ? 'border-red-400' : 'border-[#eadfcf]'
                }`}
                placeholder='Request for stay, event planning...'
              />
              {errors.subject && <p className='text-sm text-red-500 mt-1'>{errors.subject}</p>}
            </div>

            <div>
              <label className='block text-sm font-semibold mb-2'>Message</label>
              <textarea
                name='message'
                value={formData.message}
                onChange={handleChange}
                rows={5}
                className={`w-full border px-4 py-3 focus:outline-none focus:border-accent resize-none ${
                  errors.message ? 'border-red-400' : 'border-[#eadfcf]'
                }`}
                placeholder='Share your expectations so we can curate every detail...'
              />
              {errors.message && <p className='text-sm text-red-500 mt-1'>{errors.message}</p>}
            </div>

            <button
              type='submit'
              className='btn btn-primary w-full uppercase tracking-[4px]'
              disabled={submitting}
            >
              {submitting ? 'Sending...' : 'Send request'}
            </button>
            <p className='text-xs text-primary/60 text-center'>
              *We respond to every inquiry within 30 working minutes.
            </p>
          </form>
        </div>

        <div className='bg-white border border-[#eadfcf] shadow-sm'>
          <iframe
            title='Adina Hotel Location'
            src='https://www.google.com/maps/embed?pb=!1m18!1m12!1m3!1d3724.0085669024215!2d105.84117087606554!3d21.03151128743644!2m3!1f0!2f0!3f0!3m2!1i1024!2i768!4f13.1!3m3!1m2!1s0x3135abbd6fb5ef07%3A0x6f8dfb1ea1f7597!2zMTIgVHLhuqduIEjGsG5nIERhbywgSOG6o2kgS2nhu4FuLCBIw6AgTuG7mWkgMTAwMDA!5e0!3m2!1svi!2svi!4v1731810000000!5m2!1svi!2svi'
            width='100%'
            height='100%'
            className='min-h-[420px] w-full border-0'
            allowFullScreen=''
            loading='lazy'
            referrerPolicy='no-referrer-when-downgrade'
          ></iframe>
          <div className='p-6'>
            <h3 className='font-primary text-2xl mb-3'>Getting here</h3>
            <ul className='space-y-2 text-primary/80 text-sm'>
              <li>â€¢ 35 minutes from Noi Bai airport via private limousine</li>
              <li>â€¢ 5 minutes from Hanoi Railway Station with VIP pick-up</li>
              <li>â€¢ Complimentary valet parking available 24/7</li>
            </ul>
          </div>
        </div>
      </section>
    </div>
  );
};

export default Contact;

=================================================================
FILE PATH: src\pages\ForgotPassword.jsx
=================================================================
import { useState } from 'react';
import { useNavigate, Link } from 'react-router-dom';
import { LogoDark } from '../assets';
import { FaEnvelope, FaSpinner, FaArrowLeft, FaCheckCircle } from 'react-icons/fa';
import Toast from '../components/Toast';
import { useAuth } from '../context/AuthContext';

const ForgotPassword = () => {
  const [email, setEmail] = useState('');
  const [toast, setToast] = useState(null);
  const [successMessage, setSuccessMessage] = useState('');
  const navigate = useNavigate();
  const { resetPassword, loading, error: authError } = useAuth();

  const handleSubmit = async (e) => {
    e.preventDefault();
    setSuccessMessage('');

    if (!email) {
      setToast({
        message: 'Please enter your email address',
        type: 'error'
      });
      return;
    }

    const result = await resetPassword(email);
    
    if (result.success) {
      setToast({
        message: `Password reset link sent to ${email}! Check your inbox.`,
        type: 'success'
      });
      setSuccessMessage(`We've sent a password reset link to ${email}. Click the link in the email to proceed with resetting your password. The link will expire in 24 hours.`);
      setEmail('');
      
      // Redirect to login after 5 seconds
      setTimeout(() => {
        navigate('/login');
      }, 5000);
    } else {
      setToast({
        message: result.error || 'Failed to send reset link. Please try again.',
        type: 'error'
      });
    }
  };

  return (
    <div className="min-h-screen bg-gradient-to-br from-primary via-primary to-accent/20 flex items-center justify-center p-4">
      {/* Background decoration */}
      <div className="absolute inset-0 overflow-hidden">
        <div className="absolute top-0 left-0 w-96 h-96 bg-accent/10 rounded-full blur-3xl -translate-x-1/2 -translate-y-1/2"></div>
        <div className="absolute bottom-0 right-0 w-96 h-96 bg-accent/10 rounded-full blur-3xl translate-x-1/2 translate-y-1/2"></div>
      </div>

      {/* Forgot Password Card */}
      <div className="relative z-10 w-full max-w-md">
        <div className="bg-white rounded-2xl shadow-2xl overflow-hidden">
          {/* Header */}
          <div className="bg-gradient-to-r from-accent to-accent-hover p-8 text-center">
            <div className="flex justify-center mb-4">
              <LogoDark className="w-[180px] brightness-0 invert" />
            </div>
            <h1 className="text-2xl font-primary text-white mb-2">Forgot Password?</h1>
            <p className="text-white/90 text-sm">We'll send you a password reset link</p>
          </div>

          {/* Form */}
          {!successMessage ? (
            <form onSubmit={handleSubmit} className="p-8 space-y-6">
              <div>
                <label className="block text-sm font-semibold mb-2 text-primary">
                  Email Address
                </label>
                <div className="relative">
                  <div className="absolute inset-y-0 left-0 pl-4 flex items-center pointer-events-none">
                    <FaEnvelope className="text-gray-400" />
                  </div>
                  <input
                    type="email"
                    value={email}
                    onChange={(e) => setEmail(e.target.value)}
                    className="w-full pl-12 pr-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-accent focus:border-transparent transition-all"
                    placeholder="your@email.com"
                    required
                    disabled={loading}
                  />
                </div>
                <p className="text-xs text-gray-500 mt-2">
                  Enter the email address associated with your account and we'll send you a password reset link.
                </p>
              </div>

              <button
                type="submit"
                disabled={loading}
                className="w-full btn btn-primary btn-lg flex items-center justify-center gap-2 disabled:opacity-50 disabled:cursor-not-allowed"
              >
                {loading ? (
                  <>
                    <FaSpinner className="animate-spin" />
                    Sending...
                  </>
                ) : (
                  <>
                    <FaEnvelope />
                    Send Reset Link
                  </>
                )}
              </button>

              {/* Back to Login */}
              <div className="text-center pt-4">
                <Link
                  to="/login"
                  className="inline-flex items-center gap-2 text-sm text-accent hover:text-accent-hover transition-colors"
                >
                  <FaArrowLeft />
                  Back to Sign In
                </Link>
              </div>
            </form>
          ) : (
            <div className="p-8 space-y-6">
              <div className="text-center mb-6">
                <FaCheckCircle className="text-5xl text-green-500 mx-auto mb-4" />
                <h2 className="text-xl font-semibold text-gray-800 mb-2">Reset Link Sent!</h2>
              </div>
              
              <div className="bg-blue-50 border border-blue-200 rounded-lg p-4 space-y-2">
                <p className="text-sm text-blue-900">
                  {successMessage}
                </p>
              </div>

              <div className="space-y-3">
                <Link
                  to="/login"
                  className="block w-full btn btn-primary btn-lg text-center"
                >
                  Back to Sign In
                </Link>
                <button
                  onClick={() => {
                    setSuccessMessage('');
                    setEmail('');
                  }}
                  className="w-full btn btn-secondary btn-sm"
                >
                  Send Another Link
                </button>
              </div>
            </div>
          )}

          {/* Footer */}
          <div className="px-8 py-4 bg-gray-50 border-t border-gray-200 text-center">
            <p className="text-xs text-gray-500">
              Â© {new Date().getFullYear()} Hotel Booking. All rights reserved.
            </p>
          </div>
        </div>
      </div>

      {toast && (
        <Toast
          message={toast.message}
          type={toast.type}
          onClose={() => setToast(null)}
        />
      )}
    </div>
  );
};

export default ForgotPassword;



=================================================================
FILE PATH: src\pages\Home.jsx
=================================================================
import { BookForm, HeroSlider, Rooms, ScrollToTop } from '../components';


const Home = () => {

  return (
    <div>
      <ScrollToTop />

      <HeroSlider />

      <div className='container mx-auto relative'>

        <div className='bg-accent/20 mt-4 p-4 lg:absolute lg:left-0 lg:right-0 lg:p-0 lg:-top-12 lg:z-30 lg:shadow-xl'>
          <BookForm />
        </div>

      </div>

      <Rooms />
    </div>
  );
};

export default Home;


=================================================================
FILE PATH: src\pages\index.js
=================================================================
export { default as RoomDetails } from "./RoomDetails";
export { default as Home } from "./Home";
export { default as Admin } from "./Admin";
export { default as Login } from "./Login";
export { default as Register } from "./Register";
export { default as ForgotPassword } from "./ForgotPassword";
export { default as ResetPassword } from "./ResetPassword";
export { default as RoomsPage } from "./RoomsPage";
export { default as Contact } from "./Contact";
export { default as UserDashboard } from "./UserDashboard";
export { default as RestaurantPage } from "./RestaurantPage";
export { default as SpaPage } from "./SpaPage";
export { default as CleanupPage } from "./CleanupPage";


=================================================================
FILE PATH: src\pages\Login.jsx
=================================================================
import { useState, useEffect } from 'react';
import { useNavigate, useLocation, Link } from 'react-router-dom';
import { useAuth } from '../context/AuthContext';
import { FaEnvelope, FaLock, FaSpinner, FaGoogle, FaFacebook } from 'react-icons/fa';
import Toast from '../components/Toast';

const STORAGE_URL = 'https://sxteddkozzqniebfstag.supabase.co/storage/v1/object/public/hotel-rooms/img';

const Login = () => {
  const [email, setEmail] = useState('');
  const [password, setPassword] = useState('');
  const [error, setError] = useState('');
  const [showPassword, setShowPassword] = useState(false);
  const [isAdminLogin, setIsAdminLogin] = useState(false);
  const [toast, setToast] = useState(null);
  
  const { login, adminLogin, loginWithOAuth, loading, isAuthenticated } = useAuth();
  const navigate = useNavigate();
  const location = useLocation();

  useEffect(() => {
    const isAdmin = location.pathname === '/admin/login' || location.search.includes('admin=true');
    setIsAdminLogin(isAdmin);
  }, [location]);

  useEffect(() => {
    if (isAuthenticated()) {
      const from = location.state?.from?.pathname || (isAdminLogin ? '/admin' : '/');
      navigate(from, { replace: true });
    }
  }, [isAuthenticated, navigate, location, isAdminLogin]);

  const handleSubmit = async (e) => {
    e.preventDefault();
    setError('');

    if (!email || !password) {
      setError('Please fill in all fields');
      return;
    }

    const isAdminEmail = email === 'admin@hotel.com';
    const shouldUseAdminLogin = isAdminLogin || isAdminEmail;

    const result = shouldUseAdminLogin 
      ? await adminLogin(email, password)
      : await login(email, password);
    
    if (result.success) {
      setToast({
        message: `Welcome back, ${result.user.name || result.user.email}!`,
        type: 'success'
      });
      setTimeout(() => {
        const redirectPath = shouldUseAdminLogin ? '/admin' : '/';
        const from = location.state?.from?.pathname || redirectPath;
        navigate(from, { replace: true });
      }, 1500);
    } else {
      setError(result.error || 'Login failed');
    }
  };

  const handleOAuthLogin = async (provider) => {
    if (isAdminLogin) {
      setError('OAuth login is not available for admin');
      return;
    }

    setError('');
    const result = await loginWithOAuth(provider);
    
    if (result.success) {
      setToast({
        message: `Welcome, ${result.user.name || result.user.email}!`,
        type: 'success'
      });
      setTimeout(() => {
        navigate('/', { replace: true });
      }, 1500);
    } else {
      setError(`Failed to login with ${provider}`);
    }
  };

  return (
    <div className="min-h-screen bg-gradient-to-br from-primary via-primary to-accent/20 flex items-center justify-center p-4">
      <div className="absolute inset-0 overflow-hidden">
        <div className="absolute top-0 left-0 w-96 h-96 bg-accent/10 rounded-full blur-3xl -translate-x-1/2 -translate-y-1/2"></div>
        <div className="absolute bottom-0 right-0 w-96 h-96 bg-accent/10 rounded-full blur-3xl translate-x-1/2 translate-y-1/2"></div>
      </div>

      <div className="relative z-10 w-full max-w-md">
        <div className="bg-white rounded-2xl shadow-2xl overflow-hidden">
          <div className="bg-gradient-to-r from-accent to-accent-hover p-8 text-center">
            <div className="flex justify-center mb-4">
              <img src={`${STORAGE_URL}/logo-dark.svg`} alt="logo" className="w-[180px] brightness-0 invert" />
            </div>
            <h1 className="text-2xl font-primary text-white mb-2">
              {isAdminLogin ? 'Admin Login' : 'Sign In'}
            </h1>
            <p className="text-white/90 text-sm">
              {isAdminLogin ? 'Hotel Management System' : 'Welcome back'}
            </p>
          </div>

          <form onSubmit={handleSubmit} className="p-8 space-y-6">
            {error && (
              <div className="bg-red-50 border border-red-200 text-red-700 px-4 py-3 rounded-lg text-sm">
                {error}
              </div>
            )}

            <div>
              <label className="block text-sm font-semibold mb-2 text-primary">
                Email
              </label>
              <div className="relative">
                <div className="absolute inset-y-0 left-0 pl-4 flex items-center pointer-events-none">
                  <FaEnvelope className="text-gray-400" />
                </div>
                <input
                  type="email"
                  value={email}
                  onChange={(e) => setEmail(e.target.value)}
                  className="w-full pl-12 pr-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-accent focus:border-transparent transition-all"
                  placeholder="admin@hotel.com"
                  required
                  disabled={loading}
                />
              </div>
            </div>

            <div>
              <label className="block text-sm font-semibold mb-2 text-primary">
                Password
              </label>
              <div className="relative">
                <div className="absolute inset-y-0 left-0 pl-4 flex items-center pointer-events-none">
                  <FaLock className="text-gray-400" />
                </div>
                <input
                  type={showPassword ? 'text' : 'password'}
                  value={password}
                  onChange={(e) => setPassword(e.target.value)}
                  className="w-full pl-12 pr-12 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-accent focus:border-transparent transition-all"
                  placeholder="â€¢â€¢â€¢â€¢â€¢â€¢â€¢â€¢"
                  required
                  disabled={loading}
                />
                <button
                  type="button"
                  onClick={() => setShowPassword(!showPassword)}
                  className="absolute inset-y-0 right-0 pr-4 flex items-center text-gray-400 hover:text-accent transition-colors text-sm"
                >
                  {showPassword ? 'Hide' : 'Show'}
                </button>
              </div>
            </div>

            <div className="flex items-center justify-between">
              <label className="flex items-center">
                <input
                  type="checkbox"
                  className="w-4 h-4 text-accent border-gray-300 rounded focus:ring-accent"
                />
                <span className="ml-2 text-sm text-gray-600">Remember me</span>
              </label>
              <Link to="/forgot-password" className="text-sm text-accent hover:text-accent-hover transition-colors">
                Forgot password?
              </Link>
            </div>

            <button
              type="submit"
              disabled={loading}
              className="w-full btn btn-primary btn-lg flex items-center justify-center gap-2 disabled:opacity-50 disabled:cursor-not-allowed"
            >
              {loading ? (
                <>
                  <FaSpinner className="animate-spin" />
                  Signing in...
                </>
              ) : (
                'Sign In'
              )}
            </button>

            {!isAdminLogin && email !== 'admin@hotel.com' && (
              <>
                <div className="relative my-6">
                  <div className="absolute inset-0 flex items-center">
                    <div className="w-full border-t border-gray-300"></div>
                  </div>
                  <div className="relative flex justify-center text-sm">
                    <span className="px-2 bg-white text-gray-500">Or continue with</span>
                  </div>
                </div>

                <div className="grid grid-cols-2 gap-4">
                  <button
                    type="button"
                    onClick={() => handleOAuthLogin('google')}
                    disabled={loading}
                    className="flex items-center justify-center gap-2 px-4 py-3 border border-gray-300 rounded-lg hover:bg-gray-50 transition-colors disabled:opacity-50 disabled:cursor-not-allowed"
                  >
                    <FaGoogle className="text-red-500" />
                    <span className="text-sm font-semibold">Google</span>
                  </button>

                  <button
                    type="button"
                    onClick={() => handleOAuthLogin('facebook')}
                    disabled={loading}
                    className="flex items-center justify-center gap-2 px-4 py-3 border border-gray-300 rounded-lg hover:bg-gray-50 transition-colors disabled:opacity-50 disabled:cursor-not-allowed"
                  >
                    <FaFacebook className="text-blue-600" />
                    <span className="text-sm font-semibold">Facebook</span>
                  </button>
                </div>
              </>
            )}

            {isAdminLogin && (
              <div className="mt-6 p-4 bg-gray-50 rounded-lg border border-gray-200">
                <p className="text-xs font-semibold text-gray-700 mb-2">Demo Credentials:</p>
                <div className="text-xs text-gray-600 space-y-1">
                  <p><strong>Email:</strong> admin@hotel.com</p>
                  <p><strong>Password:</strong> admin123</p>
                </div>
              </div>
            )}

            {!isAdminLogin && (
              <div className="text-center pt-4">
                <p className="text-sm text-gray-600">
                  Don't have an account?{' '}
                  <Link to="/register" className="text-accent hover:text-accent-hover font-semibold">
                    Sign Up
                  </Link>
                </p>
              </div>
            )}
          </form>

          <div className="px-8 py-4 bg-gray-50 border-t border-gray-200 text-center">
            <p className="text-xs text-gray-500">
              Â© {new Date().getFullYear()} Hotel Booking. All rights reserved.
            </p>
          </div>
        </div>
      </div>

      {toast && (
        <Toast
          message={toast.message}
          type={toast.type}
          onClose={() => setToast(null)}
        />
      )}
    </div>
  );
};

export default Login;

=================================================================
FILE PATH: src\pages\Register.jsx
=================================================================
import { useState, useEffect } from 'react';
import { useNavigate, Link } from 'react-router-dom';
import { useAuth } from '../context/AuthContext';
import { FaEnvelope, FaLock, FaUser, FaSpinner, FaGoogle, FaFacebook } from 'react-icons/fa';
import Toast from '../components/Toast';

const STORAGE_URL = 'https://sxteddkozzqniebfstag.supabase.co/storage/v1/object/public/hotel-rooms/img';

const Register = () => {
  const [formData, setFormData] = useState({
    name: '',
    email: '',
    password: '',
    confirmPassword: ''
  });
  const [error, setError] = useState('');
  const [showPassword, setShowPassword] = useState(false);
  const [showConfirmPassword, setShowConfirmPassword] = useState(false);
  const [toast, setToast] = useState(null);
  
  const { register, loginWithOAuth, loading, isAuthenticated } = useAuth();
  const navigate = useNavigate();

  useEffect(() => {
    if (isAuthenticated()) {
      navigate('/', { replace: true });
    }
  }, [isAuthenticated, navigate]);

  const handleChange = (e) => {
    setFormData({
      ...formData,
      [e.target.name]: e.target.value
    });
    setError('');
  };

  const handleSubmit = async (e) => {
    e.preventDefault();
    setError('');

    if (!formData.name || !formData.email || !formData.password || !formData.confirmPassword) {
      setError('Please fill in all fields');
      return;
    }

    if (formData.password.length < 6) {
      setError('Password must be at least 6 characters');
      return;
    }

    if (formData.password !== formData.confirmPassword) {
      setError('Passwords do not match');
      return;
    }

    const result = await register(formData.name, formData.email, formData.password);
    
    if (result.success) {
      setToast({
        message: `Account created successfully! Welcome, ${result.user.name}!`,
        type: 'success'
      });
      setTimeout(() => {
        navigate('/', { replace: true });
      }, 1500);
    } else {
      setError(result.error || 'Registration failed');
    }
  };

  const handleOAuthLogin = async (provider) => {
    setError('');
    const result = await loginWithOAuth(provider);
    
    if (result.success) {
      setToast({
        message: `Welcome, ${result.user.name || result.user.email}!`,
        type: 'success'
      });
      setTimeout(() => {
        navigate('/', { replace: true });
      }, 1500);
    } else {
      setError(`Failed to login with ${provider}`);
    }
  };

  return (
    <div className="min-h-screen bg-gradient-to-br from-primary via-primary to-accent/20 flex items-center justify-center p-4 py-12">
      <div className="absolute inset-0 overflow-hidden">
        <div className="absolute top-0 left-0 w-96 h-96 bg-accent/10 rounded-full blur-3xl -translate-x-1/2 -translate-y-1/2"></div>
        <div className="absolute bottom-0 right-0 w-96 h-96 bg-accent/10 rounded-full blur-3xl translate-x-1/2 translate-y-1/2"></div>
      </div>

      <div className="relative z-10 w-full max-w-md">
        <div className="bg-white rounded-2xl shadow-2xl overflow-hidden">
          <div className="bg-gradient-to-r from-accent to-accent-hover p-8 text-center">
            <div className="flex justify-center mb-4">
              <img src={`${STORAGE_URL}/logo-dark.svg`} alt="logo" className="w-[180px] brightness-0 invert" />
            </div>
            <h1 className="text-2xl font-primary text-white mb-2">Create Account</h1>
            <p className="text-white/90 text-sm">Join us and start booking</p>
          </div>

          <form onSubmit={handleSubmit} className="p-8 space-y-5">
            {error && (
              <div className="bg-red-50 border border-red-200 text-red-700 px-4 py-3 rounded-lg text-sm">
                {error}
              </div>
            )}

            <div>
              <label className="block text-sm font-semibold mb-2 text-primary">
                Full Name
              </label>
              <div className="relative">
                <div className="absolute inset-y-0 left-0 pl-4 flex items-center pointer-events-none">
                  <FaUser className="text-gray-400" />
                </div>
                <input
                  type="text"
                  name="name"
                  value={formData.name}
                  onChange={handleChange}
                  className="w-full pl-12 pr-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-accent focus:border-transparent transition-all"
                  placeholder="John Doe"
                  required
                  disabled={loading}
                />
              </div>
            </div>

            <div>
              <label className="block text-sm font-semibold mb-2 text-primary">
                Email
              </label>
              <div className="relative">
                <div className="absolute inset-y-0 left-0 pl-4 flex items-center pointer-events-none">
                  <FaEnvelope className="text-gray-400" />
                </div>
                <input
                  type="email"
                  name="email"
                  value={formData.email}
                  onChange={handleChange}
                  className="w-full pl-12 pr-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-accent focus:border-transparent transition-all"
                  placeholder="john@example.com"
                  required
                  disabled={loading}
                />
              </div>
            </div>

            <div>
              <label className="block text-sm font-semibold mb-2 text-primary">
                Password
              </label>
              <div className="relative">
                <div className="absolute inset-y-0 left-0 pl-4 flex items-center pointer-events-none">
                  <FaLock className="text-gray-400" />
                </div>
                <input
                  type={showPassword ? 'text' : 'password'}
                  name="password"
                  value={formData.password}
                  onChange={handleChange}
                  className="w-full pl-12 pr-12 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-accent focus:border-transparent transition-all"
                  placeholder="â€¢â€¢â€¢â€¢â€¢â€¢â€¢â€¢"
                  required
                  disabled={loading}
                />
                <button
                  type="button"
                  onClick={() => setShowPassword(!showPassword)}
                  className="absolute inset-y-0 right-0 pr-4 flex items-center text-gray-400 hover:text-accent transition-colors text-sm"
                >
                  {showPassword ? 'Hide' : 'Show'}
                </button>
              </div>
            </div>

            <div>
              <label className="block text-sm font-semibold mb-2 text-primary">
                Confirm Password
              </label>
              <div className="relative">
                <div className="absolute inset-y-0 left-0 pl-4 flex items-center pointer-events-none">
                  <FaLock className="text-gray-400" />
                </div>
                <input
                  type={showConfirmPassword ? 'text' : 'password'}
                  name="confirmPassword"
                  value={formData.confirmPassword}
                  onChange={handleChange}
                  className="w-full pl-12 pr-12 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-accent focus:border-transparent transition-all"
                  placeholder="â€¢â€¢â€¢â€¢â€¢â€¢â€¢â€¢"
                  required
                  disabled={loading}
                />
                <button
                  type="button"
                  onClick={() => setShowConfirmPassword(!showConfirmPassword)}
                  className="absolute inset-y-0 right-0 pr-4 flex items-center text-gray-400 hover:text-accent transition-colors text-sm"
                >
                  {showConfirmPassword ? 'Hide' : 'Show'}
                </button>
              </div>
            </div>

            <button
              type="submit"
              disabled={loading}
              className="w-full btn btn-primary btn-lg flex items-center justify-center gap-2 disabled:opacity-50 disabled:cursor-not-allowed"
            >
              {loading ? (
                <>
                  <FaSpinner className="animate-spin" />
                  Creating Account...
                </>
              ) : (
                'Create Account'
              )}
            </button>

            <div className="relative my-6">
              <div className="absolute inset-0 flex items-center">
                <div className="w-full border-t border-gray-300"></div>
              </div>
              <div className="relative flex justify-center text-sm">
                <span className="px-2 bg-white text-gray-500">Or continue with</span>
              </div>
            </div>

            <div className="grid grid-cols-2 gap-4">
              <button
                type="button"
                onClick={() => handleOAuthLogin('google')}
                disabled={loading}
                className="flex items-center justify-center gap-2 px-4 py-3 border border-gray-300 rounded-lg hover:bg-gray-50 transition-colors disabled:opacity-50 disabled:cursor-not-allowed"
              >
                <FaGoogle className="text-red-500" />
                <span className="text-sm font-semibold">Google</span>
              </button>

              <button
                type="button"
                onClick={() => handleOAuthLogin('facebook')}
                disabled={loading}
                className="flex items-center justify-center gap-2 px-4 py-3 border border-gray-300 rounded-lg hover:bg-gray-50 transition-colors disabled:opacity-50 disabled:cursor-not-allowed"
              >
                <FaFacebook className="text-blue-600" />
                <span className="text-sm font-semibold">Facebook</span>
              </button>
            </div>

            <div className="text-center pt-4">
              <p className="text-sm text-gray-600">
                Already have an account?{' '}
                <Link to="/login" className="text-accent hover:text-accent-hover font-semibold">
                  Sign In
                </Link>
              </p>
            </div>
          </form>

          <div className="px-8 py-4 bg-gray-50 border-t border-gray-200 text-center">
            <p className="text-xs text-gray-500">
              Â© {new Date().getFullYear()} Hotel Booking. All rights reserved.
            </p>
          </div>
        </div>
      </div>

      {toast && (
        <Toast
          message={toast.message}
          type={toast.type}
          onClose={() => setToast(null)}
        />
      )}
    </div>
  );
};

export default Register;

=================================================================
FILE PATH: src\pages\ResetPassword.jsx
=================================================================
import { useState, useEffect } from 'react';
import { useNavigate, useSearchParams, Link } from 'react-router-dom';
import { LogoDark } from '../assets';
import { FaLock, FaSpinner, FaCheck, FaArrowLeft } from 'react-icons/fa';
import Toast from '../components/Toast';
import { useAuth } from '../context/AuthContext';

const ResetPassword = () => {
  const [searchParams] = useSearchParams();
  const [formData, setFormData] = useState({
    newPassword: '',
    confirmPassword: ''
  });
  const [toast, setToast] = useState(null);
  const [showPassword, setShowPassword] = useState(false);
  const [showConfirmPassword, setShowConfirmPassword] = useState(false);
  const [successMessage, setSuccessMessage] = useState('');
  const navigate = useNavigate();
  const { updatePassword, loading, error: authError } = useAuth();

  // Supabase sends a token in the URL fragment or query param after email click
  const token = searchParams.get('token') || window.location.hash;

  useEffect(() => {
    // If no token, user likely came from ForgotPassword flow or manual access
    // No need to redirect - they can still access the page
    if (!token) {
      console.log('No reset token found in URL. User may need to click email link or request new reset.');
    }
  }, [token]);

  const handleChange = (e) => {
    setFormData({
      ...formData,
      [e.target.name]: e.target.value
    });
  };

  const handleSubmit = async (e) => {
    e.preventDefault();

    // Validation
    if (!formData.newPassword || !formData.confirmPassword) {
      setToast({
        message: 'Please fill in all password fields',
        type: 'error'
      });
      return;
    }

    if (formData.newPassword.length < 6) {
      setToast({
        message: 'Password must be at least 6 characters',
        type: 'error'
      });
      return;
    }

    if (formData.newPassword !== formData.confirmPassword) {
      setToast({
        message: 'Passwords do not match',
        type: 'error'
      });
      return;
    }

    const result = await updatePassword(formData.newPassword);
    
    if (result.success) {
      setToast({
        message: 'Password reset successfully!',
        type: 'success'
      });
      setSuccessMessage('Your password has been reset successfully. You will be redirected to the login page.');
      
      setTimeout(() => {
        navigate('/login', { replace: true });
      }, 3000);
    } else {
      setToast({
        message: result.error || 'Failed to reset password. Please try again.',
        type: 'error'
      });
    }
  };

  return (
    <div className="min-h-screen bg-gradient-to-br from-primary via-primary to-accent/20 flex items-center justify-center p-4 py-12">
      {/* Background decoration */}
      <div className="absolute inset-0 overflow-hidden">
        <div className="absolute top-0 left-0 w-96 h-96 bg-accent/10 rounded-full blur-3xl -translate-x-1/2 -translate-y-1/2"></div>
        <div className="absolute bottom-0 right-0 w-96 h-96 bg-accent/10 rounded-full blur-3xl translate-x-1/2 translate-y-1/2"></div>
      </div>

      {/* Reset Password Card */}
      <div className="relative z-10 w-full max-w-md">
        <div className="bg-white rounded-2xl shadow-2xl overflow-hidden">
          {/* Header */}
          <div className="bg-gradient-to-r from-accent to-accent-hover p-8 text-center">
            <div className="flex justify-center mb-4">
              <LogoDark className="w-[180px] brightness-0 invert" />
            </div>
            <h1 className="text-2xl font-primary text-white mb-2">Reset Password</h1>
            <p className="text-white/90 text-sm">Enter your new password</p>
          </div>

          {!successMessage ? (
            <form onSubmit={handleSubmit} className="p-8 space-y-5">
              {/* New Password */}
              <div>
                <label className="block text-sm font-semibold mb-2 text-primary">
                  New Password *
                </label>
                <div className="relative">
                  <div className="absolute inset-y-0 left-0 pl-4 flex items-center pointer-events-none">
                    <FaLock className="text-gray-400" />
                  </div>
                  <input
                    type={showPassword ? 'text' : 'password'}
                    name="newPassword"
                    value={formData.newPassword}
                    onChange={handleChange}
                    className="w-full pl-12 pr-12 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-accent focus:border-transparent transition-all"
                    placeholder="â€¢â€¢â€¢â€¢â€¢â€¢â€¢â€¢"
                    required
                    disabled={loading}
                    minLength="6"
                  />
                  <button
                    type="button"
                    onClick={() => setShowPassword(!showPassword)}
                    className="absolute inset-y-0 right-0 pr-4 flex items-center text-gray-400 hover:text-accent transition-colors text-sm"
                  >
                    {showPassword ? 'Hide' : 'Show'}
                  </button>
                </div>
                <p className="text-xs text-gray-500 mt-1">
                  At least 6 characters
                </p>
              </div>

              {/* Confirm Password */}
              <div>
                <label className="block text-sm font-semibold mb-2 text-primary">
                  Confirm New Password *
                </label>
                <div className="relative">
                  <div className="absolute inset-y-0 left-0 pl-4 flex items-center pointer-events-none">
                    <FaLock className="text-gray-400" />
                  </div>
                  <input
                    type={showConfirmPassword ? 'text' : 'password'}
                    name="confirmPassword"
                    value={formData.confirmPassword}
                    onChange={handleChange}
                    className="w-full pl-12 pr-12 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-accent focus:border-transparent transition-all"
                    placeholder="â€¢â€¢â€¢â€¢â€¢â€¢â€¢â€¢"
                    required
                    disabled={loading}
                    minLength="6"
                  />
                  <button
                    type="button"
                    onClick={() => setShowConfirmPassword(!showConfirmPassword)}
                    className="absolute inset-y-0 right-0 pr-4 flex items-center text-gray-400 hover:text-accent transition-colors text-sm"
                  >
                    {showConfirmPassword ? 'Hide' : 'Show'}
                  </button>
                </div>
              </div>

              {/* Submit Button */}
              <button
                type="submit"
                disabled={loading}
                className="w-full btn btn-primary btn-lg flex items-center justify-center gap-2 disabled:opacity-50 disabled:cursor-not-allowed"
              >
                {loading ? (
                  <>
                    <FaSpinner className="animate-spin" />
                    Resetting Password...
                  </>
                ) : (
                  <>
                    <FaCheck />
                    Reset Password
                  </>
                )}
              </button>

              {/* Back Links */}
              <div className="text-center pt-2">
                <Link
                  to="/login"
                  className="inline-flex items-center gap-2 text-sm text-accent hover:text-accent-hover transition-colors"
                >
                  <FaArrowLeft />
                  Back to Sign In
                </Link>
              </div>
            </form>
          ) : (
            <div className="p-8 space-y-6">
              <div className="text-center mb-6">
                <FaCheck className="text-5xl text-green-500 mx-auto mb-4" />
                <h2 className="text-xl font-semibold text-gray-800 mb-2">Password Reset Successfully!</h2>
              </div>
              
              <div className="bg-green-50 border border-green-200 rounded-lg p-4">
                <p className="text-sm text-green-900">
                  {successMessage}
                </p>
              </div>

              <Link
                to="/login"
                className="block w-full btn btn-primary btn-lg text-center"
              >
                Go to Sign In
              </Link>
            </div>
          )}

          {/* Footer */}
          <div className="px-8 py-4 bg-gray-50 border-t border-gray-200 text-center">
            <p className="text-xs text-gray-500">
              Â© {new Date().getFullYear()} Hotel Booking. All rights reserved.
            </p>
          </div>
        </div>
      </div>

      {toast && (
        <Toast
          message={toast.message}
          type={toast.type}
          onClose={() => setToast(null)}
        />
      )}
    </div>
  );
};

export default ResetPassword;



=================================================================
FILE PATH: src\pages\RestaurantPage.jsx
=================================================================
import { useState } from "react";
import { ScrollToTop, Toast } from "../components";
import QRPayment from "../components/QRPayment";
import Invoice from "../components/Invoice";
import { useBookingContext } from "../context/BookingContext";
import { useAuth } from "../context/AuthContext";
// âš ï¸ Local images removed - now use Supabase URLs

const STORAGE_URL = "https://sxteddkozzqniebfstag.supabase.co/storage/v1/object/public/hotel-rooms/img/rooms";
const PLACEHOLDER_IMG_MENU = "https://via.placeholder.com/400x300?text=Menu+Image";
import {
  FaUtensils,
  FaWineGlassAlt,
  FaClock,
  FaMapMarkerAlt,
  FaPhoneAlt,
  FaStar,
  FaCheck,
} from "react-icons/fa";

const PLACEHOLDER_IMG = "data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='300' height='200'%3E%3Crect fill='%23ddd' width='300' height='200'/%3E%3Ctext x='50%' y='50%' font-size='14' fill='%23999' text-anchor='middle' dy='.3em'%3EMenu Image%3C/text%3E%3C/svg%3E";

// Helper function to get image for menu items (using Supabase Storage URLs)
const getMenuItemImage = (id) => {
  if (!id) return PLACEHOLDER_IMG_MENU;
  
  // Cycle through images 1-8 (large version)
  // Assumes restaurant images match the room images for diversity
  const imgIndex = (id % 8) === 0 ? 8 : (id % 8);
  return `${STORAGE_URL}/${imgIndex}-lg.png` || PLACEHOLDER_IMG_MENU;
};


const menuCategories = [
  { id: "appetizers", name: "Appetizers", icon: FaUtensils },
  { id: "mains", name: "Main Courses", icon: FaUtensils },
  { id: "desserts", name: "Desserts", icon: FaUtensils },
  { id: "beverages", name: "Beverages", icon: FaWineGlassAlt },
  { id: "combos", name: "Combo Meals", icon: FaUtensils },
];

const menuItems = {
  appetizers: [
    {
      id: 1,
      name: "Truffle Arancini",
      description: "Crispy risotto balls with black truffle and parmesan",
      price: 28,
      popular: true,
      image: getMenuItemImage(1),
    },
    {
      id: 2,
      name: "Wagyu Beef Carpaccio",
      description: "Thinly sliced premium wagyu with arugula and truffle oil",
      price: 45,
      popular: true,
      image: getMenuItemImage(2),
    },
    {
      id: 3,
      name: "Lobster Bisque",
      description: "Creamy bisque with cognac and fresh herbs",
      price: 32,
      image: getMenuItemImage(3),
    },
    {
      id: 4,
      name: "Foie Gras Terrine",
      description: "Duck liver terrine with fig compote and brioche",
      price: 38,
      image: getMenuItemImage(4),
    },
    {
      id: 5,
      name: "Oysters Rockefeller",
      description: "Fresh oysters with spinach, herbs, and pernod",
      price: 35,
      image: getMenuItemImage(5),
    },
  ],
  mains: [
    {
      id: 6,
      name: "Wagyu Ribeye Steak",
      description:
        "Premium 300g ribeye with roasted vegetables and red wine jus",
      price: 95,
      popular: true,
      image: getMenuItemImage(6),
    },
    {
      id: 7,
      name: "Pan-Seared Sea Bass",
      description:
        "Wild-caught sea bass with lemon beurre blanc and seasonal vegetables",
      price: 68,
      image: getMenuItemImage(7),
    },
    {
      id: 8,
      name: "Duck Confit",
      description: "Slow-cooked duck leg with cherry sauce and potato gratin",
      price: 72,
      image: getMenuItemImage(8),
    },
    {
      id: 9,
      name: "Lobster Thermidor",
      description: "Whole lobster with gruyÃ¨re cheese and brandy cream",
      price: 88,
      popular: true,
      image: getMenuItemImage(9),
    },
    {
      id: 10,
      name: "Vegetarian Risotto",
      description:
        "Creamy arborio rice with seasonal vegetables and truffle oil",
      price: 42,
      image: getMenuItemImage(10),
    },
    {
      id: 11,
      name: "Rack of Lamb",
      description:
        "Herb-crusted lamb with mint jus and roasted root vegetables",
      price: 78,
      image: getMenuItemImage(11),
    },
  ],
  desserts: [
    {
      id: 12,
      name: "Chocolate SoufflÃ©",
      description: "Warm dark chocolate soufflÃ© with vanilla ice cream",
      price: 24,
      popular: true,
      image: getMenuItemImage(12),
    },
    {
      id: 13,
      name: "CrÃ¨me BrÃ»lÃ©e",
      description: "Classic vanilla custard with caramelized sugar",
      price: 18,
      image: getMenuItemImage(13),
    },
    {
      id: 14,
      name: "Tiramisu",
      description: "Traditional Italian dessert with espresso and mascarpone",
      price: 22,
      image: getMenuItemImage(14),
    },
    {
      id: 15,
      name: "Lemon Tart",
      description: "Tangy lemon curd in buttery pastry with fresh berries",
      price: 20,
      image: getMenuItemImage(15),
    },
    {
      id: 16,
      name: "Cheese Selection",
      description: "Artisan cheeses with honey, nuts, and crackers",
      price: 32,
      image: getMenuItemImage(16),
    },
  ],
  beverages: [
    {
      id: 17,
      name: "Wine Selection",
      description: "Curated wines from renowned vineyards",
      price: 45,
      popular: true,
      image: getMenuItemImage(17),
    },
    {
      id: 18,
      name: "Craft Cocktails",
      description: "Signature cocktails crafted by our mixologist",
      price: 18,
      image: getMenuItemImage(18),
    },
    {
      id: 19,
      name: "Champagne",
      description: "Premium champagne selection",
      price: 120,
      image: getMenuItemImage(19),
    },
    {
      id: 20,
      name: "Fresh Juices",
      description: "Seasonal fresh fruit juices",
      price: 12,
      image: getMenuItemImage(20),
    },
    {
      id: 21,
      name: "Espresso & Tea",
      description: "Premium coffee and tea selection",
      price: 8,
      image: getMenuItemImage(21),
    },
  ],
  combos: [
    {
      id: 22,
      name: "Romantic Dinner for Two",
      description: "Appetizer, two main courses, dessert, and wine pairing",
      price: 220,
      popular: true,
      image: getMenuItemImage(22),
      items: [
        "Wagyu Beef Carpaccio",
        "Wagyu Ribeye Steak",
        "Pan-Seared Sea Bass",
        "Chocolate SoufflÃ©",
        "Wine Selection",
      ],
    },
    {
      id: 23,
      name: "Family Feast",
      description:
        "Perfect for 4 people: appetizers, mains, desserts, and beverages",
      price: 380,
      popular: true,
      image: getMenuItemImage(23),
      items: [
        "Truffle Arancini",
        "Lobster Thermidor",
        "Duck Confit",
        "Rack of Lamb",
        "Tiramisu",
        "CrÃ¨me BrÃ»lÃ©e",
        "Fresh Juices",
      ],
    },
    {
      id: 24,
      name: "Seafood Lovers",
      description: "Lobster bisque, sea bass, lobster thermidor, and champagne",
      price: 280,
      image: getMenuItemImage(24),
      items: [
        "Lobster Bisque",
        "Pan-Seared Sea Bass",
        "Lobster Thermidor",
        "Champagne",
      ],
    },
    {
      id: 25,
      name: "Vegetarian Delight",
      description:
        "Complete vegetarian menu with seasonal vegetables and risotto",
      price: 120,
      image: getMenuItemImage(25),
      items: [
        "Vegetarian Risotto",
        "Seasonal Salad",
        "Lemon Tart",
        "Fresh Juices",
      ],
    },
    {
      id: 26,
      name: "Business Lunch",
      description:
        "Quick and elegant lunch combo: appetizer, main, and dessert",
      price: 85,
      image: getMenuItemImage(26),
      items: [
        "Truffle Arancini",
        "Wagyu Ribeye Steak",
        "CrÃ¨me BrÃ»lÃ©e",
        "Espresso & Tea",
      ],
    },
  ],
};

const chefSpecials = [
  {
    title: "Chef's Tasting Menu",
    description:
      "A curated 7-course journey showcasing seasonal ingredients and culinary artistry",
    price: 185,
    duration: "2.5 hours",
    includes: ["7 courses", "Wine pairing option", "Chef interaction"],
    image: getMenuItemImage(27),
  },
  {
    title: "Weekend Brunch",
    description:
      "Indulgent brunch experience with bottomless mimosas and live jazz",
    price: 65,
    duration: "11:00 - 15:00",
    includes: [
      "Unlimited brunch items",
      "Bottomless beverages",
      "Live entertainment",
    ],
    image: getMenuItemImage(28),
  },
  {
    title: "Private Dining",
    description:
      "Exclusive private room for intimate gatherings and celebrations",
    price: 250,
    duration: "Custom",
    includes: ["Private room", "Customized menu", "Dedicated service"],
    image: getMenuItemImage(29),
  },
];

const openingHours = [
  { day: "Monday - Thursday", time: "18:00 - 22:30" },
  { day: "Friday - Saturday", time: "18:00 - 23:30" },
  { day: "Sunday", time: "12:00 - 21:00" },
  { day: "Brunch", time: "Saturday & Sunday 11:00 - 15:00" },
];

const RestaurantPage = () => {
  const { user } = useAuth();
  const { createRestaurantBooking, confirmRestaurantBooking } =
    useBookingContext();
  const [activeCategory, setActiveCategory] = useState("appetizers");
  const [toast, setToast] = useState(null);
  const [showQRPayment, setShowQRPayment] = useState(false);
  const [showInvoice, setShowInvoice] = useState(false);
  const [currentBooking, setCurrentBooking] = useState(null);
  const [reservationForm, setReservationForm] = useState({
    name: "",
    email: "",
    phone: "",
    date: "",
    time: "",
    guests: "2",
    specialRequests: "",
  });

  const handleReservationSubmit = (e) => {
    e.preventDefault();
    if (
      !reservationForm.name ||
      !reservationForm.email ||
      !reservationForm.date ||
      !reservationForm.time
    ) {
      setToast({
        type: "error",
        message: "Please fill in all required fields.",
      });
      return;
    }

    // Calculate price (demo: $50 per guest)
    const price = parseInt(reservationForm.guests) * 50;

    const result = createRestaurantBooking({
      name: reservationForm.name,
      email: reservationForm.email,
      phone: reservationForm.phone,
      date: `${reservationForm.date}T${reservationForm.time}`,
      guests: parseInt(reservationForm.guests),
      specialRequests: reservationForm.specialRequests,
      userId: user?.id,
      userName: reservationForm.name,
      userEmail: reservationForm.email,
      price,
      totalPrice: price,
    });

    if (result?.success) {
      setCurrentBooking(result.booking);
      setShowQRPayment(true);
    }
  };

  const handlePaymentSuccess = (paymentData) => {
    if (!currentBooking) return;

    const confirmedBooking = confirmRestaurantBooking(
      currentBooking.id,
      paymentData
    );
    setCurrentBooking(confirmedBooking);
    setShowQRPayment(false);
    setShowInvoice(true);
    setToast({
      type: "success",
      message: "Payment successful! Your reservation is confirmed.",
    });
    setReservationForm({
      name: "",
      email: "",
      phone: "",
      date: "",
      time: "",
      guests: "2",
      specialRequests: "",
    });
  };

  const handleCloseQRPayment = () => {
    setShowQRPayment(false);
    setCurrentBooking(null);
  };

  const handleInputChange = (e) => {
    const { name, value } = e.target;
    setReservationForm((prev) => ({ ...prev, [name]: value }));
  };

  return (
    <div className="min-h-screen bg-[#f7f4ef]">
      <ScrollToTop />
      {toast && (
        <Toast
          message={toast.message}
          type={toast.type}
          onClose={() => setToast(null)}
        />
      )}

      {/* Hero Section */}
      <section className="relative h-[60vh] min-h-[480px] flex items-center justify-center text-center">
        <img
          src={`${STORAGE_URL}/2-lg.png`}
          alt="Restaurant interior"
          className="absolute inset-0 h-full w-full object-cover"
        />
        <div className="absolute inset-0 bg-black/60" />
        <div className="relative z-10 max-w-3xl px-6 text-white">
          <p className="font-tertiary uppercase tracking-[6px] text-sm mb-4">
            Adina Hotel & Spa
          </p>
          <h1 className="font-primary text-4xl md:text-5xl lg:text-6xl leading-tight mb-6">
            Fine Dining Experience
          </h1>
          <p className="text-lg text-white/80">
            Indulge in culinary excellence with our award-winning chefs, curated
            wine selection, and elegant ambiance.
          </p>
        </div>
      </section>

      {/* Menu Section */}
      <section className="container mx-auto px-6 lg:px-0 py-20">
        <div className="text-center mb-12">
          <p className="font-tertiary uppercase tracking-[4px] text-xs text-primary/70 mb-2">
            Our Menu
          </p>
          <h2 className="font-primary text-4xl mb-4">Culinary Excellence</h2>
          <p className="text-primary/70 max-w-2xl mx-auto">
            Each dish is crafted with precision, using the finest ingredients
            sourced from local artisans and international purveyors.
          </p>
        </div>

        {/* Category Tabs */}
        <div className="flex flex-wrap justify-center gap-4 mb-12">
          {menuCategories.map((category) => {
            const Icon = category.icon;
            return (
              <button
                key={category.id}
                onClick={() => setActiveCategory(category.id)}
                className={`flex items-center gap-2 px-6 py-3 border rounded-full transition ${
                  activeCategory === category.id
                    ? "bg-accent text-white border-accent"
                    : "border-[#eadfcf] text-primary hover:border-accent"
                }`}
              >
                <Icon />
                <span>{category.name}</span>
              </button>
            );
          })}
        </div>

        {/* Menu Items Grid */}
        <div className="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6">
          {menuItems[activeCategory].map((item) => (
            <div
              key={item.id}
              className="bg-white shadow-sm border border-[#eadfcf] hover:shadow-lg transition-shadow overflow-hidden"
            >
              <div className="relative h-48 overflow-hidden">
                <img
                  src={item.image}
                  alt={item.name}
                  className="w-full h-full object-cover hover:scale-110 transition-transform duration-300"
                />
                {item.popular && (
                  <span className="absolute top-3 right-3 flex items-center gap-1 bg-accent text-white px-3 py-1 rounded-full text-xs">
                    <FaStar />
                    <span>Popular</span>
                  </span>
                )}
              </div>
              <div className="p-6">
                <h3 className="font-primary text-xl mb-2">{item.name}</h3>
                <p className="text-sm text-primary/70 mb-3">
                  {item.description}
                </p>
                {item.items && (
                  <div className="mb-3">
                    <p className="text-xs font-semibold text-primary/60 mb-1">
                      Includes:
                    </p>
                    <ul className="text-xs text-primary/70 space-y-1">
                      {item.items.map((foodItem, idx) => (
                        <li key={idx} className="flex items-center gap-1">
                          <FaCheck className="text-accent text-[10px]" />
                          <span>{foodItem}</span>
                        </li>
                      ))}
                    </ul>
                  </div>
                )}
                <p className="font-primary text-2xl text-accent">
                  ${item.price}
                </p>
              </div>
            </div>
          ))}
        </div>
      </section>

      {/* Chef's Specials */}
      <section className="bg-white py-20">
        <div className="container mx-auto px-6 lg:px-0">
          <div className="text-center mb-12">
            <p className="font-tertiary uppercase tracking-[4px] text-xs text-primary/70 mb-2">
              Special Experiences
            </p>
            <h2 className="font-primary text-4xl mb-4">Chef's Specials</h2>
          </div>

          <div className="grid grid-cols-1 md:grid-cols-3 gap-8">
            {chefSpecials.map((special, index) => (
              <div
                key={index}
                className="bg-[#f7f4ef] border border-[#eadfcf] hover:shadow-lg transition-shadow overflow-hidden"
              >
                <div className="relative h-48 overflow-hidden">
                  <img
                    src={special.image}
                    alt={special.title}
                    className="w-full h-full object-cover hover:scale-110 transition-transform duration-300"
                  />
                </div>
                <div className="p-8">
                  <h3 className="font-primary text-2xl mb-3">
                    {special.title}
                  </h3>
                  <p className="text-primary/70 mb-4">{special.description}</p>
                  <div className="mb-4">
                    <p className="font-primary text-3xl text-accent mb-2">
                      ${special.price}
                    </p>
                    <p className="text-sm text-primary/60">
                      {special.duration}
                    </p>
                  </div>
                  <ul className="space-y-2">
                    {special.includes.map((item, idx) => (
                      <li
                        key={idx}
                        className="flex items-center gap-2 text-sm text-primary/70"
                      >
                        <FaCheck className="text-accent" />
                        <span>{item}</span>
                      </li>
                    ))}
                  </ul>
                </div>
              </div>
            ))}
          </div>
        </div>
      </section>

      {/* Reservation Section */}
      <section className="container mx-auto px-6 lg:px-0 py-20">
        <div className="grid grid-cols-1 lg:grid-cols-2 gap-12">
          {/* Reservation Form */}
          <div className="bg-white p-8 shadow-sm border border-[#eadfcf]">
            <p className="font-tertiary uppercase tracking-[4px] text-xs text-primary/70 mb-2">
              Reserve a Table
            </p>
            <h2 className="font-primary text-3xl mb-6">Book Your Experience</h2>
            <form onSubmit={handleReservationSubmit} className="space-y-5">
              <div className="grid grid-cols-1 md:grid-cols-2 gap-5">
                <div>
                  <label className="block text-sm font-semibold mb-2">
                    Full Name *
                  </label>
                  <input
                    type="text"
                    name="name"
                    value={reservationForm.name}
                    onChange={handleInputChange}
                    className="w-full border border-[#eadfcf] px-4 py-3 focus:outline-none focus:border-accent"
                    placeholder="John Carter"
                    required
                  />
                </div>
                <div>
                  <label className="block text-sm font-semibold mb-2">
                    Email *
                  </label>
                  <input
                    type="email"
                    name="email"
                    value={reservationForm.email}
                    onChange={handleInputChange}
                    className="w-full border border-[#eadfcf] px-4 py-3 focus:outline-none focus:border-accent"
                    placeholder="john@example.com"
                    required
                  />
                </div>
              </div>

              <div className="grid grid-cols-1 md:grid-cols-2 gap-5">
                <div>
                  <label className="block text-sm font-semibold mb-2">
                    Phone
                  </label>
                  <input
                    type="tel"
                    name="phone"
                    value={reservationForm.phone}
                    onChange={handleInputChange}
                    className="w-full border border-[#eadfcf] px-4 py-3 focus:outline-none focus:border-accent"
                    placeholder="+84 987 654 321"
                  />
                </div>
                <div>
                  <label className="block text-sm font-semibold mb-2">
                    Number of Guests *
                  </label>
                  <select
                    name="guests"
                    value={reservationForm.guests}
                    onChange={handleInputChange}
                    className="w-full border border-[#eadfcf] px-4 py-3 focus:outline-none focus:border-accent bg-white"
                    required
                  >
                    {[1, 2, 3, 4, 5, 6, 7, 8].map((num) => (
                      <option key={num} value={num}>
                        {num} {num === 1 ? "Guest" : "Guests"}
                      </option>
                    ))}
                  </select>
                </div>
              </div>

              <div className="grid grid-cols-1 md:grid-cols-2 gap-5">
                <div>
                  <label className="block text-sm font-semibold mb-2">
                    Date *
                  </label>
                  <input
                    type="date"
                    name="date"
                    value={reservationForm.date}
                    onChange={handleInputChange}
                    min={new Date().toISOString().split("T")[0]}
                    className="w-full border border-[#eadfcf] px-4 py-3 focus:outline-none focus:border-accent"
                    required
                  />
                </div>
                <div>
                  <label className="block text-sm font-semibold mb-2">
                    Time *
                  </label>
                  <input
                    type="time"
                    name="time"
                    value={reservationForm.time}
                    onChange={handleInputChange}
                    className="w-full border border-[#eadfcf] px-4 py-3 focus:outline-none focus:border-accent"
                    required
                  />
                </div>
              </div>

              <div>
                <label className="block text-sm font-semibold mb-2">
                  Special Requests
                </label>
                <textarea
                  name="specialRequests"
                  value={reservationForm.specialRequests}
                  onChange={handleInputChange}
                  rows={3}
                  className="w-full border border-[#eadfcf] px-4 py-3 focus:outline-none focus:border-accent resize-none"
                  placeholder="Dietary restrictions, celebration, etc."
                />
              </div>

              <button
                type="submit"
                className="btn btn-primary w-full uppercase tracking-[4px]"
              >
                Reserve Table
              </button>
            </form>
          </div>

          {/* Restaurant Info */}
          <div className="space-y-8">
            <div className="bg-white p-8 shadow-sm border border-[#eadfcf]">
              <h3 className="font-primary text-2xl mb-6">Opening Hours</h3>
              <div className="space-y-4">
                {openingHours.map((schedule, index) => (
                  <div
                    key={index}
                    className="flex items-center justify-between pb-4 border-b border-[#eadfcf] last:border-0"
                  >
                    <div className="flex items-center gap-3">
                      <FaClock className="text-accent" />
                      <span className="font-semibold">{schedule.day}</span>
                    </div>
                    <span className="text-primary/70">{schedule.time}</span>
                  </div>
                ))}
              </div>
            </div>

            <div className="bg-white p-8 shadow-sm border border-[#eadfcf]">
              <h3 className="font-primary text-2xl mb-6">
                Contact Information
              </h3>
              <div className="space-y-4">
                <div className="flex items-start gap-4">
                  <FaMapMarkerAlt className="text-accent mt-1" />
                  <div>
                    <p className="font-semibold">Location</p>
                    <p className="text-primary/70">
                      12 Tran Hung Dao, Hoan Kiem, Ha Noi
                    </p>
                  </div>
                </div>
                <div className="flex items-start gap-4">
                  <FaPhoneAlt className="text-accent mt-1" />
                  <div>
                    <p className="font-semibold">Reservations</p>
                    <p className="text-primary/70">+84 24 1234 5678</p>
                  </div>
                </div>
                <div className="flex items-start gap-4">
                  <FaUtensils className="text-accent mt-1" />
                  <div>
                    <p className="font-semibold">Email</p>
                    <p className="text-primary/70">restaurant@adinahotel.com</p>
                  </div>
                </div>
              </div>
            </div>

            <div className="bg-accent/10 p-8 border border-accent/20">
              <h3 className="font-primary text-xl mb-3">Dress Code</h3>
              <p className="text-primary/70 text-sm">
                Smart casual attire is recommended. We kindly request no
                sportswear or beachwear in the dining room.
              </p>
            </div>
          </div>
        </div>
      </section>

      {showQRPayment && currentBooking && (
        <QRPayment
          bookingData={currentBooking}
          onPaymentSuccess={handlePaymentSuccess}
          onClose={handleCloseQRPayment}
          type="restaurant"
        />
      )}

      {showInvoice && currentBooking && (
        <Invoice
          booking={currentBooking}
          onClose={() => setShowInvoice(false)}
          onDownload={() => {
            setToast({
              type: "success",
              message: "PDF downloaded successfully!",
            });
          }}
        />
      )}
    </div>
  );
};

export default RestaurantPage;


=================================================================
FILE PATH: src\pages\RoomDetails.jsx
=================================================================
import { ScrollToTop, Toast } from '../components';
import QRPayment from '../components/QRPayment';
import Invoice from '../components/Invoice';
import { useRoomContext } from '../context/RoomContext';
import { useAuth } from '../context/AuthContext';
import { hotelRules } from '../constants/data';
import { useParams } from 'react-router-dom';
import { FaCheck, FaStar } from 'react-icons/fa';
import { useMemo, useState } from 'react';

// Placeholder image - will be replaced by Supabase Storage URL
const PLACEHOLDER_IMG = "data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='800' height='600'%3E%3Crect fill='%23ddd' width='800' height='600'/%3E%3Ctext x='50%' y='50%' font-size='24' fill='%23999' text-anchor='middle' dy='.3em'%3ELoading image...%3C/text%3E%3C/svg%3E";

const createLocalId = () => {
  if (typeof crypto !== 'undefined' && crypto.randomUUID) {
    return crypto.randomUUID();
  }
  return Date.now().toString();
};

const RoomDetails = () => {
  const { id } = useParams();
  const {
    allRooms,
    bookRoom,
    confirmBookingPayment,
    hasUserBookedRoom,
    addReview,
    calculatePricingForRoom,
  } = useRoomContext();
  const { user, isAuthenticated } = useAuth();

  // Support both numeric IDs (legacy) and UUID strings (new)
  const room = allRooms.find(roomItem => 
    roomItem.id === id || roomItem.id === Number(id)
  );

  const [reservation, setReservation] = useState({
    checkIn: '',
    checkOut: '',
    adults: 2,
    kids: 0,
    note: '',
    promoCode: '', // New field for promotion code
  });
  const [reviewForm, setReviewForm] = useState({
    rating: 5,
    comment: '',
  });
  const [toast, setToast] = useState(null);
  const [showQRPayment, setShowQRPayment] = useState(false);
  const [showInvoice, setShowInvoice] = useState(false);
  const [currentBooking, setCurrentBooking] = useState(null);

  const maxGuests = room?.maxPerson || 1;

  const nights = useMemo(() => {
    if (!reservation.checkIn || !reservation.checkOut) return 1;
    const start = new Date(reservation.checkIn);
    const end = new Date(reservation.checkOut);
    const diff = end.getTime() - start.getTime();
    const days = Math.max(1, Math.ceil(diff / (1000 * 60 * 60 * 24)));
    return Number.isFinite(days) ? days : 1;
  }, [reservation.checkIn, reservation.checkOut]);

  const averageRating = useMemo(() => {
    if (!room?.reviews?.length) return null;
    const score = room.reviews.reduce((sum, review) => sum + review.rating, 0) / room.reviews.length;
    return score.toFixed(1);
  }, [room]);

  if (!room) {
    return (
      <section className='min-h-screen flex items-center justify-center'>
        <p className='text-xl text-primary/70'>KhÃ´ng tÃ¬m tháº¥y phÃ²ng phÃ¹ há»£p.</p>
      </section>
    );
  }

  const totalGuests = reservation.adults + reservation.kids;
  const pricingPreview = useMemo(() => {
    if (!room || !reservation.checkIn || !reservation.checkOut) return null;
    return calculatePricingForRoom(room, reservation.checkIn, reservation.checkOut);
  }, [room, reservation.checkIn, reservation.checkOut, calculatePricingForRoom]);
  const totalPrice = pricingPreview?.total ?? nights * room.price;
  const canReview = isAuthenticated() && hasUserBookedRoom(user?.id, room.id);

  const showToast = (payload) => {
    setToast(payload);
    setTimeout(() => setToast(null), 4000);
  };

  const handleReservationChange = (field, value) => {
    setReservation(prev => ({ ...prev, [field]: value }));
  };

  const validateBooking = () => {
    if (!isAuthenticated()) {
      showToast({ type: 'info', message: 'Please sign in to book this room.' });
      return false;
    }
    if (!reservation.checkIn || !reservation.checkOut) {
      showToast({ type: 'error', message: 'Select both check-in and check-out dates.' });
      return false;
    }
    if (new Date(reservation.checkOut) <= new Date(reservation.checkIn)) {
      showToast({ type: 'error', message: 'Check-out must be after check-in.' });
      return false;
    }
    if (totalGuests > maxGuests) {
      showToast({ type: 'error', message: `This category hosts up to ${maxGuests} guests.` });
      return false;
    }
    return true;
  };

  const handleBooking = (e) => {
    e.preventDefault();
    if (!validateBooking()) return;

    const result = bookRoom({
      roomId: room.id,
      roomName: room.name,
      userId: user?.id,
      userName: user?.name || user?.email?.split('@')[0],
      userEmail: user?.email,
      checkIn: reservation.checkIn,
      checkOut: reservation.checkOut,
      adults: reservation.adults,
      kids: reservation.kids,
      note: reservation.note,
      promoCode: reservation.promoCode, // Truyá»n promo code
    });

    if (result?.success) {
      setCurrentBooking(result.booking);
      setShowQRPayment(true);
    } else {
      showToast({
        type: 'error',
        message: result?.error || 'Unable to complete booking. Please try another selection.',
      });
    }
  };

  const handlePaymentSuccess = (paymentData) => {
    if (!currentBooking) return;
    
    const confirmedBooking = confirmBookingPayment(currentBooking.id, paymentData);
    setCurrentBooking(confirmedBooking);
    setShowQRPayment(false);
    setShowInvoice(true);
    showToast({
      type: 'success',
      message: 'Payment successful! Your booking is confirmed.',
    });
    setReservation(prev => ({ ...prev, note: '' }));
  };

  const handleCloseQRPayment = () => {
    setShowQRPayment(false);
    setCurrentBooking(null);
  };

  const handleReviewSubmit = (e) => {
    e.preventDefault();
    if (!isAuthenticated()) {
      showToast({ type: 'info', message: 'Sign in to share your review.' });
      return;
    }
    if (!canReview) {
      showToast({ type: 'error', message: 'Only confirmed guests can rate this room.' });
      return;
    }
    if (!reviewForm.comment.trim()) {
      showToast({ type: 'error', message: 'Please add your thoughts before submitting.' });
      return;
    }

    addReview(room.id, {
      id: createLocalId(),
      userId: user?.id,
      userName: user?.name || user?.email?.split('@')[0],
      rating: reviewForm.rating,
      comment: reviewForm.comment,
      createdAt: new Date().toISOString(),
    });

    showToast({ type: 'success', message: 'Thank you for sharing your experience!' });
    setReviewForm({ rating: 5, comment: '' });
  };

  return (
    <section>
      <ScrollToTop />
      {toast && <Toast message={toast.message} type={toast.type} onClose={() => setToast(null)} />}

      <div className='bg-room h-[560px] relative flex justify-center items-center bg-cover bg-center'>
        <div className='absolute w-full h-full bg-black/70' />
        <h1 className='text-5xl lg:text-6xl text-white z-20 font-primary text-center'>{room.name} Details</h1>
      </div>

      <div className='container mx-auto'>
        <div className='flex flex-col lg:flex-row lg:gap-x-8 h-full py-24'>
          <div className='w-full lg:w-[60%] h-full text-justify'>
            <h2 className='h2'>{room.name}</h2>
            <p className='mb-8 text-primary/80'>{room.description}</p>
            <img
              className='mb-8'
              src={room.imageLg || room.image || PLACEHOLDER_IMG}
              alt={room.name}
              onError={(e) => {
                console.warn('âŒ Large image failed to load from Supabase:', room.imageLg);
                e.target.src = PLACEHOLDER_IMG;
              }}
            />

            <div className='flex items-center gap-4 mb-10'>
              <div className='text-4xl font-primary text-accent'>
                {averageRating ? averageRating : 'N/A'}
              </div>
              <div className='flex text-accent'>
                {[...Array(5)].map((_, index) => (
                  <FaStar
                    key={index}
                    className={`text-2xl ${averageRating && index < Math.round(averageRating) ? 'text-accent' : 'text-accent/20'}`}
                  />
                ))}
              </div>
              <p className='text-sm text-primary/70'>
                {room.reviews?.length ? `${room.reviews.length} reviews` : 'Be the first to review this stay'}
              </p>
            </div>


            <div className='mt-12'>
              <h3 className='h3 mb-3'>Details</h3>
              <p className='mb-12'>
                Lorem ipsum dolor sit amet consectetur adipisicing elit. Blanditiis accusantium sapiente quas quos explicabo, odit nostrum? Reiciendis illum dolor eos dicta. Illum vero at hic nostrum sint et quod porro.
              </p>

              {/* icons grid */}
              <div className="grid grid-cols-3 gap-6 mb-12">
                {room.facilities && room.facilities.length > 0 ? (
                  room.facilities.map((item, index) => (
                    <div key={index} className='flex items-center gap-x-3 flex-1'>
                      <div className='text-3xl text-accent'>âœ“</div>
                      <div className='text-base'>{typeof item === 'string' ? item : item.name}</div>
                    </div>
                  ))
                ) : (
                  <p className='text-primary/70 col-span-3'>No facilities information available</p>
                )}
              </div>
            </div>

            <div className='space-y-6'>
              <h3 className='h3'>Guest impressions</h3>
              <div className='space-y-4'>
                {room.reviews?.length ? (
                  room.reviews.map(review => (
                    <div key={review.id} className='border border-accent/10 p-5 bg-white shadow-sm'>
                      <div className='flex justify-between items-center mb-2'>
                        <div>
                          <p className='font-semibold'>{review.userName}</p>
                          <span className='text-xs text-primary/60'>
                            {review.stayDate ||
                              (review.createdAt
                                ? new Date(review.createdAt).toLocaleDateString('vi-VN')
                                : 'KhÃ¡ch áº©n danh')}
                          </span>
                        </div>
                        <div className='flex text-accent'>
                          {[...Array(5)].map((_, index) => (
                            <FaStar
                              key={index}
                              className={`${index < review.rating ? 'text-accent' : 'text-accent/20'}`}
                            />
                          ))}
                        </div>
                      </div>
                      <p className='text-primary/80 leading-relaxed'>{review.comment}</p>
                    </div>
                  ))
                ) : (
                  <p className='text-primary/70'>No reviews for this room yet.</p>
                )}
              </div>

              <div className='mt-8'>
                <h4 className='font-primary text-2xl mb-4'>Share your stay experience</h4>
                {canReview ? (
                  <form onSubmit={handleReviewSubmit} className='space-y-4'>
                    <div>
                      <label className='block text-sm font-semibold mb-2'>Rating</label>
                      <select
                        value={reviewForm.rating}
                        onChange={(e) => setReviewForm(prev => ({ ...prev, rating: Number(e.target.value) }))}
                        className='border border-accent/20 px-4 py-3 w-full focus:outline-none focus:border-accent'
                      >
                        {[5, 4, 3, 2, 1].map(score => (
                          <option key={score} value={score}>
                            {score} sao
                          </option>
                        ))}
                      </select>
                    </div>
                    <div>
                      <label className='block text-sm font-semibold mb-2'>Your thoughts</label>
                      <textarea
                        value={reviewForm.comment}
                        onChange={(e) => setReviewForm(prev => ({ ...prev, comment: e.target.value }))}
                        rows={4}
                        className='border border-accent/20 px-4 py-3 w-full focus:outline-none focus:border-accent resize-none'
                        placeholder='What delighted you the most during your stay?'
                      />
                    </div>
                    <button type='submit' className='btn btn-secondary'>
                      Submit review
                    </button>
                  </form>
                ) : (
                  <p className='text-sm text-primary/70'>
                    Sign in and complete a stay in this room to unlock review privileges.
                  </p>
                )}
              </div>
            </div>
          </div>

          <div className='w-full lg:w-[40%] h-full'>
            <div className='py-8 px-6 bg-accent/20 mb-12'>
              <h3 className='h3 mb-6'>Your Reservation</h3>
              <div className='flex justify-between items-center mb-6'>
                <div>
                  <p className='text-sm text-primary/60'>Rate per night</p>
                  <p className='text-3xl font-primary text-accent'>${room.price}</p>
                </div>
                <div className='text-sm text-primary/60 text-right'>
                  <p>Up to {maxGuests} guests</p>
                  <p>{nights} night(s) â€¢ ${totalPrice}</p>
                </div>
              </div>

              <form className='space-y-4' onSubmit={handleBooking}>
                <div className='grid grid-cols-1 sm:grid-cols-2 gap-4'>
                  <div>
                    <label className='text-xs uppercase tracking-[2px] text-primary/60'>Check-in</label>
                    <input
                      type='date'
                      value={reservation.checkIn}
                      onChange={(e) => handleReservationChange('checkIn', e.target.value)}
                      className='w-full bg-white border border-accent/20 px-4 py-3 focus:outline-none focus:border-accent'
                    />
                  </div>
                  <div>
                    <label className='text-xs uppercase tracking-[2px] text-primary/60'>Check-out</label>
                    <input
                      type='date'
                      value={reservation.checkOut}
                      onChange={(e) => handleReservationChange('checkOut', e.target.value)}
                      className='w-full bg-white border border-accent/20 px-4 py-3 focus:outline-none focus:border-accent'
                    />
                  </div>
                </div>

                <div className='grid grid-cols-1 sm:grid-cols-2 gap-4'>
                  <div>
                    <label className='text-xs uppercase tracking-[2px] text-primary/60 mb-2 block'>Adults</label>
                    <select
                      value={reservation.adults}
                      onChange={(e) => {
                        const nextAdults = Number(e.target.value);
                        const spare = Math.max(0, maxGuests - nextAdults);
                        const nextKids = Math.min(reservation.kids, spare);
                        setReservation(prev => ({ ...prev, adults: nextAdults, kids: nextKids }));
                      }}
                      className='w-full border border-accent/20 px-4 py-3 focus:outline-none focus:border-accent bg-white cursor-pointer'
                    >
                      {Array.from({ length: maxGuests }, (_, idx) => idx + 1).map(value => (
                        <option key={value} value={value}>{value} {value === 1 ? 'Adult' : 'Adults'}</option>
                      ))}
                    </select>
                  </div>
                  <div>
                    <label className='text-xs uppercase tracking-[2px] text-primary/60 mb-2 block'>Kids</label>
                    <select
                      value={reservation.kids}
                      onChange={(e) => {
                        const selectedKids = Number(e.target.value);
                        const total = reservation.adults + selectedKids;
                        if (total <= maxGuests) {
                          handleReservationChange('kids', selectedKids);
                        } else {
                          const maxKids = Math.max(0, maxGuests - reservation.adults);
                          handleReservationChange('kids', maxKids);
                          showToast({ 
                            type: 'error', 
                            message: `Maximum ${maxGuests} guests allowed. Kids adjusted to ${maxKids}.` 
                          });
                        }
                      }}
                      className='w-full border border-accent/20 px-4 py-3 focus:outline-none focus:border-accent bg-white cursor-pointer'
                      disabled={reservation.adults >= maxGuests}
                    >
                      {Array.from({ length: Math.max(0, maxGuests - reservation.adults) + 1 }, (_, idx) => idx).map(value => (
                        <option key={value} value={value}>
                          {value === 0 ? 'No Kids' : `${value} ${value === 1 ? 'Kid' : 'Kids'}`}
                        </option>
                      ))}
                    </select>
                    {reservation.adults >= maxGuests && (
                      <p className='text-xs text-primary/50 mt-1'>Maximum guests reached</p>
                    )}
                  </div>
                </div>
                <div>
                  <label className='text-xs uppercase tracking-[2px] text-primary/60'>Promo Code (Optional)</label>
                  <input
                    type='text'
                    value={reservation.promoCode}
                    onChange={(e) => handleReservationChange('promoCode', e.target.value)}
                    className='w-full bg-white border border-accent/20 px-4 py-3 focus:outline-none focus:border-accent'
                    placeholder='E.g. WELCOME25'
                  />
                </div>
                <div>
                  <label className='text-xs uppercase tracking-[2px] text-primary/60'>Special requests</label>
                  <textarea
                    rows={3}
                    value={reservation.note}
                    onChange={(e) => handleReservationChange('note', e.target.value)}
                    className='w-full bg-white border border-accent/20 px-4 py-3 focus:outline-none focus:border-accent resize-none'
                    placeholder='E.g. birthday setup, dietary requirements...'
                  />
                </div>

                <button type='submit' className='btn btn-primary w-full uppercase tracking-[4px]'>
                  Confirm reservation
                </button>
              </form>

              {pricingPreview?.breakdown?.length > 0 && (
                <div className='mt-8 bg-white border border-accent/20 rounded'>
                  <div className='px-4 py-3 border-b border-accent/10'>
                    <p className='text-sm font-semibold text-primary'>Nightly breakdown</p>
                  </div>
                  <ul className='divide-y divide-accent/10'>
                    {pricingPreview.breakdown.map((night) => (
                      <li key={night.date} className='px-4 py-3 flex items-center justify-between text-sm'>
                        <div>
                          <p className='font-semibold'>{night.date}</p>
                          <p className='text-primary/60'>{night.label}</p>
                        </div>
                        <p className='font-primary text-lg text-accent'>${night.rate}</p>
                      </li>
                    ))}
                  </ul>
                </div>
              )}
            </div>

            <div>
              <h3 className='h3'>Hotel Rules</h3>
              <p className='mb-6 text-justify'>
                Lorem ipsum dolor sit amet consectetur adipisicing elit. Commodi dolores iure fugiat eligendi illo est, aperiam quasi distinctio necessitatibus suscipit nemo provident eaque voluptas earum.
              </p>

              <ul className='flex flex-col gap-y-4'>
                {
                  hotelRules.map(({ rules }, idx) =>
                    <li key={idx} className='flex items-center gap-x-4'>
                      <FaCheck className='text-accent' />
                      {rules}
                    </li>
                  )
                }
              </ul>
            </div>

          </div>

        </div>
      </div>

      {showQRPayment && currentBooking && (
        <QRPayment
          bookingData={currentBooking}
          onPaymentSuccess={handlePaymentSuccess}
          onClose={handleCloseQRPayment}
          type="room"
        />
      )}

      {showInvoice && currentBooking && (
        <Invoice
          booking={currentBooking}
          onClose={() => setShowInvoice(false)}
          onDownload={() => {
            showToast({ type: 'success', message: 'PDF downloaded successfully!' });
          }}
        />
      )}
    </section>
  );
};

export default RoomDetails;


=================================================================
FILE PATH: src\pages\RoomsPage.jsx
=================================================================
import { BookForm, Rooms, ScrollToTop, CategoryFilter } from "../components";
import {
  FaCrown,
  FaConciergeBell,
  FaWineGlassAlt,
  FaUmbrellaBeach,
} from "react-icons/fa";
import { useRoomContext } from "../context/RoomContext";
import { useMemo } from "react";

const STORAGE_URL = 'https://sxteddkozzqniebfstag.supabase.co/storage/v1/object/public/hotel-rooms/img';

const highlights = [
  {
    title: "Signature Suites",
    description: "Spacious villas with private terraces and curated amenities.",
    icon: FaCrown,
  },
  {
    title: "Butler Service",
    description: "24/7 dedicated hosts ready to personalize every detail.",
    icon: FaConciergeBell,
  },
  {
    title: "Gourmet Moments",
    description:
      "In-room dining with pairing menus from our award-winning chefs.",
    icon: FaWineGlassAlt,
  },
  {
    title: "Resort Experiences",
    description:
      "Private spa rituals, yacht cruises, and sunset lounge access.",
    icon: FaUmbrellaBeach,
  },
];

const stats = [
  { label: "Suites & Villas", value: "80+" },
  { label: "Average Size", value: "120 mÂ²" },
  { label: "Guest Rating", value: "4.9/5" },
  { label: "Concierge Team", value: "24/7" },
];

const RoomsPage = () => {
  const { rooms } = useRoomContext();

  const resultText = useMemo(() => {
    if (!rooms?.length) return "No matching rooms";
    if (rooms.length === 1) return "1 room available";
    return `${rooms.length} rooms available`;
  }, [rooms]);

  return (
    <div className="min-h-screen bg-[#f7f4ef]">
      <ScrollToTop />

      <section className="relative h-[60vh] min-h-[480px] flex items-center justify-center text-center">
        <img
          src={`${STORAGE_URL}/img/heroSlider/3.jpg`}
          alt="Panoramic hotel suite"
          className="absolute inset-0 h-full w-full object-cover"
        />
        <div className="absolute inset-0 bg-black/60" />
        <div className="relative z-10 max-w-3xl px-6 text-white">
          <p className="font-tertiary uppercase tracking-[6px] text-sm mb-4">
            Adina Hotel &amp; Spa
          </p>
          <h1 className="font-primary text-4xl md:text-5xl lg:text-6xl leading-tight mb-6">
            Curated Rooms &amp; Bespoke Suites
          </h1>
          <p className="text-lg text-white/80">
            Discover sophisticated residences bathed in natural light with
            handcrafted interiors, premium linens, and immersive smart-home
            comforts.
          </p>
        </div>
      </section>

      <section className="container mx-auto px-6 lg:px-0 mt-10 relative z-20">
        <div className="bg-white shadow-2xl border border-white/60">
          <div className="bg-accent/10 px-6 py-4 flex items-center justify-between flex-wrap gap-4">
            <div>
              <p className="font-tertiary uppercase tracking-[4px] text-xs text-primary">
                Plan your stay
              </p>
              <h3 className="font-primary text-2xl">
                Availability &amp; Rates
              </h3>
            </div>
            <p className="text-sm text-primary/70 max-w-sm">
              Select your travel dates and group size to view tailor-made
              options instantly.
            </p>
          </div>
          <div className="p-4 lg:p-6 bg-white">
            <BookForm />
          </div>
        </div>
      </section>

      <section className="container mx-auto px-6 lg:px-0 py-20">
        <CategoryFilter />

        <div className="grid grid-cols-1 md:grid-cols-2 gap-6 mb-12">
          {stats.map((stat) => (
            <div
              key={stat.label}
              className="bg-white shadow-sm border border-[#eadfcf] p-6"
            >
              <p className="font-tertiary uppercase tracking-[3px] text-xs text-primary/70">
                {stat.label}
              </p>
              <p className="font-primary text-4xl text-accent mt-2">
                {stat.value}
              </p>
            </div>
          ))}
        </div>

        <div className="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6">
          {highlights.map(({ title, description, icon: Icon }) => (
            <div
              key={title}
              className="bg-white p-6 shadow-sm border border-[#eadfcf] hover:-translate-y-1 transition-transform duration-300"
            >
              <Icon className="text-accent text-3xl mb-4" />
              <h3 className="font-primary text-xl mb-2">{title}</h3>
              <p className="text-sm text-primary/70 leading-relaxed">
                {description}
              </p>
            </div>
          ))}
        </div>
      </section>

      <Rooms />
    </div>
  );
};

export default RoomsPage;

=================================================================
FILE PATH: src\pages\SpaPage.jsx
=================================================================
import { useState } from 'react';
import { ScrollToTop, Toast } from '../components';
import QRPayment from '../components/QRPayment';
import Invoice from '../components/Invoice';
import { useBookingContext } from '../context/BookingContext';
import { useAuth } from '../context/AuthContext';
// âš ï¸ Local images removed - now use Supabase URLs
import { FaSpa, FaClock, FaMapMarkerAlt, FaPhoneAlt, FaStar, FaCheck, FaLeaf, FaWater, FaHandSparkles } from 'react-icons/fa';

const STORAGE_URL = "https://sxteddkozzqniebfstag.supabase.co/storage/v1/object/public/hotel-rooms/img/rooms";
const PLACEHOLDER_IMG_SERVICE = "https://via.placeholder.com/400x300?text=Service+Image";

const PLACEHOLDER_IMG = "data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='300' height='200'%3E%3Crect fill='%23ddd' width='300' height='200'/%3E%3Ctext x='50%' y='50%' font-size='14' fill='%23999' text-anchor='middle' dy='.3em'%3ESpa Service%3C/text%3E%3C/svg%3E";

const spaCategories = [
  { id: 'massage', name: 'Massage Therapies', icon: FaHandSparkles },
  { id: 'facial', name: 'Facial Treatments', icon: FaSpa },
  { id: 'body', name: 'Body Treatments', icon: FaLeaf },
  { id: 'wellness', name: 'Wellness Packages', icon: FaWater },
];

// Helper function to get image for spa services
// Uses Supabase Storage URLs based on room types when available
const getSpaServiceImage = (id) => {
  // Use id to cycle through images 1-8.png
  // Images are named 1-lg.png through 8-lg.png for large format
  if (!id) return PLACEHOLDER_IMG_SERVICE;
  
  const imgIndex = (id % 8) === 0 ? 8 : (id % 8);
  return `${STORAGE_URL}/${imgIndex}-lg.png` || PLACEHOLDER_IMG_SERVICE;
};

const spaServices = {
  massage: [
    { id: 1, name: 'Swedish Massage', description: 'Classic relaxation massage with long, flowing strokes', duration: '60 min', price: 95, popular: true, image: getSpaServiceImage(1) },
    { id: 2, name: 'Deep Tissue Massage', description: 'Therapeutic massage targeting muscle tension and knots', duration: '90 min', price: 135, image: getSpaServiceImage(2) },
    { id: 3, name: 'Hot Stone Massage', description: 'Heated stones for deep muscle relaxation and stress relief', duration: '90 min', price: 145, popular: true, image: getSpaServiceImage(3) },
    { id: 4, name: 'Aromatherapy Massage', description: 'Essential oils combined with therapeutic massage techniques', duration: '60 min', price: 105, image: getSpaServiceImage(4) },
    { id: 5, name: 'Thai Massage', description: 'Traditional Thai stretching and acupressure techniques', duration: '90 min', price: 125, image: getSpaServiceImage(5) },
    { id: 6, name: 'Couples Massage', description: 'Side-by-side massage experience in a private suite', duration: '90 min', price: 280, image: getSpaServiceImage(6) },
  ],
  facial: [
    { id: 7, name: 'Signature Facial', description: 'Deep cleansing, exfoliation, and hydration treatment', duration: '60 min', price: 120, popular: true, image: getSpaServiceImage(7) },
    { id: 8, name: 'Anti-Aging Facial', description: 'Advanced treatment to reduce fine lines and improve elasticity', duration: '75 min', price: 165, image: getSpaServiceImage(8) },
    { id: 9, name: 'Hydrating Facial', description: 'Intensive moisture treatment for dry and dehydrated skin', duration: '60 min', price: 115, image: getSpaServiceImage(9) },
    { id: 10, name: 'Brightening Facial', description: 'Vitamin C treatment to even skin tone and reduce pigmentation', duration: '60 min', price: 130, image: getSpaServiceImage(10) },
    { id: 11, name: 'Acne Treatment', description: 'Specialized treatment for acne-prone and sensitive skin', duration: '75 min', price: 140, image: getSpaServiceImage(11) },
  ],
  body: [
    { id: 12, name: 'Body Scrub', description: 'Exfoliating treatment with natural sea salt and essential oils', duration: '60 min', price: 110, popular: true, image: getSpaServiceImage(12) },
    { id: 13, name: 'Body Wrap', description: 'Detoxifying wrap with mineral-rich mud and algae', duration: '90 min', price: 150, image: getSpaServiceImage(13) },
    { id: 14, name: 'Cellulite Treatment', description: 'Targeted treatment to reduce appearance of cellulite', duration: '75 min', price: 140, image: getSpaServiceImage(14) },
    { id: 15, name: 'Full Body Polish', description: 'Complete body exfoliation and hydration treatment', duration: '90 min', price: 160, image: getSpaServiceImage(15) },
  ],
  wellness: [
    { id: 16, name: 'Spa Day Package', description: 'Full day experience: massage, facial, body treatment, and lunch', duration: '5 hours', price: 450, popular: true, image: getSpaServiceImage(16), includes: ['Swedish Massage', 'Signature Facial', 'Body Scrub', 'Gourmet Lunch'] },
    { id: 17, name: 'Couples Retreat', description: 'Romantic package for two with couples massage and champagne', duration: '3 hours', price: 520, image: getSpaServiceImage(17), includes: ['Couples Massage', 'Side-by-side Facial', 'Champagne Service'] },
    { id: 18, name: 'Detox & Renewal', description: 'Complete detox package with body wrap, massage, and herbal tea', duration: '4 hours', price: 380, image: getSpaServiceImage(18), includes: ['Body Wrap', 'Aromatherapy Massage', 'Herbal Tea Service'] },
    { id: 19, name: 'Ultimate Relaxation', description: 'Premium package with all signature treatments and private suite', duration: '6 hours', price: 650, image: getSpaServiceImage(19), includes: ['Hot Stone Massage', 'Anti-Aging Facial', 'Full Body Polish', 'Private Suite Access'] },
  ],
};

const facilities = [
  { name: 'Steam Room', description: 'Relaxing steam therapy for detoxification' },
  { name: 'Sauna', description: 'Traditional Finnish sauna experience' },
  { name: 'Jacuzzi', description: 'Hydrotherapy pool with heated water' },
  { name: 'Relaxation Lounge', description: 'Peaceful space with herbal teas and light refreshments' },
  { name: 'Private Treatment Rooms', description: 'Elegant suites for personalized treatments' },
  { name: 'Fitness Center', description: 'State-of-the-art equipment with personal training available' },
];

const openingHours = [
  { day: 'Monday - Friday', time: '09:00 - 21:00' },
  { day: 'Saturday - Sunday', time: '08:00 - 22:00' },
  { day: 'Holidays', time: '10:00 - 20:00' },
];

const testimonials = [
  {
    name: 'Sarah Johnson',
    rating: 5,
    comment: 'The most relaxing experience I\'ve ever had. The hot stone massage was incredible!',
  },
  {
    name: 'Michael Chen',
    rating: 5,
    comment: 'The couples retreat package was perfect for our anniversary. Highly recommended!',
  },
  {
    name: 'Emma Williams',
    rating: 5,
    comment: 'The facial treatment left my skin glowing. The staff is professional and attentive.',
  },
];

const SpaPage = () => {
  const { user } = useAuth();
  const { createSpaBooking, confirmSpaBooking } = useBookingContext();
  const [activeCategory, setActiveCategory] = useState('massage');
  const [toast, setToast] = useState(null);
  const [showQRPayment, setShowQRPayment] = useState(false);
  const [showInvoice, setShowInvoice] = useState(false);
  const [currentBooking, setCurrentBooking] = useState(null);
  const [bookingForm, setBookingForm] = useState({
    name: '',
    email: '',
    phone: '',
    date: '',
    time: '',
    service: '',
    therapist: '',
    specialRequests: '',
  });

  const handleBookingSubmit = (e) => {
    e.preventDefault();
    if (!bookingForm.name || !bookingForm.email || !bookingForm.date || !bookingForm.time || !bookingForm.service) {
      setToast({
        type: 'error',
        message: 'Please fill in all required fields.',
      });
      return;
    }

    // Find service price
    const allServices = Object.values(spaServices).flat();
    const selectedService = allServices.find(s => s.name === bookingForm.service);
    const price = selectedService?.price || 100;

    const result = createSpaBooking({
      name: bookingForm.name,
      email: bookingForm.email,
      phone: bookingForm.phone,
      date: `${bookingForm.date}T${bookingForm.time}`,
      service: bookingForm.service,
      serviceName: bookingForm.service,
      therapist: bookingForm.therapist,
      specialRequests: bookingForm.specialRequests,
      userId: user?.id,
      userName: bookingForm.name,
      userEmail: bookingForm.email,
      price,
      totalPrice: price,
      duration: selectedService?.duration || '60 min',
    });

    if (result?.success) {
      setCurrentBooking(result.booking);
      setShowQRPayment(true);
    }
  };

  const handlePaymentSuccess = (paymentData) => {
    if (!currentBooking) return;
    
    const confirmedBooking = confirmSpaBooking(currentBooking.id, paymentData);
    setCurrentBooking(confirmedBooking);
    setShowQRPayment(false);
    setShowInvoice(true);
    setToast({
      type: 'success',
      message: 'Payment successful! Your appointment is confirmed.',
    });
    setBookingForm({
      name: '',
      email: '',
      phone: '',
      date: '',
      time: '',
      service: '',
      therapist: '',
      specialRequests: '',
    });
  };

  const handleCloseQRPayment = () => {
    setShowQRPayment(false);
    setCurrentBooking(null);
  };

  const handleInputChange = (e) => {
    const { name, value } = e.target;
    setBookingForm((prev) => ({ ...prev, [name]: value }));
  };

  const handleServiceSelect = (serviceName) => {
    setBookingForm((prev) => ({ ...prev, service: serviceName }));
  };

  return (
    <div className='min-h-screen bg-[#f7f4ef]'>
      <ScrollToTop />
      {toast && <Toast message={toast.message} type={toast.type} onClose={() => setToast(null)} />}

      {/* Hero Section */}
      <section className='relative h-[60vh] min-h-[480px] flex items-center justify-center text-center'>
        <img
          src={`${STORAGE_URL}/3-lg.png`}
          alt='Spa relaxation'
          className='absolute inset-0 h-full w-full object-cover'
        />
        <div className='absolute inset-0 bg-black/60' />
        <div className='relative z-10 max-w-3xl px-6 text-white'>
          <p className='font-tertiary uppercase tracking-[6px] text-sm mb-4'>
            Adina Hotel &amp; Spa
          </p>
          <h1 className='font-primary text-4xl md:text-5xl lg:text-6xl leading-tight mb-6'>
            Sanctuary of Wellness
          </h1>
          <p className='text-lg text-white/80'>
            Rejuvenate your mind, body, and soul with our world-class spa treatments and holistic wellness experiences.
          </p>
        </div>
      </section>

      {/* Services Section */}
      <section className='container mx-auto px-6 lg:px-0 py-20'>
        <div className='text-center mb-12'>
          <p className='font-tertiary uppercase tracking-[4px] text-xs text-primary/70 mb-2'>
            Our Services
          </p>
          <h2 className='font-primary text-4xl mb-4'>Spa Treatments</h2>
          <p className='text-primary/70 max-w-2xl mx-auto'>
            Indulge in our curated selection of therapeutic treatments designed to restore balance and promote well-being.
          </p>
        </div>

        {/* Category Tabs */}
        <div className='flex flex-wrap justify-center gap-4 mb-12'>
          {spaCategories.map((category) => {
            const Icon = category.icon;
            return (
              <button
                key={category.id}
                onClick={() => setActiveCategory(category.id)}
                className={`flex items-center gap-2 px-6 py-3 border rounded-full transition ${
                  activeCategory === category.id
                    ? 'bg-accent text-white border-accent'
                    : 'border-[#eadfcf] text-primary hover:border-accent'
                }`}
              >
                <Icon />
                <span>{category.name}</span>
              </button>
            );
          })}
        </div>

        {/* Services Grid */}
        <div className='grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6'>
          {spaServices[activeCategory].map((service) => (
            <div
              key={service.id}
              className='bg-white shadow-sm border border-[#eadfcf] hover:shadow-lg transition-shadow cursor-pointer overflow-hidden'
              onClick={() => handleServiceSelect(service.name)}
            >
              <div className='relative h-48 overflow-hidden'>
                <img
                  src={service.image}
                  alt={service.name}
                  className='w-full h-full object-cover hover:scale-110 transition-transform duration-300'
                />
                {service.popular && (
                  <span className='absolute top-3 right-3 flex items-center gap-1 bg-accent text-white px-3 py-1 rounded-full text-xs'>
                    <FaStar />
                    <span>Popular</span>
                  </span>
                )}
              </div>
              <div className='p-6'>
                <h3 className='font-primary text-xl mb-2'>{service.name}</h3>
                <p className='text-sm text-primary/70 mb-3'>{service.description}</p>
                {service.includes && (
                  <div className='mb-3'>
                    <p className='text-xs font-semibold text-primary/60 mb-1'>Includes:</p>
                    <ul className='text-xs text-primary/70 space-y-1'>
                      {service.includes.map((item, idx) => (
                        <li key={idx} className='flex items-center gap-1'>
                          <FaCheck className='text-accent text-[10px]' />
                          <span>{item}</span>
                        </li>
                      ))}
                    </ul>
                  </div>
                )}
                <div className='flex items-center justify-between'>
                  <span className='text-sm text-primary/60'>{service.duration}</span>
                  <p className='font-primary text-2xl text-accent'>${service.price}</p>
                </div>
              </div>
            </div>
          ))}
        </div>
      </section>

      {/* Facilities Section */}
      <section className='bg-white py-20'>
        <div className='container mx-auto px-6 lg:px-0'>
          <div className='text-center mb-12'>
            <p className='font-tertiary uppercase tracking-[4px] text-xs text-primary/70 mb-2'>
              Our Facilities
            </p>
            <h2 className='font-primary text-4xl mb-4'>Wellness Amenities</h2>
          </div>

          <div className='grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6'>
            {facilities.map((facility, index) => {
              // Use Supabase images or placeholder (1-6)
              const imgIndex = (index % 6) + 1;
              let facilityImage = `${STORAGE_URL}/${imgIndex}-lg.png`;
              
              return (
                <div
                  key={index}
                  className='bg-[#f7f4ef] border border-[#eadfcf] hover:shadow-lg transition-shadow overflow-hidden'
                >
                  <div className='relative h-40 overflow-hidden'>
                    <img
                      src={facilityImage}
                      alt={facility.name}
                      className='w-full h-full object-cover hover:scale-110 transition-transform duration-300'
                    />
                  </div>
                  <div className='p-6'>
                    <h3 className='font-primary text-xl mb-2'>{facility.name}</h3>
                    <p className='text-sm text-primary/70'>{facility.description}</p>
                  </div>
                </div>
              );
            })}
          </div>
        </div>
      </section>

      {/* Booking Section */}
      <section className='container mx-auto px-6 lg:px-0 py-20'>
        <div className='grid grid-cols-1 lg:grid-cols-2 gap-12'>
          {/* Booking Form */}
          <div className='bg-white p-8 shadow-sm border border-[#eadfcf]'>
            <p className='font-tertiary uppercase tracking-[4px] text-xs text-primary/70 mb-2'>
              Book Your Treatment
            </p>
            <h2 className='font-primary text-3xl mb-6'>Schedule an Appointment</h2>
            <form onSubmit={handleBookingSubmit} className='space-y-5'>
              <div className='grid grid-cols-1 md:grid-cols-2 gap-5'>
                <div>
                  <label className='block text-sm font-semibold mb-2'>Full Name *</label>
                  <input
                    type='text'
                    name='name'
                    value={bookingForm.name}
                    onChange={handleInputChange}
                    className='w-full border border-[#eadfcf] px-4 py-3 focus:outline-none focus:border-accent'
                    placeholder='John Carter'
                    required
                  />
                </div>
                <div>
                  <label className='block text-sm font-semibold mb-2'>Email *</label>
                  <input
                    type='email'
                    name='email'
                    value={bookingForm.email}
                    onChange={handleInputChange}
                    className='w-full border border-[#eadfcf] px-4 py-3 focus:outline-none focus:border-accent'
                    placeholder='john@example.com'
                    required
                  />
                </div>
              </div>

              <div className='grid grid-cols-1 md:grid-cols-2 gap-5'>
                <div>
                  <label className='block text-sm font-semibold mb-2'>Phone *</label>
                  <input
                    type='tel'
                    name='phone'
                    value={bookingForm.phone}
                    onChange={handleInputChange}
                    className='w-full border border-[#eadfcf] px-4 py-3 focus:outline-none focus:border-accent'
                    placeholder='+84 987 654 321'
                    required
                  />
                </div>
                <div>
                  <label className='block text-sm font-semibold mb-2'>Preferred Therapist</label>
                  <select
                    name='therapist'
                    value={bookingForm.therapist}
                    onChange={handleInputChange}
                    className='w-full border border-[#eadfcf] px-4 py-3 focus:outline-none focus:border-accent bg-white'
                  >
                    <option value=''>No preference</option>
                    <option value='Sarah'>Sarah - Massage Specialist</option>
                    <option value='Emma'>Emma - Facial Expert</option>
                    <option value='Michael'>Michael - Body Treatment Specialist</option>
                  </select>
                </div>
              </div>

              <div>
                <label className='block text-sm font-semibold mb-2'>Service *</label>
                <input
                  type='text'
                  name='service'
                  value={bookingForm.service}
                  onChange={handleInputChange}
                  className='w-full border border-[#eadfcf] px-4 py-3 focus:outline-none focus:border-accent'
                  placeholder='Select a service from above or type here'
                  required
                />
                <p className='text-xs text-primary/60 mt-1'>Click on a service card above to auto-fill</p>
              </div>

              <div className='grid grid-cols-1 md:grid-cols-2 gap-5'>
                <div>
                  <label className='block text-sm font-semibold mb-2'>Date *</label>
                  <input
                    type='date'
                    name='date'
                    value={bookingForm.date}
                    onChange={handleInputChange}
                    min={new Date().toISOString().split('T')[0]}
                    className='w-full border border-[#eadfcf] px-4 py-3 focus:outline-none focus:border-accent'
                    required
                  />
                </div>
                <div>
                  <label className='block text-sm font-semibold mb-2'>Time *</label>
                  <input
                    type='time'
                    name='time'
                    value={bookingForm.time}
                    onChange={handleInputChange}
                    className='w-full border border-[#eadfcf] px-4 py-3 focus:outline-none focus:border-accent'
                    required
                  />
                </div>
              </div>

              <div>
                <label className='block text-sm font-semibold mb-2'>Special Requests</label>
                <textarea
                  name='specialRequests'
                  value={bookingForm.specialRequests}
                  onChange={handleInputChange}
                  rows={3}
                  className='w-full border border-[#eadfcf] px-4 py-3 focus:outline-none focus:border-accent resize-none'
                  placeholder='Allergies, pressure preference, etc.'
                />
              </div>

              <button type='submit' className='btn btn-primary w-full uppercase tracking-[4px]'>
                Book Appointment
              </button>
            </form>
          </div>

          {/* Spa Info */}
          <div className='space-y-8'>
            <div className='bg-white p-8 shadow-sm border border-[#eadfcf]'>
              <h3 className='font-primary text-2xl mb-6'>Opening Hours</h3>
              <div className='space-y-4'>
                {openingHours.map((schedule, index) => (
                  <div key={index} className='flex items-center justify-between pb-4 border-b border-[#eadfcf] last:border-0'>
                    <div className='flex items-center gap-3'>
                      <FaClock className='text-accent' />
                      <span className='font-semibold'>{schedule.day}</span>
                    </div>
                    <span className='text-primary/70'>{schedule.time}</span>
                  </div>
                ))}
              </div>
            </div>

            <div className='bg-white p-8 shadow-sm border border-[#eadfcf]'>
              <h3 className='font-primary text-2xl mb-6'>Contact Information</h3>
              <div className='space-y-4'>
                <div className='flex items-start gap-4'>
                  <FaMapMarkerAlt className='text-accent mt-1' />
                  <div>
                    <p className='font-semibold'>Location</p>
                    <p className='text-primary/70'>12 Tran Hung Dao, Hoan Kiem, Ha Noi</p>
                  </div>
                </div>
                <div className='flex items-start gap-4'>
                  <FaPhoneAlt className='text-accent mt-1' />
                  <div>
                    <p className='font-semibold'>Reservations</p>
                    <p className='text-primary/70'>+84 24 1234 5678</p>
                  </div>
                </div>
                <div className='flex items-start gap-4'>
                  <FaSpa className='text-accent mt-1' />
                  <div>
                    <p className='font-semibold'>Email</p>
                    <p className='text-primary/70'>spa@adinahotel.com</p>
                  </div>
                </div>
              </div>
            </div>

            <div className='bg-accent/10 p-8 border border-accent/20'>
              <h3 className='font-primary text-xl mb-3'>What to Expect</h3>
              <ul className='space-y-2 text-sm text-primary/70'>
                <li className='flex items-start gap-2'>
                  <FaCheck className='text-accent mt-1' />
                  <span>Arrive 15 minutes early for check-in</span>
                </li>
                <li className='flex items-start gap-2'>
                  <FaCheck className='text-accent mt-1' />
                  <span>Complimentary robe and slippers provided</span>
                </li>
                <li className='flex items-start gap-2'>
                  <FaCheck className='text-accent mt-1' />
                  <span>Silence your phone for a peaceful experience</span>
                </li>
                <li className='flex items-start gap-2'>
                  <FaCheck className='text-accent mt-1' />
                  <span>Hydrate before and after treatments</span>
                </li>
              </ul>
            </div>
          </div>
        </div>
      </section>

      {/* Testimonials Section */}
      <section className='bg-white py-20'>
        <div className='container mx-auto px-6 lg:px-0'>
          <div className='text-center mb-12'>
            <p className='font-tertiary uppercase tracking-[4px] text-xs text-primary/70 mb-2'>
              Guest Reviews
            </p>
            <h2 className='font-primary text-4xl mb-4'>What Our Guests Say</h2>
          </div>

          <div className='grid grid-cols-1 md:grid-cols-3 gap-8'>
            {testimonials.map((testimonial, index) => (
              <div key={index} className='bg-[#f7f4ef] p-6 border border-[#eadfcf]'>
                <div className='flex items-center gap-1 mb-3'>
                  {[...Array(testimonial.rating)].map((_, i) => (
                    <FaStar key={i} className='text-accent' />
                  ))}
                </div>
                <p className='text-primary/70 mb-4 italic'>&quot;{testimonial.comment}&quot;</p>
                <p className='font-semibold text-primary'>{testimonial.name}</p>
              </div>
            ))}
          </div>
        </div>
      </section>

      {showQRPayment && currentBooking && (
        <QRPayment
          bookingData={currentBooking}
          onPaymentSuccess={handlePaymentSuccess}
          onClose={handleCloseQRPayment}
          type="spa"
        />
      )}

      {showInvoice && currentBooking && (
        <Invoice
          booking={currentBooking}
          onClose={() => setShowInvoice(false)}
          onDownload={() => {
            setToast({ type: 'success', message: 'PDF downloaded successfully!' });
          }}
        />
      )}
    </div>
  );
};

export default SpaPage;



=================================================================
FILE PATH: src\pages\UserDashboard.jsx
=================================================================
import { useMemo, useState, useEffect } from 'react';
import { useAuth } from '../context/AuthContext';
import { useRoomContext } from '../context/RoomContext';
import { useBookingContext } from '../context/BookingContext'; // NEW
import { Link } from 'react-router-dom';
import DatePicker from 'react-datepicker';
import 'react-datepicker/dist/react-datepicker.css';
import Toast from '../components/Toast';
import { FaSuitcaseRolling, FaCalendarAlt, FaUserCircle, FaCamera, FaEdit, FaTimes } from 'react-icons/fa';
import { LogoDark } from '../assets';

const tabs = [
  { id: 'overview', label: 'Overview' },
  { id: 'bookings', label: 'Bookings' },
  { id: 'profile', label: 'Profile & Preferences' },
];

const bookingFilterOptions = [
  { id: 'upcoming', label: 'Upcoming' },
  { id: 'past', label: 'Past' },
  { id: 'cancelled', label: 'Cancelled' },
];

const statusBadgeClasses = {
  confirmed: 'bg-emerald-100 text-emerald-700',
  modified: 'bg-sky-100 text-sky-700',
  completed: 'bg-gray-100 text-gray-600',
  cancelled: 'bg-red-100 text-red-600',
};

const UserDashboard = () => {
  const { user, updateUserProfile } = useAuth();
  const {
    getUserBookings: getRoomBookings, // Äá»•i tÃªn Ä‘á»ƒ trÃ¡nh xung Ä‘á»™t
    cancelBooking,
    modifyBookingDates,
  } = useRoomContext();
  
  const {
    getUserRestaurantBookings,
    getUserSpaBookings,
    confirmRestaurantBooking, // Cáº§n cho viá»‡c quáº£n lÃ½ booking sau nÃ y
    confirmSpaBooking,
    restaurantBookings, // Dá»¯ liá»‡u tá»« context
    spaBookings,
  } = useBookingContext();

  const [activeTab, setActiveTab] = useState('overview');
  const [bookingFilter, setBookingFilter] = useState('upcoming');
  const [toast, setToast] = useState(null);
  const [modalState, setModalState] = useState({ type: null, booking: null });
  const [rescheduleDates, setRescheduleDates] = useState({ checkIn: null, checkOut: null });
  const [profileForm, setProfileForm] = useState({
    name: '',
    phone: '',
    country: '',
    city: '',
    language: 'en',
    bio: '',
    newsletter: true,
  });

  useEffect(() => {
    if (user) {
      setProfileForm({
        name: user.name || '',
        phone: user.phone || '',
        country: user.country || '',
        city: user.city || '',
        language: user.language || 'en',
        bio: user.bio || '',
        newsletter: user.newsletter !== undefined ? user.newsletter : true,
      });
    }
  }, [user]);

  const userBookings = useMemo(() => {
    // Combine all types of bookings (Room, Restaurant, Spa)
    if (!user?.id) return [];
    
    const roomBookings = getRoomBookings(user.id);
    const restBookings = getUserRestaurantBookings(user.id);
    const spaBookings = getUserSpaBookings(user.id);
    
    // Normalize data structure for consistency (Room bookings already have type='room' from context)
    const combinedBookings = [
      ...roomBookings,
      ...(restBookings || []).map(b => ({ ...b, type: 'restaurant', checkIn: b.reservationAt, checkOut: b.reservationAt })), // Simplify date for Restaurant/Spa check (use reservationAt/appointmentAt)
      ...(spaBookings || []).map(b => ({ ...b, type: 'spa', checkIn: b.appointmentAt, checkOut: b.appointmentAt })),
    ];
    
    return combinedBookings;
  }, [user, getRoomBookings, getUserRestaurantBookings, getUserSpaBookings]);

  const categorized = useMemo(() => {
    const data = {
      upcoming: [],
      past: [],
      cancelled: [],
      pending: [],
    };
    const now = new Date();

    userBookings.forEach((booking) => {
      if (booking.status === 'cancelled') {
        data.cancelled.push(booking);
      } else if (booking.status === 'pending_payment' || booking.status === 'pending') {
        data.pending.push(booking);
      } else if (booking.type === 'room' && new Date(booking.checkOut) < now) {
        data.past.push(booking);
      } else if (booking.type === 'room' && new Date(booking.checkOut) >= now) {
        data.upcoming.push(booking);
      } else if (booking.type !== 'room' && new Date(booking.checkIn) < now) { // Non-room bookings, checkIn maps to reservation/appointment time
        data.past.push(booking);
      } else if (booking.type !== 'room' && new Date(booking.checkIn) >= now) {
        data.upcoming.push(booking);
      }
    });
    
    // Sort upcoming by earliest checkIn date/time
    data.upcoming.sort((a, b) => new Date(a.checkIn) - new Date(b.checkIn));
    
    return data;
  }, [userBookings]);

  const filteredBookings = categorized[bookingFilter] || [];

  const nextBooking = useMemo(() => {
    return categorized.upcoming
      .slice()
      .sort((a, b) => new Date(a.checkIn) - new Date(b.checkIn))[0];
  }, [categorized.upcoming]);

  const loyaltyNights = useMemo(() => {
    return userBookings.reduce((total, booking) => {
      if (booking.status === 'cancelled') return total;
      return total + (booking.totalNights || 0);
    }, 0);
  }, [userBookings]);

  const showToast = (payload) => {
    setToast(payload);
    setTimeout(() => setToast(null), 4000);
  };

  const handleCancelBooking = (booking) => {
    cancelBooking(booking.id);
    showToast({ type: 'info', message: `Booking ${booking.confirmationCode} was cancelled.` });
    setModalState({ type: null, booking: null });
  };

  const handleModifyBooking = (booking, newCheckIn, newCheckOut) => {
    if (!newCheckIn || !newCheckOut) {
      showToast({ type: 'error', message: 'Please choose both dates.' });
      return;
    }
    try {
      modifyBookingDates(booking.id, { checkIn: newCheckIn, checkOut: newCheckOut });
      showToast({ type: 'success', message: 'Booking updated successfully!' });
      setModalState({ type: null, booking: null });
    } catch (error) {
      showToast({ type: 'error', message: error.message || 'Unable to reschedule booking.' });
    }
  };

  const handleAvatarChange = (event) => {
    const file = event.target.files?.[0];
    if (!file) return;
    const reader = new FileReader();
    reader.onloadend = () => {
      updateUserProfile({ avatar: reader.result });
      showToast({ type: 'success', message: 'Profile photo updated.' });
    };
    reader.readAsDataURL(file);
  };

  const handleProfileSubmit = (e) => {
    e.preventDefault();
    updateUserProfile(profileForm);
    showToast({ type: 'success', message: 'Profile updated successfully!' });
  };

  const bookingIsEditable = (booking) => new Date(booking.checkIn) > new Date() && booking.status !== 'cancelled';

  const perks = [
    { label: 'Late checkout', detail: 'Complimentary 1-hour grace period on availability' },
    { label: 'Spa credit', detail: '$25 spa credit for every 5 nights stayed' },
    { label: 'Concierge chat', detail: 'Direct WhatsApp line for bespoke planning' },
  ];

  const renderOverview = () => (
    <div className='space-y-8'>
      <div className='bg-gradient-to-r from-[#f1d7b1] via-[#f7f4ef] to-[#e7d8c2] rounded-2xl p-6 text-primary shadow-lg border border-white/60 flex flex-col md:flex-row md:items-center md:justify-between gap-6'>
        <div>
          <p className='uppercase tracking-[6px] text-xs text-primary/70'>Welcome back</p>
          <h3 className='font-primary text-3xl mb-2'>Your private Maison awaits, {user.name?.split(' ')[0] || 'guest'}</h3>
          <p className='text-sm text-primary/70 max-w-xl'>
            Track upcoming retreats, earn loyalty nights, and curate personal details for a seamless arrival. Our concierge is on standby 24/7.
          </p>
        </div>
        <div className='bg-white/80 rounded-xl p-4 w-full md:w-auto min-w-[220px]'>
          <p className='uppercase text-xs tracking-[3px] text-primary/60 mb-1'>Loyalty tier</p>
          <p className='font-primary text-2xl'>Golden Orchid</p>
          <p className='text-sm text-primary/70'>Next upgrade in {Math.max(0, 10 - loyaltyNights)} nights</p>
        </div>
      </div>

      <div className='grid sm:grid-cols-3 gap-6'>
        <div className='bg-white/90 p-6 border border-[#eadfcf] rounded shadow-md'>
          <p className='uppercase tracking-[3px] text-xs text-primary/60'>Upcoming stays</p>
          <p className='text-4xl font-primary mt-2'>{categorized.upcoming.length}</p>
        </div>
        <div className='bg-white/90 p-6 border border-[#eadfcf] rounded shadow-md'>
          <p className='uppercase tracking-[3px] text-xs text-primary/60'>Completed stays</p>
          <p className='text-4xl font-primary mt-2'>{categorized.past.length}</p>
        </div>
        <div className='bg-white/90 p-6 border border-[#eadfcf] rounded shadow-md'>
          <p className='uppercase tracking-[3px] text-xs text-primary/60'>Loyalty nights</p>
          <p className='text-4xl font-primary mt-2'>{loyaltyNights}</p>
        </div>
      </div>

      <div className='grid lg:grid-cols-3 gap-6'>
        <div className='lg:col-span-2 bg-white/95 border border-[#eadfcf] rounded-2xl p-6 shadow-md'>
          <div className='flex items-center justify-between mb-4'>
            <h4 className='font-primary text-2xl'>Next reservation</h4>
            <Link to='/rooms' className='text-accent hover:underline text-sm'>Book another stay</Link>
          </div>
          {nextBooking ? (
            <div className='flex flex-col md:flex-row md:items-center md:justify-between gap-4'>
              <div>
                <p className='font-semibold text-lg'>{nextBooking.roomName}</p>
                <p className='text-primary/70 text-sm flex items-center gap-2'>
                  <FaCalendarAlt />
                  {nextBooking.checkIn} â†’ {nextBooking.checkOut}
                </p>
              </div>
              <div className='flex items-center gap-3 flex-wrap'>
                <span className={`px-3 py-1 rounded-full text-xs ${statusBadgeClasses[nextBooking.status] || 'bg-gray-100 text-gray-600'}`}>
                  {nextBooking.status}
                </span>
                <button
                  onClick={() => setActiveTab('bookings')}
                  className='btn btn-secondary btn-sm'
                >
                  Manage booking
                </button>
              </div>
            </div>
          ) : (
            <div className='text-primary/70 text-sm'>
              No upcoming stay yet. Start planning your next visit!
            </div>
          )}
        </div>

        <div className='bg-white/95 border border-[#eadfcf] rounded-2xl p-6 shadow-md'>
          <p className='uppercase tracking-[3px] text-xs text-primary/60 mb-4'>Concierge perks</p>
          <ul className='space-y-4 text-sm'>
            {perks.map((perk) => (
              <li key={perk.label} className='border-l-4 border-accent pl-3'>
                <p className='font-semibold text-primary'>{perk.label}</p>
                <p className='text-primary/70'>{perk.detail}</p>
              </li>
            ))}
          </ul>
        </div>
      </div>
    </div>
  );

  const renderBookings = () => (
    <div className='space-y-6'>
      <div className='flex flex-wrap items-center gap-3'>
        {bookingFilterOptions.map((option) => (
          <button
            key={option.id}
            onClick={() => setBookingFilter(option.id)}
            className={`px-4 py-2 rounded-full text-sm border transition ${
              bookingFilter === option.id ? 'bg-primary text-white border-primary' : 'border-[#eadfcf] text-primary'
            }`}
          >
            {option.label}
          </button>
        ))}
      </div>

      {filteredBookings.length === 0 ? (
        <div className='bg-white border border-[#eadfcf] rounded p-8 text-center text-primary/70'>
          No bookings in this segment yet.
        </div>
      ) : (
        <div className='space-y-4'>
          {filteredBookings.map((booking) => (
            <div key={booking.id} className='bg-white border border-[#eadfcf] rounded p-4 flex flex-col md:flex-row md:items-center md:justify-between gap-4'>
              <div>
                {booking.type === 'room' && (
                  <>
                    <p className='font-semibold text-lg'>{booking.roomName || 'Room Booking'}</p>
                    <p className='text-sm text-primary/70 flex items-center gap-2'>
                      <FaCalendarAlt />
                      Check-in: {booking.checkIn} â†’ Check-out: {booking.checkOut}
                    </p>
                    <p className='text-sm text-primary/70'>Guests: {booking.adults} adult(s){booking.kids ? `, ${booking.kids} kid(s)` : ''}</p>
                  </>
                )}
                {booking.type === 'restaurant' && (
                  <>
                    <p className='font-semibold text-lg'>Restaurant Reservation</p>
                    <p className='text-sm text-primary/70 flex items-center gap-2'>
                      <FaCalendarAlt />
                      Time: {new Date(booking.checkIn).toLocaleString('vi-VN')}
                    </p>
                    <p className='text-sm text-primary/70'>Guests: {booking.guests} people. Table for {booking.name}</p>
                  </>
                )}
                {booking.type === 'spa' && (
                  <>
                    <p className='font-semibold text-lg'>Spa Appointment: {booking.serviceName}</p>
                    <p className='text-sm text-primary/70 flex items-center gap-2'>
                      <FaCalendarAlt />
                      Time: {new Date(booking.checkIn).toLocaleString('vi-VN')}
                    </p>
                    <p className='text-sm text-primary/70'>Therapist: {booking.therapist || 'Any'} ({booking.serviceDuration})</p>
                  </>
                )}
                <span className='inline-block mt-1 px-2 py-0.5 rounded text-xs font-medium uppercase tracking-wider bg-accent/20 text-accent'>{booking.type}</span>
              </div>
              <div className='flex items-center gap-3 flex-wrap'>
                <span className={`px-3 py-1 rounded-full text-xs ${statusBadgeClasses[booking.status] || 'bg-gray-100 text-gray-600'}`}>
                  {booking.status}
                </span>
                <p className='font-semibold text-accent'>${booking.totalPrice || booking.total_price}</p>
                {booking.type === 'room' && bookingIsEditable(booking) && (
                  <>
                    <button
                      onClick={() => {
                        setRescheduleDates({
                          checkIn: booking.checkIn ? new Date(booking.checkIn) : new Date(),
                          checkOut: booking.checkOut ? new Date(booking.checkOut) : new Date(new Date().getTime() + 24 * 60 * 60 * 1000),
                        });
                        setModalState({ type: 'modify', booking });
                      }}
                      className='btn btn-secondary btn-sm flex items-center gap-2'
                    >
                      <FaEdit /> Modify
                    </button>
                    <button
                      onClick={() => setModalState({ type: 'cancel', booking })}
                      className='btn btn-primary btn-sm flex items-center gap-2 bg-red-500 hover:bg-red-600 border-red-500'
                    >
                      <FaTimes /> Cancel
                    </button>
                  </>
                )}
              </div>
            </div>
          ))}
        </div>
      )}
    </div>
  );

  const renderProfile = () => (
    <form className='space-y-6' onSubmit={handleProfileSubmit}>
      <div className='grid md:grid-cols-2 gap-6'>
        <div>
          <label className='block text-sm font-semibold mb-2'>Full name</label>
          <input
            type='text'
            value={profileForm.name}
            onChange={(e) => setProfileForm({ ...profileForm, name: e.target.value })}
            className='w-full border border-[#eadfcf] px-4 py-3 focus:outline-none focus:border-accent'
          />
        </div>
        <div>
          <label className='block text-sm font-semibold mb-2'>Phone</label>
          <input
            type='tel'
            value={profileForm.phone}
            onChange={(e) => setProfileForm({ ...profileForm, phone: e.target.value })}
            className='w-full border border-[#eadfcf] px-4 py-3 focus:outline-none focus:border-accent'
          />
        </div>
      </div>

      <div className='grid md:grid-cols-2 gap-6'>
        <div>
          <label className='block text-sm font-semibold mb-2'>Country</label>
          <input
            type='text'
            value={profileForm.country}
            onChange={(e) => setProfileForm({ ...profileForm, country: e.target.value })}
            className='w-full border border-[#eadfcf] px-4 py-3 focus:outline-none focus:border-accent'
          />
        </div>
        <div>
          <label className='block text-sm font-semibold mb-2'>City</label>
          <input
            type='text'
            value={profileForm.city}
            onChange={(e) => setProfileForm({ ...profileForm, city: e.target.value })}
            className='w-full border border-[#eadfcf] px-4 py-3 focus:outline-none focus:border-accent'
          />
        </div>
      </div>

      <div>
        <label className='block text-sm font-semibold mb-2'>Preferred language</label>
        <select
          value={profileForm.language}
          onChange={(e) => setProfileForm({ ...profileForm, language: e.target.value })}
          className='w-full border border-[#eadfcf] px-4 py-3 focus:outline-none focus:border-accent bg-white'
        >
          <option value='en'>English</option>
          <option value='vi'>Vietnamese</option>
          <option value='fr'>French</option>
        </select>
      </div>

      <div>
        <label className='block text-sm font-semibold mb-2'>Short bio</label>
        <textarea
          rows={4}
          value={profileForm.bio}
          onChange={(e) => setProfileForm({ ...profileForm, bio: e.target.value })}
          className='w-full border border-[#eadfcf] px-4 py-3 focus:outline-none focus:border-accent resize-none'
          placeholder='Tell us about your travel preferences...'
        />
      </div>

      <div className='flex items-center gap-3'>
        <input
          id='newsletter'
          type='checkbox'
          checked={profileForm.newsletter}
          onChange={(e) => setProfileForm({ ...profileForm, newsletter: e.target.checked })}
          className='w-4 h-4 accent-accent'
        />
        <label htmlFor='newsletter' className='text-sm text-primary/70'>
          Receive curated offers and member-only experiences.
        </label>
      </div>

      <button type='submit' className='btn btn-primary'>
        Save profile
      </button>
    </form>
  );

  const renderModal = () => {
    if (!modalState.type || !modalState.booking) return null;

    if (modalState.type === 'cancel') {
      return (
        <div className='fixed inset-0 bg-black/60 flex items-center justify-center z-40 p-4'>
          <div className='bg-white rounded-lg shadow-xl max-w-md w-full p-6 space-y-4'>
            <h3 className='font-primary text-2xl'>Cancel booking?</h3>
            <p className='text-primary/70 text-sm'>
              You are about to cancel reservation {modalState.booking.confirmationCode}. This action cannot be undone.
            </p>
            <div className='flex gap-4'>
              <button className='btn btn-secondary flex-1' onClick={() => setModalState({ type: null, booking: null })}>
                Keep booking
              </button>
              <button
                className='btn btn-primary flex-1 bg-red-500 border-red-500 hover:bg-red-600'
                onClick={() => handleCancelBooking(modalState.booking)}
              >
                Cancel stay
              </button>
            </div>
          </div>
        </div>
      );
    }

    if (modalState.type === 'modify') {
      return (
        <div className='fixed inset-0 bg-black/60 flex items-center justify-center z-40 p-4'>
          <div className='bg-white rounded-lg shadow-xl max-w-lg w-full p-6 space-y-4'>
            <h3 className='font-primary text-2xl'>Reschedule booking</h3>
            <p className='text-primary/70 text-sm'>
              Update stay for {modalState.booking.roomName}
            </p>
            <div className='grid grid-cols-1 md:grid-cols-2 gap-4'>
              <div>
                <p className='text-xs uppercase tracking-[2px] text-primary/60 mb-1'>New check-in</p>
                <DatePicker
                  selected={rescheduleDates.checkIn}
                  onChange={(date) => setRescheduleDates(prev => ({ ...prev, checkIn: date }))}
                  minDate={new Date()}
                  className='w-full border border-[#eadfcf] px-4 py-3 focus:outline-none focus:border-accent'
                />
              </div>
              <div>
                <p className='text-xs uppercase tracking-[2px] text-primary/60 mb-1'>New check-out</p>
                <DatePicker
                  selected={rescheduleDates.checkOut}
                  onChange={(date) => setRescheduleDates(prev => ({ ...prev, checkOut: date }))}
                  minDate={rescheduleDates.checkIn ? new Date(rescheduleDates.checkIn.getTime() + 24 * 60 * 60 * 1000) : new Date()}
                  className='w-full border border-[#eadfcf] px-4 py-3 focus:outline-none focus:border-accent'
                />
              </div>
            </div>
            <div className='flex gap-4'>
              <button className='btn btn-secondary flex-1' onClick={() => setModalState({ type: null, booking: null })}>
                Go back
              </button>
              <button
                className='btn btn-primary flex-1'
                onClick={() => handleModifyBooking(modalState.booking, rescheduleDates.checkIn, rescheduleDates.checkOut)}
              >
                Save changes
              </button>
            </div>
          </div>
        </div>
      );
    }

    return null;
  };

  if (!user) {
    return (
      <div className='min-h-screen flex items-center justify-center'>
        <p className='text-primary/70'>Please sign in to access your dashboard.</p>
      </div>
    );
  }

  return (
    <div className='min-h-screen py-12 bg-[radial-gradient(circle_at_top,_rgba(255,255,255,0.94),_rgba(247,244,239,0.98))]'>
      <div className='container mx-auto px-6 lg:px-0'>
        <LogoDark className='w-40 mx-auto mb-10 opacity-80' />
        <div className='grid lg:grid-cols-4 gap-8'>
          <aside className='bg-white/95 backdrop-blur-sm border border-[#eadfcf] rounded-2xl p-6 shadow-xl'>
            <div className='text-center mb-8'>
              <div className='relative inline-block'>
                <div className='w-28 h-28 rounded-full border-4 border-accent/20 overflow-hidden bg-primary/5 flex items-center justify-center'>
                  {user.avatar ? (
                    <img src={user.avatar} alt={user.name} className='w-full h-full object-cover' />
                  ) : (
                    <FaUserCircle className='text-8xl text-primary/30' />
                  )}
                </div>
                <label className='absolute bottom-0 right-0 bg-accent text-white p-2 rounded-full cursor-pointer shadow-lg'>
                  <FaCamera />
                  <input type='file' accept='image/*' className='hidden' onChange={handleAvatarChange} />
                </label>
              </div>
              <h2 className='font-primary text-2xl mt-4'>{user.name}</h2>
              <p className='text-primary/70 text-sm'>{user.email}</p>
            </div>

            <nav className='space-y-2'>
              {tabs.map((tab) => (
                <button
                  key={tab.id}
                  onClick={() => setActiveTab(tab.id)}
                  className={`w-full text-left px-4 py-3 rounded-lg transition ${
                    activeTab === tab.id ? 'bg-primary text-white' : 'bg-[#f7f4ef] text-primary'
                  }`}
                >
                  {tab.label}
                </button>
              ))}
            </nav>

            <div className='mt-8 space-y-4'>
              <Link to='/rooms' className='btn btn-secondary w-full flex items-center justify-center gap-2'>
                <FaSuitcaseRolling /> Book a room
              </Link>
              <Link to='/' className='text-sm text-primary/70 hover:text-primary text-center block'>
                Back to homepage
              </Link>
            </div>
          </aside>

          <main className='lg:col-span-3 bg-white/95 backdrop-blur-sm border border-[#eadfcf] rounded-2xl p-6 shadow-xl'>
            {activeTab === 'overview' && renderOverview()}
            {activeTab === 'bookings' && renderBookings()}
            {activeTab === 'profile' && renderProfile()}
          </main>
        </div>
      </div>

      {renderModal()}
      {toast && <Toast message={toast.message} type={toast.type} onClose={() => setToast(null)} />}
    </div>
  );
};

export default UserDashboard;



=================================================================
FILE PATH: src\services\adminService.js
=================================================================
import { supabase } from '../utils/supabaseClient';

/**
 * Service layer for admin-specific data fetching
 */

export const fetchAllRoomBookingsForAdmin = async () => {
  try {
    const { data, error } = await supabase
      .from('bookings')
      .select(`
        *,
        rooms:room_id (room_no),
        profiles:user_id (full_name, email)
      `)
      .order('created_at', { ascending: false });
    if (error) throw error;
    return data || [];
  } catch (err) {
    console.error('Error fetching all room bookings for admin:', err);
    return [];
  }
};

export const fetchAllRestaurantBookingsForAdmin = async () => {
  try {
    const { data, error } = await supabase
      .from('restaurant_bookings')
      .select(`
        *,
        profiles:user_id (full_name, email)
      `)
      .order('created_at', { ascending: false });
    if (error) throw error;
    return data || [];
  } catch (err) {
    console.error('Error fetching all restaurant bookings for admin:', err);
    return [];
  }
};

export const fetchAllSpaBookingsForAdmin = async () => {
  try {
    const { data, error } = await supabase
      .from('spa_bookings')
      .select(`
        *,
        profiles:user_id (full_name, email)
      `)
      .order('created_at', { ascending: false });
    if (error) throw error;
    return data || [];
  } catch (err) {
    console.error('Error fetching all spa bookings for admin:', err);
    return [];
  }
};

export const updateRoomBookingStatus = async (id, status) => {
  try {
    const { data, error } = await supabase
      .from('bookings')
      .update({ status })
      .eq('id', id)
      .select();
    if (error) throw error;
    return data?.[0] || null;
  } catch (err) {
    console.error('Error updating room booking status:', err);
    throw err;
  }
};

export const updateRestaurantBookingStatus = async (id, status) => {
  try {
    const { data, error } = await supabase
      .from('restaurant_bookings')
      .update({ status })
      .eq('id', id)
      .select();
    if (error) throw error;
    return data?.[0] || null;
  } catch (err) {
    console.error('Error updating restaurant booking status:', err);
    throw err;
  }
};

export const updateSpaBookingStatus = async (id, status) => {
  try {
    const { data, error } = await supabase
      .from('spa_bookings')
      .update({ status })
      .eq('id', id)
      .select();
    if (error) throw error;
    return data?.[0] || null;
  } catch (err) {
    console.error('Error updating spa booking status:', err);
    throw err;
  }
};

export const deleteRoomBooking = async (id) => {
  try {
    const { error } = await supabase
      .from('bookings')
      .delete()
      .eq('id', id);
    if (error) throw error;
    return true;
  } catch (err) {
    console.error('Error deleting room booking:', err);
    throw err;
  }
};

export const deleteRestaurantBooking = async (id) => {
  try {
    const { error } = await supabase
      .from('restaurant_bookings')
      .delete()
      .eq('id', id);
    if (error) throw error;
    return true;
  } catch (err) {
    console.error('Error deleting restaurant booking:', err);
    throw err;
  }
};

export const deleteSpaBooking = async (id) => {
  try {
    const { error } = await supabase
      .from('spa_bookings')
      .delete()
      .eq('id', id);
    if (error) throw error;
    return true;
  } catch (err) {
    console.error('Error deleting spa booking:', err);
    throw err;
  }
};

/**
 * ROOM TYPES CRUD
 */
export const fetchRoomTypesForAdmin = async () => {
  try {
    const { data, error } = await supabase
      .from('room_types')
      .select('*')
      .order('code', { ascending: true });
    if (error) throw error;
    return data || [];
  } catch (err) {
    console.error('Error fetching room types:', err);
    throw err;
  }
};

export const createRoomType = async (roomTypeData) => {
  try {
    const { data, error } = await supabase
      .from('room_types')
      .insert([roomTypeData])
      .select();
    if (error) throw error;
    return data?.[0] || null;
  } catch (err) {
    console.error('Error creating room type:', err);
    throw err;
  }
};

export const updateRoomTypeAdmin = async (id, roomTypeData) => {
  try {
    const { data, error } = await supabase
      .from('room_types')
      .update(roomTypeData)
      .eq('id', id)
      .select();
    if (error) throw error;
    return data?.[0] || null;
  } catch (err) {
    console.error('Error updating room type:', err);
    throw err;
  }
};

export const deleteRoomTypeAdmin = async (id) => {
  try {
    const { error } = await supabase
      .from('room_types')
      .delete()
      .eq('id', id);
    if (error) throw error;
    return true;
  } catch (err) {
    console.error('Error deleting room type:', err);
    throw err;
  }
};

/**
 * ROOMS CRUD
 */
export const fetchRoomsForAdmin = async () => {
  try {
    const { data, error } = await supabase
      .from('rooms')
      .select(`
        *,
        room_types:room_type_id (id, code, name)
      `)
      .order('room_no', { ascending: true });
    if (error) throw error;
    return data || [];
  } catch (err) {
    console.error('Error fetching rooms:', err);
    throw err;
  }
};

export const createRoomAdmin = async (roomData) => {
  try {
    const { data, error } = await supabase
      .from('rooms')
      .insert([roomData])
      .select(`
        *,
        room_types:room_type_id (id, code, name)
      `);
    if (error) throw error;
    return data?.[0] || null;
  } catch (err) {
    console.error('Error creating room:', err);
    throw err;
  }
};

export const updateRoomAdmin = async (id, roomData) => {
  try {
    const { data, error } = await supabase
      .from('rooms')
      .update(roomData)
      .eq('id', id)
      .select(`
        *,
        room_types:room_type_id (id, code, name)
      `);
    if (error) throw error;
    return data?.[0] || null;
  } catch (err) {
    console.error('Error updating room:', err);
    throw err;
  }
};

export const deleteRoomAdmin = async (id) => {
  try {
    const { error } = await supabase
      .from('rooms')
      .delete()
      .eq('id', id);
    if (error) throw error;
    return true;
  } catch (err) {
    console.error('Error deleting room:', err);
    throw err;
  }
};

/**
 * USERS CRUD
 */
export const fetchUsersForAdmin = async () => {
  try {
    const { data, error } = await supabase
      .from('profiles')
      .select('*')
      .order('created_at', { ascending: false });
    if (error) throw error;
    return data || [];
  } catch (err) {
    console.error('Error fetching users:', err);
    throw err;
  }
};

export const updateUserAdmin = async (id, userData) => {
  try {
    const { data, error } = await supabase
      .from('profiles')
      .update(userData)
      .eq('id', id)
      .select();
    if (error) throw error;
    return data?.[0] || null;
  } catch (err) {
    console.error('Error updating user:', err);
    throw err;
  }
};

export const deleteUserProfileAdmin = async (id) => {
  try {
    const { error } = await supabase
      .from('profiles')
      .delete()
      .eq('id', id);
    if (error) throw error;
    return true;
  } catch (err) {
    console.error('Error deleting user profile:', err);
    throw err;
  }
};

export default {
  // Bookings
  fetchAllRoomBookingsForAdmin,
  fetchAllRestaurantBookingsForAdmin,
  fetchAllSpaBookingsForAdmin,
  updateRoomBookingStatus,
  updateRestaurantBookingStatus,
  updateSpaBookingStatus,
  deleteRoomBooking,
  deleteRestaurantBooking,
  deleteSpaBooking,
  // Room Types
  fetchRoomTypesForAdmin,
  createRoomType,
  updateRoomTypeAdmin,
  deleteRoomTypeAdmin,
  // Rooms
  fetchRoomsForAdmin,
  createRoomAdmin,
  updateRoomAdmin,
  deleteRoomAdmin,
  // Users
  fetchUsersForAdmin,
  updateUserAdmin,
  deleteUserProfileAdmin,
};

=================================================================
FILE PATH: src\services\adminService_REFACTORED.js
=================================================================
import { supabase } from '../utils/supabaseClient';

/**
 * ============================================================================
 * ADMIN SERVICE LAYER - FINALIZED
 * ============================================================================
 * 
 * This service centralizes ALL admin-related database operations.
 * Provides clean, normalized data to admin components.
 * 
 * Patterns:
 * - All functions return array/object or null on error
 * - All functions include try/catch with logging
 * - Normalization happens here, not in components
 * - Booking types are combined into single functions where appropriate
 * ============================================================================
 */

// ============================================================================
// BOOKING MANAGEMENT - FETCH
// ============================================================================

/**
 * Fetch all room bookings with related data
 * @returns {Promise<Array>} Array of normalized room bookings
 */
export const fetchAllRoomBookingsForAdmin = async () => {
  try {
    const { data, error } = await supabase
      .from('bookings')
      .select(`
        *,
        rooms:room_id (id, room_no),
        profiles:user_id (id, full_name, email, phone)
      `)
      .order('created_at', { ascending: false });
    
    if (error) throw error;
    
    return (data || []).map(booking => ({
      ...booking,
      type: 'room',
      item_name: booking.rooms?.room_no || 'N/A',
      guestName: booking.profiles?.full_name,
      guestEmail: booking.profiles?.email,
      guestPhone: booking.profiles?.phone,
      totalPrice: parseFloat(booking.total_amount || 0),
    }));
  } catch (err) {
    console.error('âŒ Error fetching room bookings for admin:', err);
    return [];
  }
};

/**
 * Fetch all restaurant bookings with related data
 * @returns {Promise<Array>} Array of normalized restaurant bookings
 */
export const fetchAllRestaurantBookingsForAdmin = async () => {
  try {
    const { data, error } = await supabase
      .from('restaurant_bookings')
      .select(`
        *,
        profiles:user_id (id, full_name, email, phone)
      `)
      .order('created_at', { ascending: false });
    
    if (error) throw error;
    
    return (data || []).map(booking => ({
      ...booking,
      type: 'restaurant',
      item_name: 'Restaurant Table',
      guestName: booking.name || booking.profiles?.full_name,
      guestEmail: booking.email || booking.profiles?.email,
      guestPhone: booking.phone || booking.profiles?.phone,
      totalPrice: parseFloat(booking.total_price || 0),
      checkIn: booking.reservation_at,
      checkOut: booking.reservation_at,
    }));
  } catch (err) {
    console.error('âŒ Error fetching restaurant bookings for admin:', err);
    return [];
  }
};

/**
 * Fetch all spa bookings with related data
 * @returns {Promise<Array>} Array of normalized spa bookings
 */
export const fetchAllSpaBookingsForAdmin = async () => {
  try {
    const { data, error } = await supabase
      .from('spa_bookings')
      .select(`
        *,
        profiles:user_id (id, full_name, email, phone)
      `)
      .order('created_at', { ascending: false });
    
    if (error) throw error;
    
    return (data || []).map(booking => ({
      ...booking,
      type: 'spa',
      item_name: booking.service_name || 'Spa Service',
      guestName: booking.name || booking.profiles?.full_name,
      guestEmail: booking.email || booking.profiles?.email,
      guestPhone: booking.phone || booking.profiles?.phone,
      totalPrice: parseFloat(booking.total_price || 0),
      checkIn: booking.appointment_at,
      checkOut: booking.appointment_at,
    }));
  } catch (err) {
    console.error('âŒ Error fetching spa bookings for admin:', err);
    return [];
  }
};

/**
 * Fetch ALL bookings (Room + Restaurant + Spa) combined and normalized
 * @returns {Promise<Array>} Single array of all booking types, sorted by date
 */
export const fetchAllBookingsForAdmin = async () => {
  try {
    const [roomBookings, restBookings, spaBookings] = await Promise.all([
      fetchAllRoomBookingsForAdmin(),
      fetchAllRestaurantBookingsForAdmin(),
      fetchAllSpaBookingsForAdmin(),
    ]);

    // Combine and sort by created_at descending
    const combined = [...roomBookings, ...restBookings, ...spaBookings]
      .sort((a, b) => new Date(b.created_at) - new Date(a.created_at));

    console.log(`âœ… Loaded ${combined.length} total bookings (${roomBookings.length} room, ${restBookings.length} restaurant, ${spaBookings.length} spa)`);
    return combined;
  } catch (err) {
    console.error('âŒ Error fetching all bookings:', err);
    return [];
  }
};

// ============================================================================
// BOOKING MANAGEMENT - UPDATE & DELETE
// ============================================================================

/**
 * Update booking status for any booking type
 * @param {string} bookingId - Booking ID
 * @param {string} bookingType - 'room', 'restaurant', or 'spa'
 * @param {string} status - New status value
 * @param {object} extraData - Additional fields to update
 * @returns {Promise<object|null>} Updated booking or null
 */
export const updateBookingStatus = async (bookingId, bookingType, status, extraData = {}) => {
  try {
    const tableMap = {
      room: 'bookings',
      restaurant: 'restaurant_bookings',
      spa: 'spa_bookings',
    };

    const table = tableMap[bookingType];
    if (!table) throw new Error(`Invalid booking type: ${bookingType}`);

    const { data, error } = await supabase
      .from(table)
      .update({
        status,
        updated_at: new Date().toISOString(),
        ...extraData,
      })
      .eq('id', bookingId)
      .select();

    if (error) throw error;

    console.log(`âœ… Booking ${bookingId} (${bookingType}) updated to status: ${status}`);
    return data?.[0] || null;
  } catch (err) {
    console.error(`âŒ Error updating booking status:`, err);
    return null;
  }
};

/**
 * Delete a booking (any type)
 * @param {string} bookingId - Booking ID
 * @param {string} bookingType - 'room', 'restaurant', or 'spa'
 * @returns {Promise<boolean>} Success or failure
 */
export const deleteBooking = async (bookingId, bookingType) => {
  try {
    const tableMap = {
      room: 'bookings',
      restaurant: 'restaurant_bookings',
      spa: 'spa_bookings',
    };

    const table = tableMap[bookingType];
    if (!table) throw new Error(`Invalid booking type: ${bookingType}`);

    const { error } = await supabase
      .from(table)
      .delete()
      .eq('id', bookingId);

    if (error) throw error;

    console.log(`âœ… Booking ${bookingId} (${bookingType}) deleted`);
    return true;
  } catch (err) {
    console.error(`âŒ Error deleting booking:`, err);
    return false;
  }
};

// ============================================================================
// USER MANAGEMENT - FETCH
// ============================================================================

/**
 * Fetch all users/profiles with admin-relevant data
 * @returns {Promise<Array>} Array of user profiles
 */
export const fetchAllUsers = async () => {
  try {
    const { data, error } = await supabase
      .from('profiles')
      .select('id, full_name, email, phone, role, created_at, updated_at')
      .order('created_at', { ascending: false });

    if (error) throw error;

    console.log(`âœ… Loaded ${data?.length || 0} users`);
    return data || [];
  } catch (err) {
    console.error('âŒ Error fetching users:', err);
    return [];
  }
};

/**
 * Fetch user by ID with detailed info
 * @param {string} userId - User ID
 * @returns {Promise<object|null>} User profile or null
 */
export const fetchUserById = async (userId) => {
  try {
    const { data, error } = await supabase
      .from('profiles')
      .select('*')
      .eq('id', userId)
      .single();

    if (error) throw error;
    return data || null;
  } catch (err) {
    console.error(`âŒ Error fetching user ${userId}:`, err);
    return null;
  }
};

/**
 * Update user profile (admin operation)
 * @param {string} userId - User ID
 * @param {object} updateData - Fields to update
 * @returns {Promise<object|null>} Updated user or null
 */
export const updateUser = async (userId, updateData) => {
  try {
    const { data, error } = await supabase
      .from('profiles')
      .update({
        ...updateData,
        updated_at: new Date().toISOString(),
      })
      .eq('id', userId)
      .select();

    if (error) throw error;

    console.log(`âœ… User ${userId} profile updated`);
    return data?.[0] || null;
  } catch (err) {
    console.error(`âŒ Error updating user:`, err);
    return null;
  }
};

/**
 * Delete user profile (admin operation)
 * @param {string} userId - User ID
 * @returns {Promise<boolean>} Success or failure
 */
export const deleteUser = async (userId) => {
  try {
    const { error } = await supabase
      .from('profiles')
      .delete()
      .eq('id', userId);

    if (error) throw error;

    console.log(`âœ… User ${userId} deleted`);
    return true;
  } catch (err) {
    console.error(`âŒ Error deleting user:`, err);
    return false;
  }
};

// ============================================================================
// AUDIT & LOGS
// ============================================================================

/**
 * Fetch audit logs (if table exists)
 * @param {number} limit - Number of records to fetch
 * @returns {Promise<Array>} Array of audit log entries
 */
export const fetchAuditLogs = async (limit = 100) => {
  try {
    const { data, error } = await supabase
      .from('audit_logs')
      .select(`
        *,
        user:user_id (id, full_name, email)
      `)
      .order('created_at', { ascending: false })
      .limit(limit);

    if (error) throw error;

    console.log(`âœ… Loaded ${data?.length || 0} audit logs`);
    return data || [];
  } catch (err) {
    console.error('âŒ Error fetching audit logs:', err);
    return [];
  }
};

/**
 * Create audit log entry
 * @param {object} logData - Log entry data
 * @returns {Promise<object|null>} Created log entry or null
 */
export const createAuditLog = async (logData) => {
  try {
    const { data, error } = await supabase
      .from('audit_logs')
      .insert([{
        user_id: logData.userId,
        action: logData.action,
        entity_type: logData.entityType,
        entity_id: logData.entityId,
        description: logData.description,
        changes: logData.changes || {},
        ip_address: logData.ipAddress,
        created_at: new Date().toISOString(),
      }])
      .select();

    if (error) throw error;
    return data?.[0] || null;
  } catch (err) {
    console.error('âŒ Error creating audit log:', err);
    return null;
  }
};

// ============================================================================
// STATISTICS & ANALYTICS
// ============================================================================

/**
 * Get dashboard statistics (bookings, users, revenue)
 * @returns {Promise<object>} Stats object
 */
export const getAdminDashboardStats = async () => {
  try {
    // Fetch counts in parallel
    const [
      { count: totalRoomBookings },
      { count: totalRestaurantBookings },
      { count: totalSpaBookings },
      { count: totalUsers },
      roomBookingsData,
      restaurantBookingsData,
      spaBookingsData,
    ] = await Promise.all([
      supabase.from('bookings').select('id', { count: 'exact', head: true }),
      supabase.from('restaurant_bookings').select('id', { count: 'exact', head: true }),
      supabase.from('spa_bookings').select('id', { count: 'exact', head: true }),
      supabase.from('profiles').select('id', { count: 'exact', head: true }),
      supabase.from('bookings').select('total_amount, status'),
      supabase.from('restaurant_bookings').select('total_price, status'),
      supabase.from('spa_bookings').select('total_price, status'),
    ]);

    // Calculate revenue
    const roomRevenue = (roomBookingsData.data || [])
      .reduce((sum, b) => sum + (parseFloat(b.total_amount) || 0), 0);
    const restRevenue = (restaurantBookingsData.data || [])
      .reduce((sum, b) => sum + (parseFloat(b.total_price) || 0), 0);
    const spaRevenue = (spaBookingsData.data || [])
      .reduce((sum, b) => sum + (parseFloat(b.total_price) || 0), 0);

    const totalRevenue = roomRevenue + restRevenue + spaRevenue;

    const stats = {
      totalBookings: (totalRoomBookings || 0) + (totalRestaurantBookings || 0) + (totalSpaBookings || 0),
      totalRoomBookings: totalRoomBookings || 0,
      totalRestaurantBookings: totalRestaurantBookings || 0,
      totalSpaBookings: totalSpaBookings || 0,
      totalUsers: totalUsers || 0,
      totalRevenue: totalRevenue.toFixed(2),
      roomRevenue: roomRevenue.toFixed(2),
      restaurantRevenue: restRevenue.toFixed(2),
      spaRevenue: spaRevenue.toFixed(2),
    };

    console.log('âœ… Dashboard stats loaded:', stats);
    return stats;
  } catch (err) {
    console.error('âŒ Error fetching dashboard stats:', err);
    return {
      totalBookings: 0,
      totalRoomBookings: 0,
      totalRestaurantBookings: 0,
      totalSpaBookings: 0,
      totalUsers: 0,
      totalRevenue: '0.00',
      roomRevenue: '0.00',
      restaurantRevenue: '0.00',
      spaRevenue: '0.00',
    };
  }
};

/**
 * Get booking status breakdown (how many in each status)
 * @returns {Promise<object>} Status breakdown counts
 */
export const getBookingStatusBreakdown = async () => {
  try {
    const statuses = ['pending', 'pending_payment', 'approved', 'confirmed', 'checked_in', 'checked_out', 'completed', 'cancelled', 'modified', 'rejected'];

    const breakdowns = {};

    for (const status of statuses) {
      const [
        { count: roomCount },
        { count: restCount },
        { count: spaCount },
      ] = await Promise.all([
        supabase.from('bookings').select('id', { count: 'exact', head: true }).eq('status', status),
        supabase.from('restaurant_bookings').select('id', { count: 'exact', head: true }).eq('status', status),
        supabase.from('spa_bookings').select('id', { count: 'exact', head: true }).eq('status', status),
      ]);

      breakdowns[status] = {
        room: roomCount || 0,
        restaurant: restCount || 0,
        spa: spaCount || 0,
        total: (roomCount || 0) + (restCount || 0) + (spaCount || 0),
      };
    }

    console.log('âœ… Booking status breakdown loaded');
    return breakdowns;
  } catch (err) {
    console.error('âŒ Error fetching booking status breakdown:', err);
    return {};
  }
};

// ============================================================================
// EXPORTS
// ============================================================================

export default {
  // Bookings - Fetch
  fetchAllRoomBookingsForAdmin,
  fetchAllRestaurantBookingsForAdmin,
  fetchAllSpaBookingsForAdmin,
  fetchAllBookingsForAdmin,

  // Bookings - Update/Delete
  updateBookingStatus,
  deleteBooking,

  // Users
  fetchAllUsers,
  fetchUserById,
  updateUser,
  deleteUser,

  // Audit & Logs
  fetchAuditLogs,
  createAuditLog,

  // Statistics
  getAdminDashboardStats,
  getBookingStatusBreakdown,
};


=================================================================
FILE PATH: src\services\authService.js
=================================================================
import { supabase } from '../utils/supabaseClient';

/**
 * Authentication service layer for Supabase Auth operations
 */

/**
 * Sign in with email and password
 */
export const signInWithEmail = async (email, password) => {
  try {
    const { data, error } = await supabase.auth.signInWithPassword({
      email,
      password,
    });
    if (error) throw error;
    return { success: true, data };
  } catch (err) {
    console.error('Sign in error:', err);
    return { success: false, error: err.message };
  }
};

/**
 * Sign up with email and password
 */
export const signUpWithEmail = async (email, password, userData = {}) => {
  try {
    const { data, error } = await supabase.auth.signUp({
      email,
      password,
      options: {
        data: {
          full_name: userData.name || '',
          role: userData.role || 'user',
          ...userData,
        },
      },
    });
    if (error) throw error;
    return { success: true, data };
  } catch (err) {
    console.error('Sign up error:', err);
    return { success: false, error: err.message };
  }
};

/**
 * Sign in with OAuth provider
 */
export const signInWithProvider = async (provider, redirectUrl = null) => {
  try {
    const redirectTo = redirectUrl || `${window.location.origin}/`;
    const { data, error } = await supabase.auth.signInWithOAuth({
      provider,
      options: {
        redirectTo,
      },
    });
    if (error) throw error;
    return { success: true, data };
  } catch (err) {
    console.error('OAuth sign in error:', err);
    return { success: false, error: err.message };
  }
};

/**
 * Sign out
 */
export const signOut = async () => {
  try {
    const { error } = await supabase.auth.signOut();
    if (error) throw error;
    return { success: true };
  } catch (err) {
    console.error('Sign out error:', err);
    return { success: false, error: err.message };
  }
};

/**
 * Get current session
 */
export const getSession = async () => {
  try {
    const {
      data: { session },
      error,
    } = await supabase.auth.getSession();
    if (error) throw error;
    return { success: true, session };
  } catch (err) {
    console.error('Get session error:', err);
    return { success: false, error: err.message };
  }
};

/**
 * Get current user
 */
export const getCurrentUser = async () => {
  try {
    const {
      data: { user },
      error,
    } = await supabase.auth.getUser();
    if (error) throw error;
    return { success: true, user };
  } catch (err) {
    console.error('Get user error:', err);
    return { success: false, error: err.message };
  }
};

/**
 * Request password reset
 */
export const resetPasswordRequest = async (email, redirectUrl = null) => {
  try {
    const redirectTo = redirectUrl || `${window.location.origin}/reset-password`;
    const { error } = await supabase.auth.resetPasswordForEmail(email, {
      redirectTo,
    });
    if (error) throw error;
    return { success: true };
  } catch (err) {
    console.error('Password reset request error:', err);
    return { success: false, error: err.message };
  }
};

/**
 * Update password with new password
 */
export const updateUserPassword = async (newPassword) => {
  try {
    const { error } = await supabase.auth.updateUser({
      password: newPassword,
    });
    if (error) throw error;
    return { success: true };
  } catch (err) {
    console.error('Update password error:', err);
    return { success: false, error: err.message };
  }
};

/**
 * Update user metadata
 */
export const updateUserMetadata = async (metadata) => {
  try {
    const { error } = await supabase.auth.updateUser({
      data: metadata,
    });
    if (error) throw error;
    return { success: true };
  } catch (err) {
    console.error('Update metadata error:', err);
    return { success: false, error: err.message };
  }
};

/**
 * Verify email OTP
 */
export const verifyEmail = async (token) => {
  try {
    const { error } = await supabase.auth.verifyOtp({
      token,
      type: 'email',
    });
    if (error) throw error;
    return { success: true };
  } catch (err) {
    console.error('Email verification error:', err);
    return { success: false, error: err.message };
  }
};

/**
 * Resend verification email
 */
export const resendVerificationEmail = async (email) => {
  try {
    const { error } = await supabase.auth.resend({
      type: 'signup',
      email,
    });
    if (error) throw error;
    return { success: true };
  } catch (err) {
    console.error('Resend verification error:', err);
    return { success: false, error: err.message };
  }
};

/**
 * Fetch user profile from database
 */
export const fetchUserProfile = async (userId) => {
  try {
    const { data, error } = await supabase
      .from('profiles')
      .select('*')
      .eq('id', userId)
      .single();

    if (error) {
      console.warn('Profile fetch error:', error);
      return null;
    }
    return data;
  } catch (err) {
    console.error('Error fetching user profile:', err);
    return null;
  }
};

/**
 * Create or update user profile in database
 */
export const upsertUserProfile = async (userId, userData) => {
  try {
    const { error } = await supabase
      .from('profiles')
      .upsert(
        {
          id: userId,
          full_name: userData.name,
          phone: userData.phone,
          avatar_url: userData.avatar,
          country: userData.country,
          city: userData.city,
          preferences: userData.preferences || [],
          language: userData.language || 'en',
          newsletter: userData.newsletter !== false,
          bio: userData.bio,
          role: userData.role || 'user',
          updated_at: new Date().toISOString(),
        },
        { onConflict: 'id' }
      );

    if (error) {
      console.error('Error upserting profile:', error);
      return false;
    }
    return true;
  } catch (err) {
    console.error('Error in upsertUserProfile:', err);
    return false;
  }
};

/**
 * Listen for auth state changes
 */
export const onAuthStateChange = (callback) => {
  const {
    data: { subscription },
  } = supabase.auth.onAuthStateChange((event, session) => {
    callback(event, session);
  });

  // Return unsubscribe function
  return () => {
    subscription?.unsubscribe();
  };
};

export default {
  signInWithEmail,
  signUpWithEmail,
  signInWithProvider,
  signOut,
  getSession,
  getCurrentUser,
  resetPasswordRequest,
  updateUserPassword,
  updateUserMetadata,
  verifyEmail,
  resendVerificationEmail,
  fetchUserProfile,
  upsertUserProfile,
  onAuthStateChange,
};

=================================================================
FILE PATH: src\services\bookingService.js
=================================================================
import { supabase } from '../utils/supabaseClient';

/**
 * Service layer for room booking operations
 */

export const createBooking = async (bookingData) => {
  try {
    const { data, error } = await supabase
      .from('bookings')
      .insert([bookingData])
      .select();
    if (error) throw error;
    return data?.[0] || null;
  } catch (err) {
    console.error('Error creating room booking:', err);
    return null;
  }
};

export const fetchUserBookings = async (userId) => {
  try {
    const { data, error } = await supabase
      .from('bookings')
      .select('*')
      .eq('user_id', userId)
      .order('created_at', { ascending: false });
    if (error) throw error;
    return data || [];
  } catch (err) {
    console.error('Error fetching user room bookings:', err);
    return [];
  }
};

export const updateBookingStatus = async (bookingId, status, extraData = {}) => {
  try {
    const { data, error } = await supabase
      .from('bookings')
      .update({ status, ...extraData })
      .eq('id', bookingId)
      .select();
    if (error) throw error;
    return data?.[0] || null;
  } catch (err) {
    console.error('Error updating room booking status:', err);
    return null;
  }
};

/**
 * Service layer for restaurant booking operations
 */

export const createRestaurantBooking = async (bookingData) => {
  try {
    const { data, error } = await supabase
      .from('restaurant_bookings')
      .insert([{
        user_id: bookingData.userId,
        confirmation_code: bookingData.confirmationCode,
        name: bookingData.name,
        email: bookingData.email,
        phone: bookingData.phone,
        reservation_at: bookingData.reservationAt,
        guests: bookingData.guests || 1,
        special_requests: bookingData.specialRequests || '',
        price: bookingData.price || 0,
        total_price: bookingData.totalPrice || 0,
        status: bookingData.status || 'pending_payment',
        payment_method: bookingData.paymentMethod || null,
        paid_at: bookingData.paidAt || null,
      }])
      .select();
    if (error) throw error;
    console.log('âœ… Restaurant booking saved:', data?.[0]?.confirmation_code);
    return data?.[0] || null;
  } catch (err) {
    console.error('âŒ Error creating restaurant booking:', err);
    return null;
  }
};

export const updateRestaurantBookingStatus = async (bookingId, status, extraData = {}) => {
  try {
    const { data, error } = await supabase
      .from('restaurant_bookings')
      .update({ 
        status,
        ...extraData,
        updated_at: new Date().toISOString()
      })
      .eq('id', bookingId)
      .select();
    if (error) throw error;
    console.log('âœ… Restaurant booking updated:', status);
    return data?.[0] || null;
  } catch (err) {
    console.error('âŒ Error updating restaurant booking:', err);
    return null;
  }
};

export const fetchUserRestaurantBookings = async (userId) => {
  try {
    const { data, error } = await supabase
      .from('restaurant_bookings')
      .select('*')
      .eq('user_id', userId)
      .order('created_at', { ascending: false });
    if (error) throw error;
    return data || [];
  } catch (err) {
    console.error('Error fetching user restaurant bookings:', err);
    return [];
  }
};


/**
 * Service layer for spa booking operations
 */

export const createSpaBooking = async (bookingData) => {
  try {
    const { data, error } = await supabase
      .from('spa_bookings')
      .insert([{
        user_id: bookingData.userId,
        confirmation_code: bookingData.confirmationCode,
        name: bookingData.name,
        email: bookingData.email,
        phone: bookingData.phone,
        appointment_at: bookingData.appointmentAt,
        service_name: bookingData.serviceName,
        service_duration: bookingData.duration || '',
        therapist: bookingData.therapist || '',
        special_requests: bookingData.specialRequests || '',
        price: bookingData.price || 0,
        total_price: bookingData.totalPrice || 0,
        status: bookingData.status || 'pending_payment',
        payment_method: bookingData.paymentMethod || null,
        paid_at: bookingData.paidAt || null,
      }])
      .select();
    if (error) throw error;
    console.log('âœ… Spa booking saved:', data?.[0]?.confirmation_code);
    return data?.[0] || null;
  } catch (err) {
    console.error('âŒ Error creating spa booking:', err);
    return null;
  }
};

export const updateSpaBookingStatus = async (bookingId, status, extraData = {}) => {
  try {
    const { data, error } = await supabase
      .from('spa_bookings')
      .update({ 
        status,
        ...extraData,
        updated_at: new Date().toISOString()
      })
      .eq('id', bookingId)
      .select();
    if (error) throw error;
    console.log('âœ… Spa booking updated:', status);
    return data?.[0] || null;
  } catch (err) {
    console.error('âŒ Error updating spa booking:', err);
    return null;
  }
};

export const fetchUserSpaBookings = async (userId) => {
  try {
    const { data, error } = await supabase
      .from('spa_bookings')
      .select('*')
      .eq('user_id', userId)
      .order('created_at', { ascending: false });
    if (error) throw error;
    return data || [];
  } catch (err) {
    console.error('Error fetching user spa bookings:', err);
    return [];
  }
};

export default {
    createBooking,
    fetchUserBookings,
    updateBookingStatus,
    createRestaurantBooking,
    updateRestaurantBookingStatus,
    fetchUserRestaurantBookings,
    createSpaBooking,
    updateSpaBookingStatus,
    fetchUserSpaBookings,
};

=================================================================
FILE PATH: src\services\roomService.js
=================================================================
import { supabase } from '../utils/supabaseClient';

/**
 * Service layer for room and pricing operations
 */

export const fetchRoomTypes = async () => {
  try {
    const { data, error } = await supabase
      .from('room_types')
      .select('*')
      .eq('is_active', true)
      .order('code', { ascending: true });
    if (error) throw error;
    return data || [];
  } catch (err) {
    console.error('Error fetching room types:', err);
    return [];
  }
};

export const createRoomType = async (roomTypeData) => {
  try {
    const { data, error } = await supabase
      .from('room_types')
      .insert([roomTypeData])
      .select();
    if (error) throw error;
    return data?.[0] || null;
  } catch (err) {
    console.error('Error creating room type:', err);
    throw err;
  }
};

export const updateRoomType = async (id, roomTypeData) => {
  try {
    const { data, error } = await supabase
      .from('room_types')
      .update(roomTypeData)
      .eq('id', id)
      .select();
    if (error) throw error;
    return data?.[0] || null;
  } catch (err) {
    console.error('Error updating room type:', err);
    throw err;
  }
};

export const deleteRoomType = async (id) => {
  try {
    const { error } = await supabase
      .from('room_types')
      .delete()
      .eq('id', id);
    if (error) throw error;
    return true;
  } catch (err) {
    console.error('Error deleting room type:', err);
    throw err;
  }
};

export const fetchRooms = async (roomTypeId = null) => {
  try {
    let query = supabase.from('rooms').select(`
      *,
      room_types:room_type_id (*)
    `);
    
    if (roomTypeId) {
      query = query.eq('room_type_id', roomTypeId);
    }
    
    const { data, error } = await query.order('room_no', { ascending: true });
    if (error) throw error;
    return data || [];
  } catch (err) {
    console.error('Error fetching rooms:', err);
    return [];
  }
};

export const createRoom = async (roomData) => {
  try {
    const { data, error } = await supabase
      .from('rooms')
      .insert([roomData])
      .select(`*, room_types:room_type_id (*)`);
    if (error) throw error;
    return data?.[0] || null;
  } catch (err) {
    console.error('Error creating room:', err);
    throw err;
  }
};

export const updateRoom = async (id, roomData) => {
  try {
    const { data, error } = await supabase
      .from('rooms')
      .update(roomData)
      .eq('id', id)
      .select(`*, room_types:room_type_id (*)`);
    if (error) throw error;
    return data?.[0] || null;
  } catch (err) {
    console.error('Error updating room:', err);
    throw err;
  }
};

export const deleteRoom = async (id) => {
  try {
    const { error } = await supabase
      .from('rooms')
      .delete()
      .eq('id', id);
    if (error) throw error;
    return true;
  } catch (err) {
    console.error('Error deleting room:', err);
    throw err;
  }
};

export const fetchRoomImages = async (roomTypeId = null) => {
  try {
    let query = supabase.from('room_images').select('*');
    
    if (roomTypeId) {
      query = query.eq('room_type_id', roomTypeId);
    }
    
    const { data, error } = await query;
    if (error) throw error;
    
    console.log('ðŸ–¼ï¸ Fetch Room Images - Result:', { count: data?.length, data });
    
    return data || [];
  } catch (err) {
    console.error('Error fetching room images:', err);
    return [];
  }
};

export const fetchRoomsWithImages = async () => {
  try {
    // 1. Fetch all rooms with their room_type relations
    const roomsData = await fetchRooms();

    // 2. For each room, fetch its room_type's images from room_images table
    const enrichedRooms = await Promise.all(
      roomsData.map(async (room) => {
        const roomTypeId = room.room_type_id;
        
        try {
          // Fetch images for this room type from Supabase
          const images = await fetchRoomImages(roomTypeId);
          
          // Get primary image (first one) and lg variant
          const primaryImage = images?.length > 0 ? images[0] : null;
          
          return {
            ...room,
            image_url: primaryImage?.image_url || null,
            image_lg_url: primaryImage?.image_lg_url || null,
            all_images: images || [],
          };
        } catch (imgErr) {
          console.warn(`Failed to load images for room type ${roomTypeId}:`, imgErr);
          return {
            ...room,
            image_url: null,
            image_lg_url: null,
            all_images: [],
          };
        }
      })
    );

    console.log(`âœ… Loaded ${enrichedRooms.length} rooms from Supabase with real Storage images`);
    return enrichedRooms;
  } catch (err) {
    console.error('Error fetching rooms with images:', err);
    return [];
  }
};

export const checkRoomAvailability = async (roomId, checkIn, checkOut, excludeBookingId = null) => {
  try {
    let query = supabase
      .from('bookings')
      .select('id')
      .eq('room_id', roomId)
      .neq('status', 'cancelled')
      .lt('check_in', checkOut)
      .gt('check_out', checkIn);
    
    if (excludeBookingId) {
      query = query.neq('id', excludeBookingId);
    }
    
    const { data, error } = await query;
    if (error) throw error;
    return (data && data.length === 0);
  } catch (err) {
    console.error('Error checking availability:', err);
    return true;
  }
};

export const fetchPriceRules = async (roomTypeId) => {
  try {
    const { data, error } = await supabase
      .from('price_rules')
      .select('*')
      .eq('room_type_id', roomTypeId)
      .eq('is_active', true)
      .order('priority', { ascending: true });
    if (error) throw error;
    return data || [];
  } catch (err) {
    console.error('Error fetching price rules:', err);
    return [];
  }
};

export const fetchPromotions = async () => {
  try {
    const { data, error } = await supabase
      .from('promotions')
      .select('*')
      .eq('is_active', true)
      .order('end_date', { ascending: true });
    if (error) throw error;
    return data || [];
  } catch (err) {
    console.error('Error fetching promotions:', err);
    return [];
  }
};

export const fetchRoomReviews = async (roomTypeId) => {
  try {
    const { data, error } = await supabase
      .from('room_reviews')
      .select('*')
      .eq('room_type_id', roomTypeId)
      .order('created_at', { ascending: false });
    if (error) throw error;
    return data || [];
  } catch (err) {
    console.error('Error fetching reviews:', err);
    return [];
  }
};

export const createReview = async (reviewData) => {
  try {
    const { data, error } = await supabase
      .from('room_reviews')
      .insert([reviewData])
      .select();
    if (error) throw error;
    return data?.[0] || null;
  } catch (err) {
    console.error('Error creating review:', err);
    return null;
  }
};

export const hasUserBookedRoomType = async (userId, roomTypeId) => {
  try {
    const { data, error } = await supabase
      .from('bookings')
      .select('id')
      .eq('user_id', userId)
      .eq('room_type_id', roomTypeId)
      .neq('status', 'cancelled')
      .limit(1);
    if (error) throw error;
    return (data && data.length > 0);
  } catch (err) {
    console.error('Error checking user booking:', err);
    return false;
  }
};

/**
 * Get primary image for a room type
 * @param {string} roomTypeId - Room type UUID
 * @returns {object|null} Image object with image_url and image_lg_url, or null
 */
export const getPrimaryImage = async (roomTypeId) => {
  try {
    const { data, error } = await supabase
      .from('room_images')
      .select('*')
      .eq('room_type_id', roomTypeId)
      .order('display_order', { ascending: true })
      .limit(1);
    
    if (error) throw error;
    return data?.length > 0 ? data[0] : null;
  } catch (err) {
    console.error(`Error fetching primary image for room type ${roomTypeId}:`, err);
    return null;
  }
};

/**
 * Get all images for a room type
 * @param {string} roomTypeId - Room type UUID
 * @returns {array} Array of image objects
 */
export const getAllImages = async (roomTypeId) => {
  try {
    const { data, error } = await supabase
      .from('room_images')
      .select('*')
      .eq('room_type_id', roomTypeId)
      .order('display_order', { ascending: true });
    
    if (error) throw error;
    return data || [];
  } catch (err) {
    console.error(`Error fetching all images for room type ${roomTypeId}:`, err);
    return [];
  }
};

export default {
  fetchRoomTypes,
  createRoomType,
  updateRoomType,
  deleteRoomType,
  fetchRooms,
  createRoom,
  updateRoom,
  deleteRoom,
  fetchRoomImages,
  fetchRoomsWithImages,
  checkRoomAvailability,
  fetchPriceRules,
  fetchPromotions,
  fetchRoomReviews,
  createReview,
  hasUserBookedRoomType,
  getPrimaryImage,
  getAllImages,
};

=================================================================
FILE PATH: src\style\chatbox.css
=================================================================
/* ChatBox Custom Animations & Styles */

/* Fade in animation */
@keyframes fadeIn {
  from {
    opacity: 0;
  }
  to {
    opacity: 1;
  }
}

@keyframes slideUp {
  from {
    transform: translateY(20px);
    opacity: 0;
  }
  to {
    transform: translateY(0);
    opacity: 1;
  }
}

@keyframes slideIn {
  from {
    transform: translateX(20px);
    opacity: 0;
  }
  to {
    transform: translateX(0);
    opacity: 1;
  }
}

@keyframes scaleBounce {
  0%,
  100% {
    transform: scale(1);
  }
  50% {
    transform: scale(1.05);
  }
}

@keyframes typingDots {
  0%,
  60%,
  100% {
    opacity: 0.3;
  }
  30% {
    opacity: 1;
  }
}

@keyframes pulse {
  0%,
  100% {
    opacity: 1;
  }
  50% {
    opacity: 0.7;
  }
}

@keyframes shimmer {
  0% {
    background-position: -1000px 0;
  }
  100% {
    background-position: 1000px 0;
  }
}

/* Apply animations */
.animate-fade-in {
  animation: fadeIn 0.4s ease-in-out;
}

.animate-slide-up {
  animation: slideUp 0.5s ease-out;
}

.animate-slide-in {
  animation: slideIn 0.3s ease-out;
}

.animate-scale-bounce {
  animation: scaleBounce 2s ease-in-out infinite;
}

.animate-typing {
  animation: typingDots 1.4s infinite;
}

.animate-pulse-custom {
  animation: pulse 2s cubic-bezier(0.4, 0, 0.6, 1) infinite;
}

.animate-shimmer {
  animation: shimmer 2s infinite;
  background: linear-gradient(
    90deg,
    rgba(255, 255, 255, 0) 0%,
    rgba(255, 255, 255, 0.2) 20%,
    rgba(255, 255, 255, 0) 40%,
    rgba(255, 255, 255, 0) 100%
  );
  background-size: 1000px 100%;
}

/* ChatBox specific styles */
.chatbox-container {
  display: flex;
  flex-direction: column;
  height: 100%;
  border-radius: 1.5rem;
  overflow: hidden;
}

.chatbox-header {
  background: linear-gradient(135deg, #2563eb 0%, #1d4ed8 100%);
  color: white;
  padding: 1.5rem;
  flex-shrink: 0;
}

.chatbox-body {
  flex: 1;
  overflow-y: auto;
  padding: 1rem;
  background: linear-gradient(180deg, #f0f4ff 0%, #f9fafb 100%);
  scroll-behavior: smooth;
}

.chatbox-body::-webkit-scrollbar {
  width: 6px;
}

.chatbox-body::-webkit-scrollbar-track {
  background: #f1f5f9;
  border-radius: 10px;
}

.chatbox-body::-webkit-scrollbar-thumb {
  background: #cbd5e1;
  border-radius: 10px;
}

.chatbox-body::-webkit-scrollbar-thumb:hover {
  background: #94a3b8;
}

.chatbox-footer {
  padding: 1rem;
  background: white;
  border-top: 1px solid #e5e7eb;
  flex-shrink: 0;
}

.chat-message {
  margin-bottom: 1rem;
  display: flex;
  animation: slideUp 0.3s ease-out;
}

.chat-message.user {
  justify-content: flex-end;
}

.chat-message.ai {
  justify-content: flex-start;
}

.chat-bubble {
  max-width: 85%;
  padding: 0.75rem 1rem;
  border-radius: 1rem;
  word-wrap: break-word;
  line-height: 1.5;
}

.chat-bubble.user {
  background: #2563eb;
  color: white;
  border-bottom-right-radius: 0.25rem;
  box-shadow: 0 2px 8px rgba(37, 99, 235, 0.2);
}

.chat-bubble.ai {
  background: #f3f4f6;
  color: #1f2937;
  border: 1px solid #e5e7eb;
  border-bottom-left-radius: 0.25rem;
  box-shadow: 0 1px 3px rgba(0, 0, 0, 0.05);
}

.chat-bubble.ai:hover {
  box-shadow: 0 4px 12px rgba(0, 0, 0, 0.1);
}

.quick-reply-button {
  display: inline-flex;
  align-items: center;
  gap: 0.5rem;
  padding: 0.5rem 1rem;
  margin: 0.25rem;
  background: #dbeafe;
  color: #1e40af;
  border: 1px solid #93c5fd;
  border-radius: 9999px;
  font-size: 0.875rem;
  font-weight: 500;
  cursor: pointer;
  transition: all 0.2s ease;
  white-space: nowrap;
}

.quick-reply-button:hover {
  background: #bfdbfe;
  border-color: #60a5fa;
  transform: scale(1.05);
}

.quick-reply-button:active {
  transform: scale(0.95);
}

.room-card {
  display: flex;
  gap: 0.75rem;
  padding: 0.75rem;
  border: 1px solid #e5e7eb;
  border-radius: 0.75rem;
  background: white;
  cursor: pointer;
  transition: all 0.2s ease;
  margin-bottom: 0.5rem;
}

.room-card:hover {
  background: #f0f4ff;
  border-color: #93c5fd;
  transform: translateX(2px);
  box-shadow: 0 4px 12px rgba(37, 99, 235, 0.1);
}

.room-card-image {
  width: 5rem;
  height: 5rem;
  border-radius: 0.5rem;
  object-fit: cover;
  flex-shrink: 0;
}

.room-card-content {
  flex: 1;
}

.room-card-name {
  font-weight: 600;
  font-size: 0.875rem;
  color: #111827;
  margin-bottom: 0.25rem;
}

.room-card-details {
  font-size: 0.75rem;
  color: #6b7280;
  margin-bottom: 0.5rem;
}

.room-card-price {
  font-size: 0.875rem;
  font-weight: 700;
  color: #2563eb;
}

.input-group {
  display: flex;
  gap: 0.5rem;
  margin-top: 1rem;
}

.chat-input {
  flex: 1;
  padding: 0.5rem 1rem;
  border: 1px solid #d1d5db;
  border-radius: 9999px;
  font-size: 0.875rem;
  outline: none;
  transition: all 0.2s ease;
}

.chat-input:focus {
  border-color: #2563eb;
  box-shadow: 0 0 0 3px rgba(37, 99, 235, 0.1);
}

.send-button {
  padding: 0.5rem 1rem;
  background: #2563eb;
  color: white;
  border: none;
  border-radius: 9999px;
  cursor: pointer;
  font-weight: 500;
  transition: all 0.2s ease;
  display: flex;
  align-items: center;
  justify-content: center;
}

.send-button:hover {
  background: #1d4ed8;
  transform: scale(1.05);
}

.send-button:active {
  transform: scale(0.95);
}

.typing-indicator {
  display: flex;
  gap: 0.25rem;
  align-items: center;
  padding: 0.75rem 1rem;
  background: #f3f4f6;
  border: 1px solid #e5e7eb;
  border-radius: 1rem;
  border-bottom-left-radius: 0.25rem;
  width: fit-content;
}

.typing-dot {
  width: 0.5rem;
  height: 0.5rem;
  background: #9ca3af;
  border-radius: 50%;
  animation: typingDots 1.4s infinite;
}

.typing-dot:nth-child(1) {
  animation-delay: 0ms;
}

.typing-dot:nth-child(2) {
  animation-delay: 0.2s;
}

.typing-dot:nth-child(3) {
  animation-delay: 0.4s;
}

.form-group {
  margin-bottom: 1rem;
}

.form-label {
  display: block;
  font-size: 0.75rem;
  font-weight: 600;
  color: #4b5563;
  margin-bottom: 0.25rem;
  text-transform: uppercase;
  letter-spacing: 0.5px;
}

.form-input {
  width: 100%;
  padding: 0.5rem 0.75rem;
  border: 1px solid #d1d5db;
  border-radius: 0.5rem;
  font-size: 0.875rem;
  transition: all 0.2s ease;
  box-sizing: border-box;
}

.form-input:focus {
  border-color: #2563eb;
  box-shadow: 0 0 0 3px rgba(37, 99, 235, 0.1);
  outline: none;
}

.form-textarea {
  resize: none;
  min-height: 3rem;
}

.form-grid {
  display: grid;
  grid-template-columns: 1fr 1fr;
  gap: 0.75rem;
}

.form-grid.full {
  grid-template-columns: 1fr;
}

.button-primary {
  width: 100%;
  padding: 0.75rem 1rem;
  background: linear-gradient(135deg, #2563eb 0%, #1d4ed8 100%);
  color: white;
  border: none;
  border-radius: 0.5rem;
  font-weight: 600;
  cursor: pointer;
  transition: all 0.2s ease;
  display: flex;
  align-items: center;
  justify-content: center;
  gap: 0.5rem;
}

.button-primary:hover {
  transform: scale(1.02);
  box-shadow: 0 8px 16px rgba(37, 99, 235, 0.3);
}

.button-primary:active {
  transform: scale(0.98);
}

.button-success {
  background: linear-gradient(135deg, #16a34a 0%, #15803d 100%);
}

.button-success:hover {
  box-shadow: 0 8px 16px rgba(22, 163, 74, 0.3);
}

.info-box {
  padding: 0.75rem;
  background: #dbeafe;
  border: 1px solid #93c5fd;
  border-radius: 0.5rem;
  font-size: 0.75rem;
  color: #1e3a8a;
}

.info-box.success {
  background: #dcfce7;
  border-color: #86efac;
  color: #15803d;
}

.info-box.error {
  background: #fee2e2;
  border-color: #fca5a5;
  color: #7f1d1d;
}

.info-box.warning {
  background: #fef3c7;
  border-color: #fde68a;
  color: #78350f;
}

/* Responsive */
@media (max-width: 640px) {
  .chatbox-container {
    border-radius: 0;
    height: 100vh;
  }

  .chat-bubble {
    max-width: 90%;
  }

  .form-grid {
    grid-template-columns: 1fr;
  }
}

/* Accessibility */
@media (prefers-reduced-motion: reduce) {
  .animate-fade-in,
  .animate-slide-up,
  .animate-slide-in,
  .animate-scale-bounce,
  .animate-typing,
  .animate-pulse-custom,
  .chat-message,
  .quick-reply-button,
  .room-card {
    animation: none;
    transition: none;
  }
}

/* Dark mode support */
@media (prefers-color-scheme: dark) {
  .chatbox-body {
    background: linear-gradient(180deg, #1f2937 0%, #111827 100%);
  }

  .chat-bubble.ai {
    background: #374151;
    color: #f3f4f6;
    border-color: #4b5563;
  }

  .chat-bubble.ai:hover {
    box-shadow: 0 4px 12px rgba(255, 255, 255, 0.1);
  }

  .room-card {
    background: #374151;
    border-color: #4b5563;
  }

  .room-card:hover {
    background: #4b5563;
  }

  .chat-input {
    background: #1f2937;
    color: #f3f4f6;
    border-color: #4b5563;
  }

  .chat-input::placeholder {
    color: #9ca3af;
  }
}


=================================================================
FILE PATH: src\style\datepicker.css
=================================================================
.react-datepicker {
  background   : white;
  border       : none;
  border-radius: 0;
  font-family  : 'Barlow';
  border       : 1px solid #aa8453;
  font-size    : 0.9rem;
}

.react-datepicker__header {
  border : #aa8453;
  color  : #fff;
  padding: 0;
}

.react-datepicker-wrapper {
  padding   : 0 2rem;
  height    : 100%;
  display   : flex;
  background: white;
}

.react-datepicker-popper {
  padding-top: 0;
}

.react-datepicker-popper[data-placement^='bottom'] {
  padding-top: 0;
}

.react-datepicker__triangle {
  display: none;
}

.react-datepicker__current-month {
  background: #aa8453;
  color     : white;
  padding   : 0.3rem 0;
}

.react-datepicker__navigation {
  top: 5px;
}

.react-datepicker__navigation-icon::before {
  border-color: #fff;
}

.react-datepicker__input-container input {
  outline   : none;
  background: none;
}

.react-datepicker__day--selected,
.react-datepicker__day--keyboard-selected {
  background   : #aa8453;
  border-radius: 0;
}

.react-datepicker__day--selected:hover {
  background: #906d40;
}

.react-datepicker__current-month {
  font-weight: 500;
}

.react-datepicker__day:hover {
  border-radius: 0;
}

=================================================================
FILE PATH: src\style\index.css
=================================================================
@import url('https://fonts.googleapis.com/css2?family=Barlow+Condensed:ital,wght@0,100;0,200;0,300;0,400;0,500;0,600;0,700;0,800;0,900;1,100;1,200;1,300;1,400;1,500;1,600;1,700;1,800;1,900&family=Barlow:ital,wght@0,100;0,200;0,300;0,400;0,500;0,600;0,700;0,800;0,900;1,100;1,200;1,300;1,400;1,500;1,600;1,700;1,800;1,900&family=Gilda+Display&display=swap');

@tailwind base;
@tailwind components;
@tailwind utilities;

@layer base {

  html {
    @apply scroll-smooth scroll-pt-6;
  }

  /* 
  ðŸŸ¨ðŸŸ¨ðŸŸ¨ðŸŸ¨ðŸŸ¨ðŸŸ¨ðŸŸ¨ðŸŸ¨ðŸŸ¨
  Browser Main Scrollbar 
  ðŸŸ¨ðŸŸ¨ðŸŸ¨ðŸŸ¨ðŸŸ¨ðŸŸ¨ðŸŸ¨ðŸŸ¨ðŸŸ¨
  */

  html::-webkit-scrollbar {
    width: 8px;
  }

  html::-webkit-scrollbar-thumb {
    border-radius   : 2px;
    background-color: #a37d4c;
  }

  html::-webkit-scrollbar-track {
    background-color: #FFFFFF;
  }

  body {
    @apply font-secondary text-primary;
  }

  input::placeholder {
    @apply text-primary;
  }

  .h2 {
    @apply font-primary text-[45px] mb-4;
  }

  .h3 {
    @apply text-2xl font-primary font-semibold tracking-[1px] mb-2;
  }

  .btn {
    @apply text-[15px] tracking-[3px] font-tertiary uppercase text-white flex-1 transition-all px-8 flex justify-center items-center;
  }

  .btn-sm {
    @apply h-[48px];
  }

  .btn-lg {
    @apply h-[60px];
  }

  .btn-primary {
    @apply bg-accent hover:bg-accent-hover;
  }

  .btn-secondary {
    @apply bg-primary hover:bg-accent;
  }

  .btn-white {
    @apply bg-white text-[#0a0a0a];
  }

  @keyframes slide-in-right {
    from {
      transform: translateX(100%);
      opacity: 0;
    }
    to {
      transform: translateX(0);
      opacity: 1;
    }
  }

  .animate-slide-in-right {
    animation: slide-in-right 0.3s ease-out;
  }

  @keyframes fade-in {
    from { opacity: 0; transform: translateY(4px); }
    to { opacity: 1; transform: translateY(0); }
  }
  .animate-fade-in {
    animation: fade-in 0.25s ease-out;
  }

  @keyframes slide-up {
    from { transform: translateY(12px); opacity: 0; }
    to { transform: translateY(0); opacity: 1; }
  }
  .animate-slide-up {
    animation: slide-up 0.25s ease-out;
  }
}

=================================================================
FILE PATH: src\utils\aiAssistant.js
=================================================================
/**
 * AI Assistant utilities for hotel booking chatbot
 */

// Intelligent room recommendations based on user preferences
export const recommendRooms = (rooms, preferences) => {
  const { adults, kids, budget, amenities = [] } = preferences;

  const filtered = rooms.filter((room) => {
    const totalGuests = adults + kids;
    if (room.maxPerson < totalGuests) return false;
    if (budget && room.price > budget) return false;
    if (amenities.length > 0) {
      const roomAmenities = room.amenities?.map((a) => a.toLowerCase()) || [];
      return amenities.some((a) => roomAmenities.includes(a.toLowerCase()));
    }
    return true;
  });

  return filtered
    .sort((a, b) => {
      // Prioritize rooms that fit perfectly
      const aScore = a.maxPerson - (adults + kids);
      const bScore = b.maxPerson - (adults + kids);
      return aScore - bScore;
    })
    .slice(0, 5);
};

// Calculate stay duration and price
export const calculateStayInfo = (checkIn, checkOut) => {
  const startDate = new Date(checkIn);
  const endDate = new Date(checkOut);
  const nights = Math.max(
    1,
    Math.ceil((endDate - startDate) / (1000 * 60 * 60 * 24))
  );
  return { nights, startDate, endDate };
};

// Get dynamic pricing based on dates (weekday/weekend/holiday)
export const getDynamicPrice = (basePrice, date) => {
  const d = new Date(date);
  const dayOfWeek = d.getDay();
  const isWeekend = dayOfWeek === 5 || dayOfWeek === 6;

  if (isWeekend) {
    return Math.round(basePrice * 1.3); // 30% more on weekends
  }
  return basePrice;
};

// Validate booking information
export const validateBooking = (bookingData) => {
  const errors = [];

  if (!bookingData.name?.trim()) errors.push("TÃªn khÃ´ng Ä‘Æ°á»£c Ä‘á»ƒ trá»‘ng");
  if (!bookingData.email?.trim() || !bookingData.email.includes("@"))
    errors.push("Email khÃ´ng há»£p lá»‡");
  if (bookingData.checkIn >= bookingData.checkOut)
    errors.push("NgÃ y tráº£ phÃ²ng pháº£i sau ngÃ y nháº­n phÃ²ng");
  if (!bookingData.roomName?.trim()) errors.push("Vui lÃ²ng chá»n phÃ²ng");

  return {
    isValid: errors.length === 0,
    errors,
  };
};

// Format booking confirmation
export const formatConfirmation = (booking, room) => {
  const { nights } = calculateStayInfo(booking.checkIn, booking.checkOut);
  const totalPrice = room.price * nights;

  return {
    confirmationCode: booking.confirmationCode,
    room: room.name,
    guest: booking.name,
    checkIn: new Date(booking.checkIn).toLocaleDateString("vi-VN"),
    checkOut: new Date(booking.checkOut).toLocaleDateString("vi-VN"),
    nights,
    pricePerNight: room.price,
    totalPrice,
    adults: booking.adults,
    kids: booking.kids,
    specialRequests: booking.specialRequests,
  };
};

// Get conversation context to provide better recommendations
export const getContextFromChat = (messages) => {
  const context = {
    mentionedAmenities: [],
    budgetRange: null,
    preferredRoomType: null,
    specialNeeds: [],
  };

  messages.forEach((msg) => {
    if (msg.role === "user") {
      const text = msg.text.toLowerCase();

      // Detect amenities
      if (text.includes("bá»ƒ bÆ¡i") || text.includes("pool"))
        context.mentionedAmenities.push("pool");
      if (text.includes("gym") || text.includes("táº­p"))
        context.mentionedAmenities.push("gym");
      if (text.includes("spa") || text.includes("massage"))
        context.mentionedAmenities.push("spa");
      if (text.includes("wifi")) context.mentionedAmenities.push("wifi");

      // Detect room preferences
      if (text.includes("deluxe")) context.preferredRoomType = "deluxe";
      if (text.includes("gia Ä‘Ã¬nh") || text.includes("family"))
        context.preferredRoomType = "family";
      if (text.includes("view") || text.includes("táº§m nhÃ¬n"))
        context.preferredRoomType = "view";

      // Detect special needs
      if (text.includes("yÃªu cáº§u") || text.includes("Ä‘áº·c biá»‡t"))
        context.specialNeeds.push(text);
    }
  });

  return context;
};

// Generate personalized greeting based on time
export const getTimeBasedGreeting = () => {
  const hour = new Date().getHours();

  if (hour < 12) return "ChÃ o buá»•i sÃ¡ng! â˜€ï¸";
  if (hour < 17) return "ChÃ o buá»•i chiá»u! ðŸŒ¤ï¸";
  if (hour < 21) return "ChÃ o buá»•i tá»‘i! ðŸŒ†";
  return "ChÃ o Ä‘Ãªm! ðŸŒ™";
};

// Smart date suggestions
export const getSuggestedDates = () => {
  const today = new Date();
  const tomorrow = new Date(today);
  tomorrow.setDate(tomorrow.getDate() + 1);

  const nextWeek = new Date(today);
  nextWeek.setDate(nextWeek.getDate() + 7);

  const formatDate = (d) =>
    `${d.getFullYear()}-${String(d.getMonth() + 1).padStart(2, "0")}-${String(
      d.getDate()
    ).padStart(2, "0")}`;

  return {
    tonight: { checkIn: formatDate(today), checkOut: formatDate(tomorrow) },
    weekend: {
      checkIn: formatDate(nextWeek),
      checkOut: formatDate(
        new Date(nextWeek.getTime() + 2 * 24 * 60 * 60 * 1000)
      ),
    },
    nextMonth: {
      checkIn: formatDate(new Date(today.getTime() + 30 * 24 * 60 * 60 * 1000)),
      checkOut: formatDate(
        new Date(today.getTime() + 31 * 24 * 60 * 60 * 1000)
      ),
    },
  };
};

// Extract user intent from message
export const extractIntent = (userMessage) => {
  const text = userMessage.toLowerCase();

  const intents = {
    book: ["Ä‘áº·t", "book", "booking", "reserve", "broneer"],
    search: ["tÃ¬m", "search", "find", "gá»£i Ã½", "recommend", "suggest"],
    price: ["giÃ¡", "price", "cost", "bao nhiÃªu", "discount", "khuyáº¿n máº¡i"],
    amenities: ["tiá»‡n nghi", "dá»‹ch vá»¥", "amenities", "facilities", "cÃ³ gÃ¬"],
    cancel: ["há»§y", "cancel", "xÃ³a", "delete"],
    modify: ["thay Ä‘á»•i", "modify", "update", "sá»­a"],
    contact: ["liÃªn há»‡", "contact", "support", "há»— trá»£", "hotline"],
  };

  const detectedIntents = [];
  Object.entries(intents).forEach(([intent, keywords]) => {
    if (keywords.some((kw) => text.includes(kw))) {
      detectedIntents.push(intent);
    }
  });

  return detectedIntents.length > 0 ? detectedIntents[0] : "general";
};

// Generate helpful suggestions based on context
export const generateSuggestions = (userContext, stage) => {
  const suggestions = [];

  if (stage === "idle") {
    suggestions.push("ðŸ’Ž PhÃ²ng Deluxe - Sang trá»ng vá»›i view tuyá»‡t Ä‘áº¹p");
    suggestions.push("ðŸ‘¨â€ðŸ‘©â€ðŸ‘§â€ðŸ‘¦ PhÃ²ng Gia ÄÃ¬nh - Rá»™ng rÃ£i cho cÃ¡c gia Ä‘Ã¬nh");
    suggestions.push("ðŸ–ï¸ PhÃ²ng View Biá»ƒn - ThÆ° giÃ£n tuyá»‡t Ä‘á»‘i");
  }

  if (stage === "filter" && userContext.mentionedAmenities.length > 0) {
    suggestions.push(`âœ“ CÃ³ ${userContext.mentionedAmenities.join(", ")}`);
  }

  return suggestions;
};

export default {
  recommendRooms,
  calculateStayInfo,
  getDynamicPrice,
  validateBooking,
  formatConfirmation,
  getContextFromChat,
  getTimeBasedGreeting,
  getSuggestedDates,
  extractIntent,
  generateSuggestions,
};


=================================================================
FILE PATH: src\utils\chatboxConfig.js
=================================================================
/**
 * ChatBox Configuration & Customization Examples
 * Báº¡n cÃ³ thá»ƒ copy nhá»¯ng vÃ­ dá»¥ nÃ y vÃ o ChatBox.jsx Ä‘á»ƒ tÃ¹y chá»‰nh
 */

// ============================================
// 1. THÃŠM THÃŠM QUICK ACTIONS
// ============================================

const EXTENDED_QUICK_ACTIONS = [
  { label: "ðŸ” TÃ¬m phÃ²ng", type: "filter", icon: "ðŸ”" },
  { label: "ðŸ“‹ Äáº·t ngay", type: "book", icon: "ðŸ“‹" },
  { label: "âœ¨ Tiá»‡n nghi", type: "amenities", icon: "âœ¨" },
  { label: "ðŸŽ‰ Khuyáº¿n máº¡i", type: "promo", icon: "ðŸŽ‰" },
  { label: "ðŸ“ž LiÃªn há»‡", type: "contact", icon: "ðŸ“ž" },
  // ThÃªm action má»›i
  { label: "ðŸ’³ Thanh toÃ¡n", type: "payment", icon: "ðŸ’³" },
  { label: "â­ Reviews", type: "reviews", icon: "â­" },
  { label: "ðŸŽ Loyalty", type: "loyalty", icon: "ðŸŽ" },
];

// ============================================
// 2. CUSTOM AI RESPONSES
// ============================================

const CUSTOM_AI_RESPONSES = {
  greetings: [
    "Xin chÃ o! ðŸ‘‹ TÃ´i lÃ  trá»£ lÃ½ cá»§a khÃ¡ch sáº¡n 5 sao. TÃ´i cÃ³ thá»ƒ giÃºp gÃ¬ cho báº¡n?",
    "ChÃ o má»«ng Ä‘áº¿n khÃ¡ch sáº¡n cá»§a chÃºng tÃ´i! ðŸ¨ Báº¡n cÃ³ nhu cáº§u gÃ¬ hÃ´m nay?",
    "Hi! ðŸ˜Š TÃ´i á»Ÿ Ä‘Ã¢y Ä‘á»ƒ lÃ m cho ngÃ y cá»§a báº¡n trá»Ÿ nÃªn tuyá»‡t vá»i!",
  ],
  payment: [
    "ðŸ’³ ChÃºng tÃ´i cháº¥p nháº­n: Tháº» Visa, Mastercard, Apple Pay, Google Pay",
    "ðŸ’° Thanh toÃ¡n an toÃ n 100% vá»›i SSL encryption",
    "âœ… Báº¡n cÃ³ thá»ƒ thanh toÃ¡n online hoáº·c táº¡i quáº§y",
  ],
  loyalty: [
    "â­ ChÆ°Æ¡ng trÃ¬nh VIP: Má»—i Ä‘áº·t phÃ²ng = 10 Ä‘iá»ƒm\n100 Ä‘iá»ƒm = Discount 20%",
    "ðŸŽ ThÃ nh viÃªn Ä‘Æ°á»£c:\nâ€¢ NÃ¢ng cáº¥p phÃ²ng miá»…n phÃ­\nâ€¢ Breakfast voucher\nâ€¢ Priority support",
  ],
  reviews: [
    "â­â­â­â­â­ 4.8/5 sao tá»« 2000+ reviews",
    '"PhÃ²ng tuyá»‡t vá»i, nhÃ¢n viÃªn thÃ¢n thiá»‡n!" - Maria',
    '"TÃ´i sáº½ quay láº¡i!" - John',
  ],
};

// ============================================
// 3. DYNAMIC PRICING EXAMPLES
// ============================================

export const PRICING_RULES = {
  weekday: 1.0, // Thá»© 2-4: GiÃ¡ cÆ¡ báº£n
  friday: 1.15, // Thá»© 5: +15%
  weekend: 1.3, // Thá»© 6-7: +30%
  holiday: 1.5, // NgÃ y lá»…: +50%
  peakSeason: 1.4, // Cao Ä‘iá»ƒm: +40%
  lowSeason: 0.8, // Tháº¥p Ä‘iá»ƒm: -20%
};

export const HOLIDAY_DATES = [
  "2024-12-25", // GiÃ¡ng sinh
  "2024-12-31", // Táº¿t
  "2025-01-01", // NÄƒm má»›i
  "2025-02-10", // Táº¿t NguyÃªn ÄÃ¡n
  "2025-04-30", // NgÃ y Giáº£i phÃ³ng
  "2025-09-02", // Quá»‘c khÃ¡nh
];

// ============================================
// 4. ROOM AMENITIES CONFIGURATION
// ============================================

export const ROOM_AMENITIES = {
  standard: ["WiFi", "AC", "TV"],
  deluxe: ["WiFi", "AC", "TV", "Mini Bar", "Bathrobe"],
  suite: ["WiFi", "AC", "TV", "Mini Bar", "Bathrobe", "Hot Tub", "Living Room"],
  family: ["WiFi", "AC", "TV", "Kids Amenities", "Kitchen", "Living Room"],
  vip: ["All amenities", "Butler service", "Premium toiletries", "Champagne"],
};

export const HOTEL_SERVICES = {
  pool: "ðŸŠ Bá»ƒ bÆ¡i Olympic (open 6AM-10PM)",
  gym: "ðŸ‹ï¸ PhÃ²ng táº­p hiá»‡n Ä‘áº¡i (24/7)",
  spa: "ðŸ§– Spa & massage (10AM-11PM)",
  restaurant: "ðŸ½ï¸ NhÃ  hÃ ng 5 sao (6AM-12AM)",
  bar: "ðŸ¸ Bar & lounge (5PM-2AM)",
  parking: "ðŸ…¿ï¸ BÃ£i Ä‘á»— xe miá»…n phÃ­",
  wifi: "ðŸ“¶ WiFi miá»…n phÃ­ (300 Mbps)",
  transfer: "ðŸš— Dá»‹ch vá»¥ Ä‘æŽ¥ sÃ¢n bay",
  concierge: "ðŸŽ© Concierge 24/7",
  laundry: "ðŸ‘• Dá»‹ch vá»¥ giáº·t (next day)",
};

// ============================================
// 5. MESSAGE TEMPLATES
// ============================================

export const MESSAGE_TEMPLATES = {
  welcome: (userName) => `ChÃ o ${userName}! ðŸ‘‹ ChÃ o má»«ng quay láº¡i!`,

  roomSuggestion: (room, nights, totalPrice) =>
    `ðŸ¨ ${room.name}\nðŸ“… ${nights} Ä‘Ãªm\nðŸ’° $${totalPrice} (${room.price}/Ä‘Ãªm)`,

  bookingConfirmed: (code, roomName, checkIn, checkOut) =>
    `ðŸŽ‰ XÃ¡c nháº­n thÃ nh cÃ´ng!\nMÃ£: ${code}\nPhÃ²ng: ${roomName}\nNháº­n: ${checkIn}\nTrara: ${checkOut}`,

  specialRequest: (request) =>
    `ðŸ“ YÃªu cáº§u: ${request}\nChÃºng tÃ´i sáº½ xá»­ lÃ½ ASAP!`,

  promotionAlert: (discount) =>
    `ðŸŽ‰ Æ¯u Ä‘Ã£i HOT!\nGiáº£m ${discount}% cho Ä‘áº·t hÃ´m nay!`,
};

// ============================================
// 6. VALIDATION RULES
// ============================================

export const VALIDATION_RULES = {
  name: {
    required: true,
    minLength: 2,
    maxLength: 100,
    pattern: /^[a-zA-Z\s'-]+$/,
    message: "TÃªn pháº£i tá»« 2-100 kÃ½ tá»±, chá»‰ chá»©a chá»¯ cÃ¡i",
  },
  email: {
    required: true,
    pattern: /^[^\s@]+@[^\s@]+\.[^\s@]+$/,
    message: "Email khÃ´ng há»£p lá»‡",
  },
  phone: {
    required: false,
    pattern: /^(\+84|0)[0-9]{9,10}$/,
    message: "Sá»‘ Ä‘iá»‡n thoáº¡i Viá»‡t Nam",
  },
  adults: {
    required: true,
    min: 1,
    max: 10,
    message: "Tá»« 1-10 ngÆ°á»i lá»›n",
  },
  kids: {
    required: true,
    min: 0,
    max: 10,
    message: "Tá»« 0-10 tráº» em",
  },
};

// ============================================
// 7. CONVERSATION FLOWS
// ============================================

export const CONVERSATION_FLOWS = {
  newUser: [
    "Xin chÃ o! ÄÃ¢y lÃ  láº§n Ä‘áº§u báº¡n Ä‘áº·t phÃ²ng?",
    "Báº¡n muá»‘n tÃ¬m phÃ²ng hay cÃ³ cÃ¢u há»i?",
  ],
  returningUser: ["ChÃ o má»«ng báº¡n quay láº¡i!", "Láº§n nÃ y báº¡n muá»‘n Ä‘áº·t phÃ²ng nÃ o?"],
  lastMinute: ["âš¡ Äáº·t trong 24h: Giáº£m 20%!", "PhÃ²ng cÃ²n trá»‘ng hÃ´m nay?"],
  groupBooking: [
    "NhÃ³m tá»« 10 ngÆ°á»i trá»Ÿ lÃªn: Giáº£m 30%",
    "LiÃªn há»‡: group@hotel.com hoáº·c +84123456789",
  ],
};

// ============================================
// 8. ERROR MESSAGES (TIáº¾NG VIá»†T)
// ============================================

export const ERROR_MESSAGES = {
  NETWORK_ERROR: "âŒ Lá»—i káº¿t ná»‘i. Vui lÃ²ng kiá»ƒm tra internet!",
  BOOKING_FAILED: "âŒ KhÃ´ng thá»ƒ táº¡o Ä‘áº·t phÃ²ng. Thá»­ láº¡i?",
  INVALID_INPUT: "âŒ ThÃ´ng tin khÃ´ng há»£p lá»‡. Vui lÃ²ng kiá»ƒm tra!",
  ROOM_UNAVAILABLE: "âŒ PhÃ²ng khÃ´ng cÃ²n trá»‘ng cho ngÃ y nÃ y.",
  PAYMENT_FAILED: "âŒ Thanh toÃ¡n tháº¥t báº¡i. Thá»­ phÆ°Æ¡ng thá»©c khÃ¡c?",
  SERVER_ERROR: "âŒ Lá»—i mÃ¡y chá»§. Vui lÃ²ng thá»­ láº¡i sau!",
  TOO_MANY_REQUESTS: "â±ï¸ QuÃ¡ nhiá»u yÃªu cáº§u. Chá» 1 phÃºt rá»“i thá»­ láº¡i!",
};

// ============================================
// 9. INTEGRATION EXAMPLES
// ============================================

// Webhook notification
export const notifyBookingEvent = async (event, data) => {
  const payload = {
    event,
    timestamp: new Date().toISOString(),
    ...data,
  };

  // Send to backend
  try {
    const response = await fetch("https://your-api.com/webhooks/booking", {
      method: "POST",
      headers: { "Content-Type": "application/json" },
      body: JSON.stringify(payload),
    });
    return response.json();
  } catch (error) {
    console.error("Webhook failed:", error);
  }
};

// Send email notification
export const sendBookingEmail = async (email, booking) => {
  try {
    const response = await fetch("https://your-api.com/email/send", {
      method: "POST",
      headers: { "Content-Type": "application/json" },
      body: JSON.stringify({
        to: email,
        template: "booking-confirmation",
        data: booking,
      }),
    });
    return response.json();
  } catch (error) {
    console.error("Email send failed:", error);
  }
};

// SMS notification (optional)
export const sendBookingSMS = async (phone, message) => {
  try {
    const response = await fetch("https://your-sms-api.com/send", {
      method: "POST",
      headers: { "Content-Type": "application/json" },
      body: JSON.stringify({
        phone,
        message,
      }),
    });
    return response.json();
  } catch (error) {
    console.error("SMS send failed:", error);
  }
};

// ============================================
// 10. CUSTOMIZATION GUIDE
// ============================================

/*
HOW TO USE THESE CONFIGURATIONS:

1. Copy cÃ¡c hÃ m nÃ y vÃ o ChatBox.jsx hoáº·c utils file
2. Import vÃ  sá»­ dá»¥ng:

   import { ROOM_AMENITIES, MESSAGE_TEMPLATES } from './config';

3. VÃ­ dá»¥ sá»­ dá»¥ng:
   
   // Trong handleSend function:
   if (t.includes('tiá»‡n nghi')) {
     const amenitiesText = Object.entries(HOTEL_SERVICES)
       .map(([key, value]) => value)
       .join('\n');
     pushAI(amenitiesText);
   }

4. TÃ¹y chá»‰nh theo hotel cá»§a báº¡n:
   - Äá»•i giÃ¡ cÆ°á»›c
   - ThÃªm dá»‹ch vá»¥ má»›i
   - Thay Ä‘á»•i messages
   - ThÃªm promotion má»›i

5. Test toÃ n bá»™ flows:
   - New user flow
   - Returning user flow
   - Group booking flow
   - Emergency/support flow
*/

export default {
  EXTENDED_QUICK_ACTIONS,
  CUSTOM_AI_RESPONSES,
  PRICING_RULES,
  HOLIDAY_DATES,
  ROOM_AMENITIES,
  HOTEL_SERVICES,
  MESSAGE_TEMPLATES,
  VALIDATION_RULES,
  CONVERSATION_FLOWS,
  ERROR_MESSAGES,
  notifyBookingEvent,
  sendBookingEmail,
  sendBookingSMS,
};


=================================================================
FILE PATH: src\utils\chatboxTesting.js
=================================================================
/**
 * ChatBox Testing & Example Scenarios
 * Sá»­ dá»¥ng nhá»¯ng vÃ­ dá»¥ nÃ y Ä‘á»ƒ test cÃ¡c tÃ­nh nÄƒng cá»§a chatbox
 */

// ============================================
// 1. TEST SCENARIOS
// ============================================

export const TEST_SCENARIOS = {
  // Scenario 1: KhÃ¡ch má»›i tÃ¬m phÃ²ng
  scenario1_findRoom: {
    name: "Find Rooms - New User",
    steps: [
      { action: "click", target: "quick-action", params: { type: "filter" } },
      { action: "input", target: "checkIn", value: "2024-12-25" },
      { action: "input", target: "checkOut", value: "2024-12-27" },
      { action: "input", target: "adults", value: 2 },
      { action: "input", target: "kids", value: 0 },
      { action: "click", target: "apply-filter" },
    ],
    expectedResult: "Should show filtered rooms and navigate to rooms page",
  },

  // Scenario 2: KhÃ¡ch Ä‘áº·t phÃ²ng
  scenario2_booking: {
    name: "Book Room - Direct",
    steps: [
      { action: "click", target: "quick-action", params: { type: "book" } },
      { action: "input", target: "roomName", value: "Deluxe" },
      { action: "waitForSuggestions", timeout: 1000 },
      { action: "click", target: "room-suggestion", params: { index: 0 } },
      { action: "input", target: "name", value: "Nguyá»…n VÄƒn A" },
      { action: "input", target: "email", value: "test@example.com" },
      { action: "input", target: "phone", value: "+84123456789" },
      { action: "click", target: "create-booking" },
    ],
    expectedResult: "Booking confirmation with code",
  },

  // Scenario 3: Há»i tÆ° váº¥n
  scenario3_consultation: {
    name: "Ask Consultation",
    steps: [
      { action: "type", value: "TÃ´i cáº§n phÃ²ng cho 4 ngÆ°á»i, cÃ³ bá»ƒ bÆ¡i khÃ´ng?" },
      { action: "send" },
      { action: "waitForResponse", timeout: 2000 },
    ],
    expectedResult: "AI should suggest rooms with pool",
  },

  // Scenario 4: Há»i vá» tiá»‡n nghi
  scenario4_amenities: {
    name: "Ask About Amenities",
    steps: [
      { action: "type", value: "CÃ³ gym, spa khÃ´ng?" },
      { action: "send" },
      { action: "waitForResponse", timeout: 1500 },
    ],
    expectedResult: "Show available amenities",
  },

  // Scenario 5: Há»i giÃ¡
  scenario5_pricing: {
    name: "Ask About Pricing",
    steps: [
      { action: "type", value: "PhÃ²ng Deluxe giÃ¡ bao nhiÃªu?" },
      { action: "send" },
      { action: "waitForResponse", timeout: 1500 },
    ],
    expectedResult: "Show pricing information",
  },

  // Scenario 6: Mobile responsiveness
  scenario6_mobile: {
    name: "Mobile Responsiveness",
    steps: [
      { action: "resize", width: 375, height: 667 }, // iPhone size
      { action: "click", target: "chatbox-button" },
      { action: "check", target: "chatbox-width", expected: "360px" },
    ],
    expectedResult: "Chatbox should be responsive",
  },
};

// ============================================
// 2. UNIT TEST EXAMPLES (Jest)
// ============================================

export const unitTestExamples = `
// Test: validateBookingForm
describe('validateBookingForm', () => {
  test('should fail with empty name', () => {
    const result = validateBookingForm({
      name: '',
      email: 'test@test.com',
      checkIn: '2024-12-25',
      checkOut: '2024-12-27',
      roomName: 'Deluxe',
      adults: 2,
      kids: 0
    });
    expect(result.isValid).toBe(false);
    expect(result.errors[0].code).toBe('INVALID_NAME');
  });

  test('should fail with invalid email', () => {
    const result = validateBookingForm({
      name: 'John Doe',
      email: 'invalid-email',
      checkIn: '2024-12-25',
      checkOut: '2024-12-27',
      roomName: 'Deluxe',
      adults: 2,
      kids: 0
    });
    expect(result.isValid).toBe(false);
    expect(result.errors[0].code).toBe('INVALID_EMAIL');
  });

  test('should fail with invalid dates', () => {
    const result = validateBookingForm({
      name: 'John Doe',
      email: 'test@test.com',
      checkIn: '2024-12-27',
      checkOut: '2024-12-25', // Before check-in!
      roomName: 'Deluxe',
      adults: 2,
      kids: 0
    });
    expect(result.isValid).toBe(false);
    expect(result.errors[0].code).toBe('INVALID_DATES');
  });

  test('should pass with valid data', () => {
    const result = validateBookingForm({
      name: 'John Doe',
      email: 'test@test.com',
      checkIn: '2024-12-25',
      checkOut: '2024-12-27',
      roomName: 'Deluxe',
      adults: 2,
      kids: 0
    });
    expect(result.isValid).toBe(true);
    expect(result.errors.length).toBe(0);
  });
});

// Test: extractIntent
describe('extractIntent', () => {
  test('should detect book intent', () => {
    expect(extractIntent('tÃ´i muá»‘n Ä‘áº·t phÃ²ng')).toBe('book');
    expect(extractIntent('book a room')).toBe('book');
  });

  test('should detect search intent', () => {
    expect(extractIntent('gá»£i Ã½ phÃ²ng')).toBe('search');
    expect(extractIntent('suggest rooms')).toBe('search');
  });

  test('should detect price intent', () => {
    expect(extractIntent('giÃ¡ bao nhiÃªu')).toBe('price');
    expect(extractIntent('how much')).toBe('price');
  });

  test('should return general for unknown', () => {
    expect(extractIntent('xin chÃ o')).toBe('general');
  });
});

// Test: sanitizeInput
describe('sanitizeInput', () => {
  test('should sanitize HTML', () => {
    const input = '<script>alert("xss")</script>';
    const result = sanitizeInput(input);
    expect(result).not.toContain('<script>');
    expect(result).toContain('&lt;script&gt;');
  });

  test('should trim whitespace', () => {
    const input = '  hello world  ';
    const result = sanitizeInput(input);
    expect(result).toBe('hello world');
  });

  test('should limit length', () => {
    const input = 'a'.repeat(1000);
    const result = sanitizeInput(input);
    expect(result.length).toBeLessThanOrEqual(500);
  });
});

// Test: calculateNights
describe('calculateNights', () => {
  test('should calculate nights correctly', () => {
    expect(calculateNights('2024-12-25', '2024-12-26')).toBe(1);
    expect(calculateNights('2024-12-25', '2024-12-27')).toBe(2);
    expect(calculateNights('2024-12-25', '2024-12-30')).toBe(5);
  });

  test('should handle same day', () => {
    expect(calculateNights('2024-12-25', '2024-12-25')).toBe(0);
  });
});
`;

// ============================================
// 3. MANUAL TEST CHECKLIST
// ============================================

export const MANUAL_TEST_CHECKLIST = [
  {
    category: "Visual & UX",
    tests: [
      "âœ… Chatbox button appears at bottom-right",
      "âœ… Button has animate bounce effect",
      "âœ… Clicking button opens chatbox",
      "âœ… Chatbox has rounded corners (border-radius: 1.5rem)",
      "âœ… Gradient header (blue-600 to blue-700)",
      "âœ… Messages fade in smoothly",
      "âœ… Timestamps visible on messages",
      "âœ… Typing dots animate correctly",
      "âœ… Scroll to latest message automatically",
      "âœ… Mobile: responsive width adjustment",
    ],
  },
  {
    category: "Functionality",
    tests: [
      "âœ… Sending messages works",
      "âœ… Quick reply buttons trigger actions",
      "âœ… Filter form inputs accept values",
      "âœ… Booking form all fields fillable",
      "âœ… Room suggestions appear when typing name",
      "âœ… Apply filter navigates to rooms",
      "âœ… Create booking generates confirmation code",
      "âœ… Error messages display for invalid input",
      "âœ… Close button works",
      "âœ… Enter key sends message",
    ],
  },
  {
    category: "Validation",
    tests: [
      "âœ… Name cannot be empty",
      "âœ… Email must have @",
      "âœ… Check-out must be after check-in",
      "âœ… Adults cannot be 0 or > 10",
      "âœ… Phone number validation (if filled)",
      "âœ… Room name cannot be empty",
      "âœ… Error messages are helpful",
      "âœ… Can recover from error",
      "âœ… Validation happens before booking",
      "âœ… No booking created on validation fail",
    ],
  },
  {
    category: "Data Persistence",
    tests: [
      "âœ… Chat history saves in localStorage",
      "âœ… Chat history loads on page reload",
      "âœ… Different users have separate history",
      "âœ… LocalStorage key includes user ID",
      "âœ… Analytics data tracked",
      "âœ… Booking data passed to context",
      "âœ… Timestamps stored correctly",
      "âœ… No errors in console",
      "âœ… Storage doesn't exceed limit",
    ],
  },
  {
    category: "AI Responses",
    tests: [
      "âœ… Initial greeting message appears",
      "âœ… Different response variants work",
      "âœ… Typing delay (500-600ms) feels natural",
      "âœ… Random responses vary",
      "âœ… Intent detection works for book/search/price",
      "âœ… Fallback response for unknown intent",
      "âœ… Emoji display correctly",
      "âœ… Vietnamese text displays correctly",
      "âœ… Links work if included",
      "âœ… Special characters display properly",
    ],
  },
  {
    category: "Mobile",
    tests: [
      "âœ… Chatbox button visible on mobile",
      "âœ… Chatbox opens/closes smoothly",
      "âœ… Form fields readable on mobile",
      "âœ… Text input usable on mobile",
      "âœ… Buttons clickable (touch-friendly)",
      "âœ… Scroll works on long messages",
      "âœ… Emoji render correctly",
      "âœ… No horizontal scroll",
      "âœ… Keyboard doesn't overlap content",
      "âœ… Portrait & landscape work",
    ],
  },
  {
    category: "Integration",
    tests: [
      "âœ… RoomContext methods called",
      "âœ… AuthContext user info used",
      "âœ… React icons display",
      "âœ… Tailwind classes applied",
      "âœ… CSS animations work",
      "âœ… No console errors",
      "âœ… No memory leaks",
      "âœ… Performance acceptable",
      "âœ… Browser compatibility (Chrome, Firefox, Safari, Edge)",
      "âœ… No unused variables/imports",
    ],
  },
  {
    category: "Accessibility",
    tests: [
      "âœ… ARIA labels on buttons",
      "âœ… Keyboard navigation works",
      "âœ… Tab order logical",
      "âœ… Color contrast sufficient",
      "âœ… Focus indicators visible",
      "âœ… No autofocus trap",
      "âœ… Screen reader friendly",
      "âœ… Text size readable",
      "âœ… Links underlined if needed",
      "âœ… Forms labeled properly",
    ],
  },
];

// ============================================
// 4. PERFORMANCE TEST
// ============================================

export const PERFORMANCE_TESTS = {
  chatOpen: {
    name: "Time to open chatbox",
    target: "< 200ms",
    test: () => {
      const start = performance.now();
      // Click button
      const end = performance.now();
      return end - start;
    },
  },
  messageSend: {
    name: "Time to send message",
    target: "< 100ms",
    test: () => {
      const start = performance.now();
      // Send message
      const end = performance.now();
      return end - start;
    },
  },
  roomFilter: {
    name: "Time to filter rooms",
    target: "< 500ms",
    test: () => {
      const start = performance.now();
      // Apply filter
      const end = performance.now();
      return end - start;
    },
  },
  validation: {
    name: "Time to validate form",
    target: "< 50ms",
    test: () => {
      const start = performance.now();
      // Validate
      const end = performance.now();
      return end - start;
    },
  },
};

// ============================================
// 5. DEBUG HELPERS
// ============================================

export const DEBUG_HELPERS = {
  // Log all messages
  logMessages: () => {
    const key = `hotel_chat_history_${
      localStorage.getItem("currentUserId") || "guest"
    }`;
    const messages = JSON.parse(localStorage.getItem(key) || "[]");
    console.table(messages);
  },

  // Clear chat history
  clearHistory: () => {
    const keys = Object.keys(localStorage).filter((k) =>
      k.includes("hotel_chat")
    );
    keys.forEach((k) => localStorage.removeItem(k));
    console.log("Chat history cleared");
  },

  // Log analytics
  logAnalytics: () => {
    const analytics = JSON.parse(
      localStorage.getItem("hotel_chat_analytics") || "[]"
    );
    console.table(analytics);
  },

  // Test validation
  testValidation: (data) => {
    const { validateBookingForm } = require("./chatboxValidation");
    const result = validateBookingForm(data);
    console.log("Validation result:", result);
    return result;
  },

  // Test intent detection
  testIntent: (message) => {
    const { extractIntent } = require("./aiAssistant");
    const intent = extractIntent(message);
    console.log(`Intent for "${message}": ${intent}`);
    return intent;
  },

  // Performance monitor
  monitorPerformance: () => {
    if (window.performance) {
      const perfData = window.performance.timing;
      console.log("Performance Metrics:");
      console.log(
        "DOM Content Loaded:",
        perfData.domContentLoadedEventEnd - perfData.navigationStart
      );
      console.log(
        "Page Load Time:",
        perfData.loadEventEnd - perfData.navigationStart
      );
    }
  },
};

// ============================================
// 6. SAMPLE TEST DATA
// ============================================

export const SAMPLE_DATA = {
  validBooking: {
    name: "Nguyá»…n VÄƒn A",
    email: "nguyen@example.com",
    phone: "+84912345678",
    checkIn: "2024-12-25",
    checkOut: "2024-12-27",
    roomName: "Deluxe",
    adults: 2,
    kids: 1,
    specialRequests: "High floor, sea view",
  },

  invalidBooking: {
    name: "",
    email: "invalid-email",
    checkIn: "2024-12-27",
    checkOut: "2024-12-25",
    roomName: "",
    adults: 15,
  },

  sampleRooms: [
    {
      id: 1,
      name: "Deluxe Room",
      type: "deluxe",
      price: 150,
      maxPerson: 2,
      image: "url",
      beds: 1,
    },
    {
      id: 2,
      name: "Family Room",
      type: "family",
      price: 250,
      maxPerson: 4,
      image: "url",
      beds: 2,
    },
    {
      id: 3,
      name: "Suite",
      type: "suite",
      price: 400,
      maxPerson: 3,
      image: "url",
      beds: 1,
    },
  ],

  sampleUser: {
    id: "user_123",
    name: "John Doe",
    email: "john@example.com",
    phone: "+84912345678",
  },
};

// ============================================
// USAGE IN BROWSER CONSOLE
// ============================================

export const CONSOLE_COMMANDS = `
// Copy-paste vÃ o browser console Ä‘á»ƒ test:

// 1. Xem chat history
console.table(JSON.parse(localStorage.getItem('hotel_chat_history_guest')))

// 2. Xem analytics
console.table(JSON.parse(localStorage.getItem('hotel_chat_analytics')))

// 3. XÃ³a history
localStorage.removeItem('hotel_chat_history_guest')

// 4. Kiá»ƒm tra performance
performance.measure('chatbox')

// 5. Xem state (cáº§n add console.log trong component)
// ... Ä‘á»‹nh nghÄ©a trong React Component
`;

export default {
  TEST_SCENARIOS,
  MANUAL_TEST_CHECKLIST,
  PERFORMANCE_TESTS,
  DEBUG_HELPERS,
  SAMPLE_DATA,
  unitTestExamples,
  CONSOLE_COMMANDS,
};


=================================================================
FILE PATH: src\utils\chatboxValidation.js
=================================================================
/**
 * Validation & Error Handling for ChatBox
 */

export const BookingErrors = {
  INVALID_NAME: {
    code: "INVALID_NAME",
    message: "âŒ Vui lÃ²ng nháº­p tÃªn Ä‘áº§y Ä‘á»§",
    vietnamese: "TÃªn khÃ´ng Ä‘Æ°á»£c Ä‘á»ƒ trá»‘ng",
  },
  INVALID_EMAIL: {
    code: "INVALID_EMAIL",
    message: "âŒ Email khÃ´ng há»£p lá»‡",
    vietnamese: "Email pháº£i chá»©a @ vÃ  cÃ³ Ä‘á»‹nh dáº¡ng Ä‘Ãºng",
  },
  INVALID_DATES: {
    code: "INVALID_DATES",
    message: "âŒ NgÃ y tráº£ phÃ²ng pháº£i sau ngÃ y nháº­n phÃ²ng",
    vietnamese: "Vui lÃ²ng kiá»ƒm tra láº¡i ngÃ y",
  },
  NO_ROOM: {
    code: "NO_ROOM",
    message: "âŒ KhÃ´ng tÃ¬m tháº¥y phÃ²ng trÃ¹ng khá»›p",
    vietnamese: "Thá»­ tá»« khÃ³a khÃ¡c hoáº·c xem táº¥t cáº£ phÃ²ng",
  },
  ROOM_FULL: {
    code: "ROOM_FULL",
    message: "âŒ PhÃ²ng nÃ y Ä‘Ã£ Ä‘áº§y cho ngÃ y Ä‘Æ°á»£c chá»n",
    vietnamese: "Vui lÃ²ng chá»n ngÃ y khÃ¡c hoáº·c phÃ²ng khÃ¡c",
  },
  DATABASE_ERROR: {
    code: "DATABASE_ERROR",
    message: "âŒ Lá»—i khi táº¡o Ä‘áº·t phÃ²ng",
    vietnamese: "Vui lÃ²ng thá»­ láº¡i sau",
  },
};

/**
 * Validate booking form data
 */
export const validateBookingForm = (formData) => {
  const errors = [];

  // Validate name
  if (!formData.name || !formData.name.trim()) {
    errors.push(BookingErrors.INVALID_NAME);
  }

  // Validate email
  const emailRegex = /^[^\s@]+@[^\s@]+\.[^\s@]+$/;
  if (!formData.email || !emailRegex.test(formData.email)) {
    errors.push(BookingErrors.INVALID_EMAIL);
  }

  // Validate dates
  if (new Date(formData.checkIn) >= new Date(formData.checkOut)) {
    errors.push(BookingErrors.INVALID_DATES);
  }

  // Validate room name
  if (!formData.roomName || !formData.roomName.trim()) {
    errors.push(BookingErrors.NO_ROOM);
  }

  // Validate adults
  if (formData.adults < 1 || formData.adults > 10) {
    errors.push({
      code: "INVALID_ADULTS",
      message: "âŒ Sá»‘ ngÆ°á»i lá»›n pháº£i tá»« 1-10",
      vietnamese: "Vui lÃ²ng nháº­p láº¡i sá»‘ ngÆ°á»i",
    });
  }

  return {
    isValid: errors.length === 0,
    errors,
  };
};

/**
 * Validate filter form data
 */
export const validateFilterForm = (formData) => {
  const errors = [];

  if (new Date(formData.checkIn) >= new Date(formData.checkOut)) {
    errors.push(BookingErrors.INVALID_DATES);
  }

  if (formData.adults < 1) {
    errors.push({
      code: "INVALID_FILTER",
      message: "âŒ Cáº§n Ã­t nháº¥t 1 ngÆ°á»i lá»›n",
      vietnamese: "Vui lÃ²ng nháº­p láº¡i thÃ´ng tin",
    });
  }

  return {
    isValid: errors.length === 0,
    errors,
  };
};

/**
 * Sanitize user input to prevent XSS
 */
export const sanitizeInput = (input) => {
  if (typeof input !== "string") return "";

  return input
    .replace(/&/g, "&amp;")
    .replace(/</g, "&lt;")
    .replace(/>/g, "&gt;")
    .replace(/"/g, "&quot;")
    .replace(/'/g, "&#x27;")
    .trim()
    .substring(0, 500); // Limit to 500 chars
};

/**
 * Format error message for display
 */
export const formatErrorMessage = (error) => {
  if (typeof error === "string") {
    return error;
  }

  if (error.message) {
    return error.message;
  }

  return "âŒ CÃ³ lá»—i xáº£y ra. Vui lÃ²ng thá»­ láº¡i!";
};

/**
 * Check if email is valid
 */
export const isValidEmail = (email) => {
  const regex = /^[^\s@]+@[^\s@]+\.[^\s@]+$/;
  return regex.test(email);
};

/**
 * Check if phone is valid (Vietnamese format)
 */
export const isValidPhone = (phone) => {
  if (!phone) return true; // Optional field
  const regex = /^(\+84|0)[0-9]{9,10}$/;
  return regex.test(phone.replace(/\s/g, ""));
};

/**
 * Format date for display
 */
export const formatDateDisplay = (dateString) => {
  try {
    const date = new Date(dateString);
    return date.toLocaleDateString("vi-VN", {
      weekday: "short",
      year: "numeric",
      month: "short",
      day: "numeric",
    });
  } catch {
    return dateString;
  }
};

/**
 * Calculate number of nights
 */
export const calculateNights = (checkIn, checkOut) => {
  try {
    const start = new Date(checkIn);
    const end = new Date(checkOut);
    const nights = Math.ceil((end - start) / (1000 * 60 * 60 * 24));
    return Math.max(1, nights);
  } catch {
    return 1;
  }
};

/**
 * Calculate total price
 */
export const calculateTotalPrice = (pricePerNight, nights, extras = []) => {
  let total = pricePerNight * nights;

  // Add extra fees
  extras.forEach((extra) => {
    if (extra.percentage) {
      total += total * (extra.amount / 100);
    } else {
      total += extra.amount;
    }
  });

  return Math.round(total * 100) / 100;
};

/**
 * Check room availability
 */
export const checkRoomAvailability = (
  room,
  checkIn,
  checkOut,
  existingBookings = []
) => {
  if (!room) return { available: false, reason: "PhÃ²ng khÃ´ng tá»“n táº¡i" };

  // Check if room has capacity
  if (room.currentGuests >= room.capacity) {
    return { available: false, reason: "PhÃ²ng Ä‘Ã£ Ä‘áº§y" };
  }

  // Check for conflicting bookings
  const checkInDate = new Date(checkIn);
  const checkOutDate = new Date(checkOut);

  const hasConflict = existingBookings.some((booking) => {
    const bookingStart = new Date(booking.checkIn);
    const bookingEnd = new Date(booking.checkOut);

    return (
      (checkInDate >= bookingStart && checkInDate < bookingEnd) ||
      (checkOutDate > bookingStart && checkOutDate <= bookingEnd) ||
      (checkInDate < bookingStart && checkOutDate > bookingEnd)
    );
  });

  if (hasConflict) {
    return { available: false, reason: "PhÃ²ng Ä‘Ã£ Ä‘Æ°á»£c Ä‘áº·t cho ngÃ y nÃ y" };
  }

  return { available: true };
};

/**
 * Log chat interaction for analytics
 */
export const logChatInteraction = (event, data = {}) => {
  const timestamp = new Date().toISOString();
  const interaction = {
    event,
    timestamp,
    userAgent: navigator.userAgent,
    ...data,
  };

  // Store locally for analytics
  try {
    const key = "hotel_chat_analytics";
    const existing = JSON.parse(localStorage.getItem(key) || "[]");
    existing.push(interaction);

    // Keep only last 100 interactions
    if (existing.length > 100) {
      existing.shift();
    }

    localStorage.setItem(key, JSON.stringify(existing));
  } catch (e) {
    console.error("Analytics logging failed:", e);
  }

  // Could also send to server
  // await fetch('/api/analytics', { method: 'POST', body: JSON.stringify(interaction) });
};

/**
 * Generate booking confirmation details
 */
export const generateBookingConfirmation = (booking, room) => {
  const nights = calculateNights(booking.checkIn, booking.checkOut);
  const totalPrice = calculateTotalPrice(room.price, nights);

  return {
    confirmationCode: booking.confirmationCode || `${Date.now()}`,
    room: {
      name: room.name,
      type: room.type,
      price: room.price,
      amenities: room.amenities || [],
    },
    guest: {
      name: booking.name,
      email: booking.email,
      phone: booking.phone,
    },
    dates: {
      checkIn: formatDateDisplay(booking.checkIn),
      checkOut: formatDateDisplay(booking.checkOut),
      nights,
    },
    guests: {
      adults: booking.adults,
      kids: booking.kids,
      total: booking.adults + booking.kids,
    },
    pricing: {
      pricePerNight: room.price,
      nights,
      subtotal: room.price * nights,
      tax: Math.round(room.price * nights * 0.1 * 100) / 100,
      total: totalPrice,
    },
    specialRequests: booking.specialRequests,
    created: new Date().toISOString(),
  };
};

export default {
  validateBookingForm,
  validateFilterForm,
  sanitizeInput,
  formatErrorMessage,
  isValidEmail,
  isValidPhone,
  formatDateDisplay,
  calculateNights,
  calculateTotalPrice,
  checkRoomAvailability,
  logChatInteraction,
  generateBookingConfirmation,
  BookingErrors,
};


=================================================================
FILE PATH: src\utils\clearTestData.js
=================================================================
/**
 * Clear all test data from localStorage
 * Run this once to clean up the system
 */
export const clearAllTestData = () => {
  const keysToDelete = [
    "hotel_bookings",
    "hotel_room_reviews",
    "users",
    "hotels",
    "auth_token",
    "user_session",
  ];

  keysToDelete.forEach((key) => {
    localStorage.removeItem(key);
  });

  console.log("âœ… Cleared all test data from localStorage");
};

/**
 * Reset bookings only
 */
export const clearBookings = () => {
  localStorage.removeItem("hotel_bookings");
  console.log("âœ… Cleared all bookings");
};

/**
 * Reset reviews only
 */
export const clearReviews = () => {
  localStorage.removeItem("hotel_room_reviews");
  console.log("âœ… Cleared all reviews");
};


=================================================================
FILE PATH: src\utils\emailService.js
=================================================================
import emailjs from '@emailjs/browser';

// ============================================
// EMAILJS CONFIGURATION
// ============================================
// Äá»ƒ gá»­i email tháº­t, báº¡n cáº§n:
// 1. ÄÄƒng kÃ½ tÃ i khoáº£n táº¡i https://www.emailjs.com/ (miá»…n phÃ­)
// 2. Táº¡o Email Service (Gmail) vÃ  láº¥y Service ID
// 3. Táº¡o Email Template vÃ  láº¥y Template ID  
// 4. Láº¥y Public Key tá»« Account Settings
// 5. Thay tháº¿ cÃ¡c giÃ¡ trá»‹ bÃªn dÆ°á»›i

const PUBLIC_KEY = 'YOUR_PUBLIC_KEY'; // Thay báº±ng Public Key cá»§a báº¡n
const SERVICE_ID = 'YOUR_SERVICE_ID'; // Thay báº±ng Service ID cá»§a báº¡n
const RESET_TEMPLATE_ID = 'YOUR_TEMPLATE_ID'; // Thay báº±ng Template ID cho reset máº­t kháº©u
const BOOKING_TEMPLATE_ID = 'YOUR_BOOKING_TEMPLATE_ID'; // Thay báº±ng Template ID cho booking

// Initialize EmailJS (chá»‰ khi Ä‘Ã£ config)
if (PUBLIC_KEY !== 'YOUR_PUBLIC_KEY') {
  emailjs.init(PUBLIC_KEY);
}

/**
 * Send password reset code email
 * @param {string} toEmail - Recipient email address
 * @param {string} resetCode - 6-digit reset code
 * @param {string} userName - User's name (optional)
 * @returns {Promise} - Promise that resolves when email is sent
 */
export const sendResetCodeEmail = async (toEmail, resetCode, userName = 'User') => {
  try {
    const templateParams = {
      to_email: toEmail,
      to_name: userName,
      reset_code: resetCode,
      from_name: 'Hotel Booking',
      message: `Your password reset code is: ${resetCode}. This code will expire in 10 minutes.`,
    };

    const response = await emailjs.send(
      SERVICE_ID,
      RESET_TEMPLATE_ID,
      templateParams
    );

    return {
      success: true,
      message: 'Reset code sent successfully!',
      response
    };
  } catch (error) {
    console.error('EmailJS Error:', error);
    return {
      success: false,
      error: error.text || 'Failed to send email. Please try again.',
      details: error
    };
  }
};

/**
 * Check if EmailJS is configured
 */
export const isEmailConfigured = () => {
  return PUBLIC_KEY !== 'YOUR_PUBLIC_KEY' && 
         SERVICE_ID !== 'YOUR_SERVICE_ID' && 
         RESET_TEMPLATE_ID !== 'YOUR_TEMPLATE_ID';
};

export const isBookingEmailConfigured = () => {
  return PUBLIC_KEY !== 'YOUR_PUBLIC_KEY' && 
         SERVICE_ID !== 'YOUR_SERVICE_ID' && 
         BOOKING_TEMPLATE_ID !== 'YOUR_BOOKING_TEMPLATE_ID';
};

export const sendBookingConfirmationEmail = async ({ toEmail, toName = 'Guest', booking }) => {
  if (!isBookingEmailConfigured()) {
    // In demo mode, just log that email would be sent
    console.log('Email would be sent to:', toEmail, 'for booking:', booking?.confirmationCode);
    return {
      success: true,
      message: 'Booking confirmation email sent (demo mode)',
    };
  }

  try {
    const bookingType = booking?.type || 'room';
    let bookingDetails = '';
    
    if (bookingType === 'room') {
      bookingDetails = `
Room: ${booking?.roomName || 'N/A'}
Check-in: ${booking?.checkIn || 'N/A'}
Check-out: ${booking?.checkOut || 'N/A'}
Nights: ${booking?.totalNights || 1}
Guests: ${booking?.adults || 1} Adult(s)${booking?.kids ? `, ${booking.kids} Kid(s)` : ''}
      `;
    } else if (bookingType === 'restaurant') {
      bookingDetails = `
Date & Time: ${booking?.date || 'N/A'}
Number of Guests: ${booking?.guests || 1}
Service: ${booking?.serviceName || 'Restaurant Reservation'}
      `;
    } else if (bookingType === 'spa') {
      bookingDetails = `
Date & Time: ${booking?.date || 'N/A'}
Service: ${booking?.serviceName || booking?.service || 'N/A'}
Duration: ${booking?.duration || 'N/A'}
${booking?.therapist ? `Therapist: ${booking.therapist}` : ''}
      `;
    }

    const totalWithTax = ((booking?.totalPrice || booking?.price || 0) * 1.1).toFixed(2);

    const templateParams = {
      to_email: toEmail,
      to_name: toName,
      booking_type: bookingType === 'room' ? 'Room Booking' : bookingType === 'restaurant' ? 'Restaurant Reservation' : 'Spa Appointment',
      confirmation_code: booking?.confirmationCode,
      payment_code: booking?.paymentCode || 'N/A',
      booking_details: bookingDetails,
      total_amount: `$${booking?.totalPrice || booking?.price || 0}`,
      tax_amount: `$${((booking?.totalPrice || booking?.price || 0) * 0.1).toFixed(2)}`,
      total_with_tax: `$${totalWithTax}`,
      payment_method: booking?.paymentMethod || 'QR Code',
      invoice_date: new Date(booking?.paidAt || booking?.createdAt).toLocaleDateString('en-US', {
        year: 'numeric',
        month: 'long',
        day: 'numeric',
      }),
    };

    const response = await emailjs.send(
      SERVICE_ID,
      BOOKING_TEMPLATE_ID,
      templateParams
    );

    return {
      success: true,
      message: 'Invoice email sent successfully!',
      response
    };
  } catch (error) {
    console.error('EmailJS Booking Error:', error);
    // Still return success in demo mode to not block the flow
    return {
      success: true,
      message: 'Invoice email sent (demo mode)',
      error: error.text || 'Failed to send email (demo mode)',
    };
  }
};



=================================================================
FILE PATH: src\utils\notifications.js
=================================================================
/**
 * Notification/Toast System
 * Centralized notification handling for the application
 */

// Store active notifications
let notifications = [];
let notificationId = 0;
let listeners = [];

/**
 * Subscribe to notification changes
 */
export const subscribeToNotifications = (callback) => {
  listeners.push(callback);
  return () => {
    listeners = listeners.filter(l => l !== callback);
  };
};

/**
 * Notify all listeners
 */
const notifyListeners = () => {
  listeners.forEach(listener => listener([...notifications]));
};

/**
 * Show notification
 */
export const showNotification = (message, type = 'info', duration = 3000) => {
  const id = notificationId++;
  const notification = {
    id,
    message,
    type, // 'success', 'error', 'warning', 'info'
    duration
  };

  notifications.push(notification);
  notifyListeners();

  // Auto-remove after duration
  if (duration > 0) {
    setTimeout(() => {
      removeNotification(id);
    }, duration);
  }

  return id;
};

/**
 * Remove notification
 */
export const removeNotification = (id) => {
  notifications = notifications.filter(n => n.id !== id);
  notifyListeners();
};

/**
 * Success notification
 */
export const notifySuccess = (message, duration = 3000) => {
  return showNotification(message, 'success', duration);
};

/**
 * Error notification
 */
export const notifyError = (message, duration = 5000) => {
  return showNotification(message, 'error', duration);
};

/**
 * Warning notification
 */
export const notifyWarning = (message, duration = 4000) => {
  return showNotification(message, 'warning', duration);
};

/**
 * Info notification
 */
export const notifyInfo = (message, duration = 3000) => {
  return showNotification(message, 'info', duration);
};

/**
 * Get all notifications
 */
export const getNotifications = () => {
  return [...notifications];
};

/**
 * Clear all notifications
 */
export const clearNotifications = () => {
  notifications = [];
  notifyListeners();
};


=================================================================
FILE PATH: src\utils\ScrollToTop.js
=================================================================
import { useLocation } from 'react-router-dom';
import { useEffect } from 'react';

const ScrollToTop = () => {

  const { pathname } = useLocation();

  useEffect(() => {
    window.scrollTo(0, 0);
  }, [pathname]);

};

export default ScrollToTop;


=================================================================
FILE PATH: src\utils\supabaseClient.js
=================================================================
import { createClient } from '@supabase/supabase-js';

// Initialize Supabase client
// For Vite, use import.meta.env instead of process.env
const SUPABASE_URL = import.meta.env.VITE_SUPABASE_URL || 'https://sxteddkozzqniebfstag.supabase.co';
const SUPABASE_KEY = import.meta.env.VITE_SUPABASE_ANON_KEY || 'eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6InN4dGVkZGtvenpxbmllYmZzdGFnIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NjE4NjQwMDgsImV4cCI6MjA3NzQ0MDAwOH0.FYblHTFrNTthvpcdGy6DFefjnApCe4qwcKZaHdkTiac';

// Debug log
console.log('ðŸ” Supabase URL:', SUPABASE_URL.substring(0, 30) + '...');

export const supabase = createClient(SUPABASE_URL, SUPABASE_KEY);



=================================================================
FILE PATH: src\utils\supabaseStorageUrls.js
=================================================================
/**
 * Supabase Storage URLs Configuration
 * Bucket: hotel-rooms
 * Base URL: https://sxteddkozzqniebfstag.supabase.co/storage/v1/object/public/hotel-rooms
 */

const SUPABASE_PROJECT_ID = 'sxteddkozzqniebfstag';
const STORAGE_BUCKET = 'hotel-rooms';
const STORAGE_BASE_URL = `https://${SUPABASE_PROJECT_ID}.supabase.co/storage/v1/object/public/${STORAGE_BUCKET}`;

/**
 * Generate room image URL
 * @param {string} imagePath - Path to image (e.g., 'img/rooms/1.png')
 * @returns {string} Full Supabase Storage URL
 */
export const getRoomImageUrl = (imagePath) => {
  if (!imagePath) return null;
  
  // If already a full URL, return as is
  if (imagePath.startsWith('http')) {
    return imagePath;
  }
  
  // Build URL from path
  return `${STORAGE_BASE_URL}/${imagePath}`;
};

/**
 * Get room thumbnail image URL
 * @param {number} roomNumber - Room number (1-8)
 * @returns {string} Full Supabase Storage URL for thumbnail
 */
export const getRoomThumbnailUrl = (roomNumber) => {
  return getRoomImageUrl(`img/rooms/${roomNumber}.png`);
};

/**
 * Get room large image URL
 * @param {number} roomNumber - Room number (1-8)
 * @returns {string} Full Supabase Storage URL for large image
 */
export const getRoomLargeImageUrl = (roomNumber) => {
  return getRoomImageUrl(`img/rooms/${roomNumber}-lg.png`);
};

/**
 * Get logo URL
 * @param {string} type - 'dark' or 'white'
 * @returns {string} Full Supabase Storage URL for logo
 */
export const getLogoUrl = (type = 'dark') => {
  return getRoomImageUrl(`logo-${type}.svg`);
};

/**
 * Build image URLs for room type
 * @param {number} roomNumber - Room number (1-8)
 * @returns {object} Object with image_url and image_lg_url
 */
export const buildRoomImageUrls = (roomNumber) => {
  return {
    image_url: getRoomThumbnailUrl(roomNumber),
    image_lg_url: getRoomLargeImageUrl(roomNumber),
  };
};

/**
 * Room type to image number mapping
 * Standard (STD) â†’ 1
 * Deluxe (DLX) â†’ 2
 * Suite (SUI) â†’ 3
 * Penthouse (PEN) â†’ 4
 * Combo (CMB) â†’ 5
 */
export const ROOM_TYPE_IMAGE_MAP = {
  'STD': 1,
  'DLX': 2,
  'SUI': 3,
  'PEN': 4,
  'CMB': 5,
};

/**
 * Get image URLs for room type code
 * @param {string} roomTypeCode - Room type code (STD, DLX, SUI, PEN, CMB)
 * @returns {object} Object with image_url and image_lg_url
 */
export const getImageUrlsByRoomType = (roomTypeCode) => {
  const imageNumber = ROOM_TYPE_IMAGE_MAP[roomTypeCode?.toUpperCase()];
  if (!imageNumber) {
    console.warn(`âš ï¸ Unknown room type code: ${roomTypeCode}`);
    return { image_url: null, image_lg_url: null };
  }
  return buildRoomImageUrls(imageNumber);
};

/**
 * Example usage:
 * 
 * // Get URL for room 1 thumbnail
 * const url = getRoomThumbnailUrl(1);
 * // Result: https://sxteddkozzqniebfstag.supabase.co/storage/v1/object/public/hotel-rooms/img/rooms/1.png
 * 
 * // Get URLs for Standard room type
 * const urls = getImageUrlsByRoomType('STD');
 * // Result: {
 * //   image_url: 'https://...hotel-rooms/img/rooms/1.png',
 * //   image_lg_url: 'https://...hotel-rooms/img/rooms/1-lg.png'
 * // }
 * 
 * // Get logo
 * const logo = getLogoUrl('dark');
 * // Result: https://...hotel-rooms/logo-dark.svg
 */

export default {
  STORAGE_BASE_URL,
  getRoomImageUrl,
  getRoomThumbnailUrl,
  getRoomLargeImageUrl,
  getLogoUrl,
  buildRoomImageUrls,
  getImageUrlsByRoomType,
  ROOM_TYPE_IMAGE_MAP,
};


=================================================================
FILE PATH: trich_xuat_v2.js
=================================================================
import fs from 'fs';
import path from 'path';
import { fileURLToPath } from 'url';

// --- Cáº¤U HÃŒNH ---
const __filename = fileURLToPath(import.meta.url);
const __dirname = path.dirname(__filename);

// TÃªn file káº¿t quáº£
const OUTPUT_FILE = 'CODE_NGUON_V2.txt';

// ÄÆ¯á»œNG DáºªN Má»¤C TIÃŠU: Äi vÃ o folder V2 náº±m trong Project_Demo
// Dá»±a trÃªn áº£nh báº¡n gá»­i: Project_Demo > Project-Booking-Hotel
const TARGET_PATH = path.join(__dirname, 'Project_Demo', 'Project-Booking-Hotel');

// CÃ¡c thÆ° má»¥c cáº§n bá» qua
const IGNORE_DIRS = ['node_modules', '.git', '.vscode', 'dist', 'build', 'public'];

// CÃ¡c file cáº§n bá» qua
const IGNORE_FILES = [
    'package-lock.json', 'yarn.lock', '.DS_Store', 
    'README.md', 'OUTPUT_FILE'
];

// CÃ¡c Ä‘uÃ´i file sáº½ láº¥y (Code quan trá»ng)
const ALLOWED_EXTS = [
    '.js', '.jsx', '.ts', '.tsx', // Logic React
    '.css', '.scss',              // Giao diá»‡n
    '.json',                      // Cáº¥u hÃ¬nh
    '.sql'                        // Database (náº¿u cÃ³)
];

function getAllFiles(dirPath, arrayOfFiles) {
    if (!fs.existsSync(dirPath)) {
        console.log(`âš ï¸ KhÃ´ng tÃ¬m tháº¥y Ä‘Æ°á»ng dáº«n: ${dirPath}`);
        return arrayOfFiles || [];
    }

    const files = fs.readdirSync(dirPath);
    arrayOfFiles = arrayOfFiles || [];

    files.forEach(function(file) {
        const fullPath = path.join(dirPath, file);
        
        // 1. Xá»­ lÃ½ thÆ° má»¥c
        if (fs.statSync(fullPath).isDirectory()) {
            if (!IGNORE_DIRS.includes(file)) {
                arrayOfFiles = getAllFiles(fullPath, arrayOfFiles);
            }
        } 
        // 2. Xá»­ lÃ½ file
        else {
            if (!IGNORE_FILES.includes(file)) {
                const ext = path.extname(file).toLowerCase();
                if (ALLOWED_EXTS.includes(ext)) {
                    arrayOfFiles.push(fullPath);
                }
            }
        }
    });

    return arrayOfFiles;
}

function mergeFiles() {
    try {
        console.log(`ðŸŽ¯ Äang nháº¯m vÃ o folder V2: ${TARGET_PATH}`);
        console.log('â³ Äang quÃ©t toÃ n bá»™ code trong Ä‘Ã³...');
        
        const allFiles = getAllFiles(TARGET_PATH);
        
        if (allFiles.length === 0) {
            console.log("âŒ KhÃ´ng tÃ¬m tháº¥y file nÃ o! HÃ£y kiá»ƒm tra láº¡i tÃªn folder trong Project_Demo.");
            return;
        }

        let content = `=== SOURCE CODE FROM V2 (Project-Booking-Hotel) ===\n`;
        content += `Path: Project_Demo/Project-Booking-Hotel\n\n`;
        
        allFiles.forEach(filePath => {
            // Láº¥y Ä‘Æ°á»ng dáº«n tÆ°Æ¡ng Ä‘á»‘i tÃ­nh tá»« folder V2 cho gá»n
            const relativePath = path.relative(TARGET_PATH, filePath);
            
            console.log(`ðŸ“„ Äá»c: ${relativePath}`);
            const fileContent = fs.readFileSync(filePath, 'utf8');
            
            content += `\n\n=================================================================\n`;
            content += `FILE PATH (V2): ${relativePath}\n`;
            content += `=================================================================\n`;
            content += fileContent;
        });

        fs.writeFileSync(OUTPUT_FILE, content, 'utf8');
        console.log(`\nâœ… THÃ€NH CÃ”NG!`);
        console.log(`ðŸ‘‰ ÄÃ£ trÃ­ch xuáº¥t ${allFiles.length} file tá»« V2.`);
        console.log(`ðŸ‘‰ File káº¿t quáº£: ${OUTPUT_FILE}`);
        
    } catch (err) {
        console.error('âŒ Lá»—i:', err);
    }
}

mergeFiles();

=================================================================
FILE PATH: vite.config.js
=================================================================
import { defineConfig } from 'vite'
import react from '@vitejs/plugin-react'
import svgr from 'vite-plugin-svgr'

// https://vitejs.dev/config/
export default defineConfig({
  plugins: [react(),  svgr()],
})

